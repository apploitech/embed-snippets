/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */

/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

window.MRT=window.MRT||{},function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("almond",["almond/almond"],function(e){return e}),n("almond/almond",function(){}),n("js/lodash",[],function(){return window._}),n("js/jquery",[],function(){return window.$}),function(e,r){if(typeof n=="function"&&n.amd)n("backbone-amd/backbone",["underscore","jquery","exports"],function(t,n,i){r(e,i,t,n)});else if(typeof exports!="undefined"){var i=t("underscore");r(e,exports,i)}else e.Backbone=r(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.slice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=t.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!f(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){if(!this._events||!f(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;var i=e?[e]:n.keys(this._events);for(var s=0,o=i.length;s<o;s++){e=i[s];var u=this._events[e];if(!u)continue;if(!t&&!r){delete this._events[e];continue}var a=[];for(var l=0,c=u.length;l<c;l++){var h=u[l];(t&&t!==h.callback&&t!==h.callback._callback||r&&r!==h.context)&&a.push(h)}a.length?this._events[e]=a:delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(a.test(n)){var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},l=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(e,t){u[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),u.bind=u.on,u.unbind=u.off,n.extend(t,u);var h=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,u,{changed:null,validationError:null,idAttribute:"id",generateId:function(e){return e[this.idAttribute]},initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes;for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;var h=this.id;this.id=this.generateId(c),h!==this.id&&this.trigger("change-id",this,h,r);if(!a){u.length&&(this._pending=r);for(var p=0,d=u.length;p<d;p++)this.trigger("change:"+u[p],this,c[u[p]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},H(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},H(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;H(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||P();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){if(!n[e])return;h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var d=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(d.prototype,u,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});for(var i=0,s=e.length;i<s;i++){var o=e[i]=this.get(e[i]);if(!o)continue;delete this._byId[o.id],delete this._byId[o.cid];var u=this.indexOf(o);this.models.splice(u,1),this.length--,t.silent||(t.index=u,o.trigger("remove",o,this,t)),this._removeReference(o,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,v),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:e.slice();var i,s,o,u,a,f=t.at,l=this.comparator&&f==null&&t.sort!==!1,c=n.isString(this.comparator)?this.comparator:null,p=[],d=[],m={},g=t.add,y=t.merge,b=t.remove,w=!l&&g&&b?[]:!1,E=this.model.prototype;for(var S=0,x=e.length;S<x;S++){o=e[S]||{},this._isModel(o)?i=s=o:E.generateId?i=E.generateId(o):i=o[E.idAttribute||h.prototype.idAttribute];if(u=this.get(i))b&&(m[u.cid]=!0),y&&(o=o===s?s.attributes:o,t.parse&&(o=u.parse(o,t)),u.set(o,t),l&&!a&&u.hasChanged(c)&&(a=!0)),e[S]=u;else if(g){s=e[S]=this._prepareModel(o,t);if(!s)continue;p.push(s),this._addReference(s,t)}s=u||s;if(!s)continue;w&&(s.isNew()||!m[s.id])&&w.push(s),m[s.id]=!0}if(b){for(var S=0,x=this.length;S<x;S++)m[(s=this.models[S]).cid]||d.push(s);d.length&&this.remove(d,t)}if(p.length||w&&w.length){l&&(a=!0),this.length+=p.length;if(f!=null)for(var S=0,x=p.length;S<x;S++)this.models.splice(f+S,0,p[S]);else{w&&(this.models.length=0);var T=w||p;for(var S=0,x=T.length;S<x;S++)this.models.push(T[S])}}a&&this.sort({silent:!0});if(!t.silent){for(var S=0,x=p.length;S<x;S++)(s=p[S]).trigger("add",s,this,t);(a||w&&w.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_isModel:function(e){return e instanceof h},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),e==="change-id"&&(n!=null&&delete this._byId[n],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];n.each(g,function(e){if(!n[e])return;d.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){if(!n[e])return;d.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,E)),this._ensureElement(),this.initialize.apply(this,arguments)},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(w);this.delegate(i[1],i[2],n.bind(r,this))}return this},delegate:function(e,t,n){this.$el.on(e+".delegateEvents"+this.cid,t,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){this.$el.off(e+".delegateEvents"+this.cid,t,n)},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}else this.setElement(n.result(this,"el"))},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var s=x[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||P()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&S&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,a&&a.apply(this,arguments)};var f=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,f,i),f};var S=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,k=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,u,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o,r)!==!1&&(s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(L,"\\$&").replace(N,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var A=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,_=/#.*$/;A.started=!1,n.extend(A.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.location.search},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=decodeURI(this.location.pathname+this.location.search),t=this.root.slice(0,-1);return e.indexOf(t)||(e=e.slice(t.length)),e.slice(1)},getFragment:function(e){return e==null&&(this._hasPushState||!this._wantsHashChange?e=this.getPath():e=this.getHash()),e.replace(O,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var t=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};this.root=("/"+this.root+"/").replace(M,"/");if(!this._hasHashChange&&this._wantsHashChange&&(!this._wantsPushState||!this._hasPushState)){var r=document.createElement("iframe");r.src="javascript:0",r.style.display="none",r.tabIndex=-1;var i=document.body;this.iframe=i.insertBefore(r,i.firstChild).contentWindow,this.navigate(this.fragment)}this._hasPushState?t("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?t("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._hasPushState?e("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!A.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(_,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe)&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new A;var D=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};h.extend=d.extend=T.extend=b.extend=A.extend=D;var P=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),n("backbone-amd",["backbone-amd/backbone"],function(e){return e}),n("massrel-js-backbone/lib/backbone",["require","backbone-amd"],function(e){var t=e("backbone-amd");return(window["massrel-js-backbone"]||window).Backbone||t}),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof n=="function"&&n.amd)n("q/q",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else{if(typeof self=="undefined")throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=e()}}(function(){function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function w(t,n){if(e&&n.stack&&typeof t=="object"&&t!==null&&t.stack&&t.stack.indexOf(b)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var s=r.join("\n"+b+"\n");t.stack=E(s)}}function E(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!T(i)&&!S(i)&&i&&n.push(i)}return n.join("\n")}function S(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function x(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function T(e){var t=x(e);if(!t)return!1;var i=t[0],s=t[1];return i===r&&s>=n&&s<=ot}function N(){if(!e)return;try{throw new Error}catch(t){var n=t.stack.split("\n"),i=n[0].indexOf("@")>0?n[1]:n[2],s=x(i);if(!s)return;return r=s[0],s[1]}}function C(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function k(e){return e instanceof M?e:H(e)?$(e):V(e)}function L(){function u(e){r=e,s.source=e,f(t,function(t,n){k.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=h(L.prototype),s=h(M.prototype);s.promiseDispatch=function(e,i,s){var o=a(arguments);t?(t.push(o),i==="when"&&s[1]&&n.push(s[1])):k.nextTick(function(){r.promiseDispatch.apply(r,o)})},s.valueOf=function(){if(t)return s;var e=D(r);return P(e)&&(r=e),e},s.inspect=function(){return r?r.inspect():{state:"pending"}};if(k.longStackSupport&&e)try{throw new Error}catch(o){s.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return i.promise=s,i.resolve=function(e){if(r)return;u(k(e))},i.fulfill=function(e){if(r)return;u(V(e))},i.reject=function(e){if(r)return;u(X(e))},i.notify=function(e){if(r)return;f(n,function(t,n){k.nextTick(function(){n(e)})},void 0)},i}function A(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=L();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function O(e){return A(function(t,n){for(var r=0,i=e.length;r<i;r++)k(e[r]).then(t,n)})}function M(e,t,n){t===void 0&&(t=function(e){return X(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(M.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=X(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value}}return r}function _(e,t,n,r){return k(e).then(t,n,r)}function D(e){if(P(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function P(e){return e instanceof M}function H(e){return m(e)&&typeof e.then=="function"}function B(e){return P(e)&&e.inspect().state==="pending"}function j(e){return!P(e)||e.inspect().state==="fulfilled"}function F(e){return P(e)&&e.inspect().state==="rejected"}function U(){I.length=0,q.length=0,R||(R=!0)}function z(e,t){if(!R)return;q.push(e),t&&typeof t.stack!="undefined"?I.push(t.stack):I.push("(no stack) "+t)}function W(e){if(!R)return;var t=l(q,e);t!==-1&&(q.splice(t,1),I.splice(t,1))}function X(e){var t=M({when:function(t){return t&&W(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return z(t,e),t}function V(e){return M({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function $(e){var t=L();return k.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function J(e){return M({isDef:function(){}},function(n,r){return et(e,n,r)},function(){return k(e).inspect()})}function K(e,t,n){return k(e).spread(t,n)}function Q(e){return function(){function t(e,t){var s;if(typeof StopIteration=="undefined"){try{s=n[e](t)}catch(o){return X(o)}return s.done?k(s.value):_(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?k(o.value):X(o)}return _(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function G(e){k.done(k.async(e)())}function Y(e){throw new y(e)}function Z(e){return function(){return K([this,tt(arguments)],function(t,n){return e.apply(t,n)})}}function et(e,t,n){return k(e).dispatch(t,n)}function tt(e){return _(e,function(e){var t=0,n=L();return f(e,function(r,i,s){var o;P(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,_(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function nt(e){return _(e,function(e){return e=c(e,k),_(tt(c(e,function(e){return _(e,i,i)})),function(){return e})})}function rt(e){return k(e).allSettled()}function it(e,t){return k(e).then(void 0,void 0,t)}function st(e,t){return k(e).nodeify(t)}var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n=N(),r,i=function(){},s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;r&&(e.domain=void 0,r.enter());try{t()}catch(s){if(i)throw r&&r.exit(),setTimeout(o,0),r&&r.enter(),s;setTimeout(function(){throw s},0)}r&&r.exit()}n=!1}var e={task:void 0,next:null},t=e,n=!1,r=void 0,i=!1;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null},n||(n=!0,r())};if(typeof process!="undefined"&&process.nextTick)i=!0,r=function(){process.nextTick(o)};else if(typeof setImmediate=="function")typeof window!="undefined"?r=setImmediate.bind(window,o):r=function(){setImmediate(o)};else if(typeof MessageChannel!="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a,u.port1.onmessage=o,o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0),a()}}else r=function(){setTimeout(o,0)};return s}(),o=Function.call,a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b="From previous event:";k.resolve=k,k.nextTick=s,k.longStackSupport=!1,typeof process=="object"&&process&&process.env&&process.env.Q_DEBUG&&(k.longStackSupport=!0),k.defer=L,L.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},k.Promise=A,k.promise=A,A.race=O,A.all=tt,A.reject=X,A.resolve=k,k.passByCopy=function(e){return e},M.prototype.passByCopy=function(){return this},k.join=function(e,t){return k(e).join(t)},M.prototype.join=function(e){return k([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},k.race=O,M.prototype.race=function(){return this.then(k.race)},k.makePromise=M,M.prototype.toString=function(){return"[object Promise]"},M.prototype.then=function(e,t,n){function o(t){try{return typeof e=="function"?e(t):t}catch(n){return X(n)}}function u(e){if(typeof t=="function"){w(e,r);try{return t(e)}catch(n){return X(n)}}return X(e)}function a(e){return typeof n=="function"?n(e):e}var r=this,i=L(),s=!1;return k.nextTick(function(){r.promiseDispatch(function(e){if(s)return;s=!0,i.resolve(o(e))},"when",[function(e){if(s)return;s=!0,i.resolve(u(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){n=!0;if(!k.onerror)throw r;k.onerror(r)}n||i.notify(t)}]),i.promise},k.tap=function(e,t){return k(e).tap(t)},M.prototype.tap=function(e){return e=k(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},k.when=_,M.prototype.thenResolve=function(e){return this.then(function(){return e})},k.thenResolve=function(e,t){return k(e).thenResolve(t)},M.prototype.thenReject=function(e){return this.then(function(){throw e})},k.thenReject=function(e,t){return k(e).thenReject(t)},k.nearer=D,k.isPromise=P,k.isPromiseAlike=H,k.isPending=B,M.prototype.isPending=function(){return this.inspect().state==="pending"},k.isFulfilled=j,M.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},k.isRejected=F,M.prototype.isRejected=function(){return this.inspect().state==="rejected"};var I=[],q=[],R=!0;k.resetUnhandledRejections=U,k.getUnhandledReasons=function(){return I.slice()},k.stopUnhandledRejectionTracking=function(){U(),R=!1},U(),k.reject=X,k.fulfill=V,k.master=J,k.spread=K,M.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},k.async=Q,k.spawn=G,k["return"]=Y,k.promised=Z,k.dispatch=et,M.prototype.dispatch=function(e,t){var n=this,r=L();return k.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},k.get=function(e,t){return k(e).dispatch("get",[t])},M.prototype.get=function(e){return this.dispatch("get",[e])},k.set=function(e,t,n){return k(e).dispatch("set",[t,n])},M.prototype.set=function(e,t){return this.dispatch("set",[e,t])},k.del=k["delete"]=function(e,t){return k(e).dispatch("delete",[t])},M.prototype.del=M.prototype["delete"]=function(e){return this.dispatch("delete",[e])},k.mapply=k.post=function(e,t,n){return k(e).dispatch("post",[t,n])},M.prototype.mapply=M.prototype.post=function(e,t){return this.dispatch("post",[e,t])},k.send=k.mcall=k.invoke=function(e,t){return k(e).dispatch("post",[t,a(arguments,2)])},M.prototype.send=M.prototype.mcall=M.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])},k.fapply=function(e,t){return k(e).dispatch("apply",[void 0,t])},M.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},k["try"]=k.fcall=function(e){return k(e).dispatch("apply",[void 0,a(arguments,1)])},M.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},k.fbind=function(e){var t=k(e),n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},M.prototype.fbind=function(){var e=this,t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}},k.keys=function(e){return k(e).dispatch("keys",[])},M.prototype.keys=function(){return this.dispatch("keys",[])},k.all=tt,M.prototype.all=function(){return tt(this)},k.allResolved=C(nt,"allResolved","allSettled"),M.prototype.allResolved=function(){return nt(this)},k.allSettled=rt,M.prototype.allSettled=function(){return this.then(function(e){return tt(c(e,function(e){function t(){return e.inspect()}return e=k(e),e.then(t,t)}))})},k.fail=k["catch"]=function(e,t){return k(e).then(void 0,t)},M.prototype.fail=M.prototype["catch"]=function(e){return this.then(void 0,e)},k.progress=it,M.prototype.progress=function(e){return this.then(void 0,void 0,e)},k.fin=k["finally"]=function(e,t){return k(e)["finally"](t)},M.prototype.fin=M.prototype["finally"]=function(e){return e=k(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},k.done=function(e,t,n,r){return k(e).done(t,n,r)},M.prototype.done=function(e,t,n){var r=function(e){k.nextTick(function(){w(e,i);if(!k.onerror)throw e;k.onerror(e)})},i=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},k.timeout=function(e,t,n){return k(e).timeout(t,n)},M.prototype.timeout=function(e,t){var n=L(),r=setTimeout(function(){if(!t||"string"==typeof t)t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT";n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},k.delay=function(e,t){return t===void 0&&(t=e,e=void 0),k(e).delay(t)},M.prototype.delay=function(e){return this.then(function(t){var n=L();return setTimeout(function(){n.resolve(t)},e),n.promise})},k.nfapply=function(e,t){return k(e).nfapply(t)},M.prototype.nfapply=function(e){var t=L(),n=a(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},k.nfcall=function(e){var t=a(arguments,1);return k(e).nfapply(t)},M.prototype.nfcall=function(){var e=a(arguments),t=L();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},k.nfbind=k.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=L();return n.push(r.makeNodeResolver()),k(e).fapply(n).fail(r.reject),r.promise}},M.prototype.nfbind=M.prototype.denodeify=function(){var e=a(arguments);return e.unshift(this),k.denodeify.apply(void 0,e)},k.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=L();return r.push(i.makeNodeResolver()),k(s).fapply(r).fail(i.reject),i.promise}},M.prototype.nbind=function(){var e=a(arguments,0);return e.unshift(this),k.nbind.apply(void 0,e)},k.nmapply=k.npost=function(e,t,n){return k(e).npost(t,n)},M.prototype.nmapply=M.prototype.npost=function(e,t){var n=a(t||[]),r=L();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},k.nsend=k.nmcall=k.ninvoke=function(e,t){var n=a(arguments,2),r=L();return n.push(r.makeNodeResolver()),k(e).dispatch("post",[t,n]).fail(r.reject),r.promise},M.prototype.nsend=M.prototype.nmcall=M.prototype.ninvoke=function(e){var t=a(arguments,1),n=L();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},k.nodeify=st,M.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){k.nextTick(function(){e(null,t)})},function(t){k.nextTick(function(){e(t)})})};var ot=N();return k}),n("q",["q/q"],function(e){return e}),function(e){function rt(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw new Error("Implement me")}}function it(e,t){return a.call(e,t)}function st(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ot(e){r.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function ut(e,t){var n=!0;return dt(function(){return n&&(ot(e),n=!1),t.apply(this,arguments)},t)}function at(e,t){tt[e]||(ot(t),tt[e]=!0)}function ft(e,t){return function(n){return gt(e.call(this,n),t)}}function lt(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function ct(){}function ht(e,t){t!==!1&&Dt(e),vt(this,e),this._d=new Date(+e._d)}function pt(e){var t=Ct(e),n=t.year||0,i=t.quarter||0,s=t.month||0,o=t.week||0,u=t.day||0,a=t.hour||0,f=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+o*7,this._months=+s+i*3+n*12,this._data={},this._locale=r.localeData(),this._bubble()}function dt(e,t){for(var n in t)it(t,n)&&(e[n]=t[n]);return it(t,"toString")&&(e.toString=t.toString),it(t,"valueOf")&&(e.valueOf=t.valueOf),e}function vt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(y.length>0)for(n in y)r=y[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function mt(e){return e<0?Math.ceil(e):Math.floor(e)}function gt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function yt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function bt(e,t){var n;return t=Ft(t,e),e.isBefore(t)?n=yt(e,t):(n=yt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function wt(e,t){return function(n,i){var s,o;return i!==null&&!isNaN(+i)&&(at(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=i,i=o),n=typeof n=="string"?+n:n,s=r.duration(n,i),Et(this,s,e),this}}function Et(e,t,n,i){var s=t._milliseconds,o=t._days,u=t._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*n),o&&mn(e,"Date",vn(e,"Date")+o*n),u&&dn(e,vn(e,"Month")+u*n),i&&r.updateOffset(e,o||u)}function St(e){return Object.prototype.toString.call(e)==="[object Array]"}function xt(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function Tt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&Lt(e[o])!==Lt(t[o]))&&s++;return s+i}function Nt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=J[e]||K[t]||t}return e}function Ct(e){var t={},n,r;for(r in e)it(e,r)&&(n=Nt(r),n&&(t[n]=e[r]));return t}function kt(t){var n,i;if(t.indexOf("week")===0)n=7,i="day";else{if(t.indexOf("month")!==0)return;n=12,i="month"}r[t]=function(s,o){var u,a,f=r._locale[t],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var t=r().utc().set(i,e);return f.call(r._locale,t,s||"")};if(o!=null)return a(o);for(u=0;u<n;u++)l.push(a(u));return l}}function Lt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function At(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Ot(e,t,n){return ln(r([e,11,31+t-n]),t,n).week}function Mt(e){return _t(e)?366:365}function _t(e){return e%4===0&&e%100!==0||e%400===0}function Dt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[c]<0||e._a[c]>11?c:e._a[h]<1||e._a[h]>At(e._a[l],e._a[c])?h:e._a[p]<0||e._a[p]>24||e._a[p]===24&&(e._a[d]!==0||e._a[v]!==0||e._a[m]!==0)?p:e._a[d]<0||e._a[d]>59?d:e._a[v]<0||e._a[v]>59?v:e._a[m]<0||e._a[m]>999?m:-1,e._pf._overflowDayOfYear&&(t<l||t>h)&&(t=h),e._pf.overflow=t)}function Pt(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===e)),t._isValid}function Ht(e){return e?e.toLowerCase().replace("_","-"):e}function Bt(e){var t=0,n,r,i,s;while(t<e.length){s=Ht(e[t]).split("-"),n=s.length,r=Ht(e[t+1]),r=r?r.split("-"):null;while(n>0){i=jt(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&Tt(s,r,!0)>=n-1)break;n--}t++}return null}function jt(e){var n=null;if(!g[e]&&b)try{n=r.locale(),t("./locale/"+e),r.locale(n)}catch(i){}return g[e]}function Ft(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(r.isMoment(e)||xt(e)?+e:+r(e))- +n,n._d.setTime(+n._d+i),r.updateOffset(n,!1),n):r(e).local()}function It(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function qt(e){var t=e.match(x),n,r;for(n=0,r=t.length;n<r;n++)et[t[n]]?t[n]=et[t[n]]:t[n]=It(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Rt(e,t){return e.isValid()?(t=Ut(t,e.localeData()),Q[t]||(Q[t]=qt(t)),Q[t](e)):e.localeData().invalidDate()}function Ut(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;T.lastIndex=0;while(n>=0&&T.test(e))e=e.replace(T,r),T.lastIndex=0,n-=1;return e}function zt(e,t){var n,r=t._strict;switch(e){case"Q":return H;case"DDDD":return j;case"YYYY":case"GGGG":case"gggg":return r?F:k;case"Y":case"G":case"g":return q;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?I:L;case"S":if(r)return H;case"SS":if(r)return B;case"SSS":if(r)return j;case"DDD":return C;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return O;case"a":case"A":return t._locale._meridiemParse;case"x":return D;case"X":return P;case"Z":case"ZZ":return M;case"T":return _;case"SSSS":return A;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?B:N;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return N;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Yt(Gt(e.replace("\\","")),"i")),n}}function Wt(e){e=e||"";var t=e.match(M)||[],n=t[t.length-1]||[],r=(n+"").match(X)||["-",0,0],i=+(r[1]*60)+Lt(r[2]);return r[0]==="+"?-i:i}function Xt(e,t,n){var i,s=n._a;switch(e){case"Q":t!=null&&(s[c]=(Lt(t)-1)*3);break;case"M":case"MM":t!=null&&(s[c]=Lt(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),i!=null?s[c]=i:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(s[h]=Lt(t));break;case"Do":t!=null&&(s[h]=Lt(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=Lt(t));break;case"YY":s[l]=r.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[l]=Lt(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":s[p]=Lt(t);break;case"m":case"mm":s[d]=Lt(t);break;case"s":case"ss":s[v]=Lt(t);break;case"S":case"SS":case"SSS":case"SSSS":s[m]=Lt(("0."+t)*1e3);break;case"x":n._d=new Date(Lt(t));break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Wt(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),i!=null?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=Lt(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=r.parseTwoDigitYear(t)}}function Vt(e){var t,n,i,s,o,u,a;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,u=4,n=rt(t.GG,e._a[l],ln(r(),1,4).year),i=rt(t.W,1),s=rt(t.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,n=rt(t.gg,e._a[l],ln(r(),o,u).year),i=rt(t.w,1),t.d!=null?(s=t.d,s<o&&++i):t.e!=null?s=t.e+o:s=o),a=cn(n,i,s,u,o),e._a[l]=a.year,e._dayOfYear=a.dayOfYear}function $t(e){var t,n,r=[],i,s;if(e._d)return;i=Kt(e),e._w&&e._a[h]==null&&e._a[c]==null&&Vt(e),e._dayOfYear&&(s=rt(e._a[l],i[l]),e._dayOfYear>Mt(s)&&(e._pf._overflowDayOfYear=!0),n=on(s,0,e._dayOfYear),e._a[c]=n.getUTCMonth(),e._a[h]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[p]===24&&e._a[d]===0&&e._a[v]===0&&e._a[m]===0&&(e._nextDay=!0,e._a[p]=0),e._d=(e._useUTC?on:sn).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[p]=24)}function Jt(e){var t;if(e._d)return;t=Ct(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],$t(e)}function Kt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Qt(t){if(t._f===r.ISO_8601){en(t);return}t._a=[],t._pf.empty=!0;var n=""+t._i,i,s,o,u,a,f=n.length,l=0;o=Ut(t._f,t._locale).match(x)||[];for(i=0;i<o.length;i++)u=o[i],s=(n.match(zt(u,t))||[])[0],s&&(a=n.substr(0,n.indexOf(s)),a.length>0&&t._pf.unusedInput.push(a),n=n.slice(n.indexOf(s)+s.length),l+=s.length),et[u]?(s?t._pf.empty=!1:t._pf.unusedTokens.push(u),Xt(u,s,t)):t._strict&&!s&&t._pf.unusedTokens.push(u);t._pf.charsLeftOver=f-l,n.length>0&&t._pf.unusedInput.push(n),t._pf.bigHour===!0&&t._a[p]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[p]<12&&(t._a[p]+=12),t._isPm===!1&&t._a[p]===12&&(t._a[p]=0),$t(t),Dt(t)}function Gt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Yt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Zt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=vt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=st(),t._f=e._f[i],Qt(t);if(!Pt(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}dt(e,n||t)}function en(e){var t,n,r=e._i,i=R.exec(r);if(i){e._pf.iso=!0;for(t=0,n=z.length;t<n;t++)if(z[t][1].exec(r)){e._f=z[t][0]+(i[6]||" ");break}for(t=0,n=W.length;t<n;t++)if(W[t][1].exec(r)){e._f+=W[t][0];break}r.match(M)&&(e._f+="Z"),Qt(e)}else e._isValid=!1}function tn(e){en(e),e._isValid===!1&&(delete e._isValid,r.createFromInputFallback(e))}function nn(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function rn(t){var n=t._i,i;n===e?t._d=new Date:xt(n)?t._d=new Date(+n):(i=w.exec(n))!==null?t._d=new Date(+i[1]):typeof n=="string"?tn(t):St(n)?(t._a=nn(n.slice(0),function(e){return parseInt(e,10)}),$t(t)):typeof n=="object"?Jt(t):typeof n=="number"?t._d=new Date(n):r.createFromInputFallback(t)}function sn(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function on(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function un(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function an(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function fn(e,t,n){var i=r.duration(e).abs(),s=u(i.as("s")),o=u(i.as("m")),a=u(i.as("h")),f=u(i.as("d")),l=u(i.as("M")),c=u(i.as("y")),h=s<G.s&&["s",s]||o===1&&["m"]||o<G.m&&["mm",o]||a===1&&["h"]||a<G.h&&["hh",a]||f===1&&["d"]||f<G.d&&["dd",f]||l===1&&["M"]||l<G.M&&["MM",l]||c===1&&["y"]||["yy",c];return h[2]=t,h[3]=+e>0,h[4]=n,an.apply({},h)}function ln(e,t,n){var i=n-t,s=n-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=r(e).add(s,"d"),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function cn(e,t,n,r,i){var s=on(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:Mt(e-1)+u}}function hn(t){var n=t._i,i=t._f,s;return t._locale=t._locale||r.localeData(t._l),n===null||i===e&&n===""?r.invalid({nullInput:!0}):(typeof n=="string"&&(t._i=n=t._locale.preparse(n)),r.isMoment(n)?new ht(n,!0):(i?St(i)?Zt(t):Qt(t):rn(t),s=new ht(t),s._nextDay&&(s.add(1,"d"),s._nextDay=e),s))}function pn(e,t){var n,i;t.length===1&&St(t[0])&&(t=t[0]);if(!t.length)return r();n=t[0];for(i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function dn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),At(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function vn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function mn(e,t,n){return t==="Month"?dn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function gn(e,t){return function(n){return n!=null?(mn(this,e,n),r.updateOffset(this,t),this):vn(this,e)}}function yn(e){return e*400/146097}function bn(e){return e*146097/400}function wn(e){r.duration.fn[e]=function(){return this._data[e]}}function En(e){if(typeof ender!="undefined")return;o=s.moment,e?s.moment=ut("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",r):s.moment=r}var r,i="2.8.4",s=typeof global!="undefined"?global:this,o,u=Math.round,a=Object.prototype.hasOwnProperty,f,l=0,c=1,h=2,p=3,d=4,v=5,m=6,g={},y=[],b=typeof module!="undefined"&&module&&module.exports,w=/^\/?Date\((\-?\d+)/i,E=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,S=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,x=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,T=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,N=/\d\d?/,C=/\d{1,3}/,k=/\d{1,4}/,L=/[+\-]?\d{1,6}/,A=/\d+/,O=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,M=/Z|[\+\-]\d\d:?\d\d/gi,_=/T/i,D=/[\+\-]?\d+/,P=/[\+\-]?\d+(\.\d{1,3})?/,H=/\d/,B=/\d\d/,j=/\d{3}/,F=/\d{4}/,I=/[+-]?\d{6}/,q=/[+-]?\d+/,R=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,U="YYYY-MM-DDTHH:mm:ssZ",z=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],W=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],X=/([\+\-]|\d\d)/gi,V="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),$={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},J={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},K={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Q={},G={s:45,m:45,h:22,d:26,M:11},Y="DDD w W M D d".split(" "),Z="M D H h m s w W".split(" "),et={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return gt(this.year()%100,2)},YYYY:function(){return gt(this.year(),4)},YYYYY:function(){return gt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+gt(Math.abs(e),6)},gg:function(){return gt(this.weekYear()%100,2)},gggg:function(){return gt(this.weekYear(),4)},ggggg:function(){return gt(this.weekYear(),5)},GG:function(){return gt(this.isoWeekYear()%100,2)},GGGG:function(){return gt(this.isoWeekYear(),4)},GGGGG:function(){return gt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Lt(this.milliseconds()/100)},SS:function(){return gt(Lt(this.milliseconds()/10),2)},SSS:function(){return gt(this.milliseconds(),3)},SSSS:function(){return gt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+gt(Lt(e/60),2)+":"+gt(Lt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+gt(Lt(e/60),2)+gt(Lt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},tt={},nt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(Y.length)f=Y.pop(),et[f+"o"]=lt(et[f],f);while(Z.length)f=Z.pop(),et[f+f]=ft(et[f],2);et.DDDD=ft(et.DDD,3),dt(ct.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,s,o;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(i=0;i<12;i++){s=r.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[i].test(e))return i;if(n&&t==="MMM"&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=r([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ln(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),r=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=st(),hn(s)},r.suppressDeprecationWarnings=!1,r.createFromInputFallback=ut("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.min=function(){var e=[].slice.call(arguments,0);return pn("isBefore",e)},r.max=function(){var e=[].slice.call(arguments,0);return pn("isAfter",e)},r.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=st(),hn(s).utc()},r.unix=function(e){return r(e*1e3)},r.duration=function(e,t){var n=e,i=null,s,o,u,a;return r.isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(i=E.exec(e))?(s=i[1]==="-"?-1:1,n={y:0,d:Lt(i[h])*s,h:Lt(i[p])*s,m:Lt(i[d])*s,s:Lt(i[v])*s,ms:Lt(i[m])*s}):(i=S.exec(e))?(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},n={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}):typeof n=="object"&&("from"in n||"to"in n)&&(a=bt(r(n.from),r(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),o=new pt(n),r.isDuration(e)&&it(e,"_locale")&&(o._locale=e._locale),o},r.version=i,r.defaultFormat=U,r.ISO_8601=function(){},r.momentProperties=y,r.updateOffset=function(){},r.relativeTimeThreshold=function(t,n){return G[t]===e?!1:n===e?G[t]:(G[t]=n,!0)},r.lang=ut("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return r.locale(e,t)}),r.locale=function(e,t){var n;return e&&(typeof t!="undefined"?n=r.defineLocale(e,t):n=r.localeData(e),n&&(r.duration._locale=r._locale=n)),r._locale._abbr},r.defineLocale=function(e,t){return t!==null?(t.abbr=e,g[e]||(g[e]=new ct),g[e].set(t),r.locale(e),g[e]):(delete g[e],null)},r.langData=ut("moment.langData is deprecated. Use moment.localeData instead.",function(e){return r.localeData(e)}),r.localeData=function(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return r._locale;if(!St(e)){t=jt(e);if(t)return t;e=[e]}return Bt(e)},r.isMoment=function(e){return e instanceof ht||e!=null&&it(e,"_isAMomentObject")},r.isDuration=function(e){return e instanceof pt};for(f=nt.length-1;f>=0;--f)kt(nt[f]);r.normalizeUnits=function(e){return Nt(e)},r.invalid=function(e){var t=r.utc(NaN);return e!=null?dt(t._pf,e):t._pf.userInvalidated=!0,t},r.parseZone=function(){return r.apply(null,arguments).parseZone()},r.parseTwoDigitYear=function(e){return Lt(e)+(Lt(e)>68?1900:2e3)},dt(r.fn=ht.prototype,{clone:function(){return r(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=r(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Rt(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Rt(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return Pt(this)},isDSTShifted:function(){return this._a?this.isValid()&&Tt(this._a,(this._isUTC?r.utc(this._a):r(this._a)).toArray())>0:!1},parsingFlags:function(){return dt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=Rt(this,e||r.defaultFormat);return this.localeData().postformat(t)},add:wt(1,"add"),subtract:wt(-1,"subtract"),diff:function(e,t,n){var i=Ft(e,this),s=(this.zone()-i.zone())*6e4,o,u,a;return t=Nt(t),t==="year"||t==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),a=this-r(this).startOf("month")-(i-r(i).startOf("month")),a-=(this.zone()-r(this).startOf("month").zone()-(i.zone()-r(i).startOf("month").zone()))*6e4,u+=a/o,t==="year"&&(u/=12)):(o=this-i,u=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-s)/864e5:t==="week"?(o-s)/6048e5:o),n?u:mt(u)},from:function(e,t){return r.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(r(),e)},calendar:function(e){var t=e||r(),n=Ft(t,this).startOf("day"),i=this.diff(n,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,r(t)))},isLeapYear:function(){return _t(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=un(e,this.localeData()),this.add(e-t,"d")):t},month:gn("Month",!0),startOf:function(e){e=Nt(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return t=Nt(t),t===e||t==="millisecond"?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=Nt(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=r.isMoment(e)?e:r(e),+this>+e):(n=r.isMoment(e)?+e:+r(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=Nt(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=r.isMoment(e)?e:r(e),+this<+e):(n=r.isMoment(e)?+e:+r(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=Nt(t||"millisecond"),t==="millisecond"?(e=r.isMoment(e)?e:r(e),+this===+e):(n=+r(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:ut("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=r.apply(null,arguments),e<this?this:e}),max:ut("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=r.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n=this._offset||0,i;return e==null?this._isUTC?n:this._dateTzOffset():(typeof e=="string"&&(e=Wt(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,i!=null&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?Et(this,r.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=r(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return At(this.year(),this.month())},dayOfYear:function(e){var t=u((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=ln(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ln(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=ln(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Ot(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Ot(this.year(),e.dow,e.doy)},get:function(e){return e=Nt(e),this[e]()},set:function(e,t){return e=Nt(e),typeof this[e]=="function"&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=r.localeData(t),n!=null&&(this._locale=n),this)},lang:ut("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}}),r.fn.millisecond=r.fn.milliseconds=gn("Milliseconds",!1),r.fn.second=r.fn.seconds=gn("Seconds",!1),r.fn.minute=r.fn.minutes=gn("Minutes",!1),r.fn.hour=r.fn.hours=gn("Hours",!0),r.fn.date=gn("Date",!0),r.fn.dates=ut("dates accessor is deprecated. Use date instead.",gn("Date",!0)),r.fn.year=gn("FullYear",!0),r.fn.years=ut("years accessor is deprecated. Use year instead.",gn("FullYear",!0)),r.fn.days=r.fn.day,r.fn.months=r.fn.month,r.fn.weeks=r.fn.week,r.fn.isoWeeks=r.fn.isoWeek,r.fn.quarters=r.fn.quarter,r.fn.toJSON=r.fn.toISOString,dt(r.duration.fn=pt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=mt(e/1e3),r.seconds=i%60,s=mt(i/60),r.minutes=s%60,o=mt(s/60),r.hours=o%24,t+=mt(o/24),u=mt(yn(t)),t-=mt(bn(u)),n+=mt(t/30),t%=30,u+=mt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return mt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+Lt(this._months/12)*31536e6},humanize:function(e){var t=fn(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=r.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=r.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=Nt(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=Nt(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+yn(t)*12,e==="month"?n:n/12;t=this._days+Math.round(bn(this._months/12));switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:r.fn.lang,locale:r.fn.locale,toIsoString:ut("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),r.duration.fn.toString=r.duration.fn.toISOString;for(f in $)it($,f)&&wn(f.toLowerCase());r.duration.fn.asMilliseconds=function(){return this.as("ms")},r.duration.fn.asSeconds=function(){return this.as("s")},r.duration.fn.asMinutes=function(){return this.as("m")},r.duration.fn.asHours=function(){return this.as("h")},r.duration.fn.asDays=function(){return this.as("d")},r.duration.fn.asWeeks=function(){return this.as("weeks")},r.duration.fn.asMonths=function(){return this.as("M")},r.duration.fn.asYears=function(){return this.as("y")},r.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Lt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),b?module.exports=r:typeof n=="function"&&n.amd?(n("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(s.moment=o),r}),En(!0)):En()}.call(this),function(){function r(t,n){return n=n||"",typeof t!="string"&&(t.global&&n.indexOf("g")<0&&(n+="g"),t.ignoreCase&&n.indexOf("i")<0&&(n+="i"),t.multiline&&n.indexOf("m")<0&&(n+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(t,n){var r=e.txt.regexen[n]||"";return typeof r!="string"&&(r=r.source),r}),n)}function i(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function s(e,t,n){var r=String.fromCharCode(t);return n!==t&&(r+="-"+String.fromCharCode(n)),e.push(r),e}function b(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function x(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:typeof e=="string"&&e.match(t)&&RegExp["$&"]===e}if(typeof e=="undefined"||e===null)var e={};e.txt={},e.txt.regexen={};var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};e.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return t[e]})},e.txt.regexSupplant=r,e.txt.stringSupplant=i,e.txt.addCharsToCharClass=s;var o=String.fromCharCode,u=[o(32),o(133),o(160),o(5760),o(6158),o(8232),o(8233),o(8239),o(8287),o(12288)];s(u,9,13),s(u,8192,8202);var a=[o(65534),o(65279),o(65535)];s(a,8234,8238),e.txt.regexen.spaces_group=r(u.join("")),e.txt.regexen.spaces=r("["+u.join("")+"]"),e.txt.regexen.invalid_chars_group=r(a.join("")),e.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,e.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/mg,e.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/mg;var f=[];s(f,192,214),s(f,216,246),s(f,248,255),s(f,256,591),s(f,595,596),s(f,598,599),s(f,601,601),s(f,603,603),s(f,611,611),s(f,616,616),s(f,623,623),s(f,626,626),s(f,649,649),s(f,651,651),s(f,699,699),s(f,768,879),s(f,7680,7935),e.txt.regexen.latinAccentChars=r(f.join(""));var l=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D/.source,c=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,h=/_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\u00b7/.source;e.txt.regexen.hashSigns=/[#]/,e.txt.regexen.hashtagAlpha=new RegExp("["+l+"]"),e.txt.regexen.hashtagAlphaNumeric=new RegExp("["+l+c+h+"]"),e.txt.regexen.endHashtagMatch=r(/^(?:#{hashSigns}|:\/\/)/),e.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+l+c+h+"])"),e.txt.regexen.validHashtag=r(/(#{hashtagBoundary})(#{hashSigns})(?!\ufe0f|\u20e3)(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),e.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@]|(?:^|[^a-zA-Z0-9_+~.-])(?:rt|RT|rT|Rt):?)/,e.txt.regexen.atSigns=/[@]/,e.txt.regexen.validMentionOrList=r("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),e.txt.regexen.validReply=r(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),e.txt.regexen.endMentionMatch=r(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),e.txt.regexen.validUrlPrecedingChars=r(/(?:[^A-Za-z0-9@$##{invalid_chars_group}]|^)/),e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,e.txt.regexen.invalidDomainChars=i("#{punct}#{spaces_group}#{invalid_chars_group}",e.txt.regexen),e.txt.regexen.validDomainChars=r(/[^#{invalidDomainChars}]/),e.txt.regexen.validSubdomain=r(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validDomainName=r(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),e.txt.regexen.validGTLD=r(RegExp("(?:(?:abb|abbott|abogado|academy|accenture|accountant|accountants|aco|active|actor|ads|adult|aeg|aero|afl|agency|aig|airforce|airtel|allfinanz|alsace|amsterdam|android|apartments|app|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|auto|autos|axa|azure|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bbc|bbva|bcn|beer|bentley|berlin|best|bet|bharti|bible|bid|bike|bing|bingo|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnl|bnpparibas|boats|bond|boo|boots|boutique|bradesco|bridgestone|broker|brother|brussels|budapest|build|builders|business|buzz|bzh|cab|cafe|cal|camera|camp|cancerresearch|canon|capetown|capital|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|ceb|center|ceo|cern|cfa|cfd|chanel|channel|chat|cheap|chloe|christmas|chrome|church|cisco|citic|city|claims|cleaning|click|clinic|clothing|cloud|club|coach|codes|coffee|college|cologne|com|commbank|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|corsica|country|coupons|courses|credit|creditcard|cricket|crown|crs|cruises|cuisinella|cymru|cyou|dabur|dad|dance|date|dating|datsun|day|dclk|deals|degree|delivery|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dnp|docs|dog|doha|domains|doosan|download|drive|durban|dvag|earth|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|erni|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|faith|family|fan|fans|farm|fashion|feedback|film|finance|financial|firmdale|fish|fishing|fit|fitness|flights|florist|flowers|flsmidth|fly|foo|football|forex|forsale|forum|foundation|frl|frogans|fund|furniture|futbol|fyi|gal|gallery|game|garden|gbiz|gdn|gent|genting|ggee|gift|gifts|gives|giving|glass|gle|global|globo|gmail|gmo|gmx|gold|goldpoint|golf|goo|goog|google|gop|gov|graphics|gratis|green|gripe|group|guge|guide|guitars|guru|hamburg|hangout|haus|healthcare|help|here|hermes|hiphop|hitachi|hiv|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hsbc|ibm|icbc|ice|icu|ifm|iinet|immo|immobilien|industries|infiniti|info|ing|ink|institute|insure|int|international|investments|ipiranga|irish|ist|istanbul|itau|iwc|java|jcb|jetzt|jewelry|jlc|jll|jobs|joburg|jprs|juegos|kaufen|kddi|kim|kitchen|kiwi|koeln|komatsu|krd|kred|kyoto|lacaixa|lancaster|land|lasalle|lat|latrobe|law|lawyer|lds|lease|leclerc|legal|lexus|lgbt|liaison|lidl|life|lighting|limited|limo|link|live|lixil|loan|loans|lol|london|lotte|lotto|love|ltda|lupin|luxe|luxury|madrid|maif|maison|man|management|mango|market|marketing|markets|marriott|mba|media|meet|melbourne|meme|memorial|men|menu|miami|microsoft|mil|mini|mma|mobi|moda|moe|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mtn|mtpc|museum|nadex|nagoya|name|navy|nec|net|netbank|network|neustar|new|news|nexus|ngo|nhk|nico|ninja|nissan|nokia|nra|nrw|ntt|nyc|office|okinawa|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|osaka|otsuka|ovh|page|panerai|paris|partners|parts|party|pet|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pink|pizza|place|play|plumbing|plus|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|racing|realtor|realty|recipes|red|redstone|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rich|ricoh|rio|rip|rocks|rodeo|rsvp|ruhr|run|ryukyu|saarland|sakura|sale|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|saxo|sca|scb|schmidt|scholarships|school|schule|schwarz|science|scor|scot|seat|seek|sener|services|sew|sex|sexy|shiksha|shoes|show|shriram|singles|site|ski|sky|skype|sncf|soccer|social|software|sohu|solar|solutions|sony|soy|space|spiegel|spreadbetting|srl|starhub|statoil|studio|study|style|sucks|supplies|supply|support|surf|surgery|suzuki|swatch|swiss|sydney|systems|taipei|tatamotors|tatar|tattoo|tax|taxi|team|tech|technology|tel|telefonica|temasek|tennis|thd|theater|tickets|tienda|tips|tires|tirol|today|tokyo|tools|top|toray|toshiba|tours|town|toyota|toys|trade|trading|training|travel|trust|tui|ubs|university|uno|uol|vacations|vegas|ventures|vermgensberater|vermgensberatung|versicherung|vet|viajes|video|villas|vin|vision|vista|vistaprint|vlaanderen|vodka|vote|voting|voto|voyage|wales|walter|wang|watch|webcam|website|wed|wedding|weir|whoswho|wien|wiki|williamhill|win|windows|wine|wme|work|works|world|wtc|wtf|xbox|xerox|xin|xperia|xxx|xyz|yachts|yandex|yodobashi|yoga|yokohama|youtube|zip|zone|zuerich|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||onion)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validCCTLD=r(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw||||||||||||||||||||||||||||||||||||||||||||||)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validPunycode=r(/(?:xn--[0-9a-z]+)/),e.txt.regexen.validSpecialCCTLD=r(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),e.txt.regexen.validDomain=r(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),e.txt.regexen.validAsciiDomain=r(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),e.txt.regexen.invalidShortDomain=r(/^#{validDomainName}#{validCCTLD}$/i),e.txt.regexen.validSpecialShortDomain=r(/^#{validDomainName}#{validSpecialCCTLD}$/i),e.txt.regexen.validPortNumber=r(/[0-9]+/),e.txt.regexen.cyrillicLettersAndMarks=r(/\u0400-\u04FF/),e.txt.regexen.validGeneralUrlPathChars=r(/[a-z#{cyrillicLettersAndMarks}0-9!\*';:=\+,\.\$\/%#\[\]\-_~@\|&#{latinAccentChars}]/i),e.txt.regexen.validUrlBalancedParens=r("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),e.txt.regexen.validUrlPathEndingChars=r(/[\+\-a-z#{cyrillicLettersAndMarks}0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),e.txt.regexen.validUrlPath=r("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),e.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,e.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,e.txt.regexen.extractUrl=r("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),e.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,e.txt.regexen.urlHasProtocol=/^https?:\/\//i,e.txt.regexen.urlHasHttps=/^https:\/\//i,e.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,e.txt.regexen.validCashtag=r("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),e.txt.regexen.validateUrlUnreserved=/[a-z\u0400-\u04FF0-9\-._~]/i,e.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,e.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,e.txt.regexen.validateUrlPchar=r("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),e.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,e.txt.regexen.validateUrlUserinfo=r("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),e.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,e.txt.regexen.validateUrlIpv4=r(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),e.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,e.txt.regexen.validateUrlIp=r("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),e.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,e.txt.regexen.validateUrlDomain=r(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),e.txt.regexen.validateUrlHost=r("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),e.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,e.txt.regexen.validateUrlUnicodeDomain=r(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),e.txt.regexen.validateUrlUnicodeHost=r("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),e.txt.regexen.validateUrlPort=/[0-9]{1,5}/,e.txt.regexen.validateUrlUnicodeAuthority=r("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlAuthority=r("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),e.txt.regexen.validateUrlPath=r(/(\/#{validateUrlPchar}*)*/i),e.txt.regexen.validateUrlQuery=r(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlFragment=r(/(#{validateUrlPchar}|\/|\?)*/i),e.txt.regexen.validateUrlUnencoded=r("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var p="tweet-url list-slug",d="tweet-url username",v="tweet-url hashtag",m="tweet-url cashtag",g={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},y={disabled:!0,readonly:!0,multiple:!0,checked:!0};e.txt.tagAttrs=function(t){var n="";for(var r in t){var i=t[r];y[r]&&(i=i?r:null);if(i==null)continue;n+=" "+e.txt.htmlEscape(r)+'="'+e.txt.htmlEscape(i.toString())+'"'}return n},e.txt.linkToText=function(t,n,r,s){s.suppressNoFollow||(r.rel="nofollow"),s.linkAttributeBlock&&s.linkAttributeBlock(t,r),s.linkTextBlock&&(n=s.linkTextBlock(t,n));var o={text:n,attr:e.txt.tagAttrs(r)};return i("<a#{attr}>#{text}</a>",o)},e.txt.linkToTextWithSymbol=function(t,n,r,i,s){var o=s.symbolTag?"<"+s.symbolTag+">"+n+"</"+s.symbolTag+">":n;r=e.txt.htmlEscape(r);var u=s.textWithSymbolTag?"<"+s.textWithSymbolTag+">"+r+"</"+s.textWithSymbolTag+">":r;return s.usernameIncludeSymbol||!n.match(e.txt.regexen.atSigns)?e.txt.linkToText(t,o+u,i,s):o+e.txt.linkToText(t,u,i,s)},e.txt.linkToHashtag=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.hashtag),o=b(r.htmlAttrs||{});return o.href=r.hashtagUrlBase+s,o.title="#"+s,o["class"]=r.hashtagClass,s.charAt(0).match(e.txt.regexen.rtl_chars)&&(o["class"]+=" rtl"),r.targetBlank&&(o.target="_blank"),e.txt.linkToTextWithSymbol(t,i,s,o,r)},e.txt.linkToCashtag=function(t,n,r){var i=e.txt.htmlEscape(t.cashtag),s=b(r.htmlAttrs||{});return s.href=r.cashtagUrlBase+i,s.title="$"+i,s["class"]=r.cashtagClass,r.targetBlank&&(s.target="_blank"),e.txt.linkToTextWithSymbol(t,"$",i,s,r)},e.txt.linkToMentionAndList=function(t,n,r){var i=n.substring(t.indices[0],t.indices[0]+1),s=e.txt.htmlEscape(t.screenName),o=e.txt.htmlEscape(t.listSlug),u=t.listSlug&&!r.suppressLists,a=b(r.htmlAttrs||{});return a["class"]=u?r.listClass:r.usernameClass,a.href=u?r.listUrlBase+s+o:r.usernameUrlBase+s,!u&&!r.suppressDataScreenName&&(a["data-screen-name"]=s),r.targetBlank&&(a.target="_blank"),e.txt.linkToTextWithSymbol(t,i,u?s+o:s,a,r)},e.txt.linkToUrl=function(t,n,r){var i=t.url,s=i,o=e.txt.htmlEscape(s),u=r.urlEntities&&r.urlEntities[i]||t;u.display_url&&(o=e.txt.linkTextWithEntity(u,r));var a=b(r.htmlAttrs||{});return i.match(e.txt.regexen.urlHasProtocol)||(i="http://"+i),a.href=i,r.targetBlank&&(a.target="_blank"),r.urlClass&&(a["class"]=r.urlClass),r.urlTarget&&(a.target=r.urlTarget),!r.title&&u.display_url&&(a.title=u.expanded_url),e.txt.linkToText(t,o,a,r)},e.txt.linkTextWithEntity=function(t,n){var r=t.display_url,s=t.expanded_url,o=r.replace(//g,"");if(s.indexOf(o)!=-1){var u=s.indexOf(o),a={displayUrlSansEllipses:o,beforeDisplayUrl:s.substr(0,u),afterDisplayUrl:s.substr(u+o.length),precedingEllipsis:r.match(/^/)?"":"",followingEllipsis:r.match(/$/)?"":""};for(var f in a)a.hasOwnProperty(f)&&(a[f]=e.txt.htmlEscape(a[f]));return a.invisible=n.invisibleTagAttrs,i("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",a)}return r},e.txt.autoLinkEntities=function(t,n,r){r=b(r||{}),r.hashtagClass=r.hashtagClass||v,r.hashtagUrlBase=r.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",r.cashtagClass=r.cashtagClass||m,r.cashtagUrlBase=r.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",r.listClass=r.listClass||p,r.usernameClass=r.usernameClass||d,r.usernameUrlBase=r.usernameUrlBase||"https://twitter.com/",r.listUrlBase=r.listUrlBase||"https://twitter.com/",r.htmlAttrs=e.txt.extractHtmlAttrsFromOptions(r),r.invisibleTagAttrs=r.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var i,s,o;if(r.urlEntities){i={};for(s=0,o=r.urlEntities.length;s<o;s++)i[r.urlEntities[s].url]=r.urlEntities[s];r.urlEntities=i}var u="",a=0;n.sort(function(e,t){return e.indices[0]-t.indices[0]});var f=r.htmlEscapeNonEntities?e.txt.htmlEscape:function(e){return e};for(var s=0;s<n.length;s++){var l=n[s];u+=f(t.substring(a,l.indices[0])),l.url?u+=e.txt.linkToUrl(l,t,r):l.hashtag?u+=e.txt.linkToHashtag(l,t,r):l.screenName?u+=e.txt.linkToMentionAndList(l,t,r):l.cashtag&&(u+=e.txt.linkToCashtag(l,t,r)),a=l.indices[1]}return u+=f(t.substring(a,t.length)),u},e.txt.autoLinkWithJSON=function(t,n,r){if(n.user_mentions)for(var i=0;i<n.user_mentions.length;i++)n.user_mentions[i].screenName=n.user_mentions[i].screen_name;if(n.hashtags)for(var i=0;i<n.hashtags.length;i++)n.hashtags[i].hashtag=n.hashtags[i].text;if(n.symbols)for(var i=0;i<n.symbols.length;i++)n.symbols[i].cashtag=n.symbols[i].text;var s=[];for(var o in n)s=s.concat(n[o]);return e.txt.modifyIndicesFromUnicodeToUTF16(t,s),e.txt.autoLinkEntities(t,s,r)},e.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var r=e[n];if(g[n])continue;y[n]&&(r=r?n:null);if(r==null)continue;t[n]=r}return t},e.txt.autoLink=function(t,n){var r=e.txt.extractEntitiesWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUsernamesOrLists=function(t,n){var r=e.txt.extractMentionsOrListsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkHashtags=function(t,n){var r=e.txt.extractHashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkCashtags=function(t,n){var r=e.txt.extractCashtagsWithIndices(t);return e.txt.autoLinkEntities(t,r,n)},e.txt.autoLinkUrlsCustom=function(t,n){var r=e.txt.extractUrlsWithIndices(t,{extractUrlsWithoutProtocol:!1});return e.txt.autoLinkEntities(t,r,n)},e.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});var t=e[0];for(var n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},e.txt.extractEntitiesWithIndices=function(t,n){var r=e.txt.extractUrlsWithIndices(t,n).concat(e.txt.extractMentionsOrListsWithIndices(t)).concat(e.txt.extractHashtagsWithIndices(t,{checkUrlOverlap:!1})).concat(e.txt.extractCashtagsWithIndices(t));return r.length==0?[]:(e.txt.removeOverlappingEntities(r),r)},e.txt.extractMentions=function(t){var n=[],r=e.txt.extractMentionsWithIndices(t);for(var i=0;i<r.length;i++){var s=r[i].screenName;n.push(s)}return n},e.txt.extractMentionsWithIndices=function(t){var n=[],r,i=e.txt.extractMentionsOrListsWithIndices(t);for(var s=0;s<i.length;s++)r=i[s],r.listSlug==""&&n.push({screenName:r.screenName,indices:r.indices});return n},e.txt.extractMentionsOrListsWithIndices=function(t){if(!t||!t.match(e.txt.regexen.atSigns))return[];var n=[],r;return t.replace(e.txt.regexen.validMentionOrList,function(t,r,i,s,o,u,a){var f=a.slice(u+t.length);if(!f.match(e.txt.regexen.endMentionMatch)){o=o||"";var l=u+r.length,c=l+s.length+o.length+1;n.push({screenName:s,listSlug:o,indices:[l,c]})}}),n},e.txt.extractReplies=function(t){if(!t)return null;var n=t.match(e.txt.regexen.validReply);return!n||RegExp.rightContext.match(e.txt.regexen.endMentionMatch)?null:n[1]},e.txt.extractUrls=function(t,n){var r=[],i=e.txt.extractUrlsWithIndices(t,n);for(var s=0;s<i.length;s++)r.push(i[s].url);return r},e.txt.extractUrlsWithIndices=function(t,n){n||(n={extractUrlsWithoutProtocol:!0});if(!t||(n.extractUrlsWithoutProtocol?!t.match(/\./):!t.match(/:/)))return[];var r=[];while(e.txt.regexen.extractUrl.exec(t)){var i=RegExp.$2,s=RegExp.$3,o=RegExp.$4,u=RegExp.$5,a=RegExp.$7,f=e.txt.regexen.extractUrl.lastIndex,l=f-s.length;if(!o){if(!n.extractUrlsWithoutProtocol||i.match(e.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,h=0;u.replace(e.txt.regexen.validAsciiDomain,function(t){var n=u.indexOf(t,h);h=n+t.length,c={url:t,indices:[l+n,l+h]},(a||t.match(e.txt.regexen.validSpecialShortDomain)||!t.match(e.txt.regexen.invalidShortDomain))&&r.push(c)});if(c==null)continue;a&&(c.url=s.replace(u,c.url),c.indices[1]=f)}else s.match(e.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,f=l+s.length),r.push({url:s,indices:[l,f]})}return r},e.txt.extractHashtags=function(t){var n=[],r=e.txt.extractHashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].hashtag);return n},e.txt.extractHashtagsWithIndices=function(t,n){n||(n={checkUrlOverlap:!0});if(!t||!t.match(e.txt.regexen.hashSigns))return[];var r=[];t.replace(e.txt.regexen.validHashtag,function(t,n,i,s,o,u){var a=u.slice(o+t.length);if(a.match(e.txt.regexen.endHashtagMatch))return;var f=o+n.length,l=f+s.length+1;r.push({hashtag:s,indices:[f,l]})});if(n.checkUrlOverlap){var i=e.txt.extractUrlsWithIndices(t);if(i.length>0){var s=r.concat(i);e.txt.removeOverlappingEntities(s),r=[];for(var o=0;o<s.length;o++)s[o].hashtag&&r.push(s[o])}}return r},e.txt.extractCashtags=function(t){var n=[],r=e.txt.extractCashtagsWithIndices(t);for(var i=0;i<r.length;i++)n.push(r[i].cashtag);return n},e.txt.extractCashtagsWithIndices=function(t){if(!t||t.indexOf("$")==-1)return[];var n=[];return t.replace(e.txt.regexen.validCashtag,function(e,t,r,i,s,o){var u=s+t.length,a=u+i.length+1;n.push({cashtag:i,indices:[u,a]})}),n},e.txt.modifyIndicesFromUnicodeToUTF16=function(t,n){e.txt.convertUnicodeIndices(t,n,!1)},e.txt.modifyIndicesFromUTF16ToUnicode=function(t,n){e.txt.convertUnicodeIndices(t,n,!0)},e.txt.getUnicodeTextLength=function(t){return t.replace(e.txt.regexen.non_bmp_code_pairs," ").length},e.txt.convertUnicodeIndices=function(e,t,n){if(t.length==0)return;var r=0,i=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});var s=0,o=t[0];while(r<e.length){if(o.indices[0]==(n?r:i)){var u=o.indices[1]-o.indices[0];o.indices[0]=n?i:r,o.indices[1]=o.indices[0]+u,s++;if(s==t.length)break;o=t[s]}var a=e.charCodeAt(r);55296<=a&&a<=56319&&r<e.length-1&&(a=e.charCodeAt(r+1),56320<=a&&a<=57343&&r++),i++,r++}},e.txt.splitTags=function(e){var t=e.split("<"),n,r=[],i;for(var s=0;s<t.length;s+=1){i=t[s];if(!i)r.push("");else{n=i.split(">");for(var o=0;o<n.length;o+=1)r.push(n[o])}}return r},e.txt.hitHighlight=function(t,n,r){var i="em";n=n||[],r=r||{};if(n.length===0)return t;var s=r.tag||i,o=["<"+s+">","</"+s+">"],u=e.txt.splitTags(t),a,f,l="",c=0,h=u[0],p=0,d=0,v=!1,m=h,g=[],y,b,w,E,S;for(a=0;a<n.length;a+=1)for(f=0;f<n[a].length;f+=1)g.push(n[a][f]);for(y=0;y<g.length;y+=1){b=g[y],w=o[y%2],E=!1;while(h!=null&&b>=p+h.length)l+=m.slice(d),v&&b===p+m.length&&(l+=w,E=!0),u[c+1]&&(l+="<"+u[c+1]+">"),p+=m.length,d=0,c+=2,h=u[c],m=h,v=!1;!E&&h!=null?(S=b-p,l+=m.slice(d,S)+w,d=S,y%2===0?v=!0:v=!1):E||(E=!0,l+=w)}if(h!=null){d<m.length&&(l+=m.slice(d));for(y=c+1;y<u.length;y+=1)l+=y%2===0?u[y]:"<"+u[y]+">"}return l};var w=140,E=[o(65534),o(65279),o(65535),o(8234),o(8235),o(8236),o(8237),o(8238)];e.txt.getTweetLength=function(t,n){n||(n={short_url_length:23,short_url_length_https:23});var r=e.txt.getUnicodeTextLength(t),i=e.txt.extractUrlsWithIndices(t);e.txt.modifyIndicesFromUTF16ToUnicode(t,i);for(var s=0;s<i.length;s++)r+=i[s].indices[0]-i[s].indices[1],i[s].url.toLowerCase().match(e.txt.regexen.urlHasHttps)?r+=n.short_url_length_https:r+=n.short_url_length;return r},e.txt.isInvalidTweet=function(t){return t?e.txt.getTweetLength(t)>w?"too_long":e.txt.hasInvalidCharacters(t)?"invalid_characters":!1:"empty"},e.txt.hasInvalidCharacters=function(e){for(var t=0;t<E.length;t++)if(e.indexOf(E[t])>=0)return!0;return!1},e.txt.isValidTweetText=function(t){return!e.txt.isInvalidTweet(t)},e.txt.isValidUsername=function(t){if(!t)return!1;var n=e.txt.extractMentions(t);return n.length===1&&n[0]===t.slice(1)};var S=r(/^#{validMentionOrList}$/);e.txt.isValidList=function(e){var t=e.match(S);return!!t&&t[1]==""&&!!t[4]},e.txt.isValidHashtag=function(t){if(!t)return!1;var n=e.txt.extractHashtags(t);return n.length===1&&n[0]===t.slice(1)},e.txt.isValidUrl=function(t,n,r){n==null&&(n=!0),r==null&&(r=!0);if(!t)return!1;var i=t.match(e.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==t)return!1;var s=i[1],o=i[2],u=i[3],a=i[4],f=i[5];return(!r||x(s,e.txt.regexen.validateUrlScheme)&&s.match(/^https?$/i))&&x(u,e.txt.regexen.validateUrlPath)&&x(a,e.txt.regexen.validateUrlQuery,!0)&&x(f,e.txt.regexen.validateUrlFragment,!0)?n&&x(o,e.txt.regexen.validateUrlUnicodeAuthority)||!n&&x(o,e.txt.regexen.validateUrlAuthority):!1},typeof module!="undefined"&&module.exports&&(module.exports=e.txt),typeof n=="function"&&n.amd&&n("twitter-text/twitter-text",[],e.txt);if(typeof window!="undefined")if(window.twttr)for(var T in e)window.twttr[T]=e[T];else window.twttr=e}(),n("twitter-text",["twitter-text/twitter-text"],function(e){return e}),n("massrel-js-backbone/lib/util",["require","q","lodash","moment"],function(e){var t=e("q"),n=e("lodash"),r=e("moment"),i=function(e){return e.toISOString()},s=function(e){return e.format("LLL")},o=function(e){return e.fromNow()},u=function(e){var t=function(t,n){return r().subtract(t,n).isBefore(e)},n=function(t,n){return r().diff(e,t)+n},i;return t(1,"second")?i="now":t(1,"minute")?i=n("seconds","s"):t(1,"hour")?i=n("minutes","m"):t(1,"day")?i=n("hours","h"):t(1,"week")?i=n("days","d"):t(1,"month")?i=n("weeks","w"):i=e.format("M/D/YY"),i},a=function(e,t){if(!n.isPlainObject(e))return e;var r={};return n.each(e,function(e,i){var s=a(e,t);n.isPlainObject(s)&&n.size(s)!==0?(t=n.isUndefined(t)?"_":""+t,n.each(s,function(e,s){var o=i+t+s;n.has(r,o)||(r[o]=e)})):r[i]=s}),r},f=function(e){return n.isFunction(Object.freeze)&&Object.freeze(e),e},l={facebook:!0,twitter:!0},c=function(e,t,r){if(!n.has(l,e))throw new TypeError("Unsupported avatar network: "+e);return r=n.isNumber(r)?Math.max(0,r):73,"//api.massrelevance.com/avatar/"+e+"?"+"screen_name="+encodeURIComponent(t)+"&"+"width="+r+"&"+"height="+r},h=function(e){return e?e.textContent||e.innerText||"":""},p=function(e,r){if(!n.isString(e))throw new TypeError("`url` must be a string");if(!/^(?:https?:)?\/\//.test(e))throw new TypeError("`url` must be a HTTP(S)/protocol-relative URL");var i=t.defer(),s=r||new Image;return s.onload=function(){i.resolve(s)},s.onerror=function(){i.reject(new Error("Image failed to load"))},s.src=e,i.promise},d=function(e,t,r){var i=(e||"").replace(/\r\n|\r/g,"\n");if(n.isNumber(t)){if(!n.isFinite(t))throw new TypeError("`condenseTo` must be finite");if(Math.round(t)!==t)throw new TypeError("`condenseTo` must be an integer");if(t<0)throw new TypeError("`condenseTo` must be >= 0");var s="";for(var o=0;o<t;o++)s+="\n";i=i.replace(new RegExp("\\n{"+(t+1)+",}","g"),s)}return n.isString(r)&&(i=i.replace(/\n/g,r)),i},v=function(e){return((e||"")+"").replace(/^https?:/i,"")},m=function(e,t){var n=0,r=0;for(var i=e.length;r<i;r++){var s=e[r];if(n+s.length>t)break;n+=s.length}return r},g=/(\s+)/g,y=function(e,t){e=e||"";if(!n.isNumber(t)||t<0)throw new TypeError("`maxLength` must be a positive number");if(e.length<=t)return[e,""];var r=(e||"").split(g),i=m(r,t);return[Array.prototype.slice.call(r,0,i).join(""),Array.prototype.slice.call(r,i).join("")]},b=function(e,t){e=e||"";if(!n.isNumber(t)||t<0)throw new TypeError("`maxLength` must be a positive number");var r=document.createElement("div");r.innerHTML=e;if(h(r).length<=t)return[e,""];var i=[],s=[];for(var o=0,u=r.childNodes.length;o<u;o++){var a=r.childNodes[o];if(a.nodeType===Node.TEXT_NODE){var f=a.nodeValue.split(g);Array.prototype.push.apply(i,f),Array.prototype.push.apply(s,f)}else i.push(h(a)),s.push(a.outerHTML)}var l=m(i,t);return[Array.prototype.slice.call(s,0,l).join(""),Array.prototype.slice.call(s,l).join("")]},w=function(e,t,n){e=""+e;if(e.length>=t)return e;n=n||"0";while(e.length<t)e=n+e;return e.slice(-t)},E=function(e){return e=e||{},n(e).pick(function(e){return n.isString(e)||n.isNumber(e)}).mapValues(encodeURIComponent).map(function(e,t){return t+"="+e}).join("&")},S=function(e,t){return t||!String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()},x=function(e,t){return e=e.replace(/^(&nbsp;|<\s*br\s*\/?>|\s)+|(&nbsp;|<\s*br\s*\/?>|\s)+$/gi,""),S(e,t)},T=Array.from||function(){var e=Object.prototype.toString,t=function(t){return typeof t=="function"||e.call(t)==="[object Function]"},n=function(e){var t=Number(e);return isNaN(t)?0:t===0||!isFinite(t)?t:(t>0?1:-1)*Math.floor(Math.abs(t))},r=Math.pow(2,53)-1,i=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(n){var r=this,s=Object(n);if(n==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o=arguments.length>1?arguments[1]:void undefined,u;if(typeof o!="undefined"){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(u=arguments[2])}var a=i(s.length),f=t(r)?Object(new r(a)):new Array(a),l=0,c;while(l<a)c=s[l],o?f[l]=typeof u=="undefined"?o(c,l):o.call(u,c,l):f[l]=c,l+=1;return f.length=a,f}}();return{arrayFrom:T,calculateISODate:i,calculateFullDate:s,calculateShortDate:u,calculateDisplayDate:o,flattenObject:a,freeze:f,getAvatarProxyURL:c,getNodeText:h,loadImage:p,normalizeLineBreaks:d,protocolRelativize:v,splitTextToLength:y,splitHTMLToLength:b,padLeft:w,paramaterize:E,trim:S,trimHTML:x}}),n("massrel-js-backbone/lib/MediaModel",["require","./backbone","lodash","./util"],function(e){var t=e("./backbone"),n=e("lodash"),r=e("./util"),i={vine:!1,twitter:!1,facebook:!1,google:!1,getglue:!1,youtube:!1,instagram:!1,vimeo:!1,tumblr:!1},s={YouTube:"youtube",Vine:"vine",Twitter:"twitter",Facebook:"facebook",GetGlue:"getglue","Google+":"google",Instagram:"instagram",Vimeo:"vimeo",Tumblr:"tumblr"},o={youtube:"icon-youtube-logo",facebook:"icon-facebook-logo",twitter:"icon-twitter-logo",vine:"icon-vine-logo",instagram:"icon-instagram-logo",tumblr:"icon-tumblr-logo",google:"icon-google-plus-logo"},u=t.Model.extend({defaults:function(){return{type:"",html:"",url:"",link:"",width:0,height:0,provider_name:"",provider_url:"",provider:{},title:"",description:"",thumbnail_url:"",thumbnail_width:0,thumbnail_height:0,author_name:"",author_url:"",formatted_author_name:"",provider_icon_class:"",load_video_html:!1,loop_video:!1,load_gif:!1,autoplay:!1,sizes:r.freeze([])}},constructor:function(e,r){var i=n.extend({},r,{parse:!0});t.Model.call(this,e,i)},initialize:function(){this.set("provider_name",this._getProviderName(this.get("provider_name"))),this.set("provider",this._getProviderObject(this.get("provider_name"))),this.on({"change:provider change:provider_name change:author_name":this._updateFormattedAuthorName,"change:provider":this._updateProviderIconClass}),this._updateFormattedAuthorName(),this._updateProviderIconClass()},size:function(){return u.calculateSize(this.attributes)},resize:function(){var e={width:0,height:0};if(arguments.length===1)e.width=e.height=arguments[0];else{if(arguments.length!==2)throw new Error("Either both `width`, `height` arguments, or a single `size` argument, are required!");e.width=arguments[0],e.height=arguments[1]}var t=u.calculateSize(e),r=null,i=n.findLast(this.get("sizes"),function(e){return r=e,u.calculateSize(e)>=t})||r;return this.set(i),n.clone(i)},validate:function(e){var t={error:this._validateError,link:this._validateLink,photo:this._validatePhoto,rich:this._validateRich,video:this._validateVideo};if(!n.isString(e.type))return new Error("`type` must be a string (got: "+e.type+")");if(!n.has(t,e.type))return new Error("Invalid `type` value: "+e.type);var r;if(e.provider_url){r=this._validateURL("provider_url",e);if(r)return r}if(e.author_url){r=this._validateURL("author_url",e);if(r)return r}if(e.thumbnail_url){r=this._validateURL("thumbnail_url",e);if(r)return r}return this._validateIntegers(["width","height","thumbnail_width","thumbnail_height"],e)||t[e.type].call(this,e)},_validateIntegers:function(e,t){for(var r=e.length-1;r>=0;r--){var i=e[r],s=t[i];if(!n.isNumber(s)||s<0||!n.isFinite(s)||Math.round(s)!==s)return new Error("`"+i+"` must be an integer (got: "+s+")")}},_validateURL:function(e,t){if(!n.isString(t[e]))return new Error("`"+e+"` must be a string");if(!t[e])return new Error("`"+e+"` must not be empty");if(!/^(?:https?:)?\/\//i.test(t[e]))return new Error("`"+e+"` must be a HTTP(S) or protocol-relative URL")},_validateError:n.noop,_validateLink:n.noop,_validatePhoto:function(e){return this._validateURL("url",e)},_validateRich:function(e){if(!n.isString(e.html))return new Error("`html` must be a string");if(!e.html)return new Error("`html` must not be empty")},_validateVideo:function(e){return n.isString(e.html)?e.html?this._validateURL("url",e):new Error("`html` must not be empty"):new Error("`html` must be a string")},parse:function(e){var t=r.flattenObject(n.omit(e,["version","cache_age"])),i=n.map(t.sizes||[],function(e){return u.pickSizeAttributes(e)});return i.push(u.pickSizeAttributes(t)),i=n(i).sortBy(function(e){return-u.calculateSize(e)}).map(r.freeze).value(),t.sizes=r.freeze(i),t.provider_name==="Vine"&&t.html&&(t.html=t.html.replace("2Fembed%2Fsimple","2Fembed%2Fsimple%3Fautoplay%3Dno")),t},_getProviderName:function(e){return s[e]||e},_getProviderObject:function(e){e=s[e]||e;var t=n.extend({},i);return n.has(t,e)&&(t[e]=!0),t},_getProviderIconClass:function(){return o[this.get("provider_name")]||""},_updateFormattedAuthorName:function(){var e="",t=this.get("provider");if(t.twitter||t.instagram||t.tumblr)e="@";this.set("formatted_author_name",this.get("author_name")?e+this.get("author_name"):"")},_updateProviderIconClass:function(){this.set("provider_icon_class",this._getProviderIconClass())}},{calculateSize:function(e){return e.width&&e.height?e.width*e.height:e.thumbnail_url?e.thumbnail_width*e.thumbnail_height:0},pickSizeAttributes:n.partialRight(n.pick,["html","url","width","height","thumbnail_url","thumbnail_width","thumbnail_height"])});return u}),n("twemoji/twemoji.amd",[],function(){var e=function(){function a(e){return document.createTextNode(e)}function f(e){return e.replace(s,v)}function l(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function c(e,t){var n=e.childNodes,r=n.length,i,s;while(r--)i=n[r],s=i.nodeType,s===3?t.push(i):s===1&&!o.test(i.nodeName)&&c(i,t);return t}function h(e){return S(e.indexOf(i)<0?e.replace(r,""):e)}function p(e,t){var r=c(e,[]),i=r.length,s,o,u,f,l,p,d,v,m,g,y,b,w;while(i--){u=!1,f=document.createDocumentFragment(),l=r[i],p=l.nodeValue,v=0;while(d=n.exec(p)){m=d.index,m!==v&&f.appendChild(a(p.slice(v,m))),y=d[0],b=h(y),v=m+y.length,w=t.callback(b,t);if(w){g=new Image,g.onerror=t.onerror,g.setAttribute("draggable","false"),s=t.attributes(y,b);for(o in s)s.hasOwnProperty(o)&&o.indexOf("on")!==0&&!g.hasAttribute(o)&&g.setAttribute(o,s[o]);g.className=t.className,g.alt=y,g.src=w,u=!0,f.appendChild(g)}g||f.appendChild(a(y)),g=null}u&&(v<p.length&&f.appendChild(a(p.slice(v))),l.parentNode.replaceChild(f,l))}return e}function d(e,t){return w(e,function(e){var n=e,r=h(e),i=t.callback(r,t),s,o;if(i){n="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',i,'"'),s=t.attributes(e,r);for(o in s)s.hasOwnProperty(o)&&o.indexOf("on")!==0&&n.indexOf(" "+o+"=")===-1&&(n=n.concat(" ",o,'="',f(s[o]),'"'));n=n.concat(">")}return n})}function v(e){return t[e]}function m(){return null}function g(e){return typeof e=="number"?e+"x"+e:e}function y(e){var t=typeof e=="string"?parseInt(e,16):e;return t<65536?u(t):(t-=65536,u(55296+(t>>10),56320+(t&1023)))}function b(t,n){if(!n||typeof n=="function")n={callback:n};return(typeof t=="string"?d:p)(t,{callback:n.callback||l,attributes:typeof n.attributes=="function"?n.attributes:m,base:typeof n.base=="string"?n.base:e.base,ext:n.ext||e.ext,size:n.folder||g(n.size||e.size),className:n.className||e.className,onerror:n.onerror||e.onerror})}function w(e,t){return String(e).replace(n,t)}function E(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}function S(e,t){var n=[],r=0,i=0,s=0;while(s<e.length)r=e.charCodeAt(s++),i?(n.push((65536+(i-55296<<10)+(r-56320)).toString(16)),i=0):55296<=r&&r<=56319?i=r:n.push(r.toString(16));return n.join(t||"-")}var e={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:y,toCodePoint:S},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt),this)},parse:b,replace:w,test:E},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc6f\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3c-\udd3e])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1e\udd26\udd30\udd33-\udd39\udd3c-\udd3e]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef6]|\ud83e[\udd10-\udd17\udd20-\udd25\udd27\udd3a\udd40-\udd45\udd47-\udd4b\udd50-\udd5e\udd80-\udd91\uddc0]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,r=/\uFE0F/g,i=String.fromCharCode(8205),s=/[&<>'"]/g,o=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,u=String.fromCharCode;return e}();return e}),n("twemoji",["twemoji/twemoji.amd"],function(e){return e}),n("placeholder-image-generator/templates/base",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="<%= width %>" height="<%= height %>"><rect width="100%" height="100%" fill="<%= color %>"></rect><%= template %></svg>')}),n("placeholder-image-generator/templates/youtube",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg version="1.1" x="<%= (19 / 32) * width %>" y="<%= (5 / 8) * height %>" width="<%= width / 2 %>" height="<%= height / 2%>"      viewBox="0 0 792 1224" enable-background="new 0 0 792 1224"><path fill="#FFFFFF" d="M599.3,594.6c-4.6,0-9.9,2.4-14.6,7.1l0,93.8c4.7,4.7,10,7.1,14.6,7.1c8.1,0,11.7-5.9,11.7-21.4v-66.5    C611,599.2,607.4,594.6,599.3,594.6z"/><path fill="#FFFFFF" d="M297,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V569.8    h29.4v116c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V569.8H297L297,726L297,726z"/><path fill="#FFFFFF" d="M164,679.6c1.5,15.5-3.3,23.1-12.4,23.1s-13.9-7.7-12.4-23.1v-61.9c-1.5-15.5,3.2-22.7,12.4-22.7    c9.1,0,13.9,7.3,12.4,22.7L164,679.6L164,679.6z M193.3,620.8c0-16.7-3.4-29.2-9.3-37.1c-7.8-10.7-20.1-15.1-32.5-15.1    c-14,0-24.7,4.4-32.5,15.1c-6,7.9-9.3,20.6-9.3,37.3l0,55.6c0,16.6,2.9,28.1,8.9,35.9c7.8,10.7,20.5,16.3,32.9,16.3    s25.3-5.6,33.1-16.3c5.9-7.8,8.7-19.3,8.7-35.9V620.8L193.3,620.8z"/><path fill="#FFFFFF" d="M77.3,640.9V726H46.4v-85.1c0,0-32.1-104.3-38.7-123.8h32.5l21.7,81.5l21.6-81.5H116L77.3,640.9L77.3,640.9z    "/><g>    <path fill="#FFFFFF" d="M778.1,534c0,0-4.5-31.7-18.4-45.6c-17.6-18.3-37.3-18.4-46.3-19.5c-64.6-4.7-161.6-4.7-161.6-4.7h-0.2        c0,0-97,0-161.6,4.7c-9,1.1-28.7,1.2-46.3,19.5c-13.9,14-18.4,45.6-18.4,45.6s-4.6,37.2-4.6,74.4v34.9c0,37.2,4.6,74.4,4.6,74.4        s4.5,31.7,18.4,45.6c17.6,18.3,40.7,17.7,50.9,19.7c37,3.5,157,4.6,157,4.6s97.1-0.1,161.7-4.8c9-1.1,28.7-1.2,46.3-19.5        c13.8-14,18.4-45.6,18.4-45.6s4.6-37.2,4.6-74.4v-34.9C782.7,571.3,778.1,534,778.1,534z M422.3,726h-30.9V548.1h-32.5v-29.4        l97.5,0v29.4h-34V726z M533.7,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V571.3        h29.4v114.5c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V571.3h29.4V726z M640.4,679.6        c0,14.3-1.2,24.4-3.1,30.9c-3.7,11.5-11.9,17.5-23,17.5c-10,0-20.2-6-29.5-17.6l0,15.6h-27.8V518.7h27.8l0,67.6        c9-11.1,19.3-17.5,29.6-17.5c11.2,0,18.6,6.4,22.4,18c1.9,6.2,3.7,16.2,3.7,30.9V679.6z M701.9,702.5c6.9,0,10.9-3.7,12.5-11.2        c0.3-1.5,0.2-8.2,0.2-19.4H744v4.4c0,9-0.7,15.4-1,18.2c-0.9,6.2-3.1,11.8-6.5,16.8c-7.7,11.2-19.2,16.8-33.9,16.8        c-14.7,0-25.8-5.3-33.9-15.8c-5.9-7.7-9.8-19.2-9.8-35.7v-54.1c0-16.5,3.5-29.3,9.4-37.1c8.1-10.6,19.3-16.2,33.5-16.2        c14,0,25.2,5.6,33.1,16.2c5.9,7.8,9.1,19.9,9.1,36.4l0,31.6h-55.7v27.8C688.2,695.4,692.3,702.5,701.9,702.5z"/>    <path fill="#FFFFFF" d="M714.6,613.2c0-14.3-3.7-18.6-13-18.6c-9.4,0-13.3,3.9-13.3,18.4v17.1l26.3,0V613.2z"/></g></svg>')}),n("placeholder-image-generator/js/main",["require","lodash","../templates/base","../templates/youtube"],function(e){var t=e("lodash"),n="data:image/svg+xml;charset=utf-8,",r={width:480,height:360,color:"#333333",template:""},i=e("../templates/base"),s={youtube:e("../templates/youtube")};return function(e){e=t.extend({},r,e);if(e.template!==""){var o=s[e.template];e.template=o?o(e):""}return n+encodeURIComponent(i(e))}}),n("placeholder-image-generator/index",["./js/main"],function(e){return e}),n("placeholder-image-generator",["placeholder-image-generator/index"],function(e){return e}),n("massrel-js-backbone/lib/MediaCollection",["require","./backbone","lodash","./MediaModel","./util"],function(e){var t=e("./backbone"),n=e("lodash"),r=e("./MediaModel"),i=e("./util"),s=t.Collection.extend({model:r,initialize:function(){this.on("reset",this.sort)},comparator:function(e,t){var r=e.get("type"),i=t.get("type");if(r!==i){var o=9999999,u=o;n.has(s.MEDIA_TYPE_SORT_VALUES,r)&&(u=s.MEDIA_TYPE_SORT_VALUES[r]);var a=o;return n.has(s.MEDIA_TYPE_SORT_VALUES,i)&&(a=s.MEDIA_TYPE_SORT_VALUES[i]),u-a}return t.size()-e.size()}},{MEDIA_TYPE_SORT_VALUES:i.freeze({video:0,photo:1,link:2,rich:3})});return s}),n("massrel-js/globals",{host:"api.massrelevance.com",timeout:1e4,protocol:document.location.protocol==="https:"?"https":"http",min_poll_interval:5e3,max_backoff_interval:6e4,backoff_rate:1.8,jsonp_param:"jsonp"}),n("massrel-js/helpers",["./globals"],function(e){var t={},n=encodeURIComponent;t.step_through=function(e,n,r){e=t.is_array(e)?e:[e];var i=e.length-1;if(i>=0)for(;i>=0;i--){var s=e[i];for(var o=0,u=n.length;o<u;o++)n[o].call(r,s)}},t.extend=function(e,t){var n;for(n in t)typeof e[n]=="undefined"&&(e[n]=t[n]);return e},t.api_url=function(t,n){n=n||e.host;var r=e.port,i=e.protocol+"://"+n+(r?":"+r:"");return i+t},t.req={},t.req.supportsXhr2=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,t.req.supportsCors=t.req.supportsXhr2||"XDomainRequest"in window,t.req.supportsJSON="JSON"in window,t.req.xdr=function(n,r,i,s,o,u,a,f){var l,c=!1,h;a||(a="GET");var p=function(e){c=!0;var n,r=!1;try{n=JSON.parse(e)}catch(i){r=!0,d(new Error("JSON parse error"))}r||(typeof o=="function"?o(n):t.is_array(o)&&o.length>0&&t.step_through(n,o,s))},d=function(e){c=!0,typeof u=="function"&&u(e)};window.XMLHttpRequest&&t.req.supportsXhr2?l=new XMLHttpRequest:window.XDomainRequest&&(l=new XDomainRequest),l?(l.open(a,n+"?"+t.to_qs(r)),l.timeout=e.timeout,l.onerror=d,l.onprogress=function(){},l.ontimeout=d,l.onload=function(){p(l.responseText)},l.send(f),h=setTimeout(function(){c||(l.onerror=function(){},l.onprogress=function(){},l.ontimeout=function(){},l.onload=function(){},l.abort&&l.abort(),d())},e.timeout)):d(new Error("CORS not supported"))},t.req.jsonp=function(n,i,s,o,u,a){var f=s+ ++r,l=!1,c;e._json_callbacks[f]=function(n){typeof u=="function"?u(n):t.is_array(u)&&u.length>0&&t.step_through(n,u,o),delete e._json_callbacks[f],l=!0,clearTimeout(c)},i.push([e.jsonp_param,"massrel._json_callbacks."+f]);var h=t.load(n+"?"+t.to_qs(i));c=setTimeout(function(){l||(e._json_callbacks[f]=function(){delete e._json_callbacks[f]},typeof a=="function"&&a(),h.stop())},e.timeout)},t.jsonp_factory=t.req.jsonp;var r=0;e._json_callbacks={},t.request_factory=function(e,n,r,i,s,o){t.req.supportsCors&&t.req.supportsJSON?t.req.xdr(e,n,r,i,s,o):t.req.jsonp(e,n,r,i,s,o)},t.post_factory=function(e,n,r,i,s,o,u){if(!t.req.supportsCors||!t.req.supportsJSON)throw"POST not supported";t.req.xdr(e,n,i,s,o,u,"POST",r)},t.is_array=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.is_number=function(e){return Object.prototype.toString.call(e)==="[object Number]"};var i=document.getElementsByTagName("head")[0]||document.body;t.load=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e;var r=!1;return n.onload=n.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=!0,n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),typeof t=="function"&&t())},i.insertBefore(n,i.firstChild),{stop:function(){n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n.src="#"}}},t.to_qs=function(e){var r=[],i;if(e&&e.length){for(var s=0,o=e.length;s<o;s++){i=e[s][1];if(t.is_array(i)){var u=[];for(var a=0,f=i.length;a<f;a++)u[a]=n(i[a]||"");i=u.join(",")}else i!==undefined&&i!==null?i=n(i):i="";r.push(n(e[s][0])+"="+i)}return r.join("&")}return""};var s=/\+\d{4} \d{4}$/,o=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+\d{4})$/,u=/^(\d{4})-(\d\d)-(\d\d)T(\d\d)\:(\d\d)\:(\d\d)\.(\d{3})Z$/;return t.fix_date=t.fix_twitter_date=function(e){e=e.toString();if(s.test(e)){e=e.split(" ");var t=e.pop();e.splice(3,0,t),e=e.join(" ")}else o.test(e)?e=e.replace(o,"$1/$2/$3 $4:$5:$6 $7"):u.test(e)&&(e=e.replace(u,"$1/$2/$3 $4:$5:$6 +0000"));return e},t.parse_params=function(e){e=e||window.location.search.substring(1);var t={};e.charAt(0)==="?"&&(e=e.substring(1));if(e.length>0){e=e.replace(/\+/g," ");var n=e.split(/[&;]/g);for(var r=0;r<n.length;r++){var i=n[r].split("="),s=decodeURIComponent(i[0]),o=i.length>1?decodeURIComponent(i[1]):"";if(s in t){var u=t[s];typeof u!="string"?t[s].push(o):(t[s]=[],t[s].push(u),t[s].push(o))}else t[s]=o}}return t},t.poll_interval=function(t){var n=e.min_poll_interval;return Math.max(t||n,n)},t.poll_backoff=function(t,n){var r=e.max_backoff_interval;return t<r&&(n=Math.max(n-1,0),t*=Math.pow(e.backoff_rate,n),t=Math.min(t||r,r)),t},t.callback_group=function(e){e=e||1;var t=0,n=!0,r=function(r,i){return function(){if(n){if(t<=e)return r.apply(i||this,arguments);throw new Error("Callback group max call count exceeded")}}};return r.deactivate=function(){n=!1},r},t.timeParam=function(e,t,n,r){typeof e!="undefined"&&(e.getTime&&(e=e.getTime()/1e3),e=+e,!isNaN(e)&&e>0?(e=Math.floor(e/60)*60,n.push([t,e])):!isNaN(e)&&r&&e<=0&&n.push([t,e]))},t.always=function(e){var t=new $.Deferred;if(e===undefined)return t.resolve(),t.promise();e.length===undefined&&(e=[e]);var n=e.length,r=function(){n--,n===0&&t.resolve()};return $.each(e,function(){this.always(r)}),t.promise()},t}),n("massrel-js/generic_poller_cycle",["./helpers"],function(e){function t(t,n,r){this.cg=e.callback_group(),this.skip=this.cg(t),this.callback=this.cg(n),this.errback=this.cg(r),this._enabled=!0}return t.prototype.enabled=function(){return this._enabled},t.prototype.disable=function(){this.cg.deactivate(),this._enabled=!1},t}),n("massrel-js/generic_poller",["./helpers","./generic_poller_cycle"],function(e,t){function n(r,i){var s=this,o=function(){if(f){var i=e.callback_group(),o=i(u),l=function(t){s.consecutive_errors=0,n.failure_mode=s.failure_mode=!1;if(f){for(var r=0,i=s._filters.length;r<i;r++)t=s._filters[r].call(s,t);e.step_through([t],s._listeners,s),f&&o()}},c=function(){s.consecutive_errors+=1,n.failure_mode=s.failure_mode=!0,o(!0)};a=new t(o,l,c),s.fetch(r,s.opts,a)}},u=function(t){var n=e.poll_interval(s.frequency*1e3);t&&(n=e.poll_backoff(n,s.consecutive_errors)),l=setTimeout(o,n)},a=null,f=!1,l;this._listeners=[],this._filters=[],this.object=r,this.opts=i||{},this.frequency=this.opts.frequency||30,this.alive_count=0,this.consecutive_errors=0,this.failure_mode=!1,this.start=function(){return f||(f=!0,o()),this},this.stop=function(){return a&&(a.disable(),a=null),clearTimeout(l),f=!1,this}}return n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.data=function(e){return this._listeners.push(e),this},n.prototype.filter=function(e){return this._filters.push(e),this},n.failure_mode=!1,n}),n("massrel-js/poller_queue",["./helpers"],function(e){function t(t,n){function a(){if(!s&&r.length>0&&typeof i=="function"){var e=++o;u.enqueued-=1,u.count+=1;var t=r.shift();s=!0,i.call(u,t,function(){e===o&&(s=!1,setTimeout(a,0))})}}this.poller=t,n=e.extend(n||{},{});var r=[],i=null,s=!1,o=0;this.total=0,this.enqueued=0,this.count=0;var u=this;t.batch(function(e){var t=e.length,n=t-1;for(;n>=0;n--)r.push(e[n]);u.total+=t,u.enqueued+=t,a()}),this.next=function(e){!s&&typeof e=="function"&&(i=e,a())}}return t}),n("massrel-js/poller",["./helpers","./generic_poller","./poller_queue"],function(e,t,n){function r(e,n){t.call(this,e,n),this.stream=this.object,this.filter(this.filter_newer),n=this.opts,this.newest_timestamp=n.newest_timestamp||null,this.stay_realtime="stay_realtime"in n?!!n.stay_realtime:!0,this.hail_mary_mode=!!n.hail_mary_mode,this.first=!0}return e.extend(r.prototype,t.prototype),r.prototype.fetch=function(t,n,r){var i=this,s={start_id:null},o=this.stay_realtime?"since_id":"from_id";return s[o]=i.since_id,n=e.extend({},n),this.first&&(n=e.extend(n.initial||{},n),delete n.initial),s=e.extend(s,n),this.cursorable()||delete s.since_id,t.load(s,function(e){r.enabled()&&(e&&e.length>0&&(i.since_id=e[0].entity_id,i.start_id||(i.start_id=e[e.length-1].entity_id)),r.callback(e),s.timeframe&&i.first&&i.stop(),i.first=!1)},r.errback),this},r.prototype.batch=function(e){return this.data(r.createEnumerator(e,!1))},r.prototype.each=function(e){return this.data(r.createEnumerator(e,!0))},r.prototype.queue=function(e){var t=new n(this);return t.next(e),this},r.prototype.more=function(t,n){var r=this,i=function(){r.object.load(e.extend({start_id:r.start_id,since_id:null},r.opts),function(e){e.length>0&&(r.start_id=e[e.length-1].entity_id,r.since_id||(r.since_id=e[0].entity_id)),t.call(r,e)},function(){typeof n=="function"&&n()})};return i(),this},r.prototype.cursorable=function(){return!(t.failure_mode||this.failure_mode||this.hail_mary_mode)},r.prototype.filter_newer=function(e){return e=r.filter_newer(e,this.newest_timestamp),e&&e.length>0&&(this.newest_timestamp=e[0].queued_at),e},r.prototype.poke=function(){return this},r.createEnumerator=function(t,n){return n?function(n){n&&n.length>0&&e.step_through(n,[t],this)}:function(e){e&&e.length>0&&t.call(this,e)}},r.filter_newer=function(e,t){var n="queued_at";if(e&&e.length>0){var r=this.limit||Infinity;if(t)if(e[0][n]<=t)e=[];else if(e[e.length-1][n]>t)e.length>r&&e.splice(this.limit,e.length-r);else{var i=[];for(var s=0,o=e.length;s<o&&i.length<r;s++){var u=e[s];if(!(u[n]>t))break;i.push(u)}e=i}else e.length>r&&e.splice(this.limit,e.length-r)}return e},r}),n("massrel-js/meta_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.meta(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),n("massrel-js/top_things_poller",["./helpers","./generic_poller"],function(e,t){function n(e,n){n.thing=n.thing||"hashtags",typeof n.resolution=="number"&&(n.resolution=n.resolution+"s"),t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return typeof t.resolution=="number"&&(t.resolution=t.resolution+"s"),e.topThings(t,n.callback,n.errback),this},n.mostRecentBucket=function(e){if(e.data&&e.data.length>0){for(var t=e.data.length-1;t>=0;t--)if(e.data[t].things&&e.data[t].things.length>0)return e.data[t];if(t===-1)return e.data[e.data.length-1]}return null},n.prototype.each=n.prototype.data,n}),n("massrel-js/stream_keyword_insights",["./helpers","./generic_poller"],function(e,t){function r(e,t){this.stream=e,this.defaults=t||{}}var n=encodeURIComponent;return r.prototype.url=function(){return this.stream.keyword_insights_url()},r.prototype.fetch=function(t,n,r){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var i=this.params(t);return e.request_factory(this.url(),i,"_",this,function(e){typeof n=="function"&&n.apply(this,arguments)},r),this},r.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},r.prototype.params=function(e){e=e||{};var t=[];return e.topics&&t.push(["topics","1"]),"start"in e&&t.push(["start",e.start]),"finish"in e&&t.push(["finish",e.finish]),e.resolution&&t.push(["resolution",e.resolution]),e.countries&&t.push(["countries",e.countries]),t},r}),n("massrel-js/stream_activity",["./helpers","./generic_poller"],function(e,t){function r(e,t){this.stream=e,this.defaults=t||{}}var n=encodeURIComponent;r.prototype.url=function(){return e.api_url("/"+n(this.stream.account)+"/"+n(this.stream.stream_name)+"/activity.json")},r.prototype.fetch=function(t,n,r){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var i=this.params(t);return e.request_factory(this.url(),i,"_",this,function(r){if(r&&(!t.verbose||t.verbose==="0")&&e.is_array(r.activity)){var i=r.activity;for(var s=0,o=i.length;s<o;s++){var u=r.start+r.period_size*s;i[s]=e.extend(i[s],{start:u,finish:Math.min(u+r.period_size,r.finish)})}}typeof n=="function"&&n.apply(this,arguments)},r),this},r.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},r.prototype.params=function(t){t=t||{};var n=[];return t.view?n.push(["view",t.view]):t.topic&&n.push(["topic",t.topic]),e.timeParam(t.start,"start",n,!0),e.timeParam(t.finish,"finish",n,!0),"periods"in t&&n.push(["periods",t.periods]),t.resolution&&n.push(["resolution",t.resolution]),"tz_offset"in t&&n.push(["tz_offset",t.tz_offset]),t.encode&&n.push(["encode",t.encode]),n.push(["verbose",0]),n};var i=function(e,t,n){r.prototype[e]=function(){return this.defaults[t]=n,this}};return i("approved","view","approved"),i("pending","view","pending"),i("rejected","view","rejected"),i("minutes","resolution","1m"),i("ten_minutes","resolution","10m"),i("hours","resolution","1h"),i("days","resolution","1d"),r}),n("massrel-js/stream",["./helpers","./poller","./meta_poller","./top_things_poller","./stream_keyword_insights","./stream_activity"],function(e,t,n,r,i,s){function u(){var e=arguments.length===1?arguments[0].split("/"):arguments;this.account=e[0],this.stream_name=e[1],this._enumerators=[]}var o=encodeURIComponent;return u.prototype.stream_url=function(){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+".json")},u.prototype.meta_url=function(){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/meta.json")},u.prototype.top_things_url=function(t){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/top_"+t+".json")},u.prototype.keyword_insights_url=function(t){return e.api_url("/"+o(this.account)+"/"+o(this.stream_name)+"/keyword_insights.json")},u.prototype.load=function(t,n,r){t=e.extend(t||{},{});var i=this.buildParams(t);return e.request_factory(this.stream_url(),i,"_",this,n||this._enumerators,r),this},u.prototype.buildParams=function(t){t=t||{};var n=[];t.limit&&n.push(["limit",t.limit]),t.since_id?n.push(["since_id",t.since_id]):t.from_id?n.push(["from_id",t.from_id]):(t.start_id||t.start)&&n.push(["start",t.start_id||t.start]),t.replies&&n.push(["replies","1"]),t.geo_hint&&n.push(["geo_hint","1"]),t.from&&n.push(["from",t.from]),t.keywords&&n.push(["keywords",t.keywords]),t.lang&&n.push(["lang",t.lang]),t.network&&n.push(["network",t.network]),t.timeline_search&&n.push(["timeline_search","1"]),t.page_links&&n.push(["page_links","1"]),t.klout&&n.push(["klout","1"]),t.timeframe&&(e.timeParam(t.timeframe.start,"timeframe[start]",n),e.timeParam(t.timeframe.finish,"timeframe[finish]",n)),t.strip_links&&n.push(["strip_links","1"]),t.nonsquare_instagram&&n.push(["nonsquare_instagram","true"]);if(t.products)if(e.is_array(t.products))for(var r=0;r<t.products.length;r+=1)n.push(["products[]",t.products[r]]);else n.push(["products[]",t.products]);return t.tweet_mode&&n.push(["tweet_mode",t.tweet_mode]),n},u.prototype.each=function(e){return this._enumerators.push(e),this},u.prototype.poller=function(e){return new t(this,e)},u.prototype.meta=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildMetaParams(t);return e.request_factory(this.meta_url(),i,"meta_",this,n,r),this},u.prototype.buildMetaParams=function(e){e=e||{};var t=[];return e.all_topics&&t.push(["all_topics",e.all_topics]),e.disregard&&t.push(["disregard",e.disregard]),e.num_minutes&&t.push(["num_minutes",e.num_minutes]),e.num_hours&&t.push(["num_hours",e.num_hours]),e.num_days&&t.push(["num_days",e.num_days]),e.num_trends&&t.push(["num_trends",e.num_trends]),e.num_links&&t.push(["num_links",e.num_links]),e.num_hashtags&&t.push(["num_hashtags",e.num_hashtags]),e.num_contributors&&t.push(["num_contributors",e.num_contributors]),e.top_periods&&t.push(["top_periods",e.top_periods]),e.top_periods_relative&&t.push(["top_periods_relative",e.top_periods_relative]),e.top_count&&t.push(["top_count",e.top_count]),e.finish&&t.push(["finish",e.finish]),e.networks&&t.push(["networks","1"]),(e.activity||e.activity===0)&&t.push(["activity",e.activity]),t},u.prototype.metaPoller=function(e){return new n(this,e)},u.prototype.keywordInsights=function(e){return new i(this,e)},u.prototype.topThings=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildTopThingsParams(t);return e.request_factory(this.top_things_url(t.thing),i,"top_things_",this,n,r),this},u.prototype.buildTopThingsParams=function(t){t=t||{};var n=[];if(t.resolution){var r;e.is_number(t.resolution)?r=t.resolution+"s":r=t.resolution,n.push(["resolution",r])}return t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),t.limit&&n.push(["limit",t.limit]),t.percent&&n.push(["percent","1"]),t.tweet_mode&&n.push(["tweet_mode",t.tweet_mode]),n},u.prototype.topThingsPoller=function(e){return new r(this,e)},u.prototype.activity=function(e){return new s(this,e)},u}),n("massrel-js/account",["./helpers","./meta_poller"],function(e,t){function r(e){this.user=e}var n=encodeURIComponent;return r.prototype.meta_url=function(){return e.api_url("/"+n(this.user)+".json")},r.prototype.meta=function(){var t,n,r;if(typeof arguments[0]=="function")n=arguments[0],r=arguments[1],t={};else{if(typeof arguments[0]!="object")throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],r=arguments[2]}var i=this.buildMetaParams(t);return e.request_factory(this.meta_url(),i,"meta_",this,n,r),this},r.prototype.buildMetaParams=function(t){t=t||{};var n=[];t.quick_stats&&n.push(["quick_stats","1"]);if(t.streams){var r=e.is_array(t.streams)?t.streams:[t.streams];n.push(["streams",r.join(",")])}return t.num_minutes&&n.push(["num_minutes",t.num_minutes]),t.num_trends&&n.push(["num_trends",t.num_trends]),t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),n},r.prototype.metaPoller=function(e){return new t(this,e)},r.prototype.toString=function(){return this.user},r}),n("massrel-js/context",["./helpers"],function(e){function t(e){this.status=e,this.source={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},this.known=!1,this.intents=!0}return t.create=function(n,r){n=n||{};var i=new t(n);return r=e.extend(r||{},{intents:!0,retweeted_by:!0}),i.intents=r.intents,typeof i.source[n.network]!="undefined"&&(i.source[n.network]=i.known=!0,i.sourceName=n.network),n.network==="google_plus"&&(i.source.google=i.known=!0,i.sourceName="google"),n.network==="massrelevance"&&(i.source.message=i.known=!0,i.sourceName="message"),i.source.twitter&&n.retweeted_status&&r.retweeted_by&&(i.retweet=!0,i.retweeted_by_user=n.user,i.status=n.retweeted_status),i},t.prototype.getPhotoUrl=function(){if(this.photo_url!==undefined)return this.photo_url;var e=!1;if(this.status&&this.known)if(this.source.twitter)if(this.status.entities.media&&this.status.entities.media.length){var t=this.status.entities.media[0];e={url:t.media_url,width:t.sizes.medium.w,height:t.sizes.medium.h,link_url:t.url||t.expanded_url}}else this.status.entities.urls&&this.status.entities.urls.length&&(e={url:this.status.entities.urls[0].expanded_url||this.status.entities.urls[0].url});else this.source.facebook&&(this.status.type&&this.status.type==="photo"||this.status.kind&&this.status.kind==="photo")?e={url:this.status.picture.replace(/_[st]./,"_n.")}:this.source.google&&this.status.object.attachments.length&&this.status.object.attachments[0].objectType==="photo"?e={url:this.status.object.attachments[0].fullImage.url}:this.source.instagram&&this.status.type==="image"&&(e={url:this.status.images.standard_resolution.url});return this.photo_url=e,e},t}),n("massrel-js/compare_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),n("massrel-js/compare",["./helpers","./compare_poller"],function(e,t){function n(t){e.is_array(t)?this.streams=t.slice(0):typeof t=="string"?this.streams=[t]:this.streams=[]}return n.prototype.compare_url=function(){return e.api_url("/compare.json")},n.prototype.buildParams=function(e){var t=[];return e=e||{},e.streams&&t.push(["streams",e.streams]),(e.target||e.target>=0)&&t.push(["target",e.target.toString()]),e.precision&&e.precision>0&&t.push(["precision",e.precision]),t},n.prototype.load=function(t,n,r){typeof t=="function"&&(r=n,n=t,t=null);var i=this.buildParams(e.extend({streams:this.streams,precision:this.precision,target:this.target},t||{}));return e.request_factory(this.compare_url(),i,"meta_",this,n,r),this},n.prototype.poller=function(e){return new t(this,e)},n}),n("massrel-js/intents",["./helpers"],function(e){var t={base_url:"https://twitter.com/intent/",params:{text:"(string): default text, for tweet/reply",url:"(string): prefill url, for tweet/reply",hashtags:"(string): hashtag (or list with ,) without #, for tweet/reply",related:"(string): screen name (or list with ,) without @, available for all",in_reply_to:"(number): tweet id, only for reply",via:"(string): screen name without @, tweet/reply",tweet_id:"(number): tweet id, for retweet and favorite",screen_name:"(string): only for user/profile",user_id:"(number): only for user/profile",original_referer:'(string): url to display with related ("www.yahoo.com suggests you follow:")'},original_referer:window.top!==window.self&&document.referrer||null};return t.url=function(n,r){r=e.extend({},r||{}),r.original_referer===undefined&&t.original_referer&&(r.original_referer=t.original_referer),r.original_referer&&!/^https?:\/\//.test(r.original_referer)&&(r.original_referer="http://"+r.original_referer);if(r.hashtags&&navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)){var i=r.text?[r.text]:[];r.url&&(i.push(r.url),delete r.url),i.push("#"+r.hashtags.split(/\s*,\s*/).join(" #").replace(/^\s+|\s+$/gm,"")),delete r.hashtags,r.text=i.join(" ")}var s=[];for(var o in r)s.push([o,r[o]]);return t.base_url+encodeURIComponent(n)+"?"+e.to_qs(s)},t.tweet=function(e){return t.url("tweet",e)},t.reply=function(e,n){return n=n||{},n.in_reply_to=e,t.tweet(n)},t.retweet=function(e,n){return n=n||{},n.tweet_id=e,t.url("retweet",n)},t.favorite=function(e,n){return n=n||{},n.tweet_id=e,t.url("favorite",n)},t.user=function(e,n){return n=n||{},/^\d+$/.test(e+"")?n.user_id=e:n.screen_name=e,t.url("user",n)},t.profile=t.user,t}),n("massrel-js/search",["require","./helpers"],function(e){var t=e("./helpers"),n=function(e){this.apiToken=e};return n.prototype.url=function(){return t.api_url("/search/search.json")},n.prototype.fetch=function(e,n,r){return e=this.buildQueryString(e),t.request_factory(this.url(),e,"_",this,n,r),this},n.prototype.buildQueryString=function(e){var t=[];typeof e.q=="string"&&t.push(["q",e.q]),e.filters&&(t=t.concat(this.buildParams(e.filters,"filter.")));if(e.views){var n,r;for(n in e.views)r=e.views[n],typeof r=="boolean"?t.push(["view."+n,r?"1":"0"]):t=t.concat(this.buildParams(r,"view."+n+"."))}return this.apiToken&&t.push(["api_token",this.apiToken]),t},n.prototype.buildParams=function(e,n){n=n||"";var r,i,s,o=[];for(r in e){i=e[r],t.is_array(i)||(i=[i]);for(s=0,len=i.length;s<len;s++){var u=i[s];typeof u=="boolean"&&(u=u?"1":"0"),o.push([n+r,u])}}return o},n}),n("massrel-js/facebook_media_questions",["./helpers","./generic_poller"],function(e,t){function n(){}return n.prototype.url=function(){return e.api_url("/facebook/media_question.json")},n.prototype.buildParams=function(e){e=e||{};var t=[];return e.id&&t.push(["id",e.id]),e.page&&t.push(["page",e.page]),t},n.prototype.load=function(t,n,r){t=e.extend(t||{},{});var i=this.buildParams(t);return e.request_factory(this.url(),i,"_",this,n||this._enumerators,r),this},n.prototype.poller=function(e){return new t(this,e)},n}),n("massrel-js/massrel",["./globals","./helpers","./stream","./account","./stream_keyword_insights","./stream_activity","./generic_poller","./generic_poller_cycle","./poller","./meta_poller","./top_things_poller","./poller_queue","./context","./compare","./compare_poller","./intents","./search","./facebook_media_questions"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){e.Stream=n,e.Account=r,e.StreamKeywordInsights=i,e.StreamActivity=s,e.GenericPoller=o,e.GenericPollerCycle=u,e.Poller=a,e.MetaPoller=f,e.TopThingsPoller=l,e.PollerQueue=c,e.Context=h,e.Compare=p,e.ComparePoller=d,e.helpers=t,e.intents=v,e.Search=m,e.FacebookMediaQuestion=g;var y=t.parse_params();return y["massrel[host]"]&&(e.host=y["massrel[host]"]),e}),n("massrel-js",["massrel-js/massrel"],function(e){return e}),n("massrel-js-backbone/lib/embedly",["require","q","lodash","./util","massrel-js"],function(e){var t=e("q"),n=e("lodash"),r=e("./util"),i=e("massrel-js"),s=window.location.protocol==="https:",o="embedly.massrelevance.com",u="d1gbi9ec0ujnws.cloudfront.net",a="//"+(s?u:o)+"/1/",f=function(e,r){if(n.isArray(r))r=n(r).each(function(e){if(!n.isString(e))throw new TypeError("array values must be strings (got: "+e+")")}).sortBy().value();else{if(!n.isString(r))throw new TypeError("`urls` must be either a string or an array (got: "+r+")");r=[r]}var o=t.defer();if(r.length>0){var u=[["key","fd577f7497bf11e0b95d4040d3dc5c07"],["secure",s],["maxwidth",1e3],["urls",r]];i.helpers.request_factory(a+e,u,"__embedly_jsonp__",null,function(e){for(var t=0;t<e.length;t++)e[t].link=r[t];o.resolve(e)},function(e){o.reject(new Error(e))})}else o.resolve([]);return o.promise},l=/^(https?:)?\/\/embedly\.massrelevance\.com\/\d+\/image/i,c=function(e){return l.test(e)||(e="//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&url="+encodeURIComponent(e)),e},h="//cdn.embedly.com/widgets/media.html?",p={url:"",image:"",video:"",video_secure:"true",type:"video/mp4",schema:"instagram"},d=function(e){e=n.extend({},p,e);var t=h+r.paramaterize(e);return'<iframe src="'+t+'" scrolling="no" frameborder="0"></iframe>'};return{embed:n.partial(f,"oembed"),widget:d,proxyImageURL:c}}),n("massrel-js-backbone/lib/StatusModel",["require","./backbone","q","lodash","moment","twemoji","placeholder-image-generator","./MediaCollection","./MediaModel","./embedly","./util"],function(e){var t=e("./backbone"),n=e("q"),r=e("lodash"),i=e("moment"),s=e("twemoji"),o=e("placeholder-image-generator"),u=e("./MediaCollection"),a=e("./MediaModel"),f=e("./embedly"),l=e("./util"),c="media-fetch",h="error:media-fetch",p=function(e){throw new Error("Method `"+e+"` is not implemented")},d=function(e){var t=s.parse(e,{size:"72x72"});return t.replace(/\bclass="\s*emoji\s*"/g,'class="status-emoji"')},v={thumbnail_url:o(),thumbnail_width:480,thumbnail_height:360},m=t.Model.extend({idAttribute:"entity_id",network:null,defaults:{additional_classes:"",raw_status:null,has_fetched_media:!1,is_fetching_media:!1,formatted_permalink:"",formatted_date_format:"display",formatted_date:"",formatted_date_iso:"",formatted_date_full:"",formatted_date_short:"",formatted_date_display:"",formatted_avatar_url_format:"medium",formatted_avatar_url:"",formatted_avatar_url_thumb:"",formatted_avatar_url_small:"",formatted_avatar_url_medium:"",formatted_avatar_url_large:"",formatted_avatar_url_huge:"",formatted_profile_url:"",formatted_text_max_length:140,formatted_text:"",formatted_text_rest:"",formatted_text_full:"",formatted_text_pretty:"",formatted_text_rest_pretty:"",formatted_text_full_pretty:"",formatted_name:"",formatted_name_pretty:"",formatted_klout_score:null,formatted_klout_permalink:null,formatted_place:null,media:null},constructor:function(e,n){var i=r.extend({},n,{parse:!0});t.Model.call(this,e,i)},initialize:function(){this.set("media",new u,{silent:!0}),this.on({"change:formatted_avatar_url_format":this._updateFormattedAvatarURL,"change:formatted_date_format":this._updateFormattedDate,"change:formatted_text_max_length":this._updateFormattedTexts}),this._generateFormattedAvatarURLs(),this._generateFormattedDates(),this._generateFormattedPermalink(),this._generateFormattedProfileURL(),this._updateFormattedAvatarURL(),this._updateFormattedDate(),this._updateFormattedName(),this._updateFormattedPlace(),this._updateFormattedTexts(),this._updateFormattedCounts()},parse:function(e){var t=l.flattenObject(e);return t.raw_status=r.cloneDeep(e),t},_splitText:l.splitTextToLength,_getMediaFetchURLs:function(){p("_getMediaFetchURLs")},_getMediaExisting:function(){p("_getMediaExisting")},_postProcessFetchMedia:function(){},fetchMedia:function(){if(this.get("is_fetching_media"))return this;if(this.get("has_fetched_media"))return this.trigger(c),this;this.set("is_fetching_media",!0),this.set("has_fetched_media",!1);var e=this._getMediaFetchURLs(),t=this._getMediaExisting(),i=n.defer();e&&e.length>0?i=f.embed(e):(i.resolve([]),i=i.promise);var s=this;return i.then(function(e){s.set("is_fetching_media",!1),s.set("has_fetched_media",!0),s._postProcessFetchMedia(e);var n=r(e).reject(function(e){return e.type==="error"}).reject(function(e){var t=["snappytv"],n=["snpy.tv"],i=["photo","video"];return(e.provider_name&&r.contains(t,e.provider_name.toLowerCase())||r.find(n,function(t){return e.link&&e.link.indexOf(t)>=0}))&&e.type!=="photo"&&e.type!=="video"&&e.type&&e.thumbnail_url&&(e.type="photo",e.width=e.thumbnail_width,e.height=e.thumbnail_height,e.url=e.thumbnail_url),!r.contains(i,e.type)}).map(function(e){return!e.thumbnail_url&&e.provider_name==="YouTube"&&(e.thumbnail_url=o({width:480,height:360,template:"youtube"})),r.extend({},v,e)}).map(function(e){return new a(e)}).concat(t).reject(function(e){return e.get("type")==="error"}).value();s.get("media").reset(n),s.trigger(c)}).fail(function(e){s.set("is_fetching_media",!1),s.set("has_fetched_media",!1),s.trigger(h,s,null,{error:e})}).done(),this},_prettifyText:function(){p("_prettifyText")},_getPermalink:function(){p("_getPermalink")},getPermalink:function(){return this._getPermalink()},_getCreateDate:function(){p("_getCreateDate")},getCreateDate:function(){return this._getCreateDate()},_getText:function(){p("_getText")},getText:function(){return this._getText()},_getPlace:function(){p("_getPlace")},getPlace:function(){return this._getPlace()},_getAvatarURL:function(){p("_getAvatarURL")},getAvatarURL:function(e){var t=1e4;if(e<0||e>t)e=t;else if(!r.isNumber(e)||r.isNaN(e))e=m.AVATAR_SIZES.medium;return this._getAvatarURL(e)},_getProfileURL:function(){p("_getProfileURL")},getProfileURL:function(){return this._getProfileURL()},_getName:function(){p("_getName")},getName:function(){return this._getName()},_updateFormattedDate:function(){var e=this.get("formatted_date_format"),t,n=this.get("formatted_date_iso");return r.isFunction(e)?t=e.call(null,i(n)):this.has("formatted_date_"+e)?t=this.get("formatted_date_"+e):t=i(n).format(e),this.set("formatted_date",t),this},updateFormattedDates:function(){return this._generateFormattedDates(),this._updateFormattedDate(),this},_updateFormattedPlace:function(){return this.set("formatted_place",this.getPlace()),this},_updateFormattedAvatarURL:function(){var e=this.get("formatted_avatar_url_format"),t;if(r.isFunction(e))t=e.call(null);else{if(!this.has("formatted_avatar_url_"+e))throw new TypeError("Invalid avatar format value: "+e);t=this.get("formatted_avatar_url_"+e)}return this.set("formatted_avatar_url",t),this},_updateFormattedTexts:function(){var e=this.getText(),t=this.get("formatted_text_max_length"),n=this._splitText(e,t),i=r.compose(d,r.bind(this._prettifyText,this));return this.set({formatted_text:n[0],formatted_text_rest:n[1],formatted_text_full:e,formatted_text_pretty:i(n[0]),formatted_text_rest_pretty:i(n[1]),formatted_text_full_pretty:i(e)}),this},_updateFormattedName:function(){var e=this.getName();return this.set({formatted_name:e,formatted_name_pretty:d(e)}),this},_generateFormattedAvatarURLs:function(){var e={};return r.each(m.AVATAR_SIZES,function(t,n){e["formatted_avatar_url_"+n]=this.getAvatarURL(t)},this),this.set(e),this},_updateFormattedCounts:function(){p("_updateFormattedCounts")},_generateFormattedProfileURL:function(){return this.set("formatted_profile_url",this.getProfileURL()),this},_generateFormattedPermalink:function(){return this.set("formatted_permalink",this.getPermalink()),this},_generateFormattedDates:function(){var e=this.getCreateDate();if(!e||!e.isValid())e=i();var t=l.calculateISODate(e),n=l.calculateFullDate(e),r=l.calculateShortDate(e),s=l.calculateDisplayDate(e);return this.set({formatted_date_iso:t,formatted_date_full:n,formatted_date_short:r,formatted_date_display:s}),this},_convertNumberToAbbreviatedFormat:function(e){return e<1e3?e:e<1e5?Math.round(e/100)/10+"k":e<1e6?Math.round(e/1e3)+"k":e<1e9?Math.round(e/1e5)/10+"m":Math.round(e/1e8)/10+"b"}},{AVATAR_SIZES:l.freeze({thumb:24,small:48,medium:73,large:128,huge:1e4}),AUTOLINK_DEFAULTS:l.freeze({usernameIncludeSymbol:!0,suppressDataScreenName:!0,targetBlank:!0,symbolTag:"s",textWithSymbolTag:"span",urlClass:"status-pretty-link status-url ",hashtagClass:"status-pretty-link status-hashtag ",usernameClass:"status-pretty-link status-username ",listClass:"status-pretty-link status-list ",cashtagClass:"status-pretty-link status-cashtag "})});return m}),n("massrel-js-backbone/lib/FacebookStatusModel",["require","lodash","moment","twitter-text","./MediaModel","./StatusModel","./embedly","./util"],function(e){var t=e("lodash"),n=e("moment"),r=e("twitter-text"),i=e("./MediaModel"),s=e("./StatusModel"),o=e("./embedly"),u=e("./util"),a=s.extend({network:"facebook",defaults:t.extend({},s.prototype.defaults,{intent_can_comment:!1,intent_can_like:!1,intent_can_share:!1,intent_url_comment:"",intent_url_like:"",intent_url_share:"",actions:[],actions_has_comment:!1,actions_has_like:!1,intent_app_id:"508524932504444"}),initialize:function(){s.prototype.initialize.apply(this,arguments),this.on("change:type change:kind",this._generateIntentAbilities),this.on("change:actions",this._generateAvailableActions),this._generateAvailableActions(),this._generateIntentAbilities(),this._generateIntentURLs()},getType:function(){return this.get("type")||this.get("kind")},_getMediaFetchURLs:function(){var e=this.getType(),n=r.extractUrlsWithIndices(this.getText()),i=t.pluck(n,"url");return(e==="link"||e==="video")&&this.get("link")&&i.push(this.get("link")),t.uniq(i)},_parseMediaPhoto:function(){var e=t.sortBy(this.get("images"),function(e){return-(e.width*e.height)});if(e.length===0)return null;var n=e[0],r=e[e.length-1],s=u.protocolRelativize(r.source);return new i({type:"photo",url:u.protocolRelativize(n.source),link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:s,thumbnail_width:r.width,thumbnail_height:r.height,provider_name:"Facebook",author_name:this.get("from_name"),author_url:a.getAuthorURLById(this.get("from_id")),sizes:t.map(e.slice(1),function(e){return{url:u.protocolRelativize(e.source),width:e.width,height:e.height,thumbnail_url:s,thumbnail_width:r.width,thumbnail_height:r.height}})})},_parseMediaPicture:function(){return this.has("picture")&&this.getType()!=="video"?new i({type:"photo",url:a.upgradePictureURL(this.get("picture")),link:this.get("formatted_permalink"),width:0,height:0,thumbnail_url:this.get("picture"),thumbnail_width:0,thumbnail_height:0,provider_name:"Facebook",author_name:this.get("from_name"),author_url:a.getAuthorURLById(this.get("from_id"))}):null},_postProcessFetchMedia:function(e){if(!e||!e.length)return;var n=t.sortBy(this.get("format"),function(e){return-(e.width*e.height)});if(n.length===0)return;var r=n[0];t.each(e,function(e){e.provider_name.toLowerCase()==="facebook"&&(e.thumbnail_url=u.protocolRelativize(r.picture),e.thumbnail_width=r.width,e.thumbnail_height=r.height)})},_parseMediaVideo:function(){var e=t.sortBy(this.get("format"),function(e){return-(e.width*e.height)});if(e.length===0)return null;var n=e[0],r=e[e.length-1],s=u.protocolRelativize(n.picture);return new i({type:"link",url:this.get("link"),link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:s,thumbnail_width:n.width,thumbnail_height:n.height,provider_name:"Facebook",author_name:this.get("from_name"),author_url:a.getAuthorURLById(this.get("from_id")),sizes:t.map(e.slice(1),function(e){return{width:e.width,height:e.height,thumbnail_url:s,thumbnail_width:r.width,thumbnail_height:r.height}})})},_getMediaExisting:function(){var e=[];return t.isArray(this.get("images"))&&e.push(this._parseMediaPhoto()),e.push(this._parseMediaPicture()),t.compact(e)},_prettifyText:function(e){var n=r.extractUrlsWithIndices(e),i=r.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}),o=n.concat(i);r.removeOverlappingEntities(o);var a=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-facebook",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-facebook",hashtagUrlBase:"//www.facebook.com/hashtag/"}),f=r.autoLinkEntities(e,o,a);return u.normalizeLineBreaks(u.trimHTML(f),2,"<br />")},_updateFormattedCounts:function(){},_getCreateDate:function(){return n(this.get("created_time"),n.ISO_8601)},_getPlace:function(){if(this.has("place_id")){var e=this.get("place_location_city")+", "+(this.get("place_location_state")||this.get("place_location_country")),t=this.get("place_location_city")?{name:e}:null,n=parseFloat(this.get("place_location_longitude"),10),r=parseFloat(this.get("place_location_latitude"),10);return{type:"Feature",properties:t,geometry:{type:"Point",coordinates:[n,r]}}}return null},_getAvatarURL:function(e){var t=this.get("from_id");return u.getAvatarProxyURL("facebook",t,e)},_getProfileURL:function(){return"//www.facebook.com/"+this.get("from_id")},_getText:function(){var e;if(this.has("share_text")&&this.has("story"))e=this.get("story");else if(this.has("message")||this.has("name"))e=this.get("message")||this.get("name");return e||""},_getName:function(){return this.get("from_name")},_getPermalink:function(){var e=this.get("facebook_id");e.indexOf("_")<0&&(e=this.get("from_id")+"_"+this.get("facebook_id"));var n=e.split("_"),r={link:!0,photo:!0,post:!0,status:!0,video:!0},i="//www.facebook.com/",s=this.getType();return t.has(r,s)?i+=n[0]+"/posts/"+n[1]:s==="comment"&&(n.length===2?i+=n[0]+"?comment_id="+n[1]:(i+=n[0]+"/posts/"+n[1],n[2]&&(i+="?comment_id="+n[2]))),i},_generateIntentAbilities:function(){return this.set({intent_can_comment:this.getType()!=="comment"||this.get("actions_has_comment"),intent_can_like:this.get("author_is_page")==="1"||this.get("actions_has_like"),intent_can_share:!0}),this},_generateIntentURLs:function(){return this.set({intent_url_comment:this.get("formatted_permalink")+"/comments",intent_url_like:this.get("formatted_permalink")+"/likes",intent_url_share:this.get("formatted_permalink")+"/share"}),this},_generateAvailableActions:function(){var e={Comment:"comment",Like:"like"},n=this;t.each(e,function(e){n.set("actions_has_"+e,!1)}),this.get("actions")&&t.each(this.get("actions"),function(t){var r=e[t.name];r&&n.set("actions_has_"+r,!0)})}},{upgradePictureURL:function(e){e=t.isString(e)?e:"",e=e.replace(/_[anst]\./,"_n.");var n=/\/safe_image\.php\?.*url=([^&]+)(?:&|$)/g.exec(e);return n&&(e=o.proxyImageURL(decodeURIComponent(n[1]))),e},getAuthorURLById:function(e){return"//facebook.com/"+e}});return a}),n("massrel-js-backbone/lib/GooglePlusStatusModel",["require","lodash","moment","./MediaModel","./StatusModel","./util"],function(e){var t=e("lodash"),n=e("moment"),r=e("./MediaModel"),i=e("./StatusModel"),s=e("./util"),o=t.template('<a href=<%- url %> target="_blank" rel="nofollow" class="<%- classes %>"><s><%- symbol %></s><span><%- text %></span></a>'),u=function(e){var t=n().diff(e,"hours");return t<24?e.format("LT"):t<48?"Yesterday "+e.format("LT"):e.format("ll")},a=i.extend({network:"google_plus",defaults:t.extend({},i.prototype.defaults,{formatted_date_format:u}),_getMediaFetchURLs:function(){var e=t.map(this.get("object_attachments"),function(e){return e.embed&&e.embed.url?e.embed.url:null});return t.compact(e)},_parseMediaAlbum:function(e){return t.map(e.thumbnails,function(e){var t=s.protocolRelativize(e.image.url);return new r({type:"photo",url:s.protocolRelativize(a.changeURLSizeHint(e.image.url,a.LARGE_PHOTO_SIZE,a.LARGE_PHOTO_SIZE)),link:this.get("formatted_permalink"),width:a.LARGE_PHOTO_SIZE,height:a.LARGE_PHOTO_SIZE,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height,description:e.description||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),sizes:[{url:t,width:e.image.width,height:e.image.height,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height}]})},this)},_parseMediaArticle:function(e){var n={type:"link",url:e.url,link:this.get("formatted_permalink"),title:e.displayName||"",description:e.content||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url")};return e.fullImage&&t.extend(n,{thumbnail_url:e.fullImage.url,thumbnail_width:e.fullImage.width||e.image.width||0,thumbnail_height:e.fullImage.height||e.image.height||0}),new r(n)},_parseMediaPhoto:function(e){var t=s.protocolRelativize(e.image.url);return new r({type:"photo",url:e.fullImage.url,link:this.get("formatted_permalink"),width:e.fullImage.width,height:e.fullImage.height,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height,title:e.displayName||"",description:e.content||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),sizes:[{url:t,width:Math.round(e.fullImage.width/2),height:Math.round(e.fullImage.height/2),thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height}]})},_parseMediaVideo:function(e){return!e.embed&&e.image?new r({type:"photo",url:s.protocolRelativize(a.changeURLSizeHint(e.image.url,a.LARGE_PHOTO_SIZE,a.LARGE_PHOTO_SIZE)),link:this.get("formatted_permalink"),width:e.image.width,height:e.image.height,provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),thumbnail_url:s.protocolRelativize(e.image.url),thumbnail_width:e.image.width,thumbnail_height:e.image.height,title:e.displayName||"",description:e.content||""}):null},_getMediaExisting:function(){var e=t.map(this.get("object_attachments"),function(e){var n=e.objectType,r=t.noop;return n==="album"?r=this._parseMediaAlbum:n==="article"?r=this._parseMediaArticle:n!=="event"&&(n==="photo"?r=this._parseMediaPhoto:n==="video"?r=this._parseMediaVideo:window.console&&window.console.warn&&window.console.warn("Unrecognized Google+ attachment type: "+n,e,this.toJSON())),r.call(this,e)},this);return t(e).flatten(!0).compact().value()},_prettifyText:function(e){var n=document.createElement("div");return n.innerHTML=e,t.each(n.querySelectorAll(".ot-hashtag"),function(e){var t=document.createElement("div");t.innerHTML=o({url:e.href,classes:i.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-google-plus",symbol:"#",text:s.getNodeText(e).slice(1)}),e.parentNode.replaceChild(t.firstChild,e)}),t.each(n.querySelectorAll(".proflinkWrapper"),function(e){var t=e.querySelector(".proflink"),n=document.createElement("div");n.innerHTML=o({url:t.href,classes:i.AUTOLINK_DEFAULTS.usernameClass+"status-username-google-plus",symbol:"+",text:s.getNodeText(t)}),e.parentNode.replaceChild(n.firstChild,e)}),t.each(n.querySelectorAll("a"),function(e){s.trim(e.className)===""&&(e.className=i.AUTOLINK_DEFAULTS.urlClass+"status-url-google-plus",e.target="_blank")}),s.trimHTML(n.innerHTML)},_updateFormattedCounts:function(){},_getName:function(){return this.get("actor_displayName")},_getPermalink:function(){return s.protocolRelativize(this.get("url"))},_getCreateDate:function(){return n(this.get("published"),n.ISO_8601)},_getText:function(){return this.has("object_content")?this.get("object_content"):s.normalizeLineBreaks(this.get("title"),null,"<br />")},_getPlace:function(){if(this.has("location_kind")){var e=parseFloat(this.get("location_position_latitude")),n=parseFloat(this.get("location_position_longitude"));if(t.isNaN(e)||t.isNaN(n))return null;var r=this.get("location_address_formatted")||"",i=r?{name:r}:null;return{type:"Feature",properties:i,geometry:{type:"Point",coordinates:[n,e]}}}return null},_getAvatarURL:function(e){var t=this.get("actor_image_url");return s.protocolRelativize(t.replace(/\bsz\=\d+/,"sz="+Math.min(9999,e)))},_getProfileURL:function(){return s.protocolRelativize(this.get("actor_url"))},_splitText:s.splitHTMLToLength},{LARGE_PHOTO_SIZE:2560,changeURLSizeHint:function(e,n,r){var i="/";return t.isNumber(n)&&t.isNumber(r)&&(i="/w"+n+"-h"+r+"/"),(e||"").replace(/\/w\d+-h\d+(?:-[a-z])*\//gi,i)},formatDate:u});return a}),n("massrel-js-backbone/lib/InstagramStatusModel",["require","lodash","moment","twitter-text","./MediaModel","./StatusModel","./embedly","./util"],function(e){var t=e("lodash"),n=e("moment"),r=e("twitter-text"),i=e("./MediaModel"),s=e("./StatusModel"),o=e("./embedly"),u=e("./util"),a=s.extend({network:"instagram",_getMediaFetchURLs:function(){var e=[];return this.get("type")==="video"&&e.push(this.get("link")),e},_getMediaExisting:function(){var e=this.get("raw_status"),n=t(e.images).values().sortBy(function(e){return-(e.width*e.height)}).value();if(n.length===0)return null;var r=n[0],s=n[n.length-1],u=o.proxyImageURL(r.url),a=o.proxyImageURL(s.url);return[new i({type:"photo",url:u,link:this.get("formatted_permalink"),width:r.width,height:r.height,thumbnail_url:a,thumbnail_width:s.width,thumbnail_height:s.height,provider_name:"Instagram",author_name:this.get("user_username"),author_url:"//instagram.com/"+this.get("user_username"),sizes:t.map(n.slice(1),function(e){return{url:o.proxyImageURL(e.url),width:e.width,height:e.height,thumbnail_url:a,thumbnail_width:s.width,thumbnail_height:s.height}})})]},_prettifyText:function(e){var n=String.fromCharCode(133)+"#",i=a.getHashtagRuns(e);e=t.reduce(i,function(e,t){var r=t.replace(/#/g,n).slice(1);return e.replace(t,r)},e);var o=r.extractUrlsWithIndices(e),f=r.extractMentionsWithIndices(e),l=r.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}),c=o.concat(l).concat(f);r.removeOverlappingEntities(c);var h=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-instagram",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-instagram",usernameClass:s.AUTOLINK_DEFAULTS.usernameClass+"status-username-instagram",hashtagUrlBase:"//instagram.com/explore/tags/",usernameUrlBase:"//instagram.com/"}),p=r.autoLinkEntities(e,c,h);return u.normalizeLineBreaks(u.trimHTML(p),2,"<br />")},_updateFormattedCounts:function(){},_getName:function(){return this.get("user_full_name")||this.get("user_username")},_getPermalink:function(){return u.protocolRelativize(this.get("link"))},_getCreateDate:function(){return n(this.get("created_time"),"X")},_getText:function(){return this.get("caption_text")||""},_getPlace:function(){if(this.has("location_latitude")){var e=this.get("location_name")?{name:this.get("location_name")}:null,t=parseFloat(this.get("location_longitude"),10),n=parseFloat(this.get("location_latitude"),10);return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[t,n]}}}return null},_getAvatarURL:function(){return o.proxyImageURL(this.get("user_profile_picture"))},_getProfileURL:function(){return"//instagram.com/"+this.get("user_username")}},{getHashtagRuns:function(e){var n=/(?:#|^|\s)((?:#[^#\s]+){2,})(?:#|$|\s)/gi,r=[],i=n.exec(e);while(i)n.lastIndex=i.index+1,r.push(i[1]),i=n.exec(e);return t.sortBy(r,"length").reverse()}});return a}),n("massrel-js-backbone/lib/RSSStatusModel",["require","lodash","moment","twitter-text","./StatusModel","./MediaModel","./util"],function(e){var t=e("lodash"),n=e("moment"),r=e("twitter-text"),i=e("./StatusModel"),s=e("./MediaModel"),o=e("./util"),u=["ddd MMM DD HH:mm:ss UTC YYYY",n.ISO_8601],a=i.extend({network:"rss",_getMediaFetchURLs:function(){var e=this.get("links").slice();return e.push(this.getPermalink()),t.uniq(e)},_getMediaExisting:function(){var e=this,n=t.map(this.get("raw_status").media,function(t){return new s({type:"photo",url:t.url,link:e.get("formatted_permalink"),height:t.height,width:t.width})});return n},_prettifyText:function(e){var n=r.extractUrlsWithIndices(e);r.removeOverlappingEntities(n);var s=t.extend({},i.AUTOLINK_DEFAULTS,{urlClass:i.AUTOLINK_DEFAULTS.urlClass+"status-url-rss"}),u=r.autoLinkEntities(e,n,s);return o.normalizeLineBreaks(o.trim(u),2,"<br />")},_updateFormattedCounts:function(){},_getPermalink:function(){return/^(?:https?:)?\/\//i.test(this.get("guid"))?this.get("guid"):this.get("link")||"#"},_getCreateDate:function(){var e=this.get("pub_date"),t=n(e,u);return t.isValid()||(t=n(e)),t},_getText:function(){var e=this.get("description")||this.get("title")||"";if(/</g.test(e)&&/>/.test(e)){var t=document.createElement("div");t.innerHTML=e,e=o.getNodeText(t)}return e},_getName:function(){return this.get("author")},_getPlace:t.constant(null),_getAvatarURL:t.constant(""),_getProfileURL:t.constant("")});return a}),n("massrel-js-backbone/lib/TwitterStatusModel",["require","lodash","massrel-js","moment","twitter-text","./StatusModel","./MediaModel","./util","./embedly"],function(e){var t=e("lodash"),n=e("massrel-js"),r=e("moment"),i=e("twitter-text"),s=e("./StatusModel"),o=e("./MediaModel"),u=e("./util"),a=e("./embedly"),f="ddd MMM DD HH:mm:ss ZZ YYYY",l=/https?:\/\/video.twimg.com\/ext_tw_video\/.*?\/pu\/vid\/(.*?)x(.*?)\/.*?.mp4/,c=s.extend({network:"twitter",defaults:t.extend({},s.prototype.defaults,{intent_original_referer:"@spredfast",intent_url_favorite:"",intent_url_reply:"",intent_url_retweet:"",intent_url_user:"",formatted_date_format:"short",is_retweet:!1}),initialize:function(){s.prototype.initialize.apply(this,arguments),this.on("change:intent_original_referer",this._generateIntentURLs),this._generateIntentURLs()},parse:function(e){var n=t.cloneDeep(e);if(e.retweeted_status){var r=t.cloneDeep(e.retweeted_status),i=t.omit(e,"retweeted_status");t(i).each(function(e,n){t.has(r,n)||(r[n]=e,delete i[n])}),r.retweeting_status=i,r.is_retweet=!0,e=r}var o=s.prototype.parse.call(this,e);return o.raw_status=n,o},_getPlace:function(){if(this.has("place_bounding_box_coordinates")){var e=this.has("place_name")?{name:this.get("place_name")}:null,n=this.get("place_bounding_box_coordinates")[0];if(!n||n.length!==4)return null;var r=(parseFloat(n[0][0],10)+parseFloat(n[1][0],10))/2,i=(parseFloat(n[0][1],10)+parseFloat(n[2][1],10))/2;return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[r,i]}}}if(this.has("geo_type")){var s=this.get("place_full_name"),o=s?{name:s}:null;return{type:"Feature",properties:o,geometry:{type:"Point",coordinates:t.cloneDeep(this.get("coordinates_coordinates"))}}}return this.get("user_location")?{type:"Feature",properties:{name:this.get("user_location")},geometry:null}:null},_getCreateDate:function(){return r(this.get("created_at"),f)},_getText:function(){if(this.get("full_text")){var e=this.get("display_text_range"),t=u.arrayFrom(this.get("full_text"));return t=t.slice(0,e[1]),t.join("")}return this.get("text")},_getMediaFetchURLs:function(){return t.pluck(this.get("entities_urls"),"expanded_url")},_parseMediaPhoto:function(e){var n=t(e.sizes).map(function(e,n){return t.extend({},e,{name:n})}).sortBy(function(e){return-(e.w*e.h)}).value();if(n.length===0)return null;var r=n[0],i=n[n.length-1],s=u.protocolRelativize(e.media_url);return new o({type:"photo",url:s+":"+r.name,link:this.get("formatted_permalink"),width:r.w,height:r.h,thumbnail_url:s+":"+i.name,thumbnail_width:i.w,thumbnail_height:i.h,provider_name:"Twitter",author_name:this.get("user_screen_name"),author_url:"//twitter.com/"+this.get("user_screen_name"),sizes:t.map(n.slice(1),function(e){return{url:s+":"+e.name,width:e.w,height:e.h,thumbnail_url:s+":"+i.name,thumbnail_width:i.w,thumbnail_height:i.h}})})},_parseMediaVideo:function(e){var n=t(e.sizes).map(function(e,n){return t.extend({},e,{name:n})}).sortBy(function(e){return-(e.w*e.h)}).value();if(n.length===0)return null;var r=n[0],i=u.protocolRelativize(e.media_url),s=t(e.video_info.variants).filter(function(e){return e.content_type==="video/mp4"}).map(function(e){var t=r.w,n=r.h,i=l.exec(e.url);return i&&(t=parseInt(i[1],10),n=parseInt(i[2],10)),{url:e.url,w:t,h:n}}).sortBy(function(e){return e.h*e.w}).reverse().value();if(s.length===0)return null;var f=s[0],c={video:f.url,image:i+":"+r.name,url:this.get("formatted_permalink")};return e.type==="animated_gif"&&(c.loop="1"),new o({type:"video",url:f.url,link:this.get("formatted_permalink"),html:a.widget(c),width:f.w,height:f.h,thumbnail_url:i+":"+r.name,thumbnail_width:r.w,thumbnail_height:r.h,provider_name:"Twitter",author_name:this.get("user_screen_name"),author_url:"//twitter.com/"+this.get("user_screen_name"),sizes:t.map(s.slice(1),function(e){return{url:e.url,html:a.widget(t.extend({},c,{video:e.url})),width:e.w,height:e.h}})})},_getMediaExisting:function(){var e=this.get("extended_entities_media");if(!e||e.length===0)e=this.get("entities_media")||[];var n=t.map(e,function(e){var t=null;return e.type==="photo"?t=this._parseMediaPhoto(e):e.type==="video"||e.type==="animated_gif"?t=this._parseMediaVideo(e):window.console&&window.console.warn&&window.console.warn("Unrecognized Twitter media entity type: "+e.type,e,this.toJSON()),t},this);return t.compact(n)},_prettifyText:function(e){var n=this.get("entities_urls")||[],r=this.get("entities_media")||[],o=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-twitter",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-twitter",usernameClass:s.AUTOLINK_DEFAULTS.usernameClass+"status-username-twitter",listClass:s.AUTOLINK_DEFAULTS.listClass+"status-list-twitter",cashtagClass:s.AUTOLINK_DEFAULTS.cashtagClass+"status-cashtag-twitter",urlEntities:n.concat(r)}),a=i.autoLink(e,o);return u.normalizeLineBreaks(u.trimHTML(a),null,"<br />")},_getName:function(){return this.get("user_name")},_getPermalink:function(){return"//twitter.com/"+this.get("user_screen_name")+"/status/"+this.get("id_str")},_getAvatarURL:function(e){var t=this.get("user_screen_name");return u.getAvatarProxyURL("twitter",t,e)},_getProfileURL:function(){return"//www.twitter.com/"+this.get("user_screen_name")},_updateFormattedCounts:function(){this.set("formatted_retweet_count",this._convertNumberToAbbreviatedFormat(this.get("retweet_count"))),this.set("formatted_user_followers_count",this._convertNumberToAbbreviatedFormat(this.get("user_followers_count"))),this.set("formatted_user_statuses_count",this._convertNumberToAbbreviatedFormat(this.get("user_statuses_count"))),this.set("formatted_favorite_count",this._convertNumberToAbbreviatedFormat(this.get("favorite_count")))},_generateIntentURLs:function(){var e=this.get("id_str"),r=this.get("user_screen_name"),i={original_referer:this.get("intent_original_referer")},s=u.protocolRelativize;return this.set({intent_url_favorite:s(n.intents.favorite(e,t.clone(i))),intent_url_reply:s(n.intents.reply(e,t.clone(i))),intent_url_retweet:s(n.intents.retweet(e,t.clone(i))),intent_url_user:s(n.intents.user(r,t.clone(i)))}),this}});return c}),n("massrel-js-backbone/lib/YouTubeVideoStatusModel",["require","lodash","moment","twitter-text","./StatusModel","./MediaModel","./util"],function(e){var t=e("lodash"),n=e("moment"),r=e("twitter-text"),i=e("./StatusModel"),s=e("./MediaModel"),o=e("./util"),u=i.extend({network:"youtube",defaults:t.extend({},i.prototype.defaults,{formatted_date_format:"short",duration:null,duration_pretty:""}),initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("change:contentDetails_duration",this._parseDuration),this._parseDuration()},parse:function(e){var n=t.cloneDeep(e),r=t.cloneDeep(n);r.title=e.snippet.title;var s=i.prototype.parse.call(this,r);return s.raw_status=n,s},_getMediaFetchURLs:function(){return["//youtu.be/"+this.get("youtube_video_id")]},_getMediaExisting:function(){var e=t(this.get("raw_status").snippet.thumbnails).map(function(e){return{url:e.url,width:e.width,height:e.height}}).sortBy(function(e){return-s.calculateSize(e)}).value(),n=e.shift(),r=e[e.length-1];return[new s({type:"photo",url:n.url,link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:r.url,thumbnail_width:r.width,thumbnail_height:r.height,provider_name:"YouTube",sizes:e})]},_prettifyText:function(e){var n=r.extractUrlsWithIndices(e);r.removeOverlappingEntities(n);var s=t.extend({},i.AUTOLINK_DEFAULTS,{urlClass:i.AUTOLINK_DEFAULTS.urlClass+"status-url-youtube"}),u=r.autoLinkEntities(e,n,s);return o.normalizeLineBreaks(o.trim(u),2,"<br />")},_updateFormattedCounts:function(){},_getPermalink:function(){return"//youtu.be/"+this.get("youtube_video_id")},_getCreateDate:function(){var e=this.get("snippet_publishedAt"),t=n(e,n.ISO_8601);return t},_getText:function(){return this.get("snippet_description")},_getName:function(){return this.get("snippet_channelTitle")},_getPlace:t.constant(null),_getAvatarURL:t.constant(""),_getProfileURL:function(){return"//youtube.com/channel/"+this.get("snippet_channelId")},_parseDuration:function(){var e=n.duration(this.get("contentDetails_duration"));this.set("duration",e);var t=":"+o.padLeft(e.get("seconds"),2);e.get("hours")?t=e.get("hours")+":"+o.padLeft(e.get("minutes"),2)+t:t=e.get("minutes")+t,this.set("duration_pretty",t)}});return u}),n("massrel-js-backbone/lib/createStatus",["require","lodash","./FacebookStatusModel","./GooglePlusStatusModel","./InstagramStatusModel","./RSSStatusModel","./TwitterStatusModel","./YouTubeVideoStatusModel"],function(e){var t=e("lodash"),n=e("./FacebookStatusModel"),r=e("./GooglePlusStatusModel"),i=e("./InstagramStatusModel"),s=e("./RSSStatusModel"),o=e("./TwitterStatusModel"),u=e("./YouTubeVideoStatusModel"),a=t.reduce([n,r,i,s,o,u],function(e,t){return e[t.prototype.network]=t,e},{});return function(e){if(!(e&&e.network&&t.has(a,e.network))){var n=new TypeError("No constructor found for the given data");throw n.data=e,n}var r=a[e.network];return new r(e)}}),n("massrel-js-backbone/lib/StreamPoller",["require","./backbone","q","lodash","./createStatus","massrel-js"],function(e){var t=e("./backbone"),n=e("q"),r=e("lodash"),i=e("./createStatus"),s=e("massrel-js"),o=t.Model.extend({defaults:{stream_name:"",polling:!1},initialize:function(){this._processors=[],this.poller=this._createPoller(),this.on("change:stream_name",this._updatePoller)},start:function(){return this.get("stream_name")&&(this.poller.start(),this.set("polling",!0)),this},stop:function(){return this.poller.stop(),this.set("polling",!1),this},more:function(){return this.trigger("more:loading"),this.poller.more(r.bind(this._handleMore,this)),this},process:function(e){if(!r.isFunction(e))throw new TypeError("`processorFunction` must be a function");return this._processors.push(e),this},_createPoller:function(){var e=new s.Stream(this.get("stream_name")),t=e.poller(this.toJSON());return t.data(r.once(r.bind(this._handleEmpty,this))),t.data(r.bind(this._handleBatch,this)),t},_updatePoller:function(){var e=this.get("polling");return this.poller.stop(),this.poller=this._createPoller(),this.trigger("poller:update"),e&&this.poller.start(),this},_processStatuses:function(e){var t=this,s=r(e).map(function(e){try{var n=i(e);return t.trigger("status:pre-process",n),n}catch(r){t.trigger("error:invalid-status",r)}}).compact().map(function(e){var i=r.map(t._processors,function(t){var r=n.defer();return t.call(null,e,r),r.promise}),s=n.defer();return i.length!==0?n.all(i).then(function(){t.trigger("status",e),s.resolve(e)}).fail(function(n){t.trigger("status:rejected",e,n),s.reject(n)}).done():(t.trigger("status",e),s.resolve(e)),s.promise}).value(),o=n.defer();return n.allSettled(s).done(function(e){var t=r(e).filter(function(e){return e.state==="fulfilled"}).pluck("value").value();o.resolve(t)}),o.promise},_handleData:function(e,t){this.trigger(t.raw,e);if(!e||e.length===0)this.trigger(t.empty);else{var n=this;this._processStatuses(e).done(function(e){n.trigger(t.processed,e)})}return this},_handleBatch:function(e){return this._handleData(e,{raw:"raw:batch",empty:"batch:empty",processed:"batch"}),this},_handleMore:function(e){return this._handleData(e,{raw:"raw:more",empty:"more:end",processed:"more"}),this},_handleEmpty:function(e){return(!e||e.length===0)&&this.trigger("empty"),this}});return o}),n("massrel-js-backbone/lib/ComparePoller",["require","./backbone"],function(e){var t=e("./backbone"),n="massrel-js";return t.Model.extend({defaults:function(){return{streams:[],frequency:20}},initialize:function(){var e=this.toJSON();this.compare=new n.Compare(e.streams),this.poller=this.compare.poller(e)},start:function(){var e=this;this.get("streams")&&this.get("streams").length>0&&(e.set("loading",!0),e.poller.data(function(t){e.set("data",t),e.set("loading",!1)}),e.poller.start())},stop:function(){this.poller.stop()}})}),n("massrel-js-backbone/lib/MetaPoller",["require","./backbone","massrel-js"],function(e){var t=e("./backbone"),n=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",disregard:"",frequency:20,loading:!1,activity:{},count:{},networks:{}}},initialize:function(){var e=this,t=e.toJSON();e.stream=new n.Stream(t.stream_name),e.poller=e.stream.metaPoller(t)},start:function(){var e=this;this.get("stream_name")&&(e.set("loading",!0),e.poller.data(function(t){e.set(t),e.set("loading",!1)}),e.poller.start())},stop:function(){var e=this;e.poller.stop()}})}),n("massrel-js-backbone/lib/TopThingsPoller",["require","./backbone","lodash","massrel-js"],function(e){var t=e("./backbone"),n=e("lodash"),r=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,frequency:20,resolution:"1h",start:"-1h",finish:"",thing:"",limit:50,loading:!1,data:{}}},start:function(){this.stop();if(this.get("stream_name")){var e=n.pick(this.toJSON(),["tweet_mode","thing","resolution","start","finish","limit","stream_name"]);this.stream=new r.Stream(e.stream_name),this.poller=this.stream.topThingsPoller(e),this.set("loading",!0),this.poller.data(n.bind(function(e){this.set("data",e),this.set("loading",!1)},this)),this.poller.start()}},stop:function(){this.poller&&this.poller.stop()}})}),n("massrel-js-backbone/lib/processors",["require","./util","lodash"],function(e){var t=e("./util"),n=e("lodash"),r=function(e,n,r,i){e.once("media-fetch",function(){var s=e.get("media").at(0);s&&s.get("type")==="photo"?t.loadImage(s.get("url"),i).then(function(){n.resolve()}).fail(function(e){n.reject(e)}).done():r?n.resolve():n.reject(new Error("No media or non-photo as first media item"))}),e.fetchMedia()},i=function(e){return function(r,i){var s=r.get("additional_classes");s+=" status-style-"+e,r.set("additional_classes",t.trim(s).replace(/\s+/g," ")),i.resolve()}},s=function(e){return function(r,i){var s=r.get("additional_classes"),o;e?o=new RegExp("(^|\\s+)status-style-"+e+"\\b","g"):o=/(^|\s+)status-style-[A-Za-z0-9-]+\b/g,s=s.replace(o,""),r.set("additional_classes",t.trim(s).replace(/\s+/g," ")),i.resolve()}},o=function(e,t){e.once("media-fetch",function(){e.get("media").each(function(e){e.set("autoplay",!0)})}),t.resolve()},u=function(e,t){e.once("media-fetch error:media-fetch",function(){t.resolve()}),e.fetchMedia()},a=function(e,n,r){e.once("media-fetch",function(){var i=e.get("media").at(0);if(i){var s;i.get("type")==="photo"?s=i.get("url"):i.get("thumbnail_url")&&(s=i.get("thumbnail_url")),t.loadImage(s,r).fin(function(){n.resolve()}).done()}else n.resolve()}),e.fetchMedia()},f=function(e,t){e.once("media-fetch",function(){e.get("media").each(function(e){e.set("loop_video",!0)})}),t.resolve()},l=function(e){return function(t,r){t.once("media-fetch",function(){var i=t.get("media").filter(function(t){return!n.contains(e,t.get("type"))});t.get("media").remove(i),r.resolve()}),t.fetchMedia()}},c=function(e,t){e.once("media-fetch",function(){e.get("media").length>0?t.resolve():t.reject(new Error("Status has no media."))}),e.fetchMedia()},h=function(e,t){e.once("media-fetch",function(){e.get("media").length>0?e.get("media").at(0).get("type")==="video"||e.get("media").at(0).get("type")==="photo"?t.resolve():t.reject(new Error("Media is not of type photo or video")):t.reject(new Error("Status has no media."))}),e.fetchMedia()},p=function(e,t){e._getMediaFetchURLs().length===0&&e._getMediaExisting().length===0?t.resolve():t.reject(new Error("Status has media."))},d=function(e,t){var n=e.getText()||"";n.replace(/^\s+|\s+$/g,"")?t.resolve():t.reject(new Error("Status has no non-whitespace text"))},v=function(e,t,n){return r(e,t,!1,n)},m=function(e,t,n){return r(e,t,!0,n)};return{addStyleClass:i,autoplayMedia:o,fetchMedia:u,loopVideoMedia:f,preloadImage:a,removeStyleClass:s,removeMediaIfNotType:l,rejectIfNoMedia:c,rejectIfMediaNotPhotoOrVideo:h,rejectIfMedia:p,rejectIfNoText:d,allowOnlyValidPhoto:v,rejectIfInvalidPhoto:m}}),n("massrel-js-backbone/main",["require","./lib/StreamPoller","./lib/ComparePoller","./lib/MetaPoller","./lib/TopThingsPoller","./lib/StatusModel","./lib/TwitterStatusModel","./lib/FacebookStatusModel","./lib/GooglePlusStatusModel","./lib/InstagramStatusModel","./lib/RSSStatusModel","./lib/processors","./lib/MediaCollection","./lib/MediaModel","./lib/createStatus","massrel-js"],function(e){var t=e("./lib/StreamPoller"),n=e("./lib/ComparePoller"),r=e("./lib/MetaPoller"),i=e("./lib/TopThingsPoller"),s=e("./lib/StatusModel"),o=e("./lib/TwitterStatusModel"),u=e("./lib/FacebookStatusModel"),a=e("./lib/GooglePlusStatusModel"),f=e("./lib/InstagramStatusModel"),l=e("./lib/RSSStatusModel"),c=e("./lib/processors"),h=e("./lib/MediaCollection"),p=e("./lib/MediaModel"),d=e("./lib/createStatus"),v=e("massrel-js");return{ComparePoller:n,MetaPoller:r,StreamPoller:t,TopThingsPoller:i,StatusModel:s,FacebookStatusModel:u,GooglePlusStatusModel:a,InstagramStatusModel:f,RSSStatusModel:l,TwitterStatusModel:o,MediaCollection:h,MediaModel:p,processors:c,createStatus:d,massrel:v}}),n("massrel-js-backbone",["massrel-js-backbone/main"],function(e){return e}),function(e,t,r,i){function c(e,t,n){return setTimeout(g(e,n),t)}function h(e,t,n){return Array.isArray(e)?(p(e,n[t],n),!0):!1}function p(e,t,n){var r;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==i){r=0;while(r<e.length)t.call(n,e[r],r,e),r++}else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function d(e,t,n){var r=Object.keys(t),s=0;while(s<r.length){if(!n||n&&e[r[s]]===i)e[r[s]]=t[r[s]];s++}return e}function v(e,t){return d(e,t,!0)}function m(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&d(i,n)}function g(e,t){return function(){return e.apply(t,arguments)}}function y(e,t){return typeof e==u?e.apply(t?t[0]||i:i,t):e}function b(e,t){return e===i?t:e}function w(e,t,n){p(T(t),function(t){e.addEventListener(t,n,!1)})}function E(e,t,n){p(T(t),function(t){e.removeEventListener(t,n,!1)})}function S(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function x(e,t){return e.indexOf(t)>-1}function T(e){return e.trim().split(/\s+/g)}function N(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){var r=[],i=[],s=0;while(s<e.length){var o=t?e[s][t]:e[s];N(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(t?r=r.sort(function(n,r){return n[t]>r[t]}):r=r.sort()),r}function L(e,t){var n,r,o=t[0].toUpperCase()+t.slice(1),u=0;while(u<s.length){n=s[u],r=n?n+o:t;if(r in e)return r;u++}return i}function O(){return A++}function M(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function tt(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){y(e.options.enable,[e])&&n.handler(t)},this.init()}function nt(e){var t,n=e.options.inputClass;return n?t=n:P?t=xt:H?t=Mt:D?t=Dt:t=yt,new t(e,rt)}function rt(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&R&&r-i===0,o=t&(z|W)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,it(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function it(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=ut(t)),i>1&&!n.firstMultiple?n.firstMultiple=ut(t):i===1&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,a=t.center=at(r);t.timeStamp=l(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=ht(u,a),t.distance=ct(u,a),st(n,t),t.offsetDirection=lt(t.deltaX,t.deltaY),t.scale=o?dt(o.pointers,r):1,t.rotation=o?pt(o.pointers,r):0,ot(n,t);var f=e.element;S(t.srcEvent.target,f)&&(f=t.srcEvent.target),t.target=f}function st(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};if(t.eventType===R||s.eventType===z)i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y};t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function ot(e,t){var n=e.lastInterval||t,r=t.timeStamp-n.timeStamp,s,o,u,a;if(t.eventType!=W&&(r>q||n.velocity===i)){var l=n.deltaX-t.deltaX,c=n.deltaY-t.deltaY,h=ft(r,l,c);o=h.x,u=h.y,s=f(h.x)>f(h.y)?h.x:h.y,a=lt(l,c),e.lastInterval=t}else s=n.velocity,o=n.velocityX,u=n.velocityY,a=n.direction;t.velocity=s,t.velocityX=o,t.velocityY=u,t.direction=a}function ut(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:a(e.pointers[n].clientX),clientY:a(e.pointers[n].clientY)},n++;return{timeStamp:l(),pointers:t,center:at(t),deltaX:e.deltaX,deltaY:e.deltaY}}function at(e){var t=e.length;if(t===1)return{x:a(e[0].clientX),y:a(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:a(n/t),y:a(r/t)}}function ft(e,t,n){return{x:t/e||0,y:n/e||0}}function lt(e,t){return e===t?X:f(e)>=f(t)?e>0?V:$:t>0?J:K}function ct(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ht(e,t,n){n||(n=Z);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function pt(e,t){return ht(t[1],t[0],et)-ht(e[1],e[0],et)}function dt(e,t){return ct(t[0],t[1],et)/ct(e[0],e[1],et)}function yt(){this.evEl=mt,this.evWin=gt,this.allow=!0,this.pressed=!1,tt.apply(this,arguments)}function xt(){this.evEl=Et,this.evWin=St,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function kt(){this.evTarget=Nt,this.evWin=Ct,this.started=!1,tt.apply(this,arguments)}function Lt(e,t){var n=C(e.touches),r=C(e.changedTouches);return t&(z|W)&&(n=k(n.concat(r),"identifier",!0)),[n,r]}function Mt(){this.evTarget=Ot,this.targetIds={},tt.apply(this,arguments)}function _t(e,t){var n=C(e.touches),r=this.targetIds;if(t&(R|U)&&n.length===1)return r[n[0].identifier]=!0,[n,n];var i,s,o=C(e.changedTouches),u=[],a=this.target;s=n.filter(function(e){return S(e.target,a)});if(t===R){i=0;while(i<s.length)r[s[i].identifier]=!0,i++}i=0;while(i<o.length)r[o[i].identifier]&&u.push(o[i]),t&(z|W)&&delete r[o[i].identifier],i++;if(!u.length)return;return[k(s.concat(u),"identifier",!0),u]}function Dt(){tt.apply(this,arguments);var e=g(this.handler,this);this.touch=new Mt(this.manager,e),this.mouse=new yt(this.manager,e)}function Ut(e,t){this.manager=e,this.set(t)}function zt(e){if(x(e,It))return It;var t=x(e,qt),n=x(e,Rt);return t&&n?qt+" "+Rt:t||n?t?qt:Rt:x(e,Ft)?Ft:jt}function Gt(e){this.id=O(),this.manager=null,this.options=v(e||{},this.defaults),this.options.enable=b(this.options.enable,!0),this.state=Wt,this.simultaneous={},this.requireFail=[]}function Yt(e){return e&Kt?"cancel":e&$t?"end":e&Vt?"move":e&Xt?"start":""}function Zt(e){return e==K?"down":e==J?"up":e==V?"left":e==$?"right":""}function en(e,t){var n=t.manager;return n?n.get(e):e}function tn(){Gt.apply(this,arguments)}function nn(){tn.apply(this,arguments),this.pX=null,this.pY=null}function rn(){tn.apply(this,arguments)}function sn(){Gt.apply(this,arguments),this._timer=null,this._input=null}function on(){tn.apply(this,arguments)}function un(){tn.apply(this,arguments)}function an(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function fn(e,t){return t=t||{},t.recognizers=b(t.recognizers,fn.defaults.preset),new hn(e,t)}function hn(e,t){t=t||{},this.options=v(t,fn.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=nt(this),this.touchAction=new Ut(this,this.options.touchAction),pn(this,!0),p(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pn(e,t){var n=e.element;p(e.options.cssProps,function(e,r){n.style[L(n.style,r)]=t?e:""})}function dn(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var s=["","webkit","moz","MS","ms","o"],o=t.createElement("div"),u="function",a=Math.round,f=Math.abs,l=Date.now,A=1,_=/mobile|tablet|ip(ad|hone|od)|android/i,D="ontouchstart"in e,P=L(e,"PointerEvent")!==i,H=D&&_.test(navigator.userAgent),B="touch",j="pen",F="mouse",I="kinect",q=25,R=1,U=2,z=4,W=8,X=1,V=2,$=4,J=8,K=16,Q=V|$,G=J|K,Y=Q|G,Z=["x","y"],et=["clientX","clientY"];tt.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(M(this.element),this.evWin,this.domHandler)}};var vt={mousedown:R,mousemove:U,mouseup:z},mt="mousedown",gt="mousemove mouseup";m(yt,tt,{handler:function(t){var n=vt[t.type];n&R&&t.button===0&&(this.pressed=!0),n&U&&t.which!==1&&(n=z);if(!this.pressed||!this.allow)return;n&z&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:F,srcEvent:t})}});var bt={pointerdown:R,pointermove:U,pointerup:z,pointercancel:W,pointerout:W},wt={2:B,3:j,4:F,5:I},Et="pointerdown",St="pointermove pointerup pointercancel";e.MSPointerEvent&&(Et="MSPointerDown",St="MSPointerMove MSPointerUp MSPointerCancel"),m(xt,tt,{handler:function(t){var n=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),s=bt[i],o=wt[t.pointerType]||t.pointerType,u=o==B,a=N(n,t.pointerId,"pointerId");s&R&&(t.button===0||u)?a<0&&(n.push(t),a=n.length-1):s&(z|W)&&(r=!0);if(a<0)return;n[a]=t,this.callback(this.manager,s,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(a,1)}});var Tt={touchstart:R,touchmove:U,touchend:z,touchcancel:W},Nt="touchstart",Ct="touchstart touchmove touchend touchcancel";m(kt,tt,{handler:function(t){var n=Tt[t.type];n===R&&(this.started=!0);if(!this.started)return;var r=Lt.call(this,t,n);n&(z|W)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:B,srcEvent:t})}});var At={touchstart:R,touchmove:U,touchend:z,touchcancel:W},Ot="touchstart touchmove touchend touchcancel";m(Mt,tt,{handler:function(t){var n=At[t.type],r=_t.call(this,t,n);if(!r)return;this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:B,srcEvent:t})}}),m(Dt,tt,{handler:function(t,n,r){var i=r.pointerType==B,s=r.pointerType==F;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(z|W)&&(this.mouse.allow=!0),this.callback(t,n,r)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pt=L(o.style,"touchAction"),Ht=Pt!==i,Bt="compute",jt="auto",Ft="manipulation",It="none",qt="pan-x",Rt="pan-y";Ut.prototype={set:function(e){e==Bt&&(e=this.compute()),Ht&&(this.manager.element.style[Pt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return p(this.manager.recognizers,function(t){y(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),zt(e.join(" "))},preventDefaults:function(e){if(Ht)return;var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,i=x(r,It),s=x(r,Rt),o=x(r,qt);if(i||s&&n&Q||o&&n&G)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Wt=1,Xt=2,Vt=4,$t=8,Jt=$t,Kt=16,Qt=32;Gt.prototype={defaults:{},set:function(e){return d(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(h(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=en(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return h(e,"dropRecognizeWith",this)?this:(e=en(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(h(e,"requireFailure",this))return this;var t=this.requireFail;return e=en(e,this),N(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(h(e,"dropRequireFailure",this))return this;e=en(e,this);var t=N(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function r(r){t.manager.emit(t.options.event+(r?Yt(n):""),e)}var t=this,n=this.state;n<$t&&r(!0),r(),n>=$t&&r(!0)},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Qt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(Qt|Wt)))return!1;e++}return!0},recognize:function(e){var t=d({},e);if(!y(this.options.enable,[this,t])){this.reset(),this.state=Qt;return}this.state&(Jt|Kt|Qt)&&(this.state=Wt),this.state=this.process(t),this.state&(Xt|Vt|$t|Kt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},m(tn,Gt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Xt|Vt),i=this.attrTest(e);if(r&&(n&W||!i))return t|Kt;if(r||i)return n&z?t|$t:t&Xt?t|Vt:Xt;return Qt}}),m(nn,tn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var e=this.options.direction,t=[];return e&Q&&t.push(Rt),e&G&&t.push(qt),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Q?(i=s===0?X:s<0?V:$,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=o===0?X:o<0?J:K,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return tn.prototype.attrTest.call(this,e)&&(this.state&Xt||!(this.state&Xt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Zt(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),m(rn,tn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Xt)},emit:function(e){this._super.emit.call(this,e);if(e.scale!==1){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),m(sn,Gt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[jt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(z|W)&&!i)this.reset();else if(e.eventType&R)this.reset(),this._timer=c(function(){this.state=Jt,this.tryEmit()},t.time,this);else if(e.eventType&z)return Jt;return Qt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==Jt)return;e&&e.eventType&z?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input))}}),m(on,tn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[It]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Xt)}}),m(un,tn,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Q|G,pointers:1},getTouchAction:function(){return nn.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(Q|G)?n=e.velocity:t&Q?n=e.velocityX:t&G&&(n=e.velocityY),this._super.attrTest.call(this,e)&&t&e.direction&&e.distance>this.options.threshold&&f(n)>this.options.velocity&&e.eventType&z},emit:function(e){var t=Zt(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),m(an,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;this.reset();if(e.eventType&R&&this.count===0)return this.failTimeout();if(r&&i&&n){if(e.eventType!=z)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||ct(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!o||!s?this.count=1:this.count+=1,this._input=e;var u=this.count%t.taps;if(u===0)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Jt,this.tryEmit()},t.interval,this),Xt):Jt}return Qt},failTimeout:function(){return this._timer=c(function(){this.state=Qt},this.options.interval,this),Qt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Jt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),fn.VERSION="2.0.4",fn.defaults={domEvents:!1,touchAction:Bt,enable:!0,inputTarget:null,inputClass:null,preset:[[on,{enable:!1}],[rn,{enable:!1},["rotate"]],[un,{direction:Q}],[nn,{direction:Q},["swipe"]],[an],[an,{event:"doubletap",taps:2},["tap"]],[sn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ln=1,cn=2;hn.prototype={set:function(e){return d(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?cn:ln},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;if(!i||i&&i.state&Jt)i=t.curRecognizer=null;var s=0;while(s<r.length)n=r[s],t.stopped!==cn&&(!i||n==i||n.canRecognizeWith(i))?n.recognize(e):n.reset(),!i&&n.state&(Xt|Vt|$t)&&(i=t.curRecognizer=n),s++},get:function(e){if(e instanceof Gt)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(h(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(h(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(N(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return p(T(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return p(T(e),function(e){t?n[e].splice(N(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&dn(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++},destroy:function(){this.element&&pn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},d(fn,{INPUT_START:R,INPUT_MOVE:U,INPUT_END:z,INPUT_CANCEL:W,STATE_POSSIBLE:Wt,STATE_BEGAN:Xt,STATE_CHANGED:Vt,STATE_ENDED:$t,STATE_RECOGNIZED:Jt,STATE_CANCELLED:Kt,STATE_FAILED:Qt,DIRECTION_NONE:X,DIRECTION_LEFT:V,DIRECTION_RIGHT:$,DIRECTION_UP:J,DIRECTION_DOWN:K,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:G,DIRECTION_ALL:Y,Manager:hn,Input:tt,TouchAction:Ut,TouchInput:Mt,MouseInput:yt,PointerEventInput:xt,TouchMouseInput:Dt,SingleTouchInput:kt,Recognizer:Gt,AttrRecognizer:tn,Tap:an,Pan:nn,Swipe:un,Pinch:rn,Rotate:on,Press:sn,on:w,off:E,each:p,merge:v,extend:d,inherit:m,bindFn:g,prefixed:L}),typeof n==u&&n.amd?n("hammerjs/hammer",[],function(){return fn}):typeof module!="undefined"&&module.exports?module.exports=fn:e[r]=fn}(window,document,"Hammer"),n("hammerjs",["hammerjs/hammer"],function(e){return e}),function(){var e={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return t;throw new Error("Could not find property '"+e+"'")});var n=Object.prototype.toString,r="[object Function]";e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse||function(){},o=i.fn,u=n.call(t);return u===r&&(t=t.call(this)),t===!0?o(this):t===!1||t==null?s(this):u==="[object Array]"?t.length>0?e.helpers.each(t,i):s(this):o(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(t,i){var s=n.call(t);return s===r&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})})(e);var t=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();e.Parser=t,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},function(){e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t},e.AST.BlockNode=function(t,n,r,i){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");var n=[],r=0;for(var i=0,s=t.length;i<s;i++){var o=t[i];if(o===".."||o==="."||o==="this"){if(n.length>0)throw new e.Exception("Invalid path: "+this.original);o===".."?r++:this.isScoped=!0}else n.push(o)}this.parts=n,this.string=n.join("."),this.depth=r,this.isSimple=t.length===1&&!this.isScoped&&r===0,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},e.AST.CommentNode=function(e){this.type="comment",this.comment=e}}();var r=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n=0;n<r.length;n++)this[r[n]]=t[r[n]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":r.test(t)?t.replace(n,i):t},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.prototype={compiler:t,disassemble:function(){var e=this.opcodes,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}t=this.children.length;if(e.children.length!==t)return!1;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var r=function(e){this.value=e};n.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,r,i){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s=t.opcodes,o;this.i=0;for(u=s.length;this.i<u;this.i++)o=s[this.i],o.opcode==="DECLARE"?this[o.name]=o.value:this[o.opcode].apply(this,o.args);return this.createFunctionContext(i)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild)for(var r in this.context.aliases)this.source[1]=this.source[1]+", "+r+"="+this.context.aliases[r];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var s=0,o=this.environment.depths.list.length;s<o;s++)i.push("depth"+this.environment.depths.list[s]);var u=this.mergeSource();if(!this.isChild){var a=e.COMPILER_REVISION,f=e.REVISION_CHANGES[a];u="this.compilerInfo = ["+a+",'"+f+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return e.log(e.logger.DEBUG,l+"\n\n"),l},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:n,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new r(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",n=this.isInline(),i;if(n){var s=this.popStack(!0);if(s instanceof r)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return n?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];i instanceof r?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof r?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof r?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),s=n.RESERVED_WORDS={};for(var o=0,u=i.length;o<u;o++)s[i[o]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1},e.precompile=function(r,i){if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s=e.parse(r),o=(new t).compile(s,i);return(new n).compile(o,i)},e.compile=function(r,i){function o(){var s=e.parse(r),o=(new t).compile(s,i),u=(new n).compile(o,i,undefined,!0);return e.template(u)}if(!r||typeof r!="string"&&r.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+r);i=i||{},"data"in i||(i.data=!0);var s;return function(e,t){return s||(s=o()),s.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(r,i){i=i||{};var s=t.call(n,e,r,i.helpers,i.partials,i.data),o=n.compilerInfo||[],u=o[0]||1,a=e.COMPILER_REVISION;if(u!==a){if(u<a){var f=e.REVISION_CHANGES[a],l=e.REVISION_CHANGES[u];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+f+") or downgrade your runtime to an older version ("+l+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+o[1]+")."}return s}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(t,n,r,i,s,o){var u={helpers:i,partials:s,data:o};if(t===undefined)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(r,u);if(!e.compile)throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode");return s[n]=e.compile(t,{data:o!==undefined}),s[n](r,u)}},e.template=e.VM.template}(e.Compiler,e.JavaScriptCompiler),n("handlebars/Handlebars",[],function(){return e})}(),n("handlebars",["handlebars/Handlebars"],function(e){return e}),n("hbs/hbs",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),n("hbs",["hbs/hbs"],function(e){return e}),n("hbs/hbs!templates/emptyTile",["hbs","handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+='\n    <img src="',(i=n.image)?i=i.call(e,{hash:{}}):(i=e.image,i=typeof i===u?i.apply(e):i),r+=a(i)+'"/>\n  ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div class="empty-tile">\n  ',o=n["if"].call(t,t.image,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=o;return s+='\n  <div class="copy">',(o=n.copy)?o=o.call(t,{hash:{}}):(o=t.copy,o=typeof o===u?o.apply(t):o),s+=a(o)+'</div>\n  <a class="link-to-photo" href="javascript:void(0)">',(o=n.linkCopy)?o=o.call(t,{hash:{}}):(o=t.linkCopy,o=typeof o===u?o.apply(t):o),s+=a(o)+"</a>\n</div>",s});return t.registerPartial("templates_emptyTile",n),n}),n("js/Carousel",["require","massrel-js-backbone","moment","jquery","hammerjs","lodash","hbs/hbs!../templates/emptyTile"],function(e){function u(e){var n=this,i={limit:27,frequency:36,initial:{limit:30},tweet_mode:"extended",embed_media:!0,page_links:!1,products:MR.templateConfig.settings.behavior.filter_by_product_url?MR.getProductUrls():null};return n.config=r.extend({},i,e),n.$el=r("#carousel"),n.$=function(e){return n.$el.find(e)},n.$frame=n.$(".carousel-slider-frame"),n.$slider=n.$(".carousel-slider"),n.page_index=0,n.index=1,n.allStatuses=[],n.history=[],n.more=[],n.modalQueue=[],n.slide=n.config.slide,n.poller=new t.StreamPoller(n.config),n.poller.process(t.processors.rejectIfNoMedia),n.poller.process(t.processors.fetchMedia),n.poller.process(t.processors.addStyleClass("status-styles-media-tile")),n.poller.process(function(e,t){e.once("media-fetch",function(){if(MR.templateConfig.settings.media_type==="both")return t.resolve();var n=e.get("media").filter(function(e){return MR.templateConfig.settings.media_type==="photos"?e.get("type")!=="photo":e.get("type")!=="video"});e.get("media").remove(n),t.resolve()})}),n.poller.on("batch",s.bind(n.handlePoll,this)),n.poller.on("more",s.bind(n.handleMore,this)),n.poller.on("more:end",s.bind(n.hideArrow,this)),n.poller.on("more:end",s.bind(n.noMoreContent,this)),n.poller.on("empty",s.bind(n.emptyStream,this)),n.poller.start(),n.eventHandler(),n}var t=e("massrel-js-backbone"),n=e("moment"),r=e("jquery"),i=e("hammerjs"),s=e("lodash"),o=e("hbs/hbs!../templates/emptyTile");u.prototype.getColumns=function(){return r(window).width()<=this.config.mobileBreakpoint?this.slide.mobileCols:this.slide.cols},u.prototype.eventHandler=function(){var e=this,t,n;t=function(t){t.preventDefault(),e.previousPage()},n=function(t){t.preventDefault(),e.nextPage()},setTimeout(function(){e.$el.show(),e.resizeSlides(),s.delay(function(){e.resizeSlides()},100),r(window).bind("resize",function(){e.resizeSlides()}),r("html").on("keydown",s.throttle(function(t){var n={left:37,right:39};t.which===n.left?e.previousPage():t.which===n.right&&e.nextPage()},25,{leading:!0}))},500),e.$el.on("click",".carousel-button-previous",t),e.$el.on("click",".carousel-button-next",n);var o=new i(r("#carousel")[0]);o.get("swipe").set({threshold:5,velocity:.1}),o.on("swiperight",t).on("swipeleft",n)},u.prototype.resizeSlides=function(){var e=this,t=e.$frame.innerWidth();e.$el.attr("data-rows",e.slide.rows),e.poller.poller.opts.limit=e.slide.rows*e.getColumns()*3,e.slide.width=Math.round(t/e.getColumns()),e.redraw()},u.prototype.redraw=function(){var e=this;if(MR.templateConfig.settings.behavior.loop){var t=e.$slider.find(".status"),n={};t.each(function(e,t){n[r(this).attr("data-entity-id")]?r(this).remove():n[r(this).attr("data-entity-id")]=!0})}var i=e.$slider.find(".status").clone(!0).sort(function(e,t){return r(e).attr("data-timestamp")-r(t).attr("data-timestamp")}),s=Math.floor(i.length/e.slide.rows),o,u;e.$slider.empty(),e.index=1,r("#carousel").height(e.slide.width);if(s){e.$el.removeClass("carousel-animate");for(o=0;o<s;o+=1){var a=r("<div>").addClass("carousel-slide");for(u=0;u<e.slide.rows;u+=1){var f=i.get(0);i.splice(0,1),a.prepend(f)}e.$slider.width(e.index*e.slide.width),e.$slider.prepend(a),a.css({width:e.slide.width,height:e.slide.width,opacity:1}),e.index+=1}e.page_index=0,e.$slider.css("margin-left",-(e.slide.width*e.page_index)),e.page_index===0?e.$el.addClass("carousel-at-start"):e.$el.removeClass("carousel-at-end carousel-at-start"),e.start||(e.start=!0,e.$el.addClass("carousel-animate"))}else e.emptyStream()};var a=function(e){var t=this;e.model.get("isMedia")&&e.render().$el.on("click",function(){MR.analytics.trackEvent({category:"viz:expand",action:"photo",label:e.model.get("entity_id")}),MR.ENV.instance.trigger("#template:showModal",{model:e.model,queue:t.modalQueue})})};return u.prototype.prependSlides=function(){var e=this,t=Math.floor(e.history.length/e.slide.rows),n,i;if(t){e.$slider.removeClass("animate"),e.$slider.width((e.index+t)*e.slide.width);var o=parseInt(e.$slider.css("margin-left"),10)-e.slide.width*t;e.$slider.css("margin-left",o);for(n=0;n<t;n+=1){var u=r("<div>").addClass("carousel-slide"),f=[];for(i=0;i<e.slide.rows;i+=1){var l=e.history.shift();f.push(l),u.prepend(l.render().$el)}e.$slider.prepend(u),u.css("width",e.slide.width),u.css("height",e.slide.width),u.css("opacity",1),s.each(f,s.bind(a,e)),e.index+=1}e.start&&s.delay(function(){e.$slider.addClass("animate"),window.Modernizr.csstransitions?e.$slider.css("margin-left",0):e.$slider.animate({"margin-left":0},"slow","swing")},1e3),e.start||(e.start=!0,e.$slider.css("margin-left",0),e.$slider.addClass("animate"),e.$el.addClass("carousel-animate"),t>e.getColumns()&&e.$el.removeClass("carousel-at-end")),e.loadMoreIfNeeded()}},u.prototype.loadMoreIfNeeded=function(){var e=this.index-1;this.page_index+this.getColumns()*3>=e&&(this.endOfData||this.poller.more())},u.prototype.appendSlides=function(){var e=this,t=e.more.length,n;if(t)for(n=0;n<t;n+=1){var i=r("<div>").addClass("carousel-slide"),o=[],u=e.more.shift();o.push(u),i.prepend(u.render().$el),e.$slider.width(e.index*e.slide.width),e.$slider.append(i),i.css({width:e.slide.width,height:e.slide.width,opacity:1}),s.each(o,s.bind(a,e)),e.index+=1}this.loadMoreIfNeeded()},u.prototype.previousPage=function(){MR.analytics.trackEvent({category:"viz:toggle",action:"carousel",label:"left"});var e=this;e.page_index=Math.max(e.page_index-e.getColumns(),0),e.page_index===0?(e.$el.addClass("carousel-at-start").removeClass("carousel-at-end"),e.poller.start()):e.$el.removeClass("carousel-at-end carousel-at-start"),window.Modernizr.csstransitions?e.$slider.css("margin-left",-(e.slide.width*e.page_index)):e.$slider.animate({"margin-left":-(e.slide.width*e.page_index)},"slow","swing")},u.prototype.nextPage=function(){MR.analytics.trackEvent({category:"viz:toggle",action:"carousel",label:"right"});var e=this,t=e.index-1;e.poller.stop(),e.page_index=e.page_index+e.getColumns(),e.$el.removeClass("carousel-at-end carousel-at-start"),e.page_index+e.getColumns()*3>=t&&(e.endOfData?MR.templateConfig.settings.behavior.loop?(e.more=s.map(e.allStatuses.slice(),function(t){return e.createViewForModel(t)}),e.appendSlides()):e.page_index+e.getColumns()>=e.index-1&&e.$el.addClass("carousel-at-end"):e.poller.more()),window.Modernizr.csstransitions?e.$slider.css("margin-left",-(e.slide.width*e.page_index)):e.$slider.animate({"margin-left":-(e.slide.width*e.page_index)},"slow","swing")},u.prototype.filterModels=function(e){var t=this;return s.filter(e,function(e){return e.get("media").find(function(e){return t.mediaTypeTest(e)})})},u.prototype.createViewForModel=function(e){var t=this.config.StatusModel.getStatusViewConstructor(e);if(!e.get("media")||!e.get("media").models.length)return;e.set("isMedia",!0),t=this.config.MediaModel.getStatusViewConstructor(e);var r=new t({model:e}),i=r.render().$el;return i.attr("data-timestamp",(new n(e.get("formatted_date_iso"))).unix()),this.config.page_links&&(this.modalQueue.push(e),this.modalQueue.length>30&&this.modalQueue.splice(0,this.modalQueue.length-30)),r},u.prototype.handlePoll=function(e){var t=this;s.each(e,function(e){var n=t.createViewForModel(e);n&&(t.allStatuses.unshift(e),t.history.unshift(n))}),t.allStatuses.sort(function(e,t){return(new n(t.get("formatted_date_iso"))).unix()-(new n(e.get("formatted_date_iso"))).unix()}),t.prependSlides()},u.prototype.handleMore=function(e){var t=this;if(!e){t.endOfData=!0,t.page_index+t.getColumns()>=t.index-1&&t.$el.addClass("carousel-at-end");return}s.each(e,function(e){var n=t.createViewForModel(e);n&&(t.allStatuses.unshift(e),t.more.push(n))},this),t.appendSlides(),window.Modernizr.csstransitions?t.$slider.css("margin-left",-(t.slide.width*t.page_index)):t.$slider.animate({"margin-left":-(t.slide.width*t.page_index)},"slow","swing")},u.prototype.noMoreContent=function(){this.endOfData=!0},u.prototype.hideArrow=function(){var e=this;e.page_index+e.getColumns()>=e.index-1&&e.$el.addClass("carousel-at-end")},u.prototype.emptyStream=function(){var e=this;if(MR.templateConfig.settings.emptyStreamConfig.enabled){e.$slider.removeClass("animate"),e.$slider.width((e.index+1)*e.slide.width);var t=parseInt(e.$slider.css("margin-left"),10)-e.slide.width;e.$slider.css("margin-left",t);var n=r("<div>").addClass("carousel-slide"),i=r(o(MR.templateConfig.settings.emptyStreamConfig));n.prepend(i),n.css({width:e.slide.width,height:e.slide.width,opacity:1}),e.$slider.prepend(n),MR.templateConfig.settings.emptyStreamConfig["@linkToPhotoUpload"]&&i.on("click",function(t){t.preventDefault();var n=e.config.photoButton.photoShareButton.buttonView;n.handlers.showUploadView.apply(n)}),s.delay(function(){e.$slider.addClass("animate"),window.Modernizr.csstransitions?e.$slider.css("margin-left",0):e.$slider.animate({"margin-left":0},"slow","swing")},1e3)}},u}),t.config({map:{"*":{underscore:"js/lodash",jquery:"js/jquery",lodash:"js/lodash"}}}),n("js/index",["require","./Carousel","lodash"],function(e){function r(e,t,r){var i,s,o=MR.templateConfig.settings.modal.modalType;if(o==="postcard"){i=e["retail-modal"].View,s=e["retail-modal"].model;var u=r.queue;u||(u=[t]);var a=n.findIndex(u,function(e){return e.cid===t.cid});a<0&&(a=u.push(t)-1),s.set("startIndex",a||0),s.get("queue").set(u)}else o==="picture-frame"&&(i=e.mediaModalStatus.getStatusViewConstructor(t),s=t);return{View:i,model:s,type:o}}var t=e("./Carousel"),n=e("lodash");return{ready:function(){},render:function(e){MR.ENV.instance.on("#template:showModal",function(t){MR.modal.open({data:r(e,t.payload.model,{queue:t.payload.queue}),fallback:n.bind(MR.ENV.instance.trigger,MR.ENV.instance,"#modal:show")})});var i=MR.templateConfig.settings;window.carousel=new t({stream_name:i.behavior.stream_name,StatusModel:e.status,MediaModel:e.statusMedia,MediaModalModel:e.mediaModalStatus,Modal:e.modal,photoButton:e["photo-share-button"],mobileBreakpoint:i.mobileBreakpoint,slide:{rows:1,cols:i.behavior.cols,mobileCols:i.behavior.mobileCols},page_links:MR.templateConfig.settings.modal.modalType==="postcard"}),e["photo-share-button"].photoShareButton.config.settings.stream_name=i.behavior.stream_name},modal:{ready:function(){},render:function(e){var t=MR.modal.getData(),n=e["retail-modal"].View;t.type==="photo-share"&&(n=t.View);var r=t.model;t.type==="picture-frame"&&(n=e.mediaModalStatus.getStatusViewConstructor(r)),MR.ENV.instance.trigger("#modal:show",{View:n,model:r,options:t.options}),MR.ENV.instance.on("#modal:close",function(){MR.modal.close()})}}}}),t(["js/index"]),window.MRT.require=t,window.MRT.define=n,window.MRT.requirejs=e}();