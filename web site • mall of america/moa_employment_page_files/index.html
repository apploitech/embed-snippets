<!DOCTYPE html>
<!-- saved from url=(0240)https://mall-of-america.massrel.io/employment-page/index.html#cfg=curl%3Dhttps%253A%252F%252Fwww.mallofamerica.com%252Fabout%252Femployment-portal%26parent%3Dwww.mallofamerica.com%26vph%3D680%26space-id%3Dmall-of-america%252Femployment-page -->
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations cssfilters csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" lang="en-us" xmlns:fb="http://ogp.me/ns/fb#"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!--[if lt IE 9]>
    <script src="//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/js/html5-shiv.js"></script>
    <script src="//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/js/css3-mediaqueries.js"></script>
    <![endif]-->

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>

    <meta name="viewport" content="width=device-width">
    <meta property="fb:app_id" content="">
    <script type="text/javascript" id="www-widgetapi-script" src="./www-widgetapi.js" async=""></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="ga" src="./ga.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="gauniversal" src="./analytics.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="twitter-widgets" src="./widgets.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="twitter-impressions" src="./impressions.js"></script><!--<base target="_blank">--><base href="." target="_blank">

    
  <link id="compiled-template-less" href="./main.6035f30abda86bfb89fcd8cc86de01d56089165c.css" type="text/css" rel="stylesheet">

  <script type="text/javascript" charset="utf8" async="" src="./iframe_api"></script></head>

  <body class="modal-picture-frame" style="overflow: hidden;"><iframe src="./xdm_ifr.html" style="position: absolute; top: -1000px; left: -1000px; width: 1px; height: 1px;"></iframe>
    
    
    <div class="action-bar   show show">
      <div class="primary-buttons"><div id="photo-share-button" class="mr-component mr-component-type-photo-share-button-6 mr-component-instance-photo-share-button" data-mr-component-id="photo-share-button" data-mr-component-type="photo-share-button-6"><a href="https://mall-of-america.massrel.io/employment-page/index.html" data-action="showUploadView" class="mr-action-click photo-share-button hidden social-button button-style-black" data-mr-view="true" style="border-radius: 3px;"><span class="ada-text">Share a photo via Twitter or Facebook</span>
<i class="icon icon-camera"></i>
<span class="button-text">ADD IMAGE</span>
</a></div></div>
      <div class="secondary-buttons"></div>
    </div>
    <div id="carousel" class="carousel-hide-navigation-buttons-at-ends carousel-at-start carousel-animate" data-rows="1" style="touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); display: block; height: 262px;">
      <div class="carousel-slider-frame">
        <div class="carousel-slider animate" style="width: 4698px; margin-left: 0px;"><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1527145086402490766_717101806" data-network="instagram" data-timestamp="1496269902">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fe15%2F18808940_1546469082051267_4723364535447060480_n.jpg)">
    <img src="./image" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1514106649149076584_12491541" data-network="instagram" data-timestamp="1494715599">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F18513477_1350308718381963_6851845701941329920_n.jpg)">
    <img src="./image(1)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @danielledewald
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1504622371176556404_1523694854" data-network="instagram" data-timestamp="1493584985">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F18252336_295630270894592_9082161698369961984_n.jpg)">
    <img src="./image(2)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @oh_alexie
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1491545335527574366_717101806" data-network="instagram" data-timestamp="1492026081">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17882866_1046192225524274_3267015174904610816_n.jpg)">
    <img src="./image(3)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1491495270083674974_14491049" data-network="instagram" data-timestamp="1492020113">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fsh0.08%2Fe35%2Fp640x640%2F17882785_1876500979231316_7199575655908900864_n.jpg)">
    <img src="./image(4)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @nolajohnson
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1190639280865155900_12491541" data-network="instagram" data-timestamp="1456155284">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F12748422_455355617997819_453193328_n.jpg)">
    <img src="./image(5)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @danielledewald
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1482753770776459250_717101806" data-network="instagram" data-timestamp="1490978045">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17493725_1835978913286003_2067007351126228992_n.jpg)">
    <img src="./image(6)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1476219012672218521_717101806" data-network="instagram" data-timestamp="1490199041">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17438386_1250099975080874_3953911261648912384_n.jpg)">
    <img src="./image(7)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1471957602417194673_717101806" data-network="instagram" data-timestamp="1489691041">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17332652_1894462117497188_6811588123072397312_n.jpg)">
    <img src="./image(8)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1466228739972359154_18162753" data-network="instagram" data-timestamp="1489008108">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fe35%2F17076666_1857643274508716_1029737925547393024_n.jpg)">
    <img src="./image(9)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @haleyvanderson
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1466985334607852854_717101806" data-network="instagram" data-timestamp="1489098301">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17126089_836318743173101_8134852308426031104_n.jpg)">
    <img src="./image(10)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1462517563757153730_717101806" data-network="instagram" data-timestamp="1488565701">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F17077231_888764217893126_422994952272740352_n.jpg)">
    <img src="./image(11)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1287070144786390391_145454574" data-network="instagram" data-timestamp="1467650739">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F13551711_568533636662244_1169553322_n.jpg%3Fig_cache_key%3DMTI4NzA3MDE0NDc4NjM5MDM5MQ%253D%253D.2)">
    <img src="./image(12)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @mallofamerica
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1307371271880827404_717101806" data-network="instagram" data-timestamp="1470070822">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F13740968_616221215227263_1246420250_n.jpg%3Fig_cache_key%3DMTMwNzM3MTI3MTg4MDgyNzQwNA%253D%253D.2)">
    <img src="./image(13)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1454521218073150772_175138097" data-network="instagram" data-timestamp="1487612462">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F16790068_1902259653343890_2847042642657673216_n.jpg%3Fig_cache_key%3DMTQ1NDUyMTIxODA3MzE1MDc3Mg%253D%253D.2)">
    <img src="./image(14)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @angelbabirachy
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1454010340387261783_175138097" data-network="instagram" data-timestamp="1487551561">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fsh0.08%2Fe35%2Fp640x640%2F16789371_1862876030623447_1927447117601701888_n.jpg%3Fig_cache_key%3DMTQ1NDAxMDM0MDM4NzI2MTc4Mw%253D%253D.2)">
    <img src="./image(15)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @angelbabirachy
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1454003933302318517_1093060678" data-network="instagram" data-timestamp="1487550797">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F16906348_146532272529870_1402387284061323264_n.jpg)">
    <img src="./image(16)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @erinbotpresents
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1440756158217430995_717101806" data-network="instagram" data-timestamp="1485971539">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fe15%2F16228836_247217982400697_5813339875537059840_n.jpg%3Fig_cache_key%3DMTQ0MDc1NjE1ODIxNzQzMDk5NQ%253D%253D.2)">
    <img src="./image(17)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1389379454714856948_717101806" data-network="instagram" data-timestamp="1479846959">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F14727402_557361187796469_6964495684728782848_n.jpg%3Fig_cache_key%3DMTM4OTM3OTQ1NDcxNDg1Njk0OA%253D%253D.2)">
    <img src="./image(18)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-twitter twitter-custom-tweet status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="twitter:833451149621608451" data-network="twitter" data-twitter-tweet-id="833451149621608451" data-twitter-tweet-context="" data-partner="spredfast" data-timestamp="1487545213" data-twitter-logged="">
  <div class="media media-photo media-twitter" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//pbs.twimg.com/media/C5EDYsDVcAEHiH6.jpg:large)">
    <img src="./C5EDYsDVcAEHiH6.jpg-large" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @a_struve
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-twitter-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-twitter twitter-custom-tweet status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="twitter:811235421921439744" data-network="twitter" data-twitter-tweet-id="811235421921439744" data-twitter-tweet-context="" data-partner="spredfast" data-timestamp="1482248571" data-twitter-logged="">
  <div class="media media-photo media-twitter" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//pbs.twimg.com/media/C0IWUAJUcAAlaXg.jpg:large)">
    <img src="./C0IWUAJUcAAlaXg.jpg-large" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @mallofamerica
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-twitter-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1409596965196436412_717101806" data-network="instagram" data-timestamp="1482257074">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F15535489_1629980683974152_6101549592896077824_n.jpg%3Fig_cache_key%3DMTQwOTU5Njk2NTE5NjQzNjQxMg%253D%253D.2)">
    <img src="./image(19)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-twitter twitter-custom-tweet status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="twitter:811296404245192705" data-network="twitter" data-twitter-tweet-id="811296404245192705" data-twitter-tweet-context="" data-partner="spredfast" data-timestamp="1482263110" data-twitter-logged="">
  <div class="media media-photo media-twitter" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//pbs.twimg.com/media/C0JNxn0VEAEq-vd.jpg:large)">
    <img src="./C0JNxn0VEAEq-vd.jpg-large" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @mallofamerica
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-twitter-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1410422184845543075_2218865107" data-network="instagram" data-timestamp="1482355448">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F15538729_244144616014960_5501909284348231680_n.jpg%3Fig_cache_key%3DMTQxMDQyMjE4NDg0NTU0MzA3NQ%253D%253D.2)">
    <img src="./image(20)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @allrileyedup
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1410545764543642679_21485369" data-network="instagram" data-timestamp="1482370180">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fsh0.08%2Fe35%2Fp640x640%2F15538927_1826451547575840_8668115404947718144_n.jpg%3Fig_cache_key%3DMTQxMDU0NTc2NDU0MzY0MjY3OQ%253D%253D.2)">
    <img src="./image(21)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @piccadillytown
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1415264444187362107_175138097" data-network="instagram" data-timestamp="1482932690">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F15625548_355180821530538_798711372702547968_n.jpg%3Fig_cache_key%3DMTQxNTI2NDQ0NDE4NzM2MjEwNw%253D%253D.2)">
    <img src="./image(22)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @angelbabirachy
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1415500323799406649_717101806" data-network="instagram" data-timestamp="1482960809">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fe15%2F15625499_539568569585053_3551369450445864960_n.jpg%3Fig_cache_key%3DMTQxNTUwMDMyMzc5OTQwNjY0OQ%253D%253D.2)">
    <img src="./image(23)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div><div class="carousel-slide" style="width: 162px; height: 162px; opacity: 1;"><div class="status status-instagram status-has-media status-style-media-tile mr-component-instance-status-styles-media-tile status-style-status-styles-media-tile status-has-media-photo" data-mr-view="true" data-entity-id="instagram:1416844084219375324_717101806" data-network="instagram" data-timestamp="1483120998">
  <div class="media media-photo media-instagram" data-mr-view="true">
  
  
  <div class="media-image" style="background-image: url(//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&amp;url=https%3A%2F%2Fscontent.cdninstagram.com%2Ft51.2885-15%2Fs640x640%2Fsh0.08%2Fe35%2F15625134_1931946537028974_1726083893825634304_n.jpg%3Fig_cache_key%3DMTQxNjg0NDA4NDIxOTM3NTMyNA%253D%253D.2)">
    <img src="./image(24)" alt="">
    
    <div class="media-attribution">
      
      <div class="media-attribution-author">
        @moajobs
      </div>
      
      
      <div class="media-attribution-logo">
        <i class="media-logo-icon icon-instagram-logo"></i>
      </div>
      
    </div>
    
  </div>
  

</div>
</div></div></div>
      </div>
      <div class="carousel-buttons">
        <button type="button" class="carousel-button carousel-button-previous" tabindex="0" title="Previous">
          <i class="icon-angle-left"></i>
        </button>
        <button type="button" class="carousel-button carousel-button-next" tabindex="0" title="Next">
          <i class="icon-angle-right"></i>
        </button>
      </div>
    </div>
    <div class="footer ">
      <a id="mr-logo" class="mr-component mr-component-type-logo-2 mr-component-instance-mr-logo theme-dark" data-mr-component-id="mr-logo" data-mr-component-type="logo-2" data-mr-view="true" href="http://www.spredfast.com/" target="_blank" title="A Spredfast product
http://www.spredfast.com" alt="A Spredfast product"><span class="ada-text">Click to learn more about Spredfast Products</span>
<i class="icon-spredfast-logo"></i><i class="icon-spredfast-logo-shape"></i><i class="logo-copy icon-spredfast-logo-copy">
</i></a>
    </div>
    <section id="modal" class="mr-component mr-component-type-modal-2 mr-component-instance-modal" data-mr-component-id="modal" data-mr-component-type="modal-2"></section>
  
  
  
  <script src="./loader.d44424d20aad367422afcc22eec890fc95a42c1f.js"></script>
  <script>//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */

/*! Player.js - v0.0.11 - 2015-07-24
* http://github.com/embedly/player.js
* Copyright (c) 2015 Embedly; Licensed BSD */

/*!
 * Fine Uploader
 *
 * Copyright 2013, Widen Enterprises, Inc. info@fineuploader.com
 *
 * Version: 3.9.0-3
 *
 * Homepage: http://fineuploader.com
 *
 * Repository: git://github.com/Widen/fine-uploader.git
 *
 * Licensed under GNU GPL v3, see LICENSE
 */

/*! 2013-09-18 */

/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

window.MR=window.MR||{},function(define,require,requirejs){define("lib/BaseComponent",["require","backbone-amd","lodash","ENV","lib/analytics/main"],function(e){var t=e("backbone-amd"),n=e("lodash"),i=e("ENV"),a=e("lib/analytics/main"),s=t.Model.extend({create:function(){},render:function(){},exports:{},deprecated:!1,constructor:function(e){if(t.Model.apply(this,arguments),this.deprecated&&window.MR&&MR.spaceConfig&&"dev"===MR.spaceConfig.env&&window.console&&window.console.warn){var n=e&&e.type?e.type:this.get("id"),i="The '"+n+"' component version you're using is "+"deprecated! Upgrade it to the latest version to get new "+"features and improvements. See "+"https://github.com/MassRelevance/builder-sdk/tree/master/dev/components "+"for all available components and versions.";setTimeout(function(){window.console.warn(i)},5e3)}},initialize:function(){var e=this.get("config")||{},t=this.get("id");this.set("dispatcher",i.scope(t,e.type)),this.set("analytics",new a({scope:"component",componentID:t,componentType:e.type}));var n=this.styles;n&&n.render&&n.render(e)},postInitialize:function(){},hasElement:function(){var e=this.get("config")||{};return!(!e.$el||!e.$el.length)}}),o=s.extend;return s.extend=function(){var e=o.apply(s,arguments);return e.exports=function(){var t=n.extend({},e.prototype.exports);return t.create=function(t,i){var a={id:t,config:i},s=new e(a),o=s.create();return n.extend({},a,o,{render:function(){s.render()},postInitialize:function(){s.postInitialize()}})},t},e},s}),define("componentStyle",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("componentStyle!status-2",{render:function(){}}),define("massrel-js-backbone/lib/backbone",["require","backbone-amd"],function(e){var t=e("backbone-amd");return(window["massrel-js-backbone"]||window).Backbone||t}),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return St.call(e,t)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){bt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function s(e,t){var n=!0;return p(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){gn[e]||(a(t),gn[e]=!0)}function r(e,t){return function(n){return f(e.call(this,n),t)}}function l(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function u(){}function d(e,t){t!==!1&&I(e),h(this,e),this._d=new Date(+e._d)}function c(e){var t=x(e),n=t.year||0,i=t.quarter||0,a=t.month||0,s=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,u=t.second||0,d=t.millisecond||0;this._milliseconds=+d+1e3*u+6e4*l+36e5*r,this._days=+o+7*s,this._months=+a+3*i+12*n,this._data={},this._locale=bt.localeData(),this._bubble()}function p(e,t){for(var i in t)n(t,i)&&(e[i]=t[i]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var n,i,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ft.length>0)for(n in Ft)i=Ft[n],a=t[i],"undefined"!=typeof a&&(e[i]=a);return e}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function f(e,t,n){for(var i=""+Math.abs(e),a=e>=0;i.length<t;)i="0"+i;return(a?n?"+":"":"-")+i}function _(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function g(e,t){var n;return t=U(t,e),e.isBefore(t)?n=_(e,t):(n=_(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function v(e,t){return function(n,i){var a,s;return null===i||isNaN(+i)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,a=bt.duration(n,i),b(this,a,e),this}}function b(e,t,n,i){var a=t._milliseconds,s=t._days,o=t._months;i=null==i?!0:i,a&&e._d.setTime(+e._d+a*n),s&&ht(e,"Date",pt(e,"Date")+s*n),o&&ct(e,pt(e,"Month")+o*n),i&&bt.updateOffset(e,s||o)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function k(e,t,n){var i,a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&C(e[i])!==C(t[i]))&&o++;return o+s}function q(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dn[e]||cn[t]||t}return e}function x(e){var t,i,a={};for(i in e)n(e,i)&&(t=q(i),t&&(a[t]=e[i]));return a}function S(t){var n,i;if(0===t.indexOf("week"))n=7,i="day";else{if(0!==t.indexOf("month"))return;n=12,i="month"}bt[t]=function(a,s){var o,r,l=bt._locale[t],u=[];if("number"==typeof a&&(s=a,a=e),r=function(e){var t=bt().utc().set(i,e);return l.call(bt._locale,t,a||"")},null!=s)return r(s);for(o=0;n>o;o++)u.push(r(o));return u}}function C(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function T(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function M(e,t,n){return rt(bt([e,11,31+t-n]),t,n).week}function E(e){return P(e)?366:365}function P(e){return 0===e%4&&0!==e%100||0===e%400}function I(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Tt]<0||e._a[Tt]>11?Tt:e._a[Mt]<1||e._a[Mt]>T(e._a[Ct],e._a[Tt])?Mt:e._a[Et]<0||e._a[Et]>24||24===e._a[Et]&&(0!==e._a[Pt]||0!==e._a[It]||0!==e._a[At])?Et:e._a[Pt]<0||e._a[Pt]>59?Pt:e._a[It]<0||e._a[It]>59?It:e._a[At]<0||e._a[At]>999?At:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Mt)&&(t=Mt),e._pf.overflow=t)}function A(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function D(e){return e?e.toLowerCase().replace("_","-"):e}function F(e){for(var t,n,i,a,s=0;s<e.length;){for(a=D(e[s]).split("-"),t=a.length,n=D(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=j(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&k(a,n,!0)>=t-1)break;t--}s++}return null}function j(e){var t=null;if(!Dt[e]&&jt)try{t=bt.locale(),require("./locale/"+e),bt.locale(t)}catch(n){}return Dt[e]}function U(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(bt.isMoment(e)||w(e)?+e:+bt(e))-+n,n._d.setTime(+n._d+i),bt.updateOffset(n,!1),n):bt(e).local()}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function R(e){var t,n,i=e.match(Ot);for(t=0,n=i.length;n>t;t++)i[t]=_n[i[t]]?_n[i[t]]:L(i[t]);return function(a){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(a,e):i[t];return s}}function O(e,t){return e.isValid()?(t=z(t,e.localeData()),pn[t]||(pn[t]=R(t)),pn[t](e)):e.localeData().invalidDate()}function z(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(zt.lastIndex=0;i>=0&&zt.test(e);)e=e.replace(zt,n),zt.lastIndex=0,i-=1;return e}function $(e,t){var n,i=t._strict;switch(e){case"Q":return Zt;case"DDDD":return Qt;case"YYYY":case"GGGG":case"gggg":return i?en:Bt;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?tn:Ht;case"S":if(i)return Zt;case"SS":if(i)return Jt;case"SSS":if(i)return Qt;case"DDD":return Nt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Yt;case"a":case"A":return t._locale._meridiemParse;case"x":return Xt;case"X":return Kt;case"Z":case"ZZ":return Wt;case"T":return Gt;case"SSSS":return Vt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Jt:$t;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return $t;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(K(X(e.replace("\\","")),"i"))}}function N(e){e=e||"";var t=e.match(Wt)||[],n=t[t.length-1]||[],i=(n+"").match(ln)||["-",0,0],a=+(60*i[1])+C(i[2]);return"+"===i[0]?-a:a}function B(e,t,n){var i,a=n._a;switch(e){case"Q":null!=t&&(a[Tt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(a[Tt]=C(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?a[Tt]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[Mt]=C(t));break;case"Do":null!=t&&(a[Mt]=C(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=C(t));break;case"YY":a[Ct]=bt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Ct]=C(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Et]=C(t);break;case"m":case"mm":a[Pt]=C(t);break;case"s":case"ss":a[It]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":a[At]=C(1e3*("0."+t));break;case"x":n._d=new Date(C(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=N(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=C(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=bt.parseTwoDigitYear(t)}}function H(e){var n,i,a,s,o,r,l;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,r=4,i=t(n.GG,e._a[Ct],rt(bt(),1,4).year),a=t(n.W,1),s=t(n.E,1)):(o=e._locale._week.dow,r=e._locale._week.doy,i=t(n.gg,e._a[Ct],rt(bt(),o,r).year),a=t(n.w,1),null!=n.d?(s=n.d,o>s&&++a):s=null!=n.e?n.e+o:o),l=lt(i,a,s,r,o),e._a[Ct]=l.year,e._dayOfYear=l.dayOfYear}function V(e){var n,i,a,s,o=[];if(!e._d){for(a=W(e),e._w&&null==e._a[Mt]&&null==e._a[Tt]&&H(e),e._dayOfYear&&(s=t(e._a[Ct],a[Ct]),e._dayOfYear>E(s)&&(e._pf._overflowDayOfYear=!0),i=it(s,0,e._dayOfYear),e._a[Tt]=i.getUTCMonth(),e._a[Mt]=i.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=a[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Et]&&0===e._a[Pt]&&0===e._a[It]&&0===e._a[At]&&(e._nextDay=!0,e._a[Et]=0),e._d=(e._useUTC?it:nt).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Et]=24)}}function Y(e){var t;e._d||(t=x(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],V(e))}function W(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function G(t){if(t._f===bt.ISO_8601)return J(t),void 0;t._a=[],t._pf.empty=!0;var n,i,a,s,o,r=""+t._i,l=r.length,u=0;for(a=z(t._f,t._locale).match(Ot)||[],n=0;n<a.length;n++)s=a[n],i=(r.match($(s,t))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),u+=i.length),_n[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),B(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=l-u,r.length>0&&t._pf.unusedInput.push(r),t._pf.bigHour===!0&&t._a[Et]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[Et]<12&&(t._a[Et]+=12),t._isPm===!1&&12===t._a[Et]&&(t._a[Et]=0),V(t),I(t)}function X(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a})}function K(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e){var t,n,a,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(s=0;s<e._f.length;s++)o=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=i(),t._f=e._f[s],G(t),A(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==a||a>o)&&(a=o,n=t));p(e,n||t)}function J(e){var t,n,i=e._i,a=an.exec(i);if(a){for(e._pf.iso=!0,t=0,n=on.length;n>t;t++)if(on[t][1].exec(i)){e._f=on[t][0]+(a[6]||" ");break}for(t=0,n=rn.length;n>t;t++)if(rn[t][1].exec(i)){e._f+=rn[t][0];break}i.match(Wt)&&(e._f+="Z"),G(e)}else e._isValid=!1}function Q(e){J(e),e._isValid===!1&&(delete e._isValid,bt.createFromInputFallback(e))}function et(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function tt(t){var n,i=t._i;i===e?t._d=new Date:w(i)?t._d=new Date(+i):null!==(n=Ut.exec(i))?t._d=new Date(+n[1]):"string"==typeof i?Q(t):y(i)?(t._a=et(i.slice(0),function(e){return parseInt(e,10)}),V(t)):"object"==typeof i?Y(t):"number"==typeof i?t._d=new Date(i):bt.createFromInputFallback(t)}function nt(e,t,n,i,a,s,o){var r=new Date(e,t,n,i,a,s,o);return 1970>e&&r.setFullYear(e),r}function it(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function at(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function st(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function ot(e,t,n){var i=bt.duration(e).abs(),a=xt(i.as("s")),s=xt(i.as("m")),o=xt(i.as("h")),r=xt(i.as("d")),l=xt(i.as("M")),u=xt(i.as("y")),d=a<hn.s&&["s",a]||1===s&&["m"]||s<hn.m&&["mm",s]||1===o&&["h"]||o<hn.h&&["hh",o]||1===r&&["d"]||r<hn.d&&["dd",r]||1===l&&["M"]||l<hn.M&&["MM",l]||1===u&&["y"]||["yy",u];return d[2]=t,d[3]=+e>0,d[4]=n,st.apply({},d)}function rt(e,t,n){var i,a=n-t,s=n-e.day();return s>a&&(s-=7),a-7>s&&(s+=7),i=bt(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(e,t,n,i,a){var s,o,r=it(e,0,1).getUTCDay();return r=0===r?7:r,n=null!=n?n:a,s=a-r+(r>i?7:0)-(a>r?7:0),o=7*(t-1)+(n-a)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:E(e-1)+o}}function ut(t){var n,i=t._i,a=t._f;return t._locale=t._locale||bt.localeData(t._l),null===i||a===e&&""===i?bt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),bt.isMoment(i)?new d(i,!0):(a?y(a)?Z(t):G(t):tt(t),n=new d(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function dt(e,t){var n,i;if(1===t.length&&y(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function ct(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),T(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function pt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ht(e,t,n){return"Month"===t?ct(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function mt(e,t){return function(n){return null!=n?(ht(this,e,n),bt.updateOffset(this,t),this):pt(this,e)}}function ft(e){return 400*e/146097}function _t(e){return 146097*e/400}function gt(e){bt.duration.fn[e]=function(){return this._data[e]}}function vt(e){"undefined"==typeof ender&&(yt=qt.moment,qt.moment=e?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",bt):bt)}for(var bt,yt,wt,kt="2.8.4",qt="undefined"!=typeof global?global:this,xt=Math.round,St=Object.prototype.hasOwnProperty,Ct=0,Tt=1,Mt=2,Et=3,Pt=4,It=5,At=6,Dt={},Ft=[],jt="undefined"!=typeof module&&module&&module.exports,Ut=/^\/?Date\((\-?\d+)/i,Lt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Rt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ot=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,zt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$t=/\d\d?/,Nt=/\d{1,3}/,Bt=/\d{1,4}/,Ht=/[+\-]?\d{1,6}/,Vt=/\d+/,Yt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Wt=/Z|[\+\-]\d\d:?\d\d/gi,Gt=/T/i,Xt=/[\+\-]?\d+/,Kt=/[\+\-]?\d+(\.\d{1,3})?/,Zt=/\d/,Jt=/\d\d/,Qt=/\d{3}/,en=/\d{4}/,tn=/[+-]?\d{6}/,nn=/[+-]?\d+/,an=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sn="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,un=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},cn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},pn={},hn={s:45,m:45,h:22,d:26,M:11},mn="DDD w W M D d".split(" "),fn="M D H h m s w W".split(" "),_n={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return f(this.year()%100,2)},YYYY:function(){return f(this.year(),4)},YYYYY:function(){return f(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+f(Math.abs(e),6)},gg:function(){return f(this.weekYear()%100,2)},gggg:function(){return f(this.weekYear(),4)},ggggg:function(){return f(this.weekYear(),5)},GG:function(){return f(this.isoWeekYear()%100,2)},GGGG:function(){return f(this.isoWeekYear(),4)},GGGGG:function(){return f(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return f(C(this.milliseconds()/10),2)},SSS:function(){return f(this.milliseconds(),3)},SSSS:function(){return f(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(C(e/60),2)+":"+f(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(C(e/60),2)+f(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gn={},vn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];mn.length;)wt=mn.pop(),_n[wt+"o"]=l(_n[wt],wt);for(;fn.length;)wt=fn.pop(),_n[wt+wt]=r(_n[wt],2);_n.DDDD=r(_n.DDD,3),p(u.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,a,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=bt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=bt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return rt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),bt=function(t,n,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=a,o._strict=s,o._isUTC=!1,o._pf=i(),ut(o)},bt.suppressDeprecationWarnings=!1,bt.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),bt.min=function(){var e=[].slice.call(arguments,0);return dt("isBefore",e)},bt.max=function(){var e=[].slice.call(arguments,0);return dt("isAfter",e)},bt.utc=function(t,n,a,s){var o;return"boolean"==typeof a&&(s=a,a=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=a,o._i=t,o._f=n,o._strict=s,o._pf=i(),ut(o).utc()},bt.unix=function(e){return bt(1e3*e)},bt.duration=function(e,t){var i,a,s,o,r=e,l=null;return bt.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(l=Lt.exec(e))?(i="-"===l[1]?-1:1,r={y:0,d:C(l[Mt])*i,h:C(l[Et])*i,m:C(l[Pt])*i,s:C(l[It])*i,ms:C(l[At])*i}):(l=Rt.exec(e))?(i="-"===l[1]?-1:1,s=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*i},r={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):"object"==typeof r&&("from"in r||"to"in r)&&(o=g(bt(r.from),bt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),a=new c(r),bt.isDuration(e)&&n(e,"_locale")&&(a._locale=e._locale),a},bt.version=kt,bt.defaultFormat=sn,bt.ISO_8601=function(){},bt.momentProperties=Ft,bt.updateOffset=function(){},bt.relativeTimeThreshold=function(t,n){return hn[t]===e?!1:n===e?hn[t]:(hn[t]=n,!0)},bt.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return bt.locale(e,t)}),bt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?bt.defineLocale(e,t):bt.localeData(e),n&&(bt.duration._locale=bt._locale=n)),bt._locale._abbr},bt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Dt[e]||(Dt[e]=new u),Dt[e].set(t),bt.locale(e),Dt[e]):(delete Dt[e],null)},bt.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(e){return bt.localeData(e)}),bt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return bt._locale;if(!y(e)){if(t=j(e))return t;e=[e]}return F(e)},bt.isMoment=function(e){return e instanceof d||null!=e&&n(e,"_isAMomentObject")},bt.isDuration=function(e){return e instanceof c};for(wt=vn.length-1;wt>=0;--wt)S(vn[wt]);bt.normalizeUnits=function(e){return q(e)},bt.invalid=function(e){var t=bt.utc(0/0);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},bt.parseZone=function(){return bt.apply(null,arguments).parseZone()},bt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},p(bt.fn=d.prototype,{clone:function(){return bt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=bt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return A(this)},isDSTShifted:function(){return this._a?this.isValid()&&k(this._a,(this._isUTC?bt.utc(this._a):bt(this._a)).toArray())>0:!1},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=O(this,e||bt.defaultFormat);return this.localeData().postformat(t)},add:v(1,"add"),subtract:v(-1,"subtract"),diff:function(e,t,n){var i,a,s,o=U(e,this),r=6e4*(this.zone()-o.zone());return t=q(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),a=12*(this.year()-o.year())+(this.month()-o.month()),s=this-bt(this).startOf("month")-(o-bt(o).startOf("month")),s-=6e4*(this.zone()-bt(this).startOf("month").zone()-(o.zone()-bt(o).startOf("month").zone())),a+=s/i,"year"===t&&(a/=12)):(i=this-o,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-r)/864e5:"week"===t?(i-r)/6048e5:i),n?a:m(a)},from:function(e,t){return bt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(bt(),e)},calendar:function(e){var t=e||bt(),n=U(t,this).startOf("day"),i=this.diff(n,"days",!0),a=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,bt(t)))},isLeapYear:function(){return P(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=at(e,this.localeData()),this.add(e-t,"d")):t},month:mt("Month",!0),startOf:function(e){switch(e=q(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=q(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=q("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this>+e):(n=bt.isMoment(e)?+e:+bt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=q("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+e>+this):(n=bt.isMoment(e)?+e:+bt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=q(t||"millisecond"),"millisecond"===t?(e=bt.isMoment(e)?e:bt(e),+this===+e):(n=+bt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),this>e?this:e}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=bt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=N(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?b(this,bt.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,bt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?bt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return T(this.year(),this.month())},dayOfYear:function(e){var t=xt((bt(this).startOf("day")-bt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=rt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=rt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=rt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return M(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return M(this.year(),e.dow,e.doy)},get:function(e){return e=q(e),this[e]()},set:function(e,t){return e=q(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=bt.localeData(t),null!=n&&(this._locale=n),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),bt.fn.millisecond=bt.fn.milliseconds=mt("Milliseconds",!1),bt.fn.second=bt.fn.seconds=mt("Seconds",!1),bt.fn.minute=bt.fn.minutes=mt("Minutes",!1),bt.fn.hour=bt.fn.hours=mt("Hours",!0),bt.fn.date=mt("Date",!0),bt.fn.dates=s("dates accessor is deprecated. Use date instead.",mt("Date",!0)),bt.fn.year=mt("FullYear",!0),bt.fn.years=s("years accessor is deprecated. Use year instead.",mt("FullYear",!0)),bt.fn.days=bt.fn.day,bt.fn.months=bt.fn.month,bt.fn.weeks=bt.fn.week,bt.fn.isoWeeks=bt.fn.isoWeek,bt.fn.quarters=bt.fn.quarter,bt.fn.toJSON=bt.fn.toISOString,p(bt.duration.fn=c.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,a=this._days,s=this._months,o=this._data,r=0;
o.milliseconds=i%1e3,e=m(i/1e3),o.seconds=e%60,t=m(e/60),o.minutes=t%60,n=m(t/60),o.hours=n%24,a+=m(n/24),r=m(ft(a)),a-=m(_t(r)),s+=m(a/30),a%=30,r+=m(s/12),s%=12,o.days=a,o.months=s,o.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*C(this._months/12)},humanize:function(e){var t=ot(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=bt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=bt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=q(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=q(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*ft(t),"month"===e?n:n/12;switch(t=this._days+Math.round(_t(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 60*24*t+this._milliseconds/6e4;case"second":return 60*60*24*t+this._milliseconds/1e3;case"millisecond":return Math.floor(1e3*60*60*24*t)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:bt.fn.lang,locale:bt.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),a=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||a||s?"T":"")+(i?i+"H":"")+(a?a+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),bt.duration.fn.toString=bt.duration.fn.toISOString;for(wt in un)n(un,wt)&&gt(wt.toLowerCase());bt.duration.fn.asMilliseconds=function(){return this.as("ms")},bt.duration.fn.asSeconds=function(){return this.as("s")},bt.duration.fn.asMinutes=function(){return this.as("m")},bt.duration.fn.asHours=function(){return this.as("h")},bt.duration.fn.asDays=function(){return this.as("d")},bt.duration.fn.asWeeks=function(){return this.as("weeks")},bt.duration.fn.asMonths=function(){return this.as("M")},bt.duration.fn.asYears=function(){return this.as("y")},bt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),jt?module.exports=bt:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(qt.moment=yt),bt}),vt(!0)):vt()}.call(this),function(){function e(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var n=s.txt.regexen[t]||"";return"string"!=typeof n&&(n=n.source),n}),t)}function t(e,t){return e.replace(/#\{(\w+)\}/g,function(e,n){return t[n]||""})}function n(e,t,n){var i=String.fromCharCode(t);return n!==t&&(i+="-"+String.fromCharCode(n)),e.push(i),e}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(e,t,n){return n?!e||e.match(t)&&RegExp["$&"]===e:"string"==typeof e&&e.match(t)&&RegExp["$&"]===e}if("undefined"==typeof s||null===s)var s={};s.txt={},s.txt.regexen={};var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};s.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return o[e]})},s.txt.regexSupplant=e,s.txt.stringSupplant=t,s.txt.addCharsToCharClass=n;var r=String.fromCharCode,l=[r(32),r(133),r(160),r(5760),r(6158),r(8232),r(8233),r(8239),r(8287),r(12288)];n(l,9,13),n(l,8192,8202);var u=[r(65534),r(65279),r(65535)];n(u,8234,8238),s.txt.regexen.spaces_group=e(l.join("")),s.txt.regexen.spaces=e("["+l.join("")+"]"),s.txt.regexen.invalid_chars_group=e(u.join("")),s.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,s.txt.regexen.rtl_chars=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,s.txt.regexen.non_bmp_code_pairs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm;var d=[];n(d,192,214),n(d,216,246),n(d,248,255),n(d,256,591),n(d,595,596),n(d,598,599),n(d,601,601),n(d,603,603),n(d,611,611),n(d,616,616),n(d,623,623),n(d,626,626),n(d,649,649),n(d,651,651),n(d,699,699),n(d,768,879),n(d,7680,7935),s.txt.regexen.latinAccentChars=e(d.join(""));var c="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఃా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︭",p="0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",h="_‌‍꙾־׳״゛゜゠・〃་༌·";s.txt.regexen.hashSigns=/[#＃]/,s.txt.regexen.hashtagAlpha=new RegExp("["+c+"]"),s.txt.regexen.hashtagAlphaNumeric=new RegExp("["+c+p+h+"]"),s.txt.regexen.endHashtagMatch=e(/^(?:#{hashSigns}|:\/\/)/),s.txt.regexen.hashtagBoundary=new RegExp("(?:^|$|[^&"+c+p+h+"])"),s.txt.regexen.validHashtag=e(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi),s.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|(?:^|[^a-zA-Z0-9_+~.-])(?:rt|RT|rT|Rt):?)/,s.txt.regexen.atSigns=/[@＠]/,s.txt.regexen.validMentionOrList=e("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g"),s.txt.regexen.validReply=e(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/),s.txt.regexen.endMentionMatch=e(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/),s.txt.regexen.validUrlPrecedingChars=e(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),s.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,s.txt.regexen.invalidDomainChars=t("#{punct}#{spaces_group}#{invalid_chars_group}",s.txt.regexen),s.txt.regexen.validDomainChars=e(/[^#{invalidDomainChars}]/),s.txt.regexen.validSubdomain=e(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),s.txt.regexen.validDomainName=e(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),s.txt.regexen.validGTLD=e(RegExp("(?:(?:abb|abbott|abogado|academy|accenture|accountant|accountants|aco|active|actor|ads|adult|aeg|aero|afl|agency|aig|airforce|airtel|allfinanz|alsace|amsterdam|android|apartments|app|aquarelle|archi|army|arpa|asia|associates|attorney|auction|audio|auto|autos|axa|azure|band|bank|bar|barcelona|barclaycard|barclays|bargains|bauhaus|bayern|bbc|bbva|bcn|beer|bentley|berlin|best|bet|bharti|bible|bid|bike|bing|bingo|bio|biz|black|blackfriday|bloomberg|blue|bmw|bnl|bnpparibas|boats|bond|boo|boots|boutique|bradesco|bridgestone|broker|brother|brussels|budapest|build|builders|business|buzz|bzh|cab|cafe|cal|camera|camp|cancerresearch|canon|capetown|capital|caravan|cards|care|career|careers|cars|cartier|casa|cash|casino|cat|catering|cba|cbn|ceb|center|ceo|cern|cfa|cfd|chanel|channel|chat|cheap|chloe|christmas|chrome|church|cisco|citic|city|claims|cleaning|click|clinic|clothing|cloud|club|coach|codes|coffee|college|cologne|com|commbank|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|corsica|country|coupons|courses|credit|creditcard|cricket|crown|crs|cruises|cuisinella|cymru|cyou|dabur|dad|dance|date|dating|datsun|day|dclk|deals|degree|delivery|delta|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dnp|docs|dog|doha|domains|doosan|download|drive|durban|dvag|earth|eat|edu|education|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|erni|esq|estate|eurovision|eus|events|everbank|exchange|expert|exposed|express|fage|fail|faith|family|fan|fans|farm|fashion|feedback|film|finance|financial|firmdale|fish|fishing|fit|fitness|flights|florist|flowers|flsmidth|fly|foo|football|forex|forsale|forum|foundation|frl|frogans|fund|furniture|futbol|fyi|gal|gallery|game|garden|gbiz|gdn|gent|genting|ggee|gift|gifts|gives|giving|glass|gle|global|globo|gmail|gmo|gmx|gold|goldpoint|golf|goo|goog|google|gop|gov|graphics|gratis|green|gripe|group|guge|guide|guitars|guru|hamburg|hangout|haus|healthcare|help|here|hermes|hiphop|hitachi|hiv|hockey|holdings|holiday|homedepot|homes|honda|horse|host|hosting|hoteles|hotmail|house|how|hsbc|ibm|icbc|ice|icu|ifm|iinet|immo|immobilien|industries|infiniti|info|ing|ink|institute|insure|int|international|investments|ipiranga|irish|ist|istanbul|itau|iwc|java|jcb|jetzt|jewelry|jlc|jll|jobs|joburg|jprs|juegos|kaufen|kddi|kim|kitchen|kiwi|koeln|komatsu|krd|kred|kyoto|lacaixa|lancaster|land|lasalle|lat|latrobe|law|lawyer|lds|lease|leclerc|legal|lexus|lgbt|liaison|lidl|life|lighting|limited|limo|link|live|lixil|loan|loans|lol|london|lotte|lotto|love|ltda|lupin|luxe|luxury|madrid|maif|maison|man|management|mango|market|marketing|markets|marriott|mba|media|meet|melbourne|meme|memorial|men|menu|miami|microsoft|mil|mini|mma|mobi|moda|moe|mom|monash|money|montblanc|mormon|mortgage|moscow|motorcycles|mov|movie|movistar|mtn|mtpc|museum|nadex|nagoya|name|navy|nec|net|netbank|network|neustar|new|news|nexus|ngo|nhk|nico|ninja|nissan|nokia|nra|nrw|ntt|nyc|office|okinawa|omega|one|ong|onl|online|ooo|oracle|orange|org|organic|osaka|otsuka|ovh|page|panerai|paris|partners|parts|party|pet|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pink|pizza|place|play|plumbing|plus|pohl|poker|porn|post|praxi|press|pro|prod|productions|prof|properties|property|pub|qpon|quebec|racing|realtor|realty|recipes|red|redstone|rehab|reise|reisen|reit|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rich|ricoh|rio|rip|rocks|rodeo|rsvp|ruhr|run|ryukyu|saarland|sakura|sale|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|saxo|sca|scb|schmidt|scholarships|school|schule|schwarz|science|scor|scot|seat|seek|sener|services|sew|sex|sexy|shiksha|shoes|show|shriram|singles|site|ski|sky|skype|sncf|soccer|social|software|sohu|solar|solutions|sony|soy|space|spiegel|spreadbetting|srl|starhub|statoil|studio|study|style|sucks|supplies|supply|support|surf|surgery|suzuki|swatch|swiss|sydney|systems|taipei|tatamotors|tatar|tattoo|tax|taxi|team|tech|technology|tel|telefonica|temasek|tennis|thd|theater|tickets|tienda|tips|tires|tirol|today|tokyo|tools|top|toray|toshiba|tours|town|toyota|toys|trade|trading|training|travel|trust|tui|ubs|university|uno|uol|vacations|vegas|ventures|vermögensberater|vermögensberatung|versicherung|vet|viajes|video|villas|vin|vision|vista|vistaprint|vlaanderen|vodka|vote|voting|voto|voyage|wales|walter|wang|watch|webcam|website|wed|wedding|weir|whoswho|wien|wiki|williamhill|win|windows|wine|wme|work|works|world|wtc|wtf|xbox|xerox|xin|xperia|xxx|xyz|yachts|yandex|yodobashi|yoga|yokohama|youtube|zip|zone|zuerich|дети|ком|москва|онлайн|орг|рус|сайт|קום|بازار|شبكة|كوم|موقع|कॉम|नेट|संगठन|คอม|みんな|グーグル|コム|世界|中信|中文网|企业|佛山|信息|健康|八卦|公司|公益|商城|商店|商标|在线|大拿|娱乐|工行|广东|慈善|我爱你|手机|政务|政府|新闻|时尚|机构|淡马锡|游戏|点看|移动|组织机构|网址|网店|网络|谷歌|集团|飞利浦|餐厅|닷넷|닷컴|삼성|onion)(?=[^0-9a-zA-Z@]|$))")),s.txt.regexen.validCCTLD=e(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|бел|мкд|мон|рф|срб|укр|қаз|հայ|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عراق|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|澳門|香港|한국)(?=[^0-9a-zA-Z@]|$))")),s.txt.regexen.validPunycode=e(/(?:xn--[0-9a-z]+)/),s.txt.regexen.validSpecialCCTLD=e(RegExp("(?:(?:co|tv)(?=[^0-9a-zA-Z@]|$))")),s.txt.regexen.validDomain=e(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),s.txt.regexen.validAsciiDomain=e(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),s.txt.regexen.invalidShortDomain=e(/^#{validDomainName}#{validCCTLD}$/i),s.txt.regexen.validSpecialShortDomain=e(/^#{validDomainName}#{validSpecialCCTLD}$/i),s.txt.regexen.validPortNumber=e(/[0-9]+/),s.txt.regexen.validGeneralUrlPathChars=e(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),s.txt.regexen.validUrlBalancedParens=e("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),s.txt.regexen.validUrlPathEndingChars=e(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),s.txt.regexen.validUrlPath=e("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),s.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,s.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,s.txt.regexen.extractUrl=e("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),s.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i,s.txt.regexen.urlHasProtocol=/^https?:\/\//i,s.txt.regexen.urlHasHttps=/^https:\/\//i,s.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,s.txt.regexen.validCashtag=e("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi"),s.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i,s.txt.regexen.validateUrlPctEncoded=/(?:%[0-9a-f]{2})/i,s.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i,s.txt.regexen.validateUrlPchar=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i"),s.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i,s.txt.regexen.validateUrlUserinfo=e("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i"),s.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,s.txt.regexen.validateUrlIpv4=e(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i),s.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i,s.txt.regexen.validateUrlIp=e("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i"),s.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,s.txt.regexen.validateUrlDomain=e(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i),s.txt.regexen.validateUrlHost=e("(?:#{validateUrlIp}|#{validateUrlDomain})","i"),s.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,s.txt.regexen.validateUrlUnicodeDomain=e(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i),s.txt.regexen.validateUrlUnicodeHost=e("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i"),s.txt.regexen.validateUrlPort=/[0-9]{1,5}/,s.txt.regexen.validateUrlUnicodeAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i"),s.txt.regexen.validateUrlAuthority=e("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i"),s.txt.regexen.validateUrlPath=e(/(\/#{validateUrlPchar}*)*/i),s.txt.regexen.validateUrlQuery=e(/(#{validateUrlPchar}|\/|\?)*/i),s.txt.regexen.validateUrlFragment=e(/(#{validateUrlPchar}|\/|\?)*/i),s.txt.regexen.validateUrlUnencoded=e("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i");var m="tweet-url list-slug",f="tweet-url username",_="tweet-url hashtag",g="tweet-url cashtag",v={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0},b={disabled:!0,readonly:!0,multiple:!0,checked:!0};s.txt.tagAttrs=function(e){var t="";for(var n in e){var i=e[n];b[n]&&(i=i?n:null),null!=i&&(t+=" "+s.txt.htmlEscape(n)+'="'+s.txt.htmlEscape(i.toString())+'"')}return t},s.txt.linkToText=function(e,n,i,a){a.suppressNoFollow||(i.rel="nofollow"),a.linkAttributeBlock&&a.linkAttributeBlock(e,i),a.linkTextBlock&&(n=a.linkTextBlock(e,n));var o={text:n,attr:s.txt.tagAttrs(i)};return t("<a#{attr}>#{text}</a>",o)},s.txt.linkToTextWithSymbol=function(e,t,n,i,a){var o=a.symbolTag?"<"+a.symbolTag+">"+t+"</"+a.symbolTag+">":t;n=s.txt.htmlEscape(n);var r=a.textWithSymbolTag?"<"+a.textWithSymbolTag+">"+n+"</"+a.textWithSymbolTag+">":n;return a.usernameIncludeSymbol||!t.match(s.txt.regexen.atSigns)?s.txt.linkToText(e,o+r,i,a):o+s.txt.linkToText(e,r,i,a)},s.txt.linkToHashtag=function(e,t,n){var a=t.substring(e.indices[0],e.indices[0]+1),o=s.txt.htmlEscape(e.hashtag),r=i(n.htmlAttrs||{});return r.href=n.hashtagUrlBase+o,r.title="#"+o,r["class"]=n.hashtagClass,o.charAt(0).match(s.txt.regexen.rtl_chars)&&(r["class"]+=" rtl"),n.targetBlank&&(r.target="_blank"),s.txt.linkToTextWithSymbol(e,a,o,r,n)},s.txt.linkToCashtag=function(e,t,n){var a=s.txt.htmlEscape(e.cashtag),o=i(n.htmlAttrs||{});return o.href=n.cashtagUrlBase+a,o.title="$"+a,o["class"]=n.cashtagClass,n.targetBlank&&(o.target="_blank"),s.txt.linkToTextWithSymbol(e,"$",a,o,n)},s.txt.linkToMentionAndList=function(e,t,n){var a=t.substring(e.indices[0],e.indices[0]+1),o=s.txt.htmlEscape(e.screenName),r=s.txt.htmlEscape(e.listSlug),l=e.listSlug&&!n.suppressLists,u=i(n.htmlAttrs||{});return u["class"]=l?n.listClass:n.usernameClass,u.href=l?n.listUrlBase+o+r:n.usernameUrlBase+o,l||n.suppressDataScreenName||(u["data-screen-name"]=o),n.targetBlank&&(u.target="_blank"),s.txt.linkToTextWithSymbol(e,a,l?o+r:o,u,n)},s.txt.linkToUrl=function(e,t,n){var a=e.url,o=a,r=s.txt.htmlEscape(o),l=n.urlEntities&&n.urlEntities[a]||e;l.display_url&&(r=s.txt.linkTextWithEntity(l,n));var u=i(n.htmlAttrs||{});return a.match(s.txt.regexen.urlHasProtocol)||(a="http://"+a),u.href=a,n.targetBlank&&(u.target="_blank"),n.urlClass&&(u["class"]=n.urlClass),n.urlTarget&&(u.target=n.urlTarget),!n.title&&l.display_url&&(u.title=l.expanded_url),s.txt.linkToText(e,r,u,n)},s.txt.linkTextWithEntity=function(e,n){var i=e.display_url,a=e.expanded_url,o=i.replace(/…/g,"");if(-1!=a.indexOf(o)){var r=a.indexOf(o),l={displayUrlSansEllipses:o,beforeDisplayUrl:a.substr(0,r),afterDisplayUrl:a.substr(r+o.length),precedingEllipsis:i.match(/^…/)?"…":"",followingEllipsis:i.match(/…$/)?"…":""};for(var u in l)l.hasOwnProperty(u)&&(l[u]=s.txt.htmlEscape(l[u]));return l.invisible=n.invisibleTagAttrs,t("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",l)}return i},s.txt.autoLinkEntities=function(e,t,n){n=i(n||{}),n.hashtagClass=n.hashtagClass||_,n.hashtagUrlBase=n.hashtagUrlBase||"https://twitter.com/#!/search?q=%23",n.cashtagClass=n.cashtagClass||g,n.cashtagUrlBase=n.cashtagUrlBase||"https://twitter.com/#!/search?q=%24",n.listClass=n.listClass||m,n.usernameClass=n.usernameClass||f,n.usernameUrlBase=n.usernameUrlBase||"https://twitter.com/",n.listUrlBase=n.listUrlBase||"https://twitter.com/",n.htmlAttrs=s.txt.extractHtmlAttrsFromOptions(n),n.invisibleTagAttrs=n.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var a,o,r;if(n.urlEntities){for(a={},o=0,r=n.urlEntities.length;r>o;o++)a[n.urlEntities[o].url]=n.urlEntities[o];n.urlEntities=a}var l="",u=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var d=n.htmlEscapeNonEntities?s.txt.htmlEscape:function(e){return e},o=0;o<t.length;o++){var c=t[o];l+=d(e.substring(u,c.indices[0])),c.url?l+=s.txt.linkToUrl(c,e,n):c.hashtag?l+=s.txt.linkToHashtag(c,e,n):c.screenName?l+=s.txt.linkToMentionAndList(c,e,n):c.cashtag&&(l+=s.txt.linkToCashtag(c,e,n)),u=c.indices[1]}return l+=d(e.substring(u,e.length))},s.txt.autoLinkWithJSON=function(e,t,n){if(t.user_mentions)for(var i=0;i<t.user_mentions.length;i++)t.user_mentions[i].screenName=t.user_mentions[i].screen_name;if(t.hashtags)for(var i=0;i<t.hashtags.length;i++)t.hashtags[i].hashtag=t.hashtags[i].text;if(t.symbols)for(var i=0;i<t.symbols.length;i++)t.symbols[i].cashtag=t.symbols[i].text;var a=[];for(var o in t)a=a.concat(t[o]);return s.txt.modifyIndicesFromUnicodeToUTF16(e,a),s.txt.autoLinkEntities(e,a,n)},s.txt.extractHtmlAttrsFromOptions=function(e){var t={};for(var n in e){var i=e[n];v[n]||(b[n]&&(i=i?n:null),null!=i&&(t[n]=i))}return t},s.txt.autoLink=function(e,t){var n=s.txt.extractEntitiesWithIndices(e,{extractUrlsWithoutProtocol:!1});return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkUsernamesOrLists=function(e,t){var n=s.txt.extractMentionsOrListsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkHashtags=function(e,t){var n=s.txt.extractHashtagsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkCashtags=function(e,t){var n=s.txt.extractCashtagsWithIndices(e);return s.txt.autoLinkEntities(e,n,t)},s.txt.autoLinkUrlsCustom=function(e,t){var n=s.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!1});return s.txt.autoLinkEntities(e,n,t)},s.txt.removeOverlappingEntities=function(e){e.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var t=e[0],n=1;n<e.length;n++)t.indices[1]>e[n].indices[0]?(e.splice(n,1),n--):t=e[n]},s.txt.extractEntitiesWithIndices=function(e,t){var n=s.txt.extractUrlsWithIndices(e,t).concat(s.txt.extractMentionsOrListsWithIndices(e)).concat(s.txt.extractHashtagsWithIndices(e,{checkUrlOverlap:!1})).concat(s.txt.extractCashtagsWithIndices(e));return 0==n.length?[]:(s.txt.removeOverlappingEntities(n),n)},s.txt.extractMentions=function(e){for(var t=[],n=s.txt.extractMentionsWithIndices(e),i=0;i<n.length;i++){var a=n[i].screenName;t.push(a)}return t},s.txt.extractMentionsWithIndices=function(e){for(var t,n=[],i=s.txt.extractMentionsOrListsWithIndices(e),a=0;a<i.length;a++)t=i[a],""==t.listSlug&&n.push({screenName:t.screenName,indices:t.indices});return n},s.txt.extractMentionsOrListsWithIndices=function(e){if(!e||!e.match(s.txt.regexen.atSigns))return[];var t=[];return e.replace(s.txt.regexen.validMentionOrList,function(e,n,i,a,o,r,l){var u=l.slice(r+e.length);if(!u.match(s.txt.regexen.endMentionMatch)){o=o||"";var d=r+n.length,c=d+a.length+o.length+1;t.push({screenName:a,listSlug:o,indices:[d,c]})}}),t},s.txt.extractReplies=function(e){if(!e)return null;var t=e.match(s.txt.regexen.validReply);return!t||RegExp.rightContext.match(s.txt.regexen.endMentionMatch)?null:t[1]},s.txt.extractUrls=function(e,t){for(var n=[],i=s.txt.extractUrlsWithIndices(e,t),a=0;a<i.length;a++)n.push(i[a].url);return n},s.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var n=[];s.txt.regexen.extractUrl.exec(e);){var i=RegExp.$2,a=RegExp.$3,o=RegExp.$4,r=RegExp.$5,l=RegExp.$7,u=s.txt.regexen.extractUrl.lastIndex,d=u-a.length;if(o)a.match(s.txt.regexen.validTcoUrl)&&(a=RegExp.lastMatch,u=d+a.length),n.push({url:a,indices:[d,u]});else{if(!t.extractUrlsWithoutProtocol||i.match(s.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,p=0;if(r.replace(s.txt.regexen.validAsciiDomain,function(e){var t=r.indexOf(e,p);p=t+e.length,c={url:e,indices:[d+t,d+p]},(l||e.match(s.txt.regexen.validSpecialShortDomain)||!e.match(s.txt.regexen.invalidShortDomain))&&n.push(c)}),null==c)continue;l&&(c.url=a.replace(r,c.url),c.indices[1]=u)}}return n},s.txt.extractHashtags=function(e){for(var t=[],n=s.txt.extractHashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].hashtag);return t},s.txt.extractHashtagsWithIndices=function(e,t){if(t||(t={checkUrlOverlap:!0}),!e||!e.match(s.txt.regexen.hashSigns))return[];var n=[];if(e.replace(s.txt.regexen.validHashtag,function(e,t,i,a,o,r){var l=r.slice(o+e.length);if(!l.match(s.txt.regexen.endHashtagMatch)){var u=o+t.length,d=u+a.length+1;n.push({hashtag:a,indices:[u,d]})}}),t.checkUrlOverlap){var i=s.txt.extractUrlsWithIndices(e);if(i.length>0){var a=n.concat(i);s.txt.removeOverlappingEntities(a),n=[];for(var o=0;o<a.length;o++)a[o].hashtag&&n.push(a[o])}}return n},s.txt.extractCashtags=function(e){for(var t=[],n=s.txt.extractCashtagsWithIndices(e),i=0;i<n.length;i++)t.push(n[i].cashtag);return t},s.txt.extractCashtagsWithIndices=function(e){if(!e||-1==e.indexOf("$"))return[];var t=[];return e.replace(s.txt.regexen.validCashtag,function(e,n,i,a,s){var o=s+n.length,r=o+a.length+1;t.push({cashtag:a,indices:[o,r]})}),t},s.txt.modifyIndicesFromUnicodeToUTF16=function(e,t){s.txt.convertUnicodeIndices(e,t,!1)},s.txt.modifyIndicesFromUTF16ToUnicode=function(e,t){s.txt.convertUnicodeIndices(e,t,!0)},s.txt.getUnicodeTextLength=function(e){return e.replace(s.txt.regexen.non_bmp_code_pairs," ").length},s.txt.convertUnicodeIndices=function(e,t,n){if(0!=t.length){var i=0,a=0;t.sort(function(e,t){return e.indices[0]-t.indices[0]});for(var s=0,o=t[0];i<e.length;){if(o.indices[0]==(n?i:a)){var r=o.indices[1]-o.indices[0];if(o.indices[0]=n?a:i,o.indices[1]=o.indices[0]+r,s++,s==t.length)break;o=t[s]}var l=e.charCodeAt(i);l>=55296&&56319>=l&&i<e.length-1&&(l=e.charCodeAt(i+1),l>=56320&&57343>=l&&i++),a++,i++}}},s.txt.splitTags=function(e){for(var t,n,i=e.split("<"),a=[],s=0;s<i.length;s+=1)if(n=i[s]){t=n.split(">");for(var o=0;o<t.length;o+=1)a.push(t[o])}else a.push("");return a},s.txt.hitHighlight=function(e,t,n){var i="em";if(t=t||[],n=n||{},0===t.length)return e;var a,o,r,l,u,d,c,p=n.tag||i,h=["<"+p+">","</"+p+">"],m=s.txt.splitTags(e),f="",_=0,g=m[0],v=0,b=0,y=!1,w=g,k=[];for(a=0;a<t.length;a+=1)for(o=0;o<t[a].length;o+=1)k.push(t[a][o]);for(r=0;r<k.length;r+=1){for(l=k[r],u=h[r%2],d=!1;null!=g&&l>=v+g.length;)f+=w.slice(b),y&&l===v+w.length&&(f+=u,d=!0),m[_+1]&&(f+="<"+m[_+1]+">"),v+=w.length,b=0,_+=2,g=m[_],w=g,y=!1;d||null==g?d||(d=!0,f+=u):(c=l-v,f+=w.slice(b,c)+u,b=c,y=0===r%2?!0:!1)}if(null!=g)for(b<w.length&&(f+=w.slice(b)),r=_+1;r<m.length;r+=1)f+=0===r%2?m[r]:"<"+m[r]+">";return f};var y=140,w=[r(65534),r(65279),r(65535),r(8234),r(8235),r(8236),r(8237),r(8238)];s.txt.getTweetLength=function(e,t){t||(t={short_url_length:23,short_url_length_https:23});var n=s.txt.getUnicodeTextLength(e),i=s.txt.extractUrlsWithIndices(e);s.txt.modifyIndicesFromUTF16ToUnicode(e,i);for(var a=0;a<i.length;a++)n+=i[a].indices[0]-i[a].indices[1],n+=i[a].url.toLowerCase().match(s.txt.regexen.urlHasHttps)?t.short_url_length_https:t.short_url_length;return n},s.txt.isInvalidTweet=function(e){return e?s.txt.getTweetLength(e)>y?"too_long":s.txt.hasInvalidCharacters(e)?"invalid_characters":!1:"empty"},s.txt.hasInvalidCharacters=function(e){for(var t=0;t<w.length;t++)if(e.indexOf(w[t])>=0)return!0;return!1},s.txt.isValidTweetText=function(e){return!s.txt.isInvalidTweet(e)},s.txt.isValidUsername=function(e){if(!e)return!1;var t=s.txt.extractMentions(e);return 1===t.length&&t[0]===e.slice(1)};var k=e(/^#{validMentionOrList}$/);if(s.txt.isValidList=function(e){var t=e.match(k);return!(!t||""!=t[1]||!t[4])},s.txt.isValidHashtag=function(e){if(!e)return!1;var t=s.txt.extractHashtags(e);return 1===t.length&&t[0]===e.slice(1)},s.txt.isValidUrl=function(e,t,n){if(null==t&&(t=!0),null==n&&(n=!0),!e)return!1;var i=e.match(s.txt.regexen.validateUrlUnencoded);if(!i||i[0]!==e)return!1;var o=i[1],r=i[2],l=i[3],u=i[4],d=i[5];return(!n||a(o,s.txt.regexen.validateUrlScheme)&&o.match(/^https?$/i))&&a(l,s.txt.regexen.validateUrlPath)&&a(u,s.txt.regexen.validateUrlQuery,!0)&&a(d,s.txt.regexen.validateUrlFragment,!0)?t&&a(r,s.txt.regexen.validateUrlUnicodeAuthority)||!t&&a(r,s.txt.regexen.validateUrlAuthority):!1},"undefined"!=typeof module&&module.exports&&(module.exports=s.txt),"function"==typeof define&&define.amd&&define("twitter-text/twitter-text",[],s.txt),"undefined"!=typeof window)if(window.twttr)for(var q in s)window.twttr[q]=s[q];else window.twttr=s}(),define("twitter-text",["twitter-text/twitter-text"],function(e){return e}),define("massrel-js-backbone/lib/util",["require","q","lodash","moment"],function(e){var t=e("q"),n=e("lodash"),i=e("moment"),a=function(e){return e.toISOString()},s=function(e){return e.format("LLL")},o=function(e){return e.fromNow()},r=function(e){var t,n=function(t,n){return i().subtract(t,n).isBefore(e)},a=function(t,n){return i().diff(e,t)+n};return t=n(1,"second")?"now":n(1,"minute")?a("seconds","s"):n(1,"hour")?a("minutes","m"):n(1,"day")?a("hours","h"):n(1,"week")?a("days","d"):n(1,"month")?a("weeks","w"):e.format("M/D/YY")},l=function(e,t){if(!n.isPlainObject(e))return e;var i={};return n.each(e,function(e,a){var s=l(e,t);n.isPlainObject(s)&&0!==n.size(s)?(t=n.isUndefined(t)?"_":""+t,n.each(s,function(e,s){var o=a+t+s;n.has(i,o)||(i[o]=e)})):i[a]=s}),i},u=function(e){return n.isFunction(Object.freeze)&&Object.freeze(e),e},d={facebook:!0,twitter:!0},c=function(e,t,i){if(!n.has(d,e))throw new TypeError("Unsupported avatar network: "+e);
return i=n.isNumber(i)?Math.max(0,i):73,"//api.massrelevance.com/avatar/"+e+"?"+"screen_name="+encodeURIComponent(t)+"&"+"width="+i+"&"+"height="+i},p=function(e){return e?e.textContent||e.innerText||"":""},h=function(e,i){if(!n.isString(e))throw new TypeError("`url` must be a string");if(!/^(?:https?:)?\/\//.test(e))throw new TypeError("`url` must be a HTTP(S)/protocol-relative URL");var a=t.defer(),s=i||new Image;return s.onload=function(){a.resolve(s)},s.onerror=function(){a.reject(new Error("Image failed to load"))},s.src=e,a.promise},m=function(e,t,i){var a=(e||"").replace(/\r\n|\r/g,"\n");if(n.isNumber(t)){if(!n.isFinite(t))throw new TypeError("`condenseTo` must be finite");if(Math.round(t)!==t)throw new TypeError("`condenseTo` must be an integer");if(0>t)throw new TypeError("`condenseTo` must be >= 0");for(var s="",o=0;t>o;o++)s+="\n";a=a.replace(new RegExp("\\n{"+(t+1)+",}","g"),s)}return n.isString(i)&&(a=a.replace(/\n/g,i)),a},f=function(e){return((e||"")+"").replace(/^https?:/i,"")},_=function(e,t){for(var n=0,i=0,a=e.length;a>i;i++){var s=e[i];if(n+s.length>t)break;n+=s.length}return i},g=Array.from||function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,a=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var s,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(s=arguments[2])}for(var r,l=a(i.length),u=t(n)?Object(new n(l)):new Array(l),d=0;l>d;)r=i[d],u[d]=o?"undefined"==typeof s?o(r,d):o.call(s,r,d):r,d+=1;return u.length=l,u}}(),v=/(\s+)/g,b=function(e,t){e=e||"";var i=g(e);if(!n.isNumber(t)||0>t)throw new TypeError("`maxLength` must be a positive number");if(i.length<=t)return[e,""];var a=(e||"").split(v),s=_(a,t);return[Array.prototype.slice.call(a,0,s).join(""),Array.prototype.slice.call(a,s).join("")]},y=function(e,t){if(e=e||"",!n.isNumber(t)||0>t)throw new TypeError("`maxLength` must be a positive number");var i=document.createElement("div");if(i.innerHTML=e,p(i).length<=t)return[e,""];for(var a=[],s=[],o=0,r=i.childNodes.length;r>o;o++){var l=i.childNodes[o];if(l.nodeType===Node.TEXT_NODE){var u=l.nodeValue.split(v);Array.prototype.push.apply(a,u),Array.prototype.push.apply(s,u)}else a.push(p(l)),s.push(l.outerHTML)}var d=_(a,t);return[Array.prototype.slice.call(s,0,d).join(""),Array.prototype.slice.call(s,d).join("")]},w=function(e,t,n){if(e=""+e,e.length>=t)return e;for(n=n||"0";e.length<t;)e=n+e;return e.slice(-t)},k=function(e){return e=e||{},n(e).pick(function(e){return n.isString(e)||n.isNumber(e)}).mapValues(encodeURIComponent).map(function(e,t){return t+"="+e}).join("&")},q=function(e,t){return t||!String.prototype.trim?e.replace(/^\s+|\s+$/g,""):e.trim()},x=function(e,t){return e=e.replace(/^(&nbsp;|<\s*br\s*\/?>|\s)+|(&nbsp;|<\s*br\s*\/?>|\s)+$/gi,""),q(e,t)};return{arrayFrom:g,calculateISODate:a,calculateFullDate:s,calculateShortDate:r,calculateDisplayDate:o,flattenObject:l,freeze:u,getAvatarProxyURL:c,getNodeText:p,loadImage:h,normalizeLineBreaks:m,protocolRelativize:f,splitTextToLength:b,splitHTMLToLength:y,padLeft:w,paramaterize:k,trim:q,trimHTML:x}}),define("massrel-js-backbone/lib/MediaModel",["require","./backbone","lodash","./util"],function(e){var t=e("./backbone"),n=e("lodash"),i=e("./util"),a={vine:!1,twitter:!1,facebook:!1,google:!1,getglue:!1,youtube:!1,instagram:!1,vimeo:!1,tumblr:!1},s={YouTube:"youtube",Vine:"vine",Twitter:"twitter",Facebook:"facebook",GetGlue:"getglue","Google+":"google",Instagram:"instagram",Vimeo:"vimeo",Tumblr:"tumblr"},o={youtube:"icon-youtube-logo",facebook:"icon-facebook-logo",twitter:"icon-twitter-logo",vine:"icon-vine-logo",instagram:"icon-instagram-logo",tumblr:"icon-tumblr-logo",google:"icon-google-plus-logo"},r=t.Model.extend({defaults:function(){return{type:"",html:"",url:"",link:"",width:0,height:0,provider_name:"",provider_url:"",provider:{},title:"",description:"",thumbnail_url:"",thumbnail_width:0,thumbnail_height:0,author_name:"",author_url:"",formatted_author_name:"",provider_icon_class:"",load_video_html:!1,loop_video:!1,load_gif:!1,autoplay:!1,sizes:i.freeze([])}},constructor:function(e,i){var a=n.extend({},i,{parse:!0});t.Model.call(this,e,a)},initialize:function(){this.set("provider_name",this._getProviderName(this.get("provider_name"))),this.set("provider",this._getProviderObject(this.get("provider_name"))),this.on({"change:provider change:provider_name change:author_name":this._updateFormattedAuthorName,"change:provider":this._updateProviderIconClass}),this._updateFormattedAuthorName(),this._updateProviderIconClass()},size:function(){return r.calculateSize(this.attributes)},resize:function(){var e={width:0,height:0};if(1===arguments.length)e.width=e.height=arguments[0];else{if(2!==arguments.length)throw new Error("Either both `width`, `height` arguments, or a single `size` argument, are required!");e.width=arguments[0],e.height=arguments[1]}var t=r.calculateSize(e),i=null,a=n.findLast(this.get("sizes"),function(e){return i=e,r.calculateSize(e)>=t})||i;return this.set(a),n.clone(a)},validate:function(e){var t={error:this._validateError,link:this._validateLink,photo:this._validatePhoto,rich:this._validateRich,video:this._validateVideo};if(!n.isString(e.type))return new Error("`type` must be a string (got: "+e.type+")");if(!n.has(t,e.type))return new Error("Invalid `type` value: "+e.type);var i;return e.provider_url&&(i=this._validateURL("provider_url",e))?i:e.author_url&&(i=this._validateURL("author_url",e))?i:e.thumbnail_url&&(i=this._validateURL("thumbnail_url",e))?i:this._validateIntegers(["width","height","thumbnail_width","thumbnail_height"],e)||t[e.type].call(this,e)},_validateIntegers:function(e,t){for(var i=e.length-1;i>=0;i--){var a=e[i],s=t[a];if(!n.isNumber(s)||0>s||!n.isFinite(s)||Math.round(s)!==s)return new Error("`"+a+"` must be an integer (got: "+s+")")}},_validateURL:function(e,t){return n.isString(t[e])?t[e]?/^(?:https?:)?\/\//i.test(t[e])?void 0:new Error("`"+e+"` must be a HTTP(S) or protocol-relative URL"):new Error("`"+e+"` must not be empty"):new Error("`"+e+"` must be a string")},_validateError:n.noop,_validateLink:n.noop,_validatePhoto:function(e){return this._validateURL("url",e)},_validateRich:function(e){return n.isString(e.html)?e.html?void 0:new Error("`html` must not be empty"):new Error("`html` must be a string")},_validateVideo:function(e){return n.isString(e.html)?e.html?this._validateURL("url",e):new Error("`html` must not be empty"):new Error("`html` must be a string")},parse:function(e){var t=i.flattenObject(n.omit(e,["version","cache_age"])),a=n.map(t.sizes||[],function(e){return r.pickSizeAttributes(e)});return a.push(r.pickSizeAttributes(t)),a=n(a).sortBy(function(e){return-r.calculateSize(e)}).map(i.freeze).value(),t.sizes=i.freeze(a),"Vine"===t.provider_name&&t.html&&(t.html=t.html.replace("2Fembed%2Fsimple","2Fembed%2Fsimple%3Fautoplay%3Dno")),t},_getProviderName:function(e){return s[e]||e},_getProviderObject:function(e){e=s[e]||e;var t=n.extend({},a);return n.has(t,e)&&(t[e]=!0),t},_getProviderIconClass:function(){return o[this.get("provider_name")]||""},_updateFormattedAuthorName:function(){var e="",t=this.get("provider");(t.twitter||t.instagram||t.tumblr)&&(e="@"),this.set("formatted_author_name",this.get("author_name")?e+this.get("author_name"):"")},_updateProviderIconClass:function(){this.set("provider_icon_class",this._getProviderIconClass())}},{calculateSize:function(e){return e.width&&e.height?e.width*e.height:e.thumbnail_url?e.thumbnail_width*e.thumbnail_height:0},pickSizeAttributes:n.partialRight(n.pick,["html","url","width","height","thumbnail_url","thumbnail_width","thumbnail_height"])});return r}),define("twemoji/twemoji.amd",[],function(){var e=function(){function e(e){return document.createTextNode(e)}function t(e){return e.replace(y,r)}function n(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function i(e,t){for(var n,a,s=e.childNodes,o=s.length;o--;)n=s[o],a=n.nodeType,3===a?t.push(n):1!==a||w.test(n.nodeName)||i(n,t);return t}function a(e){return m(e.indexOf(b)<0?e.replace(v,""):e)}function s(t,n){for(var s,o,r,l,u,d,c,p,h,m,f,_,v,b=i(t,[]),y=b.length;y--;){for(r=!1,l=document.createDocumentFragment(),u=b[y],d=u.nodeValue,p=0;c=g.exec(d);){if(h=c.index,h!==p&&l.appendChild(e(d.slice(p,h))),f=c[0],_=a(f),p=h+f.length,v=n.callback(_,n)){m=new Image,m.onerror=n.onerror,m.setAttribute("draggable","false"),s=n.attributes(f,_);for(o in s)s.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,s[o]);m.className=n.className,m.alt=f,m.src=v,r=!0,l.appendChild(m)}m||l.appendChild(e(f)),m=null}r&&(p<d.length&&l.appendChild(e(d.slice(p))),u.parentNode.replaceChild(l,u))}return t}function o(e,n){return p(e,function(e){var i,s,o=e,r=a(e),l=n.callback(r,n);if(l){o="<img ".concat('class="',n.className,'" ','draggable="false" ','alt="',e,'"',' src="',l,'"'),i=n.attributes(e,r);for(s in i)i.hasOwnProperty(s)&&0!==s.indexOf("on")&&-1===o.indexOf(" "+s+"=")&&(o=o.concat(" ",s,'="',t(i[s]),'"'));o=o.concat(">")}return o})}function r(e){return _[e]}function l(){return null}function u(e){return"number"==typeof e?e+"x"+e:e}function d(e){var t="string"==typeof e?parseInt(e,16):e;return 65536>t?k(t):(t-=65536,k(55296+(t>>10),56320+(1023&t)))}function c(e,t){return t&&"function"!=typeof t||(t={callback:t}),("string"==typeof e?o:s)(e,{callback:t.callback||n,attributes:"function"==typeof t.attributes?t.attributes:l,base:"string"==typeof t.base?t.base:f.base,ext:t.ext||f.ext,size:t.folder||u(t.size||f.size),className:t.className||f.className,onerror:t.onerror||f.onerror})}function p(e,t){return String(e).replace(g,t)}function h(e){g.lastIndex=0;var t=g.test(e);return g.lastIndex=0,t}function m(e,t){for(var n=[],i=0,a=0,s=0;s<e.length;)i=e.charCodeAt(s++),a?(n.push((65536+(a-55296<<10)+(i-56320)).toString(16)),a=0):i>=55296&&56319>=i?a=i:n.push(i.toString(16));return n.join(t||"-")}var f={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:d,toCodePoint:m},onerror:function(){this.parentNode&&this.parentNode.replaceChild(e(this.alt),this)},parse:c,replace:p,test:h},_={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},g=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc6f\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3c-\udd3e])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1e\udd26\udd30\udd33-\udd39\udd3c-\udd3e]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef6]|\ud83e[\udd10-\udd17\udd20-\udd25\udd27\udd3a\udd40-\udd45\udd47-\udd4b\udd50-\udd5e\udd80-\udd91\uddc0]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,v=/\uFE0F/g,b=String.fromCharCode(8205),y=/[&<>'"]/g,w=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,k=String.fromCharCode;return f}();return e}),define("twemoji",["twemoji/twemoji.amd"],function(e){return e}),define("placeholder-image-generator/templates/base",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="<%= width %>" height="<%= height %>"><rect width="100%" height="100%" fill="<%= color %>"></rect><%= template %></svg>')}),define("placeholder-image-generator/templates/youtube",["require","lodash"],function(e){var t=e("lodash");return t.template('<svg version="1.1" x="<%= (19 / 32) * width %>" y="<%= (5 / 8) * height %>" width="<%= width / 2 %>" height="<%= height / 2%>"      viewBox="0 0 792 1224" enable-background="new 0 0 792 1224"><path fill="#FFFFFF" d="M599.3,594.6c-4.6,0-9.9,2.4-14.6,7.1l0,93.8c4.7,4.7,10,7.1,14.6,7.1c8.1,0,11.7-5.9,11.7-21.4v-66.5    C611,599.2,607.4,594.6,599.3,594.6z"/><path fill="#FFFFFF" d="M297,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V569.8    h29.4v116c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V569.8H297L297,726L297,726z"/><path fill="#FFFFFF" d="M164,679.6c1.5,15.5-3.3,23.1-12.4,23.1s-13.9-7.7-12.4-23.1v-61.9c-1.5-15.5,3.2-22.7,12.4-22.7    c9.1,0,13.9,7.3,12.4,22.7L164,679.6L164,679.6z M193.3,620.8c0-16.7-3.4-29.2-9.3-37.1c-7.8-10.7-20.1-15.1-32.5-15.1    c-14,0-24.7,4.4-32.5,15.1c-6,7.9-9.3,20.6-9.3,37.3l0,55.6c0,16.6,2.9,28.1,8.9,35.9c7.8,10.7,20.5,16.3,32.9,16.3    s25.3-5.6,33.1-16.3c5.9-7.8,8.7-19.3,8.7-35.9V620.8L193.3,620.8z"/><path fill="#FFFFFF" d="M77.3,640.9V726H46.4v-85.1c0,0-32.1-104.3-38.7-123.8h32.5l21.7,81.5l21.6-81.5H116L77.3,640.9L77.3,640.9z    "/><g>    <path fill="#FFFFFF" d="M778.1,534c0,0-4.5-31.7-18.4-45.6c-17.6-18.3-37.3-18.4-46.3-19.5c-64.6-4.7-161.6-4.7-161.6-4.7h-0.2        c0,0-97,0-161.6,4.7c-9,1.1-28.7,1.2-46.3,19.5c-13.9,14-18.4,45.6-18.4,45.6s-4.6,37.2-4.6,74.4v34.9c0,37.2,4.6,74.4,4.6,74.4        s4.5,31.7,18.4,45.6c17.6,18.3,40.7,17.7,50.9,19.7c37,3.5,157,4.6,157,4.6s97.1-0.1,161.7-4.8c9-1.1,28.7-1.2,46.3-19.5        c13.8-14,18.4-45.6,18.4-45.6s4.6-37.2,4.6-74.4v-34.9C782.7,571.3,778.1,534,778.1,534z M422.3,726h-30.9V548.1h-32.5v-29.4        l97.5,0v29.4h-34V726z M533.7,726h-29.4v-17c-11.1,12.8-20.6,19.2-30.9,19.2c-9,0-15.3-4.3-18.4-12c-1.9-4.7-3.3-12-3.3-22.7V571.3        h29.4v114.5c0,6.6,0,9.3,0,10.8c0.7,4.3,2.5,5.9,6.3,5.9c5.6,0,10.7-4.9,16.9-13.7V571.3h29.4V726z M640.4,679.6        c0,14.3-1.2,24.4-3.1,30.9c-3.7,11.5-11.9,17.5-23,17.5c-10,0-20.2-6-29.5-17.6l0,15.6h-27.8V518.7h27.8l0,67.6        c9-11.1,19.3-17.5,29.6-17.5c11.2,0,18.6,6.4,22.4,18c1.9,6.2,3.7,16.2,3.7,30.9V679.6z M701.9,702.5c6.9,0,10.9-3.7,12.5-11.2        c0.3-1.5,0.2-8.2,0.2-19.4H744v4.4c0,9-0.7,15.4-1,18.2c-0.9,6.2-3.1,11.8-6.5,16.8c-7.7,11.2-19.2,16.8-33.9,16.8        c-14.7,0-25.8-5.3-33.9-15.8c-5.9-7.7-9.8-19.2-9.8-35.7v-54.1c0-16.5,3.5-29.3,9.4-37.1c8.1-10.6,19.3-16.2,33.5-16.2        c14,0,25.2,5.6,33.1,16.2c5.9,7.8,9.1,19.9,9.1,36.4l0,31.6h-55.7v27.8C688.2,695.4,692.3,702.5,701.9,702.5z"/>    <path fill="#FFFFFF" d="M714.6,613.2c0-14.3-3.7-18.6-13-18.6c-9.4,0-13.3,3.9-13.3,18.4v17.1l26.3,0V613.2z"/></g></svg>')}),define("placeholder-image-generator/js/main",["require","lodash","../templates/base","../templates/youtube"],function(e){var t=e("lodash"),n="data:image/svg+xml;charset=utf-8,",i={width:480,height:360,color:"#333333",template:""},a=e("../templates/base"),s={youtube:e("../templates/youtube")};return function(e){if(e=t.extend({},i,e),""!==e.template){var o=s[e.template];e.template=o?o(e):""}return n+encodeURIComponent(a(e))}}),define("placeholder-image-generator/index",["./js/main"],function(e){return e}),define("placeholder-image-generator",["placeholder-image-generator/index"],function(e){return e}),define("massrel-js-backbone/lib/MediaCollection",["require","./backbone","lodash","./MediaModel","./util"],function(e){var t=e("./backbone"),n=e("lodash"),i=e("./MediaModel"),a=e("./util"),s=t.Collection.extend({model:i,initialize:function(){this.on("reset",this.sort)},comparator:function(e,t){var i=e.get("type"),a=t.get("type");if(i!==a){var o=9999999,r=o;n.has(s.MEDIA_TYPE_SORT_VALUES,i)&&(r=s.MEDIA_TYPE_SORT_VALUES[i]);var l=o;return n.has(s.MEDIA_TYPE_SORT_VALUES,a)&&(l=s.MEDIA_TYPE_SORT_VALUES[a]),r-l}return t.size()-e.size()}},{MEDIA_TYPE_SORT_VALUES:a.freeze({video:0,photo:1,link:2,rich:3})});return s}),define("massrel-js/globals",{host:"api.massrelevance.com",timeout:1e4,protocol:"https:"===document.location.protocol?"https":"http",min_poll_interval:5e3,max_backoff_interval:6e4,backoff_rate:1.8,jsonp_param:"jsonp"}),define("massrel-js/helpers",["./globals"],function(e){var t={},n=encodeURIComponent;t.step_through=function(e,n,i){e=t.is_array(e)?e:[e];var a=e.length-1;if(a>=0)for(;a>=0;a--)for(var s=e[a],o=0,r=n.length;r>o;o++)n[o].call(i,s)},t.extend=function(e,t){var n;for(n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e},t.api_url=function(t,n){n=n||e.host;var i=e.port,a=e.protocol+"://"+n+(i?":"+i:"");return a+t},t.req={},t.req.supportsXhr2=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,t.req.supportsCors=t.req.supportsXhr2||"XDomainRequest"in window,t.req.supportsJSON="JSON"in window,t.req.xdr=function(n,i,a,s,o,r,l,u){var d,c,p=!1;l||(l="GET");var h=function(e){p=!0;var n,i=!1;try{n=JSON.parse(e)}catch(a){i=!0,m(new Error("JSON parse error"))}i||("function"==typeof o?o(n):t.is_array(o)&&o.length>0&&t.step_through(n,o,s))},m=function(e){p=!0,"function"==typeof r&&r(e)};window.XMLHttpRequest&&t.req.supportsXhr2?d=new XMLHttpRequest:window.XDomainRequest&&(d=new XDomainRequest),d?(d.open(l,n+"?"+t.to_qs(i)),d.timeout=e.timeout,d.onerror=m,d.onprogress=function(){},d.ontimeout=m,d.onload=function(){h(d.responseText)},d.send(u),c=setTimeout(function(){p||(d.onerror=function(){},d.onprogress=function(){},d.ontimeout=function(){},d.onload=function(){},d.abort&&d.abort(),m())},e.timeout)):m(new Error("CORS not supported"))},t.req.jsonp=function(n,a,s,o,r,l){var u,d=s+ ++i,c=!1;e._json_callbacks[d]=function(n){"function"==typeof r?r(n):t.is_array(r)&&r.length>0&&t.step_through(n,r,o),delete e._json_callbacks[d],c=!0,clearTimeout(u)},a.push([e.jsonp_param,"massrel._json_callbacks."+d]);var p=t.load(n+"?"+t.to_qs(a));u=setTimeout(function(){c||(e._json_callbacks[d]=function(){delete e._json_callbacks[d]},"function"==typeof l&&l(),p.stop())},e.timeout)},t.jsonp_factory=t.req.jsonp;var i=0;e._json_callbacks={},t.request_factory=function(e,n,i,a,s,o){t.req.supportsCors&&t.req.supportsJSON?t.req.xdr(e,n,i,a,s,o):t.req.jsonp(e,n,i,a,s,o)},t.post_factory=function(e,n,i,a,s,o,r){if(!t.req.supportsCors||!t.req.supportsJSON)throw"POST not supported";t.req.xdr(e,n,a,s,o,r,"POST",i)},t.is_array=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.is_number=function(e){return"[object Number]"===Object.prototype.toString.call(e)};var a=document.getElementsByTagName("head")[0]||document.body;t.load=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e;var i=!1;return n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),"function"==typeof t&&t())},a.insertBefore(n,a.firstChild),{stop:function(){n.onload=n.onreadystatechange=null,a&&n.parentNode&&a.removeChild(n),n.src="#"}}},t.to_qs=function(e){var i,a=[];if(e&&e.length){for(var s=0,o=e.length;o>s;s++){if(i=e[s][1],t.is_array(i)){for(var r=[],l=0,u=i.length;u>l;l++)r[l]=n(i[l]||"");i=r.join(",")}else i=void 0!==i&&null!==i?n(i):"";a.push(n(e[s][0])+"="+i)}return a.join("&")}return""};var s=/\+\d{4} \d{4}$/,o=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+\d{4})$/,r=/^(\d{4})-(\d\d)-(\d\d)T(\d\d)\:(\d\d)\:(\d\d)\.(\d{3})Z$/;return t.fix_date=t.fix_twitter_date=function(e){if(e=e.toString(),s.test(e)){e=e.split(" ");var t=e.pop();e.splice(3,0,t),e=e.join(" ")}else o.test(e)?e=e.replace(o,"$1/$2/$3 $4:$5:$6 $7"):r.test(e)&&(e=e.replace(r,"$1/$2/$3 $4:$5:$6 +0000"));return e},t.parse_params=function(e){e=e||window.location.search.substring(1);var t={};if("?"===e.charAt(0)&&(e=e.substring(1)),e.length>0){e=e.replace(/\+/g," ");for(var n=e.split(/[&;]/g),i=0;i<n.length;i++){var a=n[i].split("="),s=decodeURIComponent(a[0]),o=a.length>1?decodeURIComponent(a[1]):"";if(s in t){var r=t[s];"string"!=typeof r?t[s].push(o):(t[s]=[],t[s].push(r),t[s].push(o))}else t[s]=o}}return t},t.poll_interval=function(t){var n=e.min_poll_interval;return Math.max(t||n,n)},t.poll_backoff=function(t,n){var i=e.max_backoff_interval;return i>t&&(n=Math.max(n-1,0),t*=Math.pow(e.backoff_rate,n),t=Math.min(t||i,i)),t},t.callback_group=function(e){e=e||1;var t=0,n=!0,i=function(i,a){return function(){if(n){if(e>=t)return i.apply(a||this,arguments);throw new Error("Callback group max call count exceeded")}}};return i.deactivate=function(){n=!1},i},t.timeParam=function(e,t,n,i){"undefined"!=typeof e&&(e.getTime&&(e=e.getTime()/1e3),e=+e,!isNaN(e)&&e>0?(e=60*Math.floor(e/60),n.push([t,e])):!isNaN(e)&&i&&0>=e&&n.push([t,e]))},t.always=function(e){var t=new $.Deferred;if(void 0===e)return t.resolve(),t.promise();void 0===e.length&&(e=[e]);var n=e.length,i=function(){n--,0===n&&t.resolve()};return $.each(e,function(){this.always(i)}),t.promise()},t}),define("massrel-js/generic_poller_cycle",["./helpers"],function(e){function t(t,n,i){this.cg=e.callback_group(),this.skip=this.cg(t),this.callback=this.cg(n),this.errback=this.cg(i),this._enabled=!0}return t.prototype.enabled=function(){return this._enabled},t.prototype.disable=function(){this.cg.deactivate(),this._enabled=!1},t}),define("massrel-js/generic_poller",["./helpers","./generic_poller_cycle"],function(e,t){function n(i,a){var s,o=this,r=function(){if(d){var a=e.callback_group(),s=a(l),r=function(t){if(o.consecutive_errors=0,n.failure_mode=o.failure_mode=!1,d){for(var i=0,a=o._filters.length;a>i;i++)t=o._filters[i].call(o,t);e.step_through([t],o._listeners,o),d&&s()}},c=function(){o.consecutive_errors+=1,n.failure_mode=o.failure_mode=!0,s(!0)};u=new t(s,r,c),o.fetch(i,o.opts,u)}},l=function(t){var n=e.poll_interval(1e3*o.frequency);t&&(n=e.poll_backoff(n,o.consecutive_errors)),s=setTimeout(r,n)},u=null,d=!1;this._listeners=[],this._filters=[],this.object=i,this.opts=a||{},this.frequency=this.opts.frequency||30,this.alive_count=0,this.consecutive_errors=0,this.failure_mode=!1,this.start=function(){return d||(d=!0,r()),this},this.stop=function(){return u&&(u.disable(),u=null),clearTimeout(s),d=!1,this}}return n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.data=function(e){return this._listeners.push(e),this},n.prototype.filter=function(e){return this._filters.push(e),this},n.failure_mode=!1,n}),define("massrel-js/poller_queue",["./helpers"],function(e){function t(t,n){function i(){if(!o&&a.length>0&&"function"==typeof s){var e=++r;l.enqueued-=1,l.count+=1;var t=a.shift();o=!0,s.call(l,t,function(){e===r&&(o=!1,setTimeout(i,0))})}}this.poller=t,n=e.extend(n||{},{});var a=[],s=null,o=!1,r=0;this.total=0,this.enqueued=0,this.count=0;var l=this;t.batch(function(e){for(var t=e.length,n=t-1;n>=0;n--)a.push(e[n]);l.total+=t,l.enqueued+=t,i()}),this.next=function(e){o||"function"!=typeof e||(s=e,i())}}return t}),define("massrel-js/poller",["./helpers","./generic_poller","./poller_queue"],function(e,t,n){function i(e,n){t.call(this,e,n),this.stream=this.object,this.filter(this.filter_newer),n=this.opts,this.newest_timestamp=n.newest_timestamp||null,this.stay_realtime="stay_realtime"in n?!!n.stay_realtime:!0,this.hail_mary_mode=!!n.hail_mary_mode,this.first=!0}return e.extend(i.prototype,t.prototype),i.prototype.fetch=function(t,n,i){var a=this,s={start_id:null},o=this.stay_realtime?"since_id":"from_id";return s[o]=a.since_id,n=e.extend({},n),this.first&&(n=e.extend(n.initial||{},n),delete n.initial),s=e.extend(s,n),this.cursorable()||delete s.since_id,t.load(s,function(e){i.enabled()&&(e&&e.length>0&&(a.since_id=e[0].entity_id,a.start_id||(a.start_id=e[e.length-1].entity_id)),i.callback(e),s.timeframe&&a.first&&a.stop(),a.first=!1)},i.errback),this},i.prototype.batch=function(e){return this.data(i.createEnumerator(e,!1))},i.prototype.each=function(e){return this.data(i.createEnumerator(e,!0))},i.prototype.queue=function(e){var t=new n(this);return t.next(e),this},i.prototype.more=function(t,n){var i=this,a=function(){i.object.load(e.extend({start_id:i.start_id,since_id:null},i.opts),function(e){e.length>0&&(i.start_id=e[e.length-1].entity_id,i.since_id||(i.since_id=e[0].entity_id)),t.call(i,e)},function(){"function"==typeof n&&n()})};return a(),this},i.prototype.cursorable=function(){return!(t.failure_mode||this.failure_mode||this.hail_mary_mode)},i.prototype.filter_newer=function(e){return e=i.filter_newer(e,this.newest_timestamp),e&&e.length>0&&(this.newest_timestamp=e[0].queued_at),e},i.prototype.poke=function(){return this},i.createEnumerator=function(t,n){return n?function(n){n&&n.length>0&&e.step_through(n,[t],this)}:function(e){e&&e.length>0&&t.call(this,e)}},i.filter_newer=function(e,t){var n="queued_at";if(e&&e.length>0){var i=this.limit||1/0;if(t)if(e[0][n]<=t)e=[];else if(e[e.length-1][n]>t)e.length>i&&e.splice(this.limit,e.length-i);else{for(var a=[],s=0,o=e.length;o>s&&a.length<i;s++){var r=e[s];if(!(r[n]>t))break;a.push(r)}e=a}else e.length>i&&e.splice(this.limit,e.length-i)}return e},i}),define("massrel-js/meta_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.meta(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/top_things_poller",["./helpers","./generic_poller"],function(e,t){function n(e,n){n.thing=n.thing||"hashtags","number"==typeof n.resolution&&(n.resolution=n.resolution+"s"),t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return"number"==typeof t.resolution&&(t.resolution=t.resolution+"s"),e.topThings(t,n.callback,n.errback),this},n.mostRecentBucket=function(e){if(e.data&&e.data.length>0){for(var t=e.data.length-1;t>=0;t--)if(e.data[t].things&&e.data[t].things.length>0)return e.data[t];if(-1===t)return e.data[e.data.length-1]}return null},n.prototype.each=n.prototype.data,n}),define("massrel-js/stream_keyword_insights",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}return n.prototype.url=function(){return this.stream.keyword_insights_url()},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var a=this.params(t);return e.request_factory(this.url(),a,"_",this,function(){"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(e){e=e||{};var t=[];return e.topics&&t.push(["topics","1"]),"start"in e&&t.push(["start",e.start]),"finish"in e&&t.push(["finish",e.finish]),e.resolution&&t.push(["resolution",e.resolution]),e.countries&&t.push(["countries",e.countries]),t},n}),define("massrel-js/stream_activity",["./helpers","./generic_poller"],function(e,t){function n(e,t){this.stream=e,this.defaults=t||{}}var i=encodeURIComponent;n.prototype.url=function(){return e.api_url("/"+i(this.stream.account)+"/"+i(this.stream.stream_name)+"/activity.json")},n.prototype.fetch=function(t,n,i){t=e.extend({},t||{}),t=e.extend(t,this.defaults);var a=this.params(t);return e.request_factory(this.url(),a,"_",this,function(i){if(i&&(!t.verbose||"0"===t.verbose)&&e.is_array(i.activity))for(var a=i.activity,s=0,o=a.length;o>s;s++){var r=i.start+i.period_size*s;
a[s]=e.extend(a[s],{start:r,finish:Math.min(r+i.period_size,i.finish)})}"function"==typeof n&&n.apply(this,arguments)},i),this},n.prototype.poller=function(e){var n=new t(this,e);return n.fetch=function(e,t,n){return e.fetch(t,n.callback,n.errback)},n},n.prototype.params=function(t){t=t||{};var n=[];return t.view?n.push(["view",t.view]):t.topic&&n.push(["topic",t.topic]),e.timeParam(t.start,"start",n,!0),e.timeParam(t.finish,"finish",n,!0),"periods"in t&&n.push(["periods",t.periods]),t.resolution&&n.push(["resolution",t.resolution]),"tz_offset"in t&&n.push(["tz_offset",t.tz_offset]),t.encode&&n.push(["encode",t.encode]),n.push(["verbose",0]),n};var a=function(e,t,i){n.prototype[e]=function(){return this.defaults[t]=i,this}};return a("approved","view","approved"),a("pending","view","pending"),a("rejected","view","rejected"),a("minutes","resolution","1m"),a("ten_minutes","resolution","10m"),a("hours","resolution","1h"),a("days","resolution","1d"),n}),define("massrel-js/stream",["./helpers","./poller","./meta_poller","./top_things_poller","./stream_keyword_insights","./stream_activity"],function(e,t,n,i,a,s){function o(){var e=1===arguments.length?arguments[0].split("/"):arguments;this.account=e[0],this.stream_name=e[1],this._enumerators=[]}var r=encodeURIComponent;return o.prototype.stream_url=function(){return e.api_url("/"+r(this.account)+"/"+r(this.stream_name)+".json")},o.prototype.meta_url=function(){return e.api_url("/"+r(this.account)+"/"+r(this.stream_name)+"/meta.json")},o.prototype.top_things_url=function(t){return e.api_url("/"+r(this.account)+"/"+r(this.stream_name)+"/top_"+t+".json")},o.prototype.keyword_insights_url=function(){return e.api_url("/"+r(this.account)+"/"+r(this.stream_name)+"/keyword_insights.json")},o.prototype.load=function(t,n,i){t=e.extend(t||{},{});var a=this.buildParams(t);return e.request_factory(this.stream_url(),a,"_",this,n||this._enumerators,i),this},o.prototype.buildParams=function(t){t=t||{};var n=[];if(t.limit&&n.push(["limit",t.limit]),t.since_id?n.push(["since_id",t.since_id]):t.from_id?n.push(["from_id",t.from_id]):(t.start_id||t.start)&&n.push(["start",t.start_id||t.start]),t.replies&&n.push(["replies","1"]),t.geo_hint&&n.push(["geo_hint","1"]),t.from&&n.push(["from",t.from]),t.keywords&&n.push(["keywords",t.keywords]),t.lang&&n.push(["lang",t.lang]),t.network&&n.push(["network",t.network]),t.timeline_search&&n.push(["timeline_search","1"]),t.page_links&&n.push(["page_links","1"]),t.klout&&n.push(["klout","1"]),t.timeframe&&(e.timeParam(t.timeframe.start,"timeframe[start]",n),e.timeParam(t.timeframe.finish,"timeframe[finish]",n)),t.strip_links&&n.push(["strip_links","1"]),t.nonsquare_instagram&&n.push(["nonsquare_instagram","true"]),t.products)if(e.is_array(t.products))for(var i=0;i<t.products.length;i+=1)n.push(["products[]",t.products[i]]);else n.push(["products[]",t.products]);return t.tweet_mode&&n.push(["tweet_mode",t.tweet_mode]),n},o.prototype.each=function(e){return this._enumerators.push(e),this},o.prototype.poller=function(e){return new t(this,e)},o.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildMetaParams(t);return e.request_factory(this.meta_url(),a,"meta_",this,n,i),this},o.prototype.buildMetaParams=function(e){e=e||{};var t=[];return e.all_topics&&t.push(["all_topics",e.all_topics]),e.disregard&&t.push(["disregard",e.disregard]),e.num_minutes&&t.push(["num_minutes",e.num_minutes]),e.num_hours&&t.push(["num_hours",e.num_hours]),e.num_days&&t.push(["num_days",e.num_days]),e.num_trends&&t.push(["num_trends",e.num_trends]),e.num_links&&t.push(["num_links",e.num_links]),e.num_hashtags&&t.push(["num_hashtags",e.num_hashtags]),e.num_contributors&&t.push(["num_contributors",e.num_contributors]),e.top_periods&&t.push(["top_periods",e.top_periods]),e.top_periods_relative&&t.push(["top_periods_relative",e.top_periods_relative]),e.top_count&&t.push(["top_count",e.top_count]),e.finish&&t.push(["finish",e.finish]),e.networks&&t.push(["networks","1"]),(e.activity||0===e.activity)&&t.push(["activity",e.activity]),e.tweet_mode&&t.push(["tweet_mode",e.tweet_mode]),t},o.prototype.metaPoller=function(e){return new n(this,e)},o.prototype.keywordInsights=function(e){return new a(this,e)},o.prototype.topThings=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildTopThingsParams(t);return e.request_factory(this.top_things_url(t.thing),a,"top_things_",this,n,i),this},o.prototype.buildTopThingsParams=function(t){t=t||{};var n=[];if(t.resolution){var i;i=e.is_number(t.resolution)?t.resolution+"s":t.resolution,n.push(["resolution",i])}return t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),t.limit&&n.push(["limit",t.limit]),t.percent&&n.push(["percent","1"]),t.tweet_mode&&n.push(["tweet_mode",t.tweet_mode]),n},o.prototype.topThingsPoller=function(e){return new i(this,e)},o.prototype.activity=function(e){return new s(this,e)},o}),define("massrel-js/account",["./helpers","./meta_poller"],function(e,t){function n(e){this.user=e}var i=encodeURIComponent;return n.prototype.meta_url=function(){return e.api_url("/"+i(this.user)+".json")},n.prototype.meta=function(){var t,n,i;if("function"==typeof arguments[0])n=arguments[0],i=arguments[1],t={};else{if("object"!=typeof arguments[0])throw new Error("incorrect arguments");t=arguments[0],n=arguments[1],i=arguments[2]}var a=this.buildMetaParams(t);return e.request_factory(this.meta_url(),a,"meta_",this,n,i),this},n.prototype.buildMetaParams=function(t){t=t||{};var n=[];if(t.quick_stats&&n.push(["quick_stats","1"]),t.streams){var i=e.is_array(t.streams)?t.streams:[t.streams];n.push(["streams",i.join(",")])}return t.num_minutes&&n.push(["num_minutes",t.num_minutes]),t.num_trends&&n.push(["num_trends",t.num_trends]),t.start&&n.push(["start",t.start]),t.finish&&n.push(["finish",t.finish]),n},n.prototype.metaPoller=function(e){return new t(this,e)},n.prototype.toString=function(){return this.user},n}),define("massrel-js/context",["./helpers"],function(e){function t(e){this.status=e,this.source={facebook:!1,twitter:!1,getglue:!1,google:!1,instagram:!1,rss:!1,message:!1},this.known=!1,this.intents=!0}return t.create=function(n,i){n=n||{};var a=new t(n);return i=e.extend(i||{},{intents:!0,retweeted_by:!0}),a.intents=i.intents,"undefined"!=typeof a.source[n.network]&&(a.source[n.network]=a.known=!0,a.sourceName=n.network),"google_plus"===n.network&&(a.source.google=a.known=!0,a.sourceName="google"),"massrelevance"===n.network&&(a.source.message=a.known=!0,a.sourceName="message"),a.source.twitter&&n.retweeted_status&&i.retweeted_by&&(a.retweet=!0,a.retweeted_by_user=n.user,a.status=n.retweeted_status),a},t.prototype.getPhotoUrl=function(){if(void 0!==this.photo_url)return this.photo_url;var e=!1;if(this.status&&this.known)if(this.source.twitter)if(this.status.entities.media&&this.status.entities.media.length){var t=this.status.entities.media[0];e={url:t.media_url,width:t.sizes.medium.w,height:t.sizes.medium.h,link_url:t.url||t.expanded_url}}else this.status.entities.urls&&this.status.entities.urls.length&&(e={url:this.status.entities.urls[0].expanded_url||this.status.entities.urls[0].url});else this.source.facebook&&(this.status.type&&"photo"===this.status.type||this.status.kind&&"photo"===this.status.kind)?e={url:this.status.picture.replace(/_[st]./,"_n.")}:this.source.google&&this.status.object.attachments.length&&"photo"===this.status.object.attachments[0].objectType?e={url:this.status.object.attachments[0].fullImage.url}:this.source.instagram&&"image"===this.status.type&&(e={url:this.status.images.standard_resolution.url});return this.photo_url=e,e},t}),define("massrel-js/compare_poller",["./helpers","./generic_poller"],function(e,t){function n(){t.apply(this,arguments)}return e.extend(n.prototype,t.prototype),n.prototype.fetch=function(e,t,n){return e.load(t,n.callback,n.errback),this},n.prototype.each=n.prototype.data,n}),define("massrel-js/compare",["./helpers","./compare_poller"],function(e,t){function n(t){this.streams=e.is_array(t)?t.slice(0):"string"==typeof t?[t]:[]}return n.prototype.compare_url=function(){return e.api_url("/compare.json")},n.prototype.buildParams=function(e){var t=[];return e=e||{},e.streams&&t.push(["streams",e.streams]),(e.target||e.target>=0)&&t.push(["target",e.target.toString()]),e.precision&&e.precision>0&&t.push(["precision",e.precision]),t},n.prototype.load=function(t,n,i){"function"==typeof t&&(i=n,n=t,t=null);var a=this.buildParams(e.extend({streams:this.streams,precision:this.precision,target:this.target},t||{}));return e.request_factory(this.compare_url(),a,"meta_",this,n,i),this},n.prototype.poller=function(e){return new t(this,e)},n}),define("massrel-js/intents",["./helpers"],function(e){var t={base_url:"https://twitter.com/intent/",params:{text:"(string): default text, for tweet/reply",url:"(string): prefill url, for tweet/reply",hashtags:"(string): hashtag (or list with ,) without #, for tweet/reply",related:"(string): screen name (or list with ,) without @, available for all",in_reply_to:"(number): tweet id, only for reply",via:"(string): screen name without @, tweet/reply",tweet_id:"(number): tweet id, for retweet and favorite",screen_name:"(string): only for user/profile",user_id:"(number): only for user/profile",original_referer:'(string): url to display with related ("www.yahoo.com suggests you follow:")'},original_referer:window.top!==window.self&&document.referrer||null};return t.url=function(n,i){if(i=e.extend({},i||{}),void 0===i.original_referer&&t.original_referer&&(i.original_referer=t.original_referer),i.original_referer&&!/^https?:\/\//.test(i.original_referer)&&(i.original_referer="http://"+i.original_referer),i.hashtags&&navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)){var a=i.text?[i.text]:[];i.url&&(a.push(i.url),delete i.url),a.push("#"+i.hashtags.split(/\s*,\s*/).join(" #").replace(/^\s+|\s+$/gm,"")),delete i.hashtags,i.text=a.join(" ")}var s=[];for(var o in i)s.push([o,i[o]]);return t.base_url+encodeURIComponent(n)+"?"+e.to_qs(s)},t.tweet=function(e){return t.url("tweet",e)},t.reply=function(e,n){return n=n||{},n.in_reply_to=e,t.tweet(n)},t.retweet=function(e,n){return n=n||{},n.tweet_id=e,t.url("retweet",n)},t.favorite=function(e,n){return n=n||{},n.tweet_id=e,t.url("favorite",n)},t.user=function(e,n){return n=n||{},/^\d+$/.test(e+"")?n.user_id=e:n.screen_name=e,t.url("user",n)},t.profile=t.user,t}),define("massrel-js/search",["require","./helpers"],function(e){var t=e("./helpers"),n=function(e){this.apiToken=e};return n.prototype.url=function(){return t.api_url("/search/search.json")},n.prototype.fetch=function(e,n,i){return e=this.buildQueryString(e),t.request_factory(this.url(),e,"_",this,n,i),this},n.prototype.buildQueryString=function(e){var t=[];if("string"==typeof e.q&&t.push(["q",e.q]),e.filters&&(t=t.concat(this.buildParams(e.filters,"filter."))),e.views){var n,i;for(n in e.views)i=e.views[n],"boolean"==typeof i?t.push(["view."+n,i?"1":"0"]):t=t.concat(this.buildParams(i,"view."+n+"."))}return this.apiToken&&t.push(["api_token",this.apiToken]),t},n.prototype.buildParams=function(e,n){n=n||"";var i,a,s,o=[];for(i in e)for(a=e[i],t.is_array(a)||(a=[a]),s=0,len=a.length;len>s;s++){var r=a[s];"boolean"==typeof r&&(r=r?"1":"0"),o.push([n+i,r])}return o},n}),define("massrel-js/facebook_media_questions",["./helpers","./generic_poller"],function(e,t){function n(){}return n.prototype.url=function(){return e.api_url("/facebook/media_question.json")},n.prototype.buildParams=function(e){e=e||{};var t=[];return e.id&&t.push(["id",e.id]),e.page&&t.push(["page",e.page]),t},n.prototype.load=function(t,n,i){t=e.extend(t||{},{});var a=this.buildParams(t);return e.request_factory(this.url(),a,"_",this,n||this._enumerators,i),this},n.prototype.poller=function(e){return new t(this,e)},n}),define("massrel-js/massrel",["./globals","./helpers","./stream","./account","./stream_keyword_insights","./stream_activity","./generic_poller","./generic_poller_cycle","./poller","./meta_poller","./top_things_poller","./poller_queue","./context","./compare","./compare_poller","./intents","./search","./facebook_media_questions"],function(e,t,n,i,a,s,o,r,l,u,d,c,p,h,m,f,_,g){e.Stream=n,e.Account=i,e.StreamKeywordInsights=a,e.StreamActivity=s,e.GenericPoller=o,e.GenericPollerCycle=r,e.Poller=l,e.MetaPoller=u,e.TopThingsPoller=d,e.PollerQueue=c,e.Context=p,e.Compare=h,e.ComparePoller=m,e.helpers=t,e.intents=f,e.Search=_,e.FacebookMediaQuestion=g;var v=t.parse_params();return v["massrel[host]"]&&(e.host=v["massrel[host]"]),e}),define("massrel-js",["massrel-js/massrel"],function(e){return e}),define("massrel-js-backbone/lib/embedly",["require","q","lodash","./util","massrel-js"],function(e){var t=e("q"),n=e("lodash"),i=e("./util"),a=e("massrel-js"),s="https:"===window.location.protocol,o="//embedly.massrelevance.com/1/",r=function(e,i){if(n.isArray(i))i=n(i).each(function(e){if(!n.isString(e))throw new TypeError("array values must be strings (got: "+e+")")}).sortBy().value();else{if(!n.isString(i))throw new TypeError("`urls` must be either a string or an array (got: "+i+")");i=[i]}var r=t.defer();if(i.length>0){var l=[["key","fd577f7497bf11e0b95d4040d3dc5c07"],["secure",s],["maxwidth",1e3],["urls",i]];a.helpers.request_factory(o+e,l,"__embedly_jsonp__",null,function(e){for(var t=0;t<e.length;t++)e[t].link=i[t];r.resolve(e)},function(e){r.reject(new Error(e))})}else r.resolve([]);return r.promise},l=/^(https?:)?\/\/embedly\.massrelevance\.com\/\d+\/image/i,u=function(e){return l.test(e)||(e="//embedly.massrelevance.com/1/image?key=fd577f7497bf11e0b95d4040d3dc5c07&url="+encodeURIComponent(e)),e},d="//cdn.embedly.com/widgets/media.html?",c={url:"",image:"",video:"",video_secure:"true",type:"video/mp4",schema:"instagram"},p=function(e){e=n.extend({},c,e);var t=d+i.paramaterize(e);return'<iframe src="'+t+'" scrolling="no" frameborder="0"></iframe>'};return{embed:n.partial(r,"oembed"),widget:p,proxyImageURL:u}}),define("massrel-js-backbone/lib/StatusModel",["require","./backbone","q","lodash","moment","twemoji","placeholder-image-generator","./MediaCollection","./MediaModel","./embedly","./util"],function(e){var t=e("./backbone"),n=e("q"),i=e("lodash"),a=e("moment"),s=e("twemoji"),o=e("placeholder-image-generator"),r=e("./MediaCollection"),l=e("./MediaModel"),u=e("./embedly"),d=e("./util"),c="media-fetch",p="error:media-fetch",h=function(e){throw new Error("Method `"+e+"` is not implemented")},m=function(e){var t=s.parse(e,{size:"72x72"});return t.replace(/\bclass="\s*emoji\s*"/g,'class="status-emoji"')},f={thumbnail_url:o(),thumbnail_width:480,thumbnail_height:360},_=t.Model.extend({idAttribute:"entity_id",network:null,defaults:{additional_classes:"",raw_status:null,has_fetched_media:!1,is_fetching_media:!1,formatted_permalink:"",formatted_date_format:"display",formatted_date:"",formatted_date_iso:"",formatted_date_full:"",formatted_date_short:"",formatted_date_display:"",formatted_avatar_url_format:"medium",formatted_avatar_url:"",formatted_avatar_url_thumb:"",formatted_avatar_url_small:"",formatted_avatar_url_medium:"",formatted_avatar_url_large:"",formatted_avatar_url_huge:"",formatted_profile_url:"",formatted_text_max_length:140,formatted_text:"",formatted_text_rest:"",formatted_text_full:"",formatted_text_pretty:"",formatted_text_rest_pretty:"",formatted_text_full_pretty:"",formatted_name:"",formatted_name_pretty:"",formatted_klout_score:null,formatted_klout_permalink:null,formatted_place:null,media:null},constructor:function(e,n){var a=i.extend({},n,{parse:!0});t.Model.call(this,e,a)},initialize:function(e,t){this.options=t,this.set("media",new r,{silent:!0}),this.on({"change:formatted_avatar_url_format":this._updateFormattedAvatarURL,"change:formatted_date_format":this._updateFormattedDate,"change:formatted_text_max_length":this._updateFormattedTexts}),this._generateFormattedAvatarURLs(),this._generateFormattedDates(),this._generateFormattedPermalink(),this._generateFormattedProfileURL(),this._updateFormattedAvatarURL(),this._updateFormattedDate(),this._updateFormattedName(),this._updateFormattedPlace(),this._updateFormattedTexts(),this._updateFormattedCounts()},parse:function(e){var t=d.flattenObject(e);return t.raw_status=i.cloneDeep(e),t},_splitText:d.splitTextToLength,_getMediaFetchURLs:function(){h("_getMediaFetchURLs")},_getMediaExisting:function(){h("_getMediaExisting")},_postProcessFetchMedia:function(){},fetchMedia:function(){if(this.get("is_fetching_media"))return this;if(this.get("has_fetched_media"))return this.trigger(c),this;this.set("is_fetching_media",!0),this.set("has_fetched_media",!1);var e=this._getMediaFetchURLs(),t=this._getMediaExisting(),a=n.defer();e&&e.length>0?a=u.embed(e):(a.resolve([]),a=a.promise);var s=this;return a.then(function(e){s.set("is_fetching_media",!1),s.set("has_fetched_media",!0),s._postProcessFetchMedia(e);var n=i(e).reject(function(e){return"error"===e.type}).reject(function(e){var t=["snappytv"],n=["snpy.tv"],a=["photo","video"];return(e.provider_name&&i.contains(t,e.provider_name.toLowerCase())||i.find(n,function(t){return e.link&&e.link.indexOf(t)>=0}))&&"photo"!==e.type&&"video"!==e.type&&e.type&&e.thumbnail_url&&(e.type="photo",e.width=e.thumbnail_width,e.height=e.thumbnail_height,e.url=e.thumbnail_url),!i.contains(a,e.type)}).map(function(e){return e.thumbnail_url||"YouTube"!==e.provider_name||(e.thumbnail_url=o({width:480,height:360,template:"youtube"})),i.extend({},f,e)}).map(function(e){return new l(e)}).concat(t).reject(function(e){return"error"===e.get("type")}).value();s.get("media").reset(n),s.trigger(c)}).fail(function(e){s.set("is_fetching_media",!1),s.set("has_fetched_media",!1),s.trigger(p,s,null,{error:e})}).done(),this},_prettifyText:function(){h("_prettifyText")},_getPermalink:function(){h("_getPermalink")},getPermalink:function(){return this._getPermalink()},_getCreateDate:function(){h("_getCreateDate")},getCreateDate:function(){return this._getCreateDate()},_getText:function(){h("_getText")},getText:function(){return this._getText()},_getPlace:function(){h("_getPlace")},getPlace:function(){return this._getPlace()},_getAvatarURL:function(){h("_getAvatarURL")},getAvatarURL:function(e){var t=1e4;return 0>e||e>t?e=t:(!i.isNumber(e)||i.isNaN(e))&&(e=_.AVATAR_SIZES.medium),this._getAvatarURL(e)},_getProfileURL:function(){h("_getProfileURL")},getProfileURL:function(){return this._getProfileURL()},_getName:function(){h("_getName")},getName:function(){return this._getName()},_updateFormattedDate:function(){var e,t=this.get("formatted_date_format"),n=this.get("formatted_date_iso");return e=i.isFunction(t)?t.call(null,a(n)):this.has("formatted_date_"+t)?this.get("formatted_date_"+t):a(n).format(t),this.set("formatted_date",e),this},updateFormattedDates:function(){return this._generateFormattedDates(),this._updateFormattedDate(),this},_updateFormattedPlace:function(){return this.set("formatted_place",this.getPlace()),this},_updateFormattedAvatarURL:function(){var e,t=this.get("formatted_avatar_url_format");if(i.isFunction(t))e=t.call(null);else{if(!this.has("formatted_avatar_url_"+t))throw new TypeError("Invalid avatar format value: "+t);e=this.get("formatted_avatar_url_"+t)}return this.set("formatted_avatar_url",e),this},_updateFormattedTexts:function(){var e=this.getText(),t=this.get("formatted_text_max_length"),n=this._splitText(e,t),a=i.compose(m,i.bind(this._prettifyText,this));return this.set({formatted_text:n[0],formatted_text_rest:n[1],formatted_text_full:e,formatted_text_pretty:a(n[0]),formatted_text_rest_pretty:a(n[1]),formatted_text_full_pretty:a(e)}),this},_updateFormattedName:function(){var e=this.getName();return this.set({formatted_name:e,formatted_name_pretty:m(e)}),this},_generateFormattedAvatarURLs:function(){var e={};return i.each(_.AVATAR_SIZES,function(t,n){e["formatted_avatar_url_"+n]=this.getAvatarURL(t)},this),this.set(e),this},_updateFormattedCounts:function(){h("_updateFormattedCounts")},_generateFormattedProfileURL:function(){return this.set("formatted_profile_url",this.getProfileURL()),this},_generateFormattedPermalink:function(){return this.set("formatted_permalink",this.getPermalink()),this},_generateFormattedDates:function(){var e=this.getCreateDate();e&&e.isValid()||(e=a());var t=d.calculateISODate(e),n=d.calculateFullDate(e),i=d.calculateShortDate(e),s=d.calculateDisplayDate(e);return this.set({formatted_date_iso:t,formatted_date_full:n,formatted_date_short:i,formatted_date_display:s}),this},_convertNumberToAbbreviatedFormat:function(e){return 1e3>e?e:1e5>e?Math.round(e/100)/10+"k":1e6>e?Math.round(e/1e3)+"k":1e9>e?Math.round(e/1e5)/10+"m":Math.round(e/1e8)/10+"b"}},{AVATAR_SIZES:d.freeze({thumb:24,small:48,medium:73,large:128,huge:1e4}),AUTOLINK_DEFAULTS:d.freeze({usernameIncludeSymbol:!0,suppressDataScreenName:!0,targetBlank:!0,symbolTag:"s",textWithSymbolTag:"span",urlClass:"status-pretty-link status-url ",hashtagClass:"status-pretty-link status-hashtag ",usernameClass:"status-pretty-link status-username ",listClass:"status-pretty-link status-list ",cashtagClass:"status-pretty-link status-cashtag "})});return _}),define("massrel-js-backbone/lib/FacebookStatusModel",["require","lodash","moment","twitter-text","./MediaModel","./StatusModel","./embedly","./util"],function(e){var t=e("lodash"),n=e("moment"),i=e("twitter-text"),a=e("./MediaModel"),s=e("./StatusModel"),o=e("./embedly"),r=e("./util"),l=s.extend({network:"facebook",defaults:t.extend({},s.prototype.defaults,{intent_can_comment:!1,intent_can_like:!1,intent_can_share:!1,intent_url_comment:"",intent_url_like:"",intent_url_share:"",actions:[],actions_has_comment:!1,actions_has_like:!1,intent_app_id:"508524932504444"}),initialize:function(){s.prototype.initialize.apply(this,arguments),this.on("change:type change:kind",this._generateIntentAbilities),this.on("change:actions",this._generateAvailableActions),this._generateAvailableActions(),this._generateIntentAbilities(),this._generateIntentURLs()},getType:function(){return this.get("type")||this.get("kind")},_getMediaFetchURLs:function(){var e=this.getType(),n=i.extractUrlsWithIndices(this.getText()),a=t.pluck(n,"url");return("link"===e||"video"===e)&&this.get("link")&&a.push(this.get("link")),t.uniq(a)},_parseMediaPhoto:function(){var e=t.sortBy(this.get("images"),function(e){return-(e.width*e.height)});if(0===e.length)return null;var n=e[0],i=e[e.length-1],s=r.protocolRelativize(i.source);return new a({type:"photo",url:r.protocolRelativize(n.source),link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:s,thumbnail_width:i.width,thumbnail_height:i.height,provider_name:"Facebook",author_name:this.get("from_name"),author_url:l.getAuthorURLById(this.get("from_id")),sizes:t.map(e.slice(1),function(e){return{url:r.protocolRelativize(e.source),width:e.width,height:e.height,thumbnail_url:s,thumbnail_width:i.width,thumbnail_height:i.height}})})},_parseMediaPicture:function(){return this.has("picture")&&"video"!==this.getType()?new a({type:"photo",url:l.upgradePictureURL(this.get("picture")),link:this.get("formatted_permalink"),width:0,height:0,thumbnail_url:this.get("picture"),thumbnail_width:0,thumbnail_height:0,provider_name:"Facebook",author_name:this.get("from_name"),author_url:l.getAuthorURLById(this.get("from_id"))}):null},_postProcessFetchMedia:function(e){if(e&&e.length){var n=t.sortBy(this.get("format"),function(e){return-(e.width*e.height)});if(0!==n.length){var i=n[0];t.each(e,function(e){"facebook"===e.provider_name.toLowerCase()&&(e.thumbnail_url=r.protocolRelativize(i.picture),e.thumbnail_width=i.width,e.thumbnail_height=i.height)})}}},_parseMediaVideo:function(){var e=t.sortBy(this.get("format"),function(e){return-(e.width*e.height)});if(0===e.length)return null;var n=e[0],i=e[e.length-1],s=r.protocolRelativize(n.picture);return new a({type:"link",url:this.get("link"),link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:s,thumbnail_width:n.width,thumbnail_height:n.height,provider_name:"Facebook",author_name:this.get("from_name"),author_url:l.getAuthorURLById(this.get("from_id")),sizes:t.map(e.slice(1),function(e){return{width:e.width,height:e.height,thumbnail_url:s,thumbnail_width:i.width,thumbnail_height:i.height}})})},_getMediaExisting:function(){var e=[];return t.isArray(this.get("images"))&&e.push(this._parseMediaPhoto()),e.push(this._parseMediaPicture()),t.compact(e)},_prettifyText:function(e){var n=i.extractUrlsWithIndices(e),a=i.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}),o=n.concat(a);i.removeOverlappingEntities(o);var l=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-facebook",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-facebook",hashtagUrlBase:"//www.facebook.com/hashtag/"}),u=i.autoLinkEntities(e,o,l);return r.normalizeLineBreaks(r.trimHTML(u),2,"<br />")},_updateFormattedCounts:function(){},_getCreateDate:function(){return n(this.get("created_time"),n.ISO_8601)},_getPlace:function(){if(this.has("place_id")){var e=this.get("place_location_city")+", "+(this.get("place_location_state")||this.get("place_location_country")),t=this.get("place_location_city")?{name:e}:null,n=parseFloat(this.get("place_location_longitude"),10),i=parseFloat(this.get("place_location_latitude"),10);return{type:"Feature",properties:t,geometry:{type:"Point",coordinates:[n,i]}}}return null},_getAvatarURL:function(e){var t=this.get("from_id");return r.getAvatarProxyURL("facebook",t,e)},_getProfileURL:function(){return"//www.facebook.com/"+this.get("from_id")},_getText:function(){var e;return this.has("share_text")&&this.has("story")?e=this.get("story"):(this.has("message")||this.has("name"))&&(e=this.get("message")||this.get("name")),e||""},_getName:function(){return this.get("from_name")},_getPermalink:function(){var e=this.get("facebook_id");return e.indexOf("_")<0&&(e=this.get("from_id")+"_"+this.get("facebook_id")),"//www.facebook.com/"+e},_generateIntentAbilities:function(){return this.set({intent_can_comment:"comment"!==this.getType()||this.get("actions_has_comment"),intent_can_like:!1,intent_can_share:!0}),this},_generateIntentURLs:function(){return this.set({intent_url_comment:this.get("formatted_permalink")+"/comments",intent_url_like:this.get("formatted_permalink")+"/likes",intent_url_share:this.get("formatted_permalink")+"/share"}),this},_generateAvailableActions:function(){var e={Comment:"comment",Like:"like"},n=this;t.each(e,function(e){n.set("actions_has_"+e,!1)}),this.get("actions")&&t.each(this.get("actions"),function(t){var i=e[t.name];i&&n.set("actions_has_"+i,!0)})}},{upgradePictureURL:function(e){e=t.isString(e)?e:"",e=e.replace(/_[anst]\./,"_n.");var n=/\/safe_image\.php\?.*url=([^&]+)(?:&|$)/g.exec(e);return n&&(e=o.proxyImageURL(decodeURIComponent(n[1]))),e},getAuthorURLById:function(e){return"//facebook.com/"+e}});return l}),define("massrel-js-backbone/lib/GooglePlusStatusModel",["require","lodash","moment","./MediaModel","./StatusModel","./util"],function(e){var t=e("lodash"),n=e("moment"),i=e("./MediaModel"),a=e("./StatusModel"),s=e("./util"),o=t.template('<a href=<%- url %> target="_blank" rel="nofollow" class="<%- classes %>"><s><%- symbol %></s><span><%- text %></span></a>'),r=function(e){var t=n().diff(e,"hours");return 24>t?e.format("LT"):48>t?"Yesterday "+e.format("LT"):e.format("ll")},l=a.extend({network:"google_plus",defaults:t.extend({},a.prototype.defaults,{formatted_date_format:r}),_getMediaFetchURLs:function(){var e=t.map(this.get("object_attachments"),function(e){return e.embed&&e.embed.url?e.embed.url:null});return t.compact(e)},_parseMediaAlbum:function(e){return t.map(e.thumbnails,function(e){var t=s.protocolRelativize(e.image.url);return new i({type:"photo",url:s.protocolRelativize(l.changeURLSizeHint(e.image.url,l.LARGE_PHOTO_SIZE,l.LARGE_PHOTO_SIZE)),link:this.get("formatted_permalink"),width:l.LARGE_PHOTO_SIZE,height:l.LARGE_PHOTO_SIZE,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height,description:e.description||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),sizes:[{url:t,width:e.image.width,height:e.image.height,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height}]})},this)},_parseMediaArticle:function(e){var n={type:"link",url:e.url,link:this.get("formatted_permalink"),title:e.displayName||"",description:e.content||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url")};return e.fullImage&&t.extend(n,{thumbnail_url:e.fullImage.url,thumbnail_width:e.fullImage.width||e.image.width||0,thumbnail_height:e.fullImage.height||e.image.height||0}),new i(n)},_parseMediaPhoto:function(e){var t=s.protocolRelativize(e.image.url);return new i({type:"photo",url:e.fullImage.url,link:this.get("formatted_permalink"),width:e.fullImage.width,height:e.fullImage.height,thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height,title:e.displayName||"",description:e.content||"",provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),sizes:[{url:t,width:Math.round(e.fullImage.width/2),height:Math.round(e.fullImage.height/2),thumbnail_url:t,thumbnail_width:e.image.width,thumbnail_height:e.image.height}]})},_parseMediaVideo:function(e){if(e.embed);else if(e.image)return new i({type:"photo",url:s.protocolRelativize(l.changeURLSizeHint(e.image.url,l.LARGE_PHOTO_SIZE,l.LARGE_PHOTO_SIZE)),link:this.get("formatted_permalink"),width:e.image.width,height:e.image.height,provider_name:"Google+",author_name:this.get("formatted_name"),author_url:this.get("formatted_profile_url"),thumbnail_url:s.protocolRelativize(e.image.url),thumbnail_width:e.image.width,thumbnail_height:e.image.height,title:e.displayName||"",description:e.content||""});return null},_getMediaExisting:function(){var e=t.map(this.get("object_attachments"),function(e){var n=e.objectType,i=t.noop;return"album"===n?i=this._parseMediaAlbum:"article"===n?i=this._parseMediaArticle:"event"===n||("photo"===n?i=this._parseMediaPhoto:"video"===n?i=this._parseMediaVideo:window.console&&window.console.warn&&window.console.warn("Unrecognized Google+ attachment type: "+n,e,this.toJSON())),i.call(this,e)},this);return t(e).flatten(!0).compact().value()},_prettifyText:function(e){var n=document.createElement("div");return n.innerHTML=e,t.each(n.querySelectorAll(".ot-hashtag"),function(e){var t=document.createElement("div");t.innerHTML=o({url:e.href,classes:a.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-google-plus",symbol:"#",text:s.getNodeText(e).slice(1)}),e.parentNode.replaceChild(t.firstChild,e)}),t.each(n.querySelectorAll(".proflinkWrapper"),function(e){var t=e.querySelector(".proflink"),n=document.createElement("div");n.innerHTML=o({url:t.href,classes:a.AUTOLINK_DEFAULTS.usernameClass+"status-username-google-plus",symbol:"+",text:s.getNodeText(t)}),e.parentNode.replaceChild(n.firstChild,e)}),t.each(n.querySelectorAll("a"),function(e){""===s.trim(e.className)&&(e.className=a.AUTOLINK_DEFAULTS.urlClass+"status-url-google-plus",e.target="_blank")}),s.trimHTML(n.innerHTML)},_updateFormattedCounts:function(){},_getName:function(){return this.get("actor_displayName")},_getPermalink:function(){return s.protocolRelativize(this.get("url"))},_getCreateDate:function(){return n(this.get("published"),n.ISO_8601)},_getText:function(){return this.has("object_content")?this.get("object_content"):s.normalizeLineBreaks(this.get("title"),null,"<br />")},_getPlace:function(){if(this.has("location_kind")){var e=parseFloat(this.get("location_position_latitude")),n=parseFloat(this.get("location_position_longitude"));
if(t.isNaN(e)||t.isNaN(n))return null;var i=this.get("location_address_formatted")||"",a=i?{name:i}:null;return{type:"Feature",properties:a,geometry:{type:"Point",coordinates:[n,e]}}}return null},_getAvatarURL:function(e){var t=this.get("actor_image_url");return s.protocolRelativize(t.replace(/\bsz\=\d+/,"sz="+Math.min(9999,e)))},_getProfileURL:function(){return s.protocolRelativize(this.get("actor_url"))},_splitText:s.splitHTMLToLength},{LARGE_PHOTO_SIZE:2560,changeURLSizeHint:function(e,n,i){var a="/";return t.isNumber(n)&&t.isNumber(i)&&(a="/w"+n+"-h"+i+"/"),(e||"").replace(/\/w\d+-h\d+(?:-[a-z])*\//gi,a)},formatDate:r});return l}),define("massrel-js-backbone/lib/InstagramStatusModel",["require","lodash","moment","twitter-text","./MediaModel","./StatusModel","./embedly","./util"],function(e){var t=e("lodash"),n=e("moment"),i=e("twitter-text"),a=e("./MediaModel"),s=e("./StatusModel"),o=e("./embedly"),r=e("./util"),l=s.extend({network:"instagram",_getMediaFetchURLs:function(){var e=[];return"video"===this.get("type")&&e.push(this.get("link")),e},_getMediaExisting:function(){var e=this.get("raw_status"),n=t(e.images).values().sortBy(function(e){return-(e.width*e.height)}).value();if(0===n.length)return null;var i=n[0],s=n[n.length-1],r=o.proxyImageURL(i.url),l=o.proxyImageURL(s.url);return[new a({type:"photo",url:r,link:this.get("formatted_permalink"),width:i.width,height:i.height,thumbnail_url:l,thumbnail_width:s.width,thumbnail_height:s.height,provider_name:"Instagram",author_name:this.get("user_username"),author_url:"//instagram.com/"+this.get("user_username"),sizes:t.map(n.slice(1),function(e){return{url:o.proxyImageURL(e.url),width:e.width,height:e.height,thumbnail_url:l,thumbnail_width:s.width,thumbnail_height:s.height}})})]},_prettifyText:function(e){var n=String.fromCharCode(133)+"#",a=l.getHashtagRuns(e);e=t.reduce(a,function(e,t){var i=t.replace(/#/g,n).slice(1);return e.replace(t,i)},e);var o=i.extractUrlsWithIndices(e),u=i.extractMentionsWithIndices(e),d=i.extractHashtagsWithIndices(e,{checkUrlOverlap:!1}),c=o.concat(d).concat(u);i.removeOverlappingEntities(c);var p=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-instagram",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-instagram",usernameClass:s.AUTOLINK_DEFAULTS.usernameClass+"status-username-instagram",hashtagUrlBase:"//instagram.com/explore/tags/",usernameUrlBase:"//instagram.com/"}),h=i.autoLinkEntities(e,c,p);return r.normalizeLineBreaks(r.trimHTML(h),2,"<br />")},_updateFormattedCounts:function(){},_getName:function(){return this.get("user_full_name")||this.get("user_username")},_getPermalink:function(){return r.protocolRelativize(this.get("link"))},_getCreateDate:function(){return n(this.get("created_time"),"X")},_getText:function(){return this.get("caption_text")||""},_getPlace:function(){if(this.has("location_latitude")){var e=this.get("location_name")?{name:this.get("location_name")}:null,t=parseFloat(this.get("location_longitude"),10),n=parseFloat(this.get("location_latitude"),10);return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[t,n]}}}return null},_getAvatarURL:function(){return o.proxyImageURL(this.get("user_profile_picture"))},_getProfileURL:function(){return"//instagram.com/"+this.get("user_username")}},{getHashtagRuns:function(e){for(var n=/(?:#|^|\s)((?:#[^#\s]+){2,})(?:#|$|\s)/gi,i=[],a=n.exec(e);a;)n.lastIndex=a.index+1,i.push(a[1]),a=n.exec(e);return t.sortBy(i,"length").reverse()}});return l}),define("massrel-js-backbone/lib/RSSStatusModel",["require","lodash","moment","twitter-text","./StatusModel","./MediaModel","./util"],function(e){var t=e("lodash"),n=e("moment"),i=e("twitter-text"),a=e("./StatusModel"),s=e("./MediaModel"),o=e("./util"),r=["ddd MMM DD HH:mm:ss UTC YYYY",n.ISO_8601],l=a.extend({network:"rss",_getMediaFetchURLs:function(){var e=this.get("links").slice();return e.push(this.getPermalink()),t.uniq(e)},_getMediaExisting:function(){var e=this,n=t.map(this.get("raw_status").media,function(t){return new s({type:"photo",url:t.url,link:e.get("formatted_permalink"),height:t.height,width:t.width})});return n},_prettifyText:function(e){var n=i.extractUrlsWithIndices(e);i.removeOverlappingEntities(n);var s=t.extend({},a.AUTOLINK_DEFAULTS,{urlClass:a.AUTOLINK_DEFAULTS.urlClass+"status-url-rss"}),r=i.autoLinkEntities(e,n,s);return o.normalizeLineBreaks(o.trim(r),2,"<br />")},_updateFormattedCounts:function(){},_getPermalink:function(){return/^(?:https?:)?\/\//i.test(this.get("guid"))?this.get("guid"):this.get("link")||"#"},_getCreateDate:function(){var e=this.get("pub_date"),t=n(e,r);return t.isValid()||(t=n(e)),t},_getText:function(){var e=this.get("description")||this.get("title")||"";if(/</g.test(e)&&/>/.test(e)){var t=document.createElement("div");t.innerHTML=e,e=o.getNodeText(t)}return e},_getName:function(){return this.get("author")},_getPlace:t.constant(null),_getAvatarURL:t.constant(""),_getProfileURL:t.constant("")});return l}),define("massrel-js-backbone/lib/TwitterStatusModel",["require","lodash","massrel-js","moment","twitter-text","./StatusModel","./MediaModel","./util","./embedly"],function(e){var t=e("lodash"),n=e("massrel-js"),i=e("moment"),a=e("twitter-text"),s=e("./StatusModel"),o=e("./MediaModel"),r=e("./util"),l=e("./embedly"),u="ddd MMM DD HH:mm:ss ZZ YYYY",d=/https?:\/\/video.twimg.com\/ext_tw_video\/.*?\/pu\/vid\/(.*?)x(.*?)\/.*?.mp4/,c=s.extend({network:"twitter",defaults:t.extend({},s.prototype.defaults,{intent_original_referer:"@spredfast",intent_url_favorite:"",intent_url_reply:"",intent_url_retweet:"",intent_url_user:"",formatted_date_format:"short",is_retweet:!1,reply_mentions:[]}),initialize:function(){s.prototype.initialize.apply(this,arguments),this.on("change:intent_original_referer",this._generateIntentURLs),this._generateIntentURLs(),this._generateReplyMentions()},parse:function(e){var n=t.cloneDeep(e);if(e.retweeted_status){var i=t.cloneDeep(e.retweeted_status),a=t.omit(e,"retweeted_status");t(a).each(function(e,n){t.has(i,n)||(i[n]=e,delete a[n])}),i.retweeting_status=a,i.is_retweet=!0,e=i}var o=s.prototype.parse.call(this,e);return o.raw_status=n,o},_getPlace:function(){var e,n;if(this.has("place_bounding_box_coordinates")){n=this.has("place_name")?{name:this.get("place_name")}:null;var i=this.get("place_bounding_box_coordinates")[0];if(!i||4!==i.length)return null;var a=(parseFloat(i[0][0],10)+parseFloat(i[1][0],10))/2,s=(parseFloat(i[0][1],10)+parseFloat(i[2][1],10))/2;return{type:"Feature",properties:n,geometry:{type:"Point",coordinates:[a,s]}}}return this.has("geo_type")?(e=this.get("place_full_name"),n=e?{name:e}:null,{type:"Feature",properties:n,geometry:{type:"Point",coordinates:t.cloneDeep(this.get("coordinates_coordinates"))}}):this.get("geo_hint_coordinates")?(e=this.get("place_full_name"),e||(e=t.compact([this.get("geo_hint_state"),this.get("geo_hint_country")]).join(", ")),n=e?{name:e}:null,{type:"Feature",properties:n,geometry:{type:"Point",coordinates:[this.get("geo_hint_coordinates")[1],this.get("geo_hint_coordinates")[0]]}}):this.get("user_location")?{type:"Feature",properties:{name:this.get("user_location")},geometry:null}:null},_getCreateDate:function(){return i(this.get("created_at"),u)},_splitText:function(e,t){var n=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")},i=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},a=s.prototype._splitText(n(e),t);return[i(a[0]),i(a[1])]},_getText:function(){if("string"==typeof this.get("full_text")){var e=this.get("display_text_range"),t=r.arrayFrom(this.get("full_text")),n=this.options.strip_mentions?e[0]:0;return t=t.slice(n,e[1]),t.join("")}return this.get("text")},_getMediaFetchURLs:function(){return t.pluck(this.get("entities_urls"),"expanded_url")},_parseMediaPhoto:function(e){var n=t(e.sizes).map(function(e,n){return t.extend({},e,{name:n})}).sortBy(function(e){return-(e.w*e.h)}).value();if(0===n.length)return null;var i=n[0],a=n[n.length-1],s=r.protocolRelativize(e.media_url);return new o({type:"photo",url:s+":"+i.name,link:this.get("formatted_permalink"),width:i.w,height:i.h,thumbnail_url:s+":"+a.name,thumbnail_width:a.w,thumbnail_height:a.h,provider_name:"Twitter",author_name:this.get("user_screen_name"),author_url:"//twitter.com/"+this.get("user_screen_name"),sizes:t.map(n.slice(1),function(e){return{url:s+":"+e.name,width:e.w,height:e.h,thumbnail_url:s+":"+a.name,thumbnail_width:a.w,thumbnail_height:a.h}})})},_parseMediaVideo:function(e){var n=t(e.sizes).map(function(e,n){return t.extend({},e,{name:n})}).sortBy(function(e){return-(e.w*e.h)}).value();if(0===n.length)return null;var i=n[0],a=r.protocolRelativize(e.media_url),s=t(e.video_info.variants).filter(function(e){return"video/mp4"===e.content_type}).map(function(e){var t=i.w,n=i.h,a=d.exec(e.url);return a&&(t=parseInt(a[1],10),n=parseInt(a[2],10)),{url:e.url,w:t,h:n}}).sortBy(function(e){return e.h*e.w}).reverse().value();if(0===s.length)return null;var u=s[0],c={video:u.url,image:a+":"+i.name,url:this.get("formatted_permalink")};return"animated_gif"===e.type&&(c.loop="1"),new o({type:"video",url:u.url,link:this.get("formatted_permalink"),html:l.widget(c),width:u.w,height:u.h,thumbnail_url:a+":"+i.name,thumbnail_width:i.w,thumbnail_height:i.h,provider_name:"Twitter",author_name:this.get("user_screen_name"),author_url:"//twitter.com/"+this.get("user_screen_name"),sizes:t.map(s.slice(1),function(e){return{url:e.url,html:l.widget(t.extend({},c,{video:e.url})),width:e.w,height:e.h}})})},_getMediaExisting:function(){var e=this.get("extended_entities_media");e&&0!==e.length||(e=this.get("entities_media")||[]);var n=t.map(e,function(e){var t=null;return"photo"===e.type?t=this._parseMediaPhoto(e):"video"===e.type||"animated_gif"===e.type?t=this._parseMediaVideo(e):window.console&&window.console.warn&&window.console.warn("Unrecognized Twitter media entity type: "+e.type,e,this.toJSON()),t},this);return t.compact(n)},_prettifyText:function(e){var n=this.get("entities_urls")||[],i=this.get("entities_media")||[],o=t.extend({},s.AUTOLINK_DEFAULTS,{urlClass:s.AUTOLINK_DEFAULTS.urlClass+"status-url-twitter",hashtagClass:s.AUTOLINK_DEFAULTS.hashtagClass+"status-hashtag-twitter",usernameClass:s.AUTOLINK_DEFAULTS.usernameClass+"status-username-twitter",listClass:s.AUTOLINK_DEFAULTS.listClass+"status-list-twitter",cashtagClass:s.AUTOLINK_DEFAULTS.cashtagClass+"status-cashtag-twitter",urlEntities:n.concat(i)}),l=a.autoLink(e,o);return r.normalizeLineBreaks(r.trimHTML(l),null,"<br />")},_getName:function(){return this.get("user_name")},_getPermalink:function(){return"//twitter.com/"+this.get("user_screen_name")+"/status/"+this.get("id_str")},_getAvatarURL:function(e){var t=this.get("user_screen_name");return r.getAvatarProxyURL("twitter",t,e)},_getProfileURL:function(){return"//www.twitter.com/"+this.get("user_screen_name")},_updateFormattedCounts:function(){this.set("formatted_retweet_count",this._convertNumberToAbbreviatedFormat(this.get("retweet_count"))),this.set("formatted_user_followers_count",this._convertNumberToAbbreviatedFormat(this.get("user_followers_count"))),this.set("formatted_user_statuses_count",this._convertNumberToAbbreviatedFormat(this.get("user_statuses_count"))),this.set("formatted_favorite_count",this._convertNumberToAbbreviatedFormat(this.get("favorite_count")))},_generateIntentURLs:function(){var e=this.get("id_str"),i=this.get("user_screen_name"),a={original_referer:this.get("intent_original_referer")},s=r.protocolRelativize;return this.set({intent_url_favorite:s(n.intents.favorite(e,t.clone(a))),intent_url_reply:s(n.intents.reply(e,t.clone(a))),intent_url_retweet:s(n.intents.retweet(e,t.clone(a))),intent_url_user:s(n.intents.user(i,t.clone(a)))}),this},_generateReplyMentions:function(){var e=this.get("display_text_range"),n=[];return e&&(t.forEach(this.get("entities_user_mentions"),function(i){if(i.indices[1]<e[0]){var a=encodeURIComponent(i.screen_name);n.push(t.extend({link:"https://twitter.com/"+a,avatar_url:"//api.massrelevance.com/avatar/twitter?screen_name="+a+"&width=73&height=73"},i))}}),this.set("reply_mentions",n)),this}});return c}),define("massrel-js-backbone/lib/YouTubeVideoStatusModel",["require","lodash","moment","twitter-text","./StatusModel","./MediaModel","./util"],function(e){var t=e("lodash"),n=e("moment"),i=e("twitter-text"),a=e("./StatusModel"),s=e("./MediaModel"),o=e("./util"),r=a.extend({network:"youtube",defaults:t.extend({},a.prototype.defaults,{formatted_date_format:"short",duration:null,duration_pretty:""}),initialize:function(){a.prototype.initialize.apply(this,arguments),this.on("change:contentDetails_duration",this._parseDuration),this._parseDuration()},parse:function(e){var n=t.cloneDeep(e),i=t.cloneDeep(n);i.title=e.snippet.title;var s=a.prototype.parse.call(this,i);return s.raw_status=n,s},_getMediaFetchURLs:function(){return["//youtu.be/"+this.get("youtube_video_id")]},_getMediaExisting:function(){var e=t(this.get("raw_status").snippet.thumbnails).map(function(e){return{url:e.url,width:e.width,height:e.height}}).sortBy(function(e){return-s.calculateSize(e)}).value(),n=e.shift(),i=e[e.length-1];return[new s({type:"photo",url:n.url,link:this.get("formatted_permalink"),width:n.width,height:n.height,thumbnail_url:i.url,thumbnail_width:i.width,thumbnail_height:i.height,provider_name:"YouTube",sizes:e})]},_prettifyText:function(e){var n=i.extractUrlsWithIndices(e);i.removeOverlappingEntities(n);var s=t.extend({},a.AUTOLINK_DEFAULTS,{urlClass:a.AUTOLINK_DEFAULTS.urlClass+"status-url-youtube"}),r=i.autoLinkEntities(e,n,s);return o.normalizeLineBreaks(o.trim(r),2,"<br />")},_updateFormattedCounts:function(){},_getPermalink:function(){return"//youtu.be/"+this.get("youtube_video_id")},_getCreateDate:function(){var e=this.get("snippet_publishedAt"),t=n(e,n.ISO_8601);return t},_getText:function(){return this.get("snippet_description")},_getName:function(){return this.get("snippet_channelTitle")},_getPlace:t.constant(null),_getAvatarURL:t.constant(""),_getProfileURL:function(){return"//youtube.com/channel/"+this.get("snippet_channelId")},_parseDuration:function(){var e=n.duration(this.get("contentDetails_duration"));this.set("duration",e);var t=":"+o.padLeft(e.get("seconds"),2);t=e.get("hours")?e.get("hours")+":"+o.padLeft(e.get("minutes"),2)+t:e.get("minutes")+t,this.set("duration_pretty",t)}});return r}),define("massrel-js-backbone/lib/createStatus",["require","lodash","./FacebookStatusModel","./GooglePlusStatusModel","./InstagramStatusModel","./RSSStatusModel","./TwitterStatusModel","./YouTubeVideoStatusModel"],function(e){var t=e("lodash"),n=e("./FacebookStatusModel"),i=e("./GooglePlusStatusModel"),a=e("./InstagramStatusModel"),s=e("./RSSStatusModel"),o=e("./TwitterStatusModel"),r=e("./YouTubeVideoStatusModel"),l=t.reduce([n,i,a,s,o,r],function(e,t){return e[t.prototype.network]=t,e},{});return function(e,n){if(!(e&&e.network&&t.has(l,e.network))){var i=new TypeError("No constructor found for the given data");throw i.data=e,i}var a=l[e.network];return new a(e,n)}}),define("massrel-js-backbone/lib/StreamPoller",["require","./backbone","q","lodash","./createStatus","massrel-js"],function(e){var t=e("./backbone"),n=e("q"),i=e("lodash"),a=e("./createStatus"),s=e("massrel-js"),o=t.Model.extend({defaults:{stream_name:"",polling:!1},initialize:function(){this._processors=[],this.poller=this._createPoller(),this.on("change:stream_name",this._updatePoller)},start:function(){return this.get("stream_name")&&(this.poller.start(),this.set("polling",!0)),this},stop:function(){return this.poller.stop(),this.set("polling",!1),this},more:function(){return this.trigger("more:loading"),this.poller.more(i.bind(this._handleMore,this)),this},process:function(e){if(!i.isFunction(e))throw new TypeError("`processorFunction` must be a function");return this._processors.push(e),this},_createPoller:function(){var e=new s.Stream(this.get("stream_name")),t=e.poller(this.toJSON());return t.data(i.once(i.bind(this._handleEmpty,this))),t.data(i.bind(this._handleBatch,this)),t},_updatePoller:function(){var e=this.get("polling");return this.poller.stop(),this.poller=this._createPoller(),this.trigger("poller:update"),e&&this.poller.start(),this},_processStatuses:function(e){var t=this,s=i(e).map(function(e){try{var n=a(e,t.toJSON());return t.trigger("status:pre-process",n),n}catch(i){t.trigger("error:invalid-status",i)}}).compact().map(function(e){var a=i.map(t._processors,function(t){var i=n.defer();return t.call(null,e,i),i.promise}),s=n.defer();return 0!==a.length?n.all(a).then(function(){t.trigger("status",e),s.resolve(e)}).fail(function(n){t.trigger("status:rejected",e,n),s.reject(n)}).done():(t.trigger("status",e),s.resolve(e)),s.promise}).value(),o=n.defer();return n.allSettled(s).done(function(e){var t=i(e).filter(function(e){return"fulfilled"===e.state}).pluck("value").value();o.resolve(t)}),o.promise},_handleData:function(e,t){if(this.trigger(t.raw,e),e&&0!==e.length){var n=this;this._processStatuses(e).done(function(e){n.trigger(t.processed,e)})}else this.trigger(t.empty);return this},_handleBatch:function(e){return this._handleData(e,{raw:"raw:batch",empty:"batch:empty",processed:"batch"}),this},_handleMore:function(e){return this._handleData(e,{raw:"raw:more",empty:"more:end",processed:"more"}),this},_handleEmpty:function(e){return e&&0!==e.length||this.trigger("empty"),this}});return o}),define("massrel-js-backbone/lib/ComparePoller",["require","./backbone"],function(e){var t=e("./backbone"),n="massrel-js";return t.Model.extend({defaults:function(){return{streams:[],frequency:20}},initialize:function(){var e=this.toJSON();this.compare=new n.Compare(e.streams),this.poller=this.compare.poller(e)},start:function(){var e=this;this.get("streams")&&this.get("streams").length>0&&(e.set("loading",!0),e.poller.data(function(t){e.set("data",t),e.set("loading",!1)}),e.poller.start())},stop:function(){this.poller.stop()}})}),define("massrel-js-backbone/lib/MetaPoller",["require","./backbone","massrel-js"],function(e){var t=e("./backbone"),n=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",disregard:"",frequency:20,loading:!1,activity:{},count:{},networks:{}}},initialize:function(){var e=this,t=e.toJSON();e.stream=new n.Stream(t.stream_name),e.poller=e.stream.metaPoller(t)},start:function(){var e=this;this.get("stream_name")&&(e.set("loading",!0),e.poller.data(function(t){e.set(t),e.set("loading",!1)}),e.poller.start())},stop:function(){var e=this;e.poller.stop()}})}),define("massrel-js-backbone/lib/TopThingsPoller",["require","./backbone","lodash","massrel-js"],function(e){var t=e("./backbone"),n=e("lodash"),i=e("massrel-js");return t.Model.extend({defaults:function(){return{stream_name:"",networks:1,frequency:20,resolution:"1h",start:"-1h",finish:"",thing:"",limit:50,loading:!1,data:{}}},start:function(){if(this.stop(),this.get("stream_name")){var e=n.pick(this.toJSON(),["tweet_mode","thing","resolution","start","finish","limit","stream_name"]);this.stream=new i.Stream(e.stream_name),this.poller=this.stream.topThingsPoller(e),this.set("loading",!0),this.poller.data(n.bind(function(e){this.set("data",e),this.set("loading",!1)},this)),this.poller.start()}},stop:function(){this.poller&&this.poller.stop()}})}),define("massrel-js-backbone/lib/processors",["require","./util","lodash"],function(e){var t=e("./util"),n=e("lodash"),i=function(e,n,i,a){e.once("media-fetch",function(){var s=e.get("media").at(0);s&&"photo"===s.get("type")?t.loadImage(s.get("url"),a).then(function(){n.resolve()}).fail(function(e){n.reject(e)}).done():i?n.resolve():n.reject(new Error("No media or non-photo as first media item"))}),e.fetchMedia()},a=function(e){return function(n,i){var a=n.get("additional_classes");a+=" status-style-"+e,n.set("additional_classes",t.trim(a).replace(/\s+/g," ")),i.resolve()}},s=function(e){return function(n,i){var a,s=n.get("additional_classes");a=e?new RegExp("(^|\\s+)status-style-"+e+"\\b","g"):/(^|\s+)status-style-[A-Za-z0-9-]+\b/g,s=s.replace(a,""),n.set("additional_classes",t.trim(s).replace(/\s+/g," ")),i.resolve()}},o=function(e,t){e.once("media-fetch",function(){e.get("media").each(function(e){e.set("autoplay",!0)})}),t.resolve()},r=function(e,t){e.once("media-fetch error:media-fetch",function(){t.resolve()}),e.fetchMedia()},l=function(e,n,i){e.once("media-fetch",function(){var a=e.get("media").at(0);if(a){var s;"photo"===a.get("type")?s=a.get("url"):a.get("thumbnail_url")&&(s=a.get("thumbnail_url")),t.loadImage(s,i).fin(function(){n.resolve()}).done()}else n.resolve()}),e.fetchMedia()},u=function(e,t){e.once("media-fetch",function(){e.get("media").each(function(e){e.set("loop_video",!0)})}),t.resolve()},d=function(e){return function(t,i){t.once("media-fetch",function(){var a=t.get("media").filter(function(t){return!n.contains(e,t.get("type"))});t.get("media").remove(a),i.resolve()}),t.fetchMedia()}},c=function(e,t){e.once("media-fetch",function(){e.get("media").length>0?t.resolve():t.reject(new Error("Status has no media."))}),e.fetchMedia()},p=function(e,t){e.once("media-fetch",function(){e.get("media").length>0?"video"===e.get("media").at(0).get("type")||"photo"===e.get("media").at(0).get("type")?t.resolve():t.reject(new Error("Media is not of type photo or video")):t.reject(new Error("Status has no media."))}),e.fetchMedia()},h=function(e,t){0===e._getMediaFetchURLs().length&&0===e._getMediaExisting().length?t.resolve():t.reject(new Error("Status has media."))},m=function(e,t){var n=e.getText()||"";n.replace(/^\s+|\s+$/g,"")?t.resolve():t.reject(new Error("Status has no non-whitespace text"))},f=function(e,t,n){return i(e,t,!1,n)},_=function(e,t,n){return i(e,t,!0,n)};return{addStyleClass:a,autoplayMedia:o,fetchMedia:r,loopVideoMedia:u,preloadImage:l,removeStyleClass:s,removeMediaIfNotType:d,rejectIfNoMedia:c,rejectIfMediaNotPhotoOrVideo:p,rejectIfMedia:h,rejectIfNoText:m,allowOnlyValidPhoto:f,rejectIfInvalidPhoto:_}}),define("massrel-js-backbone/main",["require","./lib/StreamPoller","./lib/ComparePoller","./lib/MetaPoller","./lib/TopThingsPoller","./lib/StatusModel","./lib/TwitterStatusModel","./lib/FacebookStatusModel","./lib/GooglePlusStatusModel","./lib/InstagramStatusModel","./lib/RSSStatusModel","./lib/processors","./lib/MediaCollection","./lib/MediaModel","./lib/createStatus","massrel-js"],function(e){var t=e("./lib/StreamPoller"),n=e("./lib/ComparePoller"),i=e("./lib/MetaPoller"),a=e("./lib/TopThingsPoller"),s=e("./lib/StatusModel"),o=e("./lib/TwitterStatusModel"),r=e("./lib/FacebookStatusModel"),l=e("./lib/GooglePlusStatusModel"),u=e("./lib/InstagramStatusModel"),d=e("./lib/RSSStatusModel"),c=e("./lib/processors"),p=e("./lib/MediaCollection"),h=e("./lib/MediaModel"),m=e("./lib/createStatus"),f=e("massrel-js");return{ComparePoller:n,MetaPoller:i,StreamPoller:t,TopThingsPoller:a,StatusModel:s,FacebookStatusModel:r,GooglePlusStatusModel:l,InstagramStatusModel:u,RSSStatusModel:d,TwitterStatusModel:o,MediaCollection:p,MediaModel:h,processors:c,createStatus:m,massrel:f}}),define("massrel-js-backbone",["massrel-js-backbone/main"],function(e){return e}),function(){var e=function(){function e(e){return e=e||"",/^\//.test(e)||(e=(t[""]||"/static/")+e),Object.prototype.hasOwnProperty.call(t,e)?t[e]:/^\/[^/]/.test(e)?n+e:e}var t={"/components/photo-share-button-6/static/loader.gif":"//massrel-all.massrel.io/static/loader.806ea8a06eb29c46cd9526449bae2fe4f5bb3f32.gif","/components/status-2/static/spinner.svg":"//massrel-all.massrel.io/static/spinner.82cd6a7476f4a43e8863c0551f13cc479b78a661.svg","/components/status-2/static/video-play.png":"//massrel-all.massrel.io/static/video-play.4002e090a697cd3d94f10c328119231ee547d8e4.png","/bower_components/slick/slick/ajax-loader.gif":"//massrel-all.massrel.io/static/ajax-loader.cbaaf95d6d5deeba0a91daf32211cf2322a6b17a.gif","/bower_components/background-size-polyfill/backgroundsize.htc":"//massrel-all.massrel.io/static/backgroundsize.b2ff01ef7655fd1530917b80515fd9e0314b61a7.htc","/bower_components/background-size-polyfill/backgroundsize.min.htc":"//massrel-all.massrel.io/static/backgroundsize.min.b0d1854ee9ebbd813a6b51f532ee73e0ce8efd51.htc","/bower_components/background-size-polyfill/src/intro.htc":"//massrel-all.massrel.io/static/intro.0c14d48d70564e8ffa48ee33e2921b8218db405d.htc","/bower_components/background-size-polyfill/src/outro.htc":"//massrel-all.massrel.io/static/outro.36f6a8a39a184d57a5702cadd67b724349a169ce.htc","/bower_components/background-size-polyfill/src/outro.min.htc":"//massrel-all.massrel.io/static/outro.min.a1b29828ed01b4cbb8f535ed4f043533546d6fc6.htc","/bower_components/background-size-polyfill/images/pattern.png":"//massrel-all.massrel.io/static/pattern.9b07f090653ce990ab10dfedcf1a96691b3bacc0.png","/bower_components/q/q.png":"//massrel-all.massrel.io/static/q.258d66f8de01d842f625aa30760a1e554be8c5e5.png","/bower_components/background-size-polyfill/images/algeria.jpg":"//massrel-all.massrel.io/static/algeria.8fba62617211caf29109e87ce78891879722f7b9.jpg","/bower_components/background-size-polyfill/images/algerian1.jpg":"//massrel-all.massrel.io/static/algerian1.5367f7f1990e616e0d250f33f514c61efab22bb2.jpg","/bower_components/background-size-polyfill/images/algerian2.jpg":"//massrel-all.massrel.io/static/algerian2.c16f28605fe02294c344952bdd85d447cf28ea41.jpg","/bower_components/background-size-polyfill/images/jar1.jpg":"//massrel-all.massrel.io/static/jar1.81059f90ef0f79d947601a5b35d874920dd502f6.jpg","/bower_components/background-size-polyfill/images/jar2.jpg":"//massrel-all.massrel.io/static/jar2.494a9249331a960aed0b0a587dad07adf0697c4d.jpg","/bower_components/background-size-polyfill/images/parthenon.jpg":"//massrel-all.massrel.io/static/parthenon.41f0bb0e566a150afca4c169b035eb1423b418ff.jpg","/bower_components/background-size-polyfill/images/propylaea.jpg":"//massrel-all.massrel.io/static/propylaea.99b5c36e446ffa9bd712d04b50ddd271516829c7.jpg","/bower_components/slick/slick/fonts/slick.eot":"//massrel-all.massrel.io/static/slick.2dc80ee445f351c8c621d093f9d8e2a0e631217c.eot","/bower_components/socialite-0/fonts/socialite-0-12-0.eot":"//massrel-all.massrel.io/static/socialite-0-12-0.d2736df7255a214a5512a4d7ad254f5fc5d6790e.eot","/bower_components/socialite/fonts/socialite-1-7-0.eot":"//massrel-all.massrel.io/static/socialite-1-7-0.d19f34bf6e20df46b6a9a9df86143f931b42724d.eot","/bower_components/slick/slick/fonts/slick.ttf":"//massrel-all.massrel.io/static/slick.edd0d35f739ec686c398e773c644bcc05f73e5f6.ttf","/bower_components/socialite-0/fonts/socialite-0-12-0.ttf":"//massrel-all.massrel.io/static/socialite-0-12-0.5f8c46974a09d3f2e5004dcb935aa93d6e6b7bf1.ttf","/bower_components/socialite/fonts/socialite-1-7-0.ttf":"//massrel-all.massrel.io/static/socialite-1-7-0.20cafbfd8bd1f1b0d1db0d0742097239dce069e8.ttf","/bower_components/slick/slick/fonts/slick.woff":"//massrel-all.massrel.io/static/slick.27f38483a2a6a9a19cd7571b6158edcfd292b8a1.woff","/bower_components/socialite-0/fonts/socialite-0-12-0.woff":"//massrel-all.massrel.io/static/socialite-0-12-0.e93f6ffdcc5e828475d0cfc68687ee8269a0a5e1.woff","/bower_components/socialite/fonts/socialite-1-7-0.woff":"//massrel-all.massrel.io/static/socialite-1-7-0.82a559c38b0c4c7c8308ea775a0f1823c8df7115.woff","/bower_components/q/q.svg":"//massrel-all.massrel.io/static/q.d9845f22bbf9fdc8f4a44850d38de16bdf882062.svg","/bower_components/slick/slick/fonts/slick.svg":"//massrel-all.massrel.io/static/slick.17f63c6f6131389462ba3d814b7ddf83344705f9.svg","/bower_components/socialite-0/fonts/socialite-0-12-0.svg":"//massrel-all.massrel.io/static/socialite-0-12-0.85676defe22336506594cb454de38b77b1f93133.svg","/bower_components/socialite/fonts/socialite-1-7-0.svg":"//massrel-all.massrel.io/static/socialite-1-7-0.93306ac00917c637a044a0e7309c103177bf4eff.svg","/static/backgroundsize.min.htc":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/backgroundsize.min.htc","/static/img/video-play.png":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/img/video-play.png","/static/js/css3-mediaqueries.js":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/js/css3-mediaqueries.js","/static/js/html5-shiv.js":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/js/html5-shiv.js","/static/js/index.js":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/js/index.js","/static/new.html":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/new.html","":"//mall-of-america.massrel.io/template-static-7f9db3cd1374d9e0199c2c57d7ab48809f518800/"},n="";return e.setPrefix=function(e){n=e},e},t=e();"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("staticPath",[],function(){return t}):module.exports=t,"object"==typeof MR&&(MR.staticPath=t)}(),define("templateCompiler",["require","lodash","TemplateStore","staticPath"],function(e){var t=e("lodash"),n=e("TemplateStore"),i=e("staticPath"),a={staticPath:i},s=function(e){return function(i){i=i||{};var s=e.fn;if(e.metadata.customizable){var o=n.get(this.componentId&&this.componentId(),this.componentType&&this.componentType(),e.name);s=o||s}var r=t.merge({},a,i),l=Array.prototype.slice.call(arguments);return l[0]=r,s.apply(null,l)}};return{compile:s}}),define("tmpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("tmpl!media-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)"photo"===type?(__p+="\n  ",__p+="\n  ",!load_gif&&!autoplay&&/\.gif($|\?)/gi.test(url)&&document.createElement("canvas").getContext?(__p+='\n  <div class="media-image media-gif" title="Click to Play"\n      ',__p+=width&&height?'\n      style="padding-bottom: '+__e(100*height/width)+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+='\n  >\n    <canvas width="'+__e(width)+'" height="'+__e(height)+'"></canvas>\n  </div>\n  '):(__p+='\n  <div class="media-image" style="background-image: url('+__e(url)+')">\n    <img src="'+__e(url)+'"\n        alt="'+__e((title+" "+description).replace(/^\s+|\s+$/g,""))+'"\n    />\n    <div class="media-attribution">\n      <div class="media-attribution-author">\n        <a class="media-attribution-link"\n          href="'+__e(author_url)+'"\n          title="'+__e(author_name)+'"\n          target="_blank"\n        >',formatted_author_name&&(__p+="\n        "+(null==(__t=formatted_author_name)?"":__t)+"\n        "),__p+='\n        </a>\n      </div>\n      <a class="media-attribution-logo-link" href="'+__e(link)+'">\n        <div class="media-attribution-logo">\n          ',provider_icon_class&&(__p+='\n          <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n          '),__p+="\n        </div>\n      </a>\n    </div>\n  </div>\n  "),__p+="\n"):"video"===type?(__p+='\n  <div class="media-image media-video-thumbnail"\n      style="background-image: url('+__e(thumbnail_url)+')"\n      title="Click to Play"\n  >\n    ',__p+="\n    ",provider.facebook?(__p+='\n      <div class="media-video-sizer"\n        ',__p+=0!==height*width?'\n        style="padding-bottom: '+__e(100*(height/width))+'%"\n        ':'\n        style="padding-bottom: '+__e(56.25)+'%"\n        ',__p+='>\n        <img src="'+__e(thumbnail_url)+'"\n              alt="'+__e((title+" "+description).replace(/^\s+|\s+$/g,""))+'"\n      </div>\n    '):(__p+="\n      ",thumbnail_url?__p+='\n      <img src="'+__e(thumbnail_url)+'"\n          alt="'+__e((title+" "+description).replace(/^\s+|\s+$/g,""))+'"\n      />\n      ':(__p+='\n      <div class="media-video-sizer"\n        ',__p+=0!==height*width?'\n        style="padding-bottom: '+__e(100*(height/width))+'%"\n        ':'\n        style="padding-bottom: '+__e(56.25)+'%"\n        ',__p+="\n      ></div>\n      "),__p+="\n    "),__p+='\n\n    <div class="media-attribution">\n      <div class="media-attribution-author">\n        <a class="media-attribution-link"\n          href="'+__e(author_url)+'"\n          title="'+__e(author_name)+'"\n          target="_blank"\n        >',formatted_author_name&&(__p+="\n        "+(null==(__t=formatted_author_name)?"":__t)+"\n        "),__p+='\n        </a>\n      </div>\n      <a class="media-attribution-logo-link" href="'+__e(link)+'">\n        <div class="media-attribution-logo">\n          ',provider_icon_class&&(__p+='\n          <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n          '),__p+="\n        </div>\n      </a>\n    </div>\n\n    ",(autoplay||load_video_html)&&(__p+='\n      <div class="video-embed-wrapper"\n        ',0!==height*width&&(__p+='\n          style="padding-top: '+__e(100*(height/width))+'%"\n        '),__p+=">\n        "+(null==(__t=html)?"":__t)+"\n      </div>\n    "),__p+="\n  </div>\n"):"rich"===type?__p+="\n  "+(null==(__t=html)?"":__t)+"\n":"link"===type&&(__p+="\n  ",url&&(__p+='\n  <a class="media-url" href="'+__e(url)+'" target="_blank">\n  '),__p+="\n\n  ",thumbnail_url?__p+='\n  <div class="media-image" style="background-image: url('+__e(thumbnail_url)+')">\n    <img src="'+__e(thumbnail_url)+'"\n        alt="'+__e((title+" "+description).replace(/^\s+|\s+$/g,""))+'"\n    />\n  </div>\n  ':(__p+="\n  <p>",print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+="</p>\n  "),__p+="\n\n  ",url&&(__p+="\n  </a>\n  "),__p+="\n"),__p+="\n";
return __p},metadata:{customizable:!0},name:"media-2"})}),define("components/status-2/views/MediaView",["require","q","lodash","jquery","lib/views/BaseView","tmpl!media-2"],function(e){var t=e("q"),n=e("lodash"),i=e("jquery"),a=e("lib/views/BaseView"),s=e("tmpl!media-2"),o=window.addEventListener||function(e,t){window.attachEvent("on"+e,t)},r=window.removeEventListener||function(e,t){window.detachEvent("on"+e,t)},l="loaded",u="loading",d=a.extend({className:"media",template:s,_videoEventListener:null,_frameLoadListener:null,_videoCommandQueue:[],$canvas:null,$video:null,displayOptions:{mediaHandleClickEvent:!0,mediaLoadVideoHtml:!1},_load_video_html:!1,_load_gif:!1,events:{"click .media-video-thumbnail":"handleVideoThumbnailClick","click .media-gif":"handleGIFClick"},initialize:function(e){this.listenTo(this.model,{"change:load_video_html":this._modelEvents,"change:load_gif":this._modelEvents,"change:autoplay":this.render}),this.displayOptions=n.extend(n.clone(this.displayOptions),e.parent.displayOptions||{}),"video"===this.model.get("type")&&this._listenForVideoEvents(),this._syncLocalModelVars(),this.on("media-pause",this.pause)},_loadImage:function(){var e=new Image,i=t.defer();return e.onload=function(){i.resolve(e)},e.onerror=n.bind(function(){var t=new Error("URL '"+this.model.get("url")+"' failed to load");t.image=e,i.reject(t)},this),e.src=this.model.get("url"),i.promise},_listenForVideoEvents:function(){return r("message",this._videoEventListener),this._videoEventListener=n.bind(function(e){var t=e.data;if(n.isString(t))try{t=JSON.parse(t)}catch(i){}if(t&&"player.js"===t.context&&this.$video&&this.$video.length>0){var a=t.value&&n.isString(t.value.src)&&(this.$video.attr("src")===t.value.src.replace(/^https?:/i,"")||this.$video.attr("src")===t.value.src),s=t.listener&&t.listener===this.cid;(a||s)&&this._handleVideoEvent(t)}},this),o("message",this._videoEventListener),this},_handleVideoEvent:function(e){if("ready"===e.event&&n.isArray(this._videoCommandQueue)){var t=this._videoCommandQueue;this._videoCommandQueue=null;for(var i=0,a=t.length;a>i;i++)this._callVideoMethod.apply(this,t[i]);this._callVideoMethod("addEventListener","error"),this._callVideoMethod("addEventListener","timeupdate"),this._callVideoMethod("addEventListener","ended")}else if("error"===e.event&&window.console&&window.console.error){var s="player.js error for "+this.$video.attr("src");window.console.error(s,n.extend({cid:this.cid},e.value))}else this.trigger("player-"+e.event,e);return this},_callVideoMethod:function(e,t){if(n.isArray(this._videoCommandQueue))this._videoCommandQueue.push(n.toArray(arguments));else{var a={context:"player.js",version:"0.0.10",listener:this.cid,method:e,value:t},s=i("html").hasClass("touch");s&&this.model.get("provider").youtube||this.$video[0].contentWindow.postMessage(JSON.stringify(a),"*")}return this},_flagLoading:function(){return this.$el.addClass(u).removeClass(l),this},_flagLoaded:function(){return this.$el.removeClass(u).addClass(l),this},_removeLoadFlags:function(){return this.$el.removeClass(u).removeClass(l),this},_modelEvents:function(){return this._syncLocalModelVars(),this.render(),this},_syncLocalModelVars:function(){return this._load_video_html=this.model.get("load_video_html")||this.displayOptions.mediaLoadVideoHtml,this._load_gif=this.model.get("load_gif"),this},toggleMediaTypeClass:function(){return this.$el.addClass("media-"+this.model.get("type")),this.$el.addClass("media-"+this.model.get("provider_name")),this},handleVideoThumbnailClick:function(e){if(!this.displayOptions.mediaHandleClickEvent)return this;var t=i(e.target);return t.closest(".media-attribution-link, .media-attribution-logo-link").length?this:(this._flagLoading(),this._callVideoMethod("play"),this._load_video_html=!0,this.render(),this)},handleGIFClick:function(){return this.displayOptions.mediaHandleClickEvent?(this._load_gif=!this._load_gif,this.render(),this):this},renderStaticGIF:function(){return this.$canvas&&this.$canvas.length>0&&(this._flagLoading(),this._loadImage().then(n.bind(function(e){var t=this.$canvas[0],n=t.width=e.width,i=t.height=e.height;t.getContext("2d").drawImage(e,0,0,n,i),this._flagLoaded()},this))),this},prepareModel:function(){var e=a.prototype.prepareModel.apply(this,arguments);return e.load_video_html=this._load_video_html,e.load_gif=this._load_gif,e},render:function(){return a.prototype.render.apply(this,arguments),this.toggleMediaTypeClass(),this.$video=this.$("iframe:first"),this.$canvas=this.$("canvas:first"),this._removeLoadFlags(),this.$video&&this.$video.length>0&&(this._flagLoading(),this.$video.ready(n.bind(this._flagLoaded,this))),this.model.get("loop_video")&&this._callVideoMethod("setLoop",!0),this.model.get("autoplay")&&this._callVideoMethod("play"),this.model.get("start_muted")&&this._callVideoMethod("mute"),this.renderStaticGIF(),this},pause:function(){this._callVideoMethod("pause")},play:function(e){e&&this._callVideoMethod("setCurrentTime",0),this._callVideoMethod("play")},unmute:function(){this._callVideoMethod("unmute")},notifyWhenFinished:function(e,t){var i=this,a=n.extend({maxTime:0,minTime:0},e),s=!1,o=0,r=0,l=function(){s||(t(),s=!0,i.off("player-timeupdate",u),i.off("player-ended",d))},u=function(e){o=e.value.duration,e.value.seconds+o*r>=a.maxTime&&l()},d=function(){r++,o*r>=a.maxTime?l():!this.model.get("loop_video")&&!s&&o*r<a.minTime&&setTimeout(function(){l()},1e3*(a.minTime-o*r))};a.maxTime&&(this.on("player-timeupdate",u),this.on("player-ended",d))},remove:function(){return r("message",this._videoEventListener),this._videoEventListener=null,this._frameLoadListener&&(this.$video.off("load",this._frameLoadListener),this._frameLoadListener=null),this}});return d}),function(e,t){function n(e){return function(){var t={method:e},n=Array.prototype.slice.call(arguments);/^get/.test(e)?(i.assert(n.length>0,"Get methods require a callback."),n.unshift(t)):(/^set/.test(e)&&(i.assert(0!==n.length,"Set methods require a value."),t.value=n[0]),n=[t]),this.send.apply(this,n)}}var i={};i.DEBUG=!1,i.VERSION="0.0.11",i.CONTEXT="player.js",i.POST_MESSAGE=!!e.postMessage,i.origin=function(t){return"//"===t.substr(0,2)&&(t=e.location.protocol+t),t.split("/").slice(0,3).join("/")},i.addEvent=function(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)},i.log=function(){i.log.history=i.log.history||[],i.log.history.push(arguments),e.console&&i.DEBUG&&e.console.log(Array.prototype.slice.call(arguments))},i.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},i.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isNone=function(e){return null===e||void 0===e},i.has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.indexOf=function(e,t){if(null==e)return-1;var n=0,i=e.length;if(Array.prototype.IndexOf&&e.indexOf===Array.prototype.IndexOf)return e.indexOf(t);for(;i>n;n++)if(e[n]===t)return n;return-1},i.assert=function(e,t){if(!e)throw t||"Player.js Assert Failed"},i.Keeper=function(){this.init()},i.Keeper.prototype.init=function(){this.data={}},i.Keeper.prototype.getUUID=function(){return"listener-xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"===e?t:8|3&t;return n.toString(16)})},i.Keeper.prototype.has=function(e,t){if(!this.data.hasOwnProperty(e))return!1;if(i.isNone(t))return!0;for(var n=this.data[e],a=0;a<n.length;a++)if(n[a].id===t)return!0;return!1},i.Keeper.prototype.add=function(e,t,n,i,a){var s={id:e,event:t,cb:n,ctx:i,one:a};this.has(t)?this.data[t].push(s):this.data[t]=[s]},i.Keeper.prototype.execute=function(e,t,n,a){if(!this.has(e,t))return!1;for(var s=[],o=[],r=0;r<this.data[e].length;r++){var l=this.data[e][r];i.isNone(t)||!i.isNone(t)&&l.id===t?(o.push({cb:l.cb,ctx:l.ctx?l.ctx:a,data:n}),l.one===!1&&s.push(l)):s.push(l)}0===s.length?delete this.data[e]:this.data[e]=s;for(var u=0;u<o.length;u++){var d=o[u];d.cb.call(d.ctx,d.data)}},i.Keeper.prototype.on=function(e,t,n,i){this.add(e,t,n,i,!1)},i.Keeper.prototype.one=function(e,t,n,i){this.add(e,t,n,i,!0)},i.Keeper.prototype.off=function(e,t){var n=[];if(!this.data.hasOwnProperty(e))return n;for(var a=[],s=0;s<this.data[e].length;s++){var o=this.data[e][s];i.isNone(t)||o.cb===t?i.isNone(o.id)||n.push(o.id):a.push(o)}return 0===a.length?delete this.data[e]:this.data[e]=a,n},i.Player=function(e,t){return this instanceof i.Player?(this.init(e,t),void 0):new i.Player(e,t)},i.EVENTS={READY:"ready",PLAY:"play",PAUSE:"pause",ENDED:"ended",TIMEUPDATE:"timeupdate",PROGRESS:"progress",ERROR:"error"},i.EVENTS.all=function(){var e=[];for(var t in i.EVENTS)i.has(i.EVENTS,t)&&i.isString(i.EVENTS[t])&&e.push(i.EVENTS[t]);return e},i.METHODS={PLAY:"play",PAUSE:"pause",GETPAUSED:"getPaused",MUTE:"mute",UNMUTE:"unmute",GETMUTED:"getMuted",SETVOLUME:"setVolume",GETVOLUME:"getVolume",GETDURATION:"getDuration",SETCURRENTTIME:"setCurrentTime",GETCURRENTTIME:"getCurrentTime",SETLOOP:"setLoop",GETLOOP:"getLoop",REMOVEEVENTLISTENER:"removeEventListener",ADDEVENTLISTENER:"addEventListener"},i.METHODS.all=function(){var e=[];for(var t in i.METHODS)i.has(i.METHODS,t)&&i.isString(i.METHODS[t])&&e.push(i.METHODS[t]);return e},i.READIED=[],i.Player.prototype.init=function(n){var a=this;i.isString(n)&&(n=t.getElementById(n)),this.elem=n,this.origin=i.origin(n.src),this.keeper=new i.Keeper,this.isReady=!1,this.queue=[],this.events=i.EVENTS.all(),this.methods=i.METHODS.all(),i.POST_MESSAGE?i.addEvent(e,"message",function(e){a.receive(e)}):i.log("Post Message is not Available."),i.indexOf(i.READIED,n.src)>-1?a.loaded=!0:this.elem.onload=function(){a.loaded=!0}},i.Player.prototype.send=function(e,t,n){if(e.context=i.CONTEXT,e.version=i.VERSION,t){var a=this.keeper.getUUID();e.listener=a,this.keeper.one(a,e.method,t,n)}return this.isReady||"ready"===e.value?(i.log("Player.send",e,this.origin),this.loaded===!0&&this.elem.contentWindow.postMessage(JSON.stringify(e),this.origin),!0):(i.log("Player.queue",e),this.queue.push(e),!1)},i.Player.prototype.receive=function(e){if(i.log("Player.receive",e),e.origin!==this.origin)return!1;var t;try{t=JSON.parse(e.data)}catch(n){return!1}return t.context!==i.CONTEXT?!1:("ready"===t.event&&t.value&&t.value.src===this.elem.src&&this.ready(t),this.keeper.has(t.event,t.listener)&&this.keeper.execute(t.event,t.listener,t.value,this),void 0)},i.Player.prototype.ready=function(e){if(this.isReady===!0)return!1;e.value.events&&(this.events=e.value.events),e.value.methods&&(this.methods=e.value.methods),this.isReady=!0,this.loaded=!0;for(var t=0;t<this.queue.length;t++){var n=this.queue[t];i.log("Player.dequeue",n),"ready"===e.event&&this.keeper.execute(n.event,n.listener,!0,this),this.send(n)}this.queue=[]},i.Player.prototype.on=function(e,t,n){var i=this.keeper.getUUID();return"ready"===e?this.keeper.one(i,e,t,n):this.keeper.on(i,e,t,n),this.send({method:"addEventListener",value:e,listener:i}),!0},i.Player.prototype.off=function(e,t){var n=this.keeper.off(e,t);if(i.log("Player.off",n),n.length>0)for(var a in n)return this.send({method:"removeEventListener",value:e,listener:n[a]}),!0;return!1},i.Player.prototype.supports=function(e,t){i.assert(i.indexOf(["method","event"],e)>-1,'evtOrMethod needs to be either "event" or "method" got '+e),t=i.isArray(t)?t:[t];for(var n="event"===e?this.events:this.methods,a=0;a<t.length;a++)if(-1===i.indexOf(n,t[a]))return!1;return!0};for(var a=0,s=i.METHODS.all().length;s>a;a++){var o=i.METHODS.all()[a];i.Player.prototype.hasOwnProperty(o)||(i.Player.prototype[o]=n(o))}e.playerjs=i,i.addEvent(e,"message",function(e){var t;try{t=JSON.parse(e.data)}catch(n){return!1}return t.context!==i.CONTEXT?!1:("ready"===t.event&&t.value&&t.value.src&&i.READIED.push(t.value.src),void 0)}),i.Receiver=function(e,t){this.init(e,t)},i.Receiver.prototype.init=function(n,a){var s=this;this.isReady=!1,this.origin=i.origin(t.referrer),this.methods={},this.supported={events:n?n:i.EVENTS.all(),methods:a?a:i.METHODS.all()},this.eventListeners={},this.reject=!(e.self!==e.top&&i.POST_MESSAGE),this.reject||i.addEvent(e,"message",function(e){s.receive(e)})},i.Receiver.prototype.receive=function(t){if(t.origin!==this.origin)return!1;var n={};if(i.isObject(t.data))n=t.data;else try{n=e.JSON.parse(t.data)}catch(a){i.log("JSON Parse Error",a)}if(i.log("Receiver.receive",t,n),!n.method)return!1;if(n.context!==i.CONTEXT)return!1;if(-1===i.indexOf(i.METHODS.all(),n.method))return this.emit("error",{code:2,msg:'Invalid Method "'+n.method+'"'}),!1;var s=i.isNone(n.listener)?null:n.listener;if("addEventListener"===n.method)this.eventListeners.hasOwnProperty(n.value)?-1===i.indexOf(this.eventListeners[n.value],s)&&this.eventListeners[n.value].push(s):this.eventListeners[n.value]=[s],"ready"===n.value&&this.isReady&&this.ready();else if("removeEventListener"===n.method){if(this.eventListeners.hasOwnProperty(n.value)){var o=i.indexOf(this.eventListeners[n.value],s);o>-1&&this.eventListeners[n.value].splice(o,1),0===this.eventListeners[n.value].length&&delete this.eventListeners[n.value]}}else this.get(n.method,n.value,s)},i.Receiver.prototype.get=function(e,t,n){var i=this;if(!this.methods.hasOwnProperty(e))return this.emit("error",{code:3,msg:'Method Not Supported"'+e+'"'}),!1;var a=this.methods[e];if("get"===e.substr(0,3)){var s=function(t){i.send(e,t,n)};a.call(this,s)}else a.call(this,t)},i.Receiver.prototype.on=function(e,t){this.methods[e]=t},i.Receiver.prototype.send=function(t,n,a){if(i.log("Receiver.send",t,n,a),this.reject)return i.log("Receiver.send.reject",t,n,a),!1;var s={context:i.CONTEXT,version:i.VERSION,event:t};i.isNone(n)||(s.value=n),i.isNone(a)||(s.listener=a);var o=JSON.stringify(s);e.parent.postMessage(o,""===this.origin?"*":this.origin)},i.Receiver.prototype.emit=function(e,t){if(!this.eventListeners.hasOwnProperty(e))return!1;i.log("Instance.emit",e,t,this.eventListeners[e]);for(var n=0;n<this.eventListeners[e].length;n++){var a=this.eventListeners[e][n];this.send(e,t,a)}return!0},i.Receiver.prototype.ready=function(){i.log("Receiver.ready"),this.isReady=!0;var t={src:e.location.toString(),events:this.supported.events,methods:this.supported.methods};this.emit("ready",t)||this.send("ready",t)},i.HTML5Adapter=function(e){return this instanceof i.HTML5Adapter?(this.init(e),void 0):new i.HTML5Adapter(e)},i.HTML5Adapter.prototype.init=function(e){i.assert(e,"playerjs.VideoJSReceiver requires a video element");var t=this.receiver=new i.Receiver;e.addEventListener("playing",function(){t.emit("play")}),e.addEventListener("pause",function(){t.emit("pause")}),e.addEventListener("ended",function(){t.emit("ended")}),e.addEventListener("timeupdate",function(){t.emit("timeupdate",{seconds:e.currentTime,duration:e.duration})}),e.addEventListener("progress",function(){t.emit("buffered",{percent:e.buffered.length})}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(100*e.volume)}),t.on("setVolume",function(t){e.volume=t/100}),t.on("mute",function(){e.muted=!0}),t.on("unmute",function(){e.muted=!1}),t.on("getMuted",function(t){t(e.muted)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},i.HTML5Adapter.prototype.ready=function(){this.receiver.ready()},i.JWPlayerAdapter=function(e){return this instanceof i.JWPlayerAdapter?(this.init(e),void 0):new i.JWPlayerAdapter(e)},i.JWPlayerAdapter.prototype.init=function(e){i.assert(e,"playerjs.JWPlayerAdapter requires a player object");var t=this.receiver=new i.Receiver;this.looped=!1,e.onPause(function(){t.emit("pause")}),e.onPlay(function(){t.emit("play")}),e.onTime(function(e){var n=e.position,i=e.duration;if(!n||!i)return!1;var a={seconds:n,duration:i};t.emit("timeupdate",a)});var n=this;e.onComplete(function(){n.looped===!0?e.seek(0):t.emit("ended")}),e.onError(function(){t.emit("error")}),t.on("play",function(){e.play(!0)}),t.on("pause",function(){e.pause(!0)}),t.on("getPaused",function(t){t("PLAYING"!==e.getState())}),t.on("getCurrentTime",function(t){t(e.getPosition())}),t.on("setCurrentTime",function(t){e.seek(t)}),t.on("getDuration",function(t){t(e.getDuration())}),t.on("getVolume",function(t){t(e.getVolume())}),t.on("setVolume",function(t){e.setVolume(t)}),t.on("mute",function(){e.setMute(!0)}),t.on("unmute",function(){e.setMute(!1)}),t.on("getMuted",function(t){t(e.getMute()===!0)}),t.on("getLoop",function(e){e(this.looped)},this),t.on("setLoop",function(e){this.looped=e},this)},i.JWPlayerAdapter.prototype.ready=function(){this.receiver.ready()},i.MockAdapter=function(){return this instanceof i.MockAdapter?(this.init(),void 0):new i.MockAdapter},i.MockAdapter.prototype.init=function(){var e={duration:20,currentTime:0,interval:null,timeupdate:function(){},volume:100,mute:!1,playing:!1,loop:!1,play:function(){e.interval=setInterval(function(){e.currentTime+=.25,e.timeupdate({seconds:e.currentTime,duration:e.duration})},250),e.playing=!0},pause:function(){clearInterval(e.interval),e.playing=!1}},t=this.receiver=new i.Receiver;t.on("play",function(){var t=this;e.play(),this.emit("play"),e.timeupdate=function(e){t.emit("timeupdate",e)}}),t.on("pause",function(){e.pause(),this.emit("pause")}),t.on("getPaused",function(t){t(!e.playing)}),t.on("getCurrentTime",function(t){t(e.currentTime)}),t.on("setCurrentTime",function(t){e.currentTime=t}),t.on("getDuration",function(t){t(e.duration)}),t.on("getVolume",function(t){t(e.volume)}),t.on("setVolume",function(t){e.volume=t}),t.on("mute",function(){e.mute=!0}),t.on("unmute",function(){e.mute=!1}),t.on("getMuted",function(t){t(e.mute)}),t.on("getLoop",function(t){t(e.loop)}),t.on("setLoop",function(t){e.loop=t})},i.MockAdapter.prototype.ready=function(){this.receiver.ready()},i.SublimeAdapter=function(e){return this instanceof i.SublimeAdapter?(this.init(e),void 0):new i.SublimeAdapter(e)},i.SublimeAdapter.prototype.events=[i.EVENTS.READY,i.EVENTS.PLAY,i.EVENTS.PAUSE,i.EVENTS.ENDED,i.EVENTS.TIMEUPDATE,i.EVENTS.ERROR],i.SublimeAdapter.prototype.methods=[i.METHODS.PLAY,i.METHODS.PAUSE,i.METHODS.GETDURATION,i.METHODS.SETCURRENTTIME,i.METHODS.GETCURRENTTIME,i.METHODS.REMOVEEVENTLISTENER,i.METHODS.ADDEVENTLISTENER],i.SublimeAdapter.prototype.init=function(e){i.assert(e,"playerjs.SublimeAdapter requires a player object");var t=this.receiver=new i.Receiver(this.events,this.methods);e.on("pause",function(){t.emit("pause")}),e.on("play",function(){t.emit("play")}),e.on("timeUpdate",function(e,n){var i=e.duration();if(!n||!i)return!1;var a={seconds:n,duration:i};t.emit("timeupdate",a)}),e.on("end",function(){t.emit("ended")}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getCurrentTime",function(t){t(e.playbackTime())}),t.on("setCurrentTime",function(t){e.seekTo(t)}),t.on("getDuration",function(t){t(e.duration())})},i.SublimeAdapter.prototype.ready=function(){this.receiver.ready()},i.VideoJSAdapter=function(e){return this instanceof i.VideoJSAdapter?(this.init(e),void 0):new i.VideoJSAdapter(e)},i.VideoJSAdapter.prototype.init=function(e){i.assert(e,"playerjs.VideoJSReceiver requires a player object");var t=this.receiver=new i.Receiver;e.on("pause",function(){t.emit("pause")}),e.on("play",function(){t.emit("play")}),e.on("timeupdate",function(){var n=e.currentTime(),i=e.duration();if(!n||!i)return!1;var a={seconds:n,duration:i};t.emit("timeupdate",a)}),e.on("ended",function(){t.emit("ended")}),e.on("error",function(){t.emit("error")}),t.on("play",function(){e.play()}),t.on("pause",function(){e.pause()}),t.on("getPaused",function(t){t(e.paused())}),t.on("getCurrentTime",function(t){t(e.currentTime())}),t.on("setCurrentTime",function(t){e.currentTime(t)}),t.on("getDuration",function(t){t(e.duration())}),t.on("getVolume",function(t){t(100*e.volume())}),t.on("setVolume",function(t){e.volume(t/100)}),t.on("mute",function(){e.volume(0)}),t.on("unmute",function(){e.volume(1)}),t.on("getMuted",function(t){t(0===e.volume())}),t.on("getLoop",function(t){t(e.loop())}),t.on("setLoop",function(t){e.loop(t)})},i.VideoJSAdapter.prototype.ready=function(){this.receiver.ready()}}(window,document),define("playerjs",["playerjs/player-0.0.11"],function(e){return e}),define("playerjs/player-0.0.11",function(){}),define("lib/player/YTPlayer",["require","lodash"],function(e){var t=e("lodash"),n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf8",i.async=!0,i.src="//www.youtube.com/iframe_api",n.appendChild(i);var a=[],s=!1;return window.onYouTubeIframeAPIReady=function(){s=!0,t.forEach(a,function(e){e(window.YT)})},{ready:function(e){s?e(window.YT):a.push(e)}}}),define("lib/player/YoutubePlayer",["require","./YTPlayer","lodash"],function(e){var t=e("./YTPlayer"),n=e("lodash"),i=function(e){return this instanceof i?(this.instance=e,this.queue=[],void 0):new i(e)};i.prototype.setup=function(e,t){var i=this;this.instance[e]=function(){i._ready?t.apply(i.instance,arguments):i.queue.push({method:e,args:arguments})},this.instance.on=n.bind(this.bind,this),this.instance.off=n.bind(this.unbind,this)},i.prototype.ready=function(){var e=this;this._ready=!0,n.forEach(this.queue,function(t){e.instance[t.method].apply(e.instance,t.args)})},i.prototype.bind=function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},i.prototype.unbind=function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},i.prototype.emit=function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))};var a=function(e){var n=this;return this instanceof a?(this.video=e,this.init(e),t.ready(function(e){n.YT=e,n.ready()}),void 0):new a(e)};return a.prototype.init=function(){var e=this,t=this.receiver=i(this);t.setup("play",function(){e.player.playVideo()}),t.setup("pause",function(){e.player.pauseVideo()}),t.setup("getPaused",function(t){t(e.player.getPlayerState()===e.YT.PlayerState.PAUSED)}),t.setup("getCurrentTime",function(t){t(e.player.getCurrentTime())}),t.setup("setCurrentTime",function(t){e.player.seekTo(t,!0)}),t.setup("getDuration",function(t){t(e.player.getDuration())}),t.setup("getVolume",function(t){t(e.player.getVolume())}),t.setup("setVolume",function(t){e.player.setVolume(t)}),t.setup("mute",function(){e.player.mute()}),t.setup("unmute",function(){e.player.unMute()}),t.setup("getMuted",function(t){t(e.player.isMuted())}),t.setup("getLoop",function(t){t(e._internalLoopStatus)}),t.setup("setLoop",function(t){e._internalLoopStatus=t,e.player.setLoop(t)})},a.prototype.ready=function(){var e=this;this.player=new this.YT.Player(this.video,{events:{onStateChange:function(t){t.data===e.YT.PlayerState.ENDED?e.receiver.emit("ended"):t.data===e.YT.PlayerState.PLAYING?e.receiver.emit("play"):t.data===e.YT.PlayerState.PAUSED&&e.receiver.emit("pause")},onError:function(){e.receiver.emit("error")}}}),this.receiver.ready()},a}),define("lib/player/Player",["require","playerjs","./YoutubePlayer"],function(e){e("playerjs");var t=e("./YoutubePlayer");return function(e){return e.is("iframe")?/youtube.com/.test(e.attr("src"))&&!/embedly.com/.test(e.attr("src"))?new t(e.get(0)):new window.playerjs.Player(e.get(0)):void 0}}),define("components/status-2/views/PlayerJSMediaView",["require","q","lodash","jquery","lib/views/BaseView","lib/player/Player","tmpl!media-2"],function(e){var t=e("q"),n=e("lodash"),i=e("jquery"),a=e("lib/views/BaseView"),s=e("lib/player/Player"),o=e("tmpl!media-2"),r="loaded",l="loading",u=a.extend({className:"media",template:o,_frameLoadListener:null,$canvas:null,$video:null,player:null,displayOptions:{mediaHandleClickEvent:!0,mediaLoadVideoHtml:!1},_load_video_html:!1,_load_gif:!1,events:{"click .media-video-thumbnail":"handleVideoThumbnailClick","click .media-gif":"handleGIFClick"},initialize:function(e){this.listenTo(this.model,{"change:load_video_html":this._modelEvents,"change:load_gif":this._modelEvents,"change:autoplay":this.render}),this.displayOptions=n.extend(n.clone(this.displayOptions),e.parent.displayOptions||{}),this._syncLocalModelVars(),this.on("media-pause",this.pause)},_loadImage:function(){var e=new Image,i=t.defer();return e.onload=function(){i.resolve(e)},e.onerror=n.bind(function(){var t=new Error("URL '"+this.model.get("url")+"' failed to load");t.image=e,i.reject(t)},this),e.src=this.model.get("url"),i.promise},_flagLoading:function(){return this.$el.addClass(l).removeClass(r),this},_flagLoaded:function(){return this.$el.removeClass(l).addClass(r),this._setupPlayer(),this},_removeLoadFlags:function(){return this.$el.removeClass(l).removeClass(r),this},_modelEvents:function(){return this._syncLocalModelVars(),this.render(),this},_syncLocalModelVars:function(){return this._load_video_html=this.model.get("load_video_html")||this.displayOptions.mediaLoadVideoHtml,this._load_gif=this.model.get("load_gif"),this},_setupPlayer:function(){this.player=s(this.$video),this.player&&(this.model.get("loop_video")&&this.player.loop(!0),this.model.get("autoplay")&&this.player.play(),this.model.get("start_muted")&&this.player.mute())},toggleMediaTypeClass:function(){return this.$el.addClass("media-"+this.model.get("type")),this.$el.addClass("media-"+this.model.get("provider_name")),this},handleVideoThumbnailClick:function(e){if(!this.displayOptions.mediaHandleClickEvent)return this;var t=i(e.target);return t.closest(".media-attribution-link, .media-attribution-logo-link").length?this:(this._flagLoading(),this._load_video_html=!0,this.render(),this)},handleGIFClick:function(){return this.displayOptions.mediaHandleClickEvent?(this._load_gif=!this._load_gif,this.render(),this):this},renderStaticGIF:function(){return this.$canvas&&this.$canvas.length>0&&(this._flagLoading(),this._loadImage().then(n.bind(function(e){var t=this.$canvas[0],n=t.width=e.width,i=t.height=e.height;t.getContext("2d").drawImage(e,0,0,n,i),this._flagLoaded()},this))),this},prepareModel:function(){var e=a.prototype.prepareModel.apply(this,arguments);return e.load_video_html=this._load_video_html,e.load_gif=this._load_gif,e},render:function(){return a.prototype.render.apply(this,arguments),this.toggleMediaTypeClass(),this.$video=this.$("iframe:first"),this._setupPlayer(),this.$canvas=this.$("canvas:first"),this._removeLoadFlags(),this.$video&&this.$video.length>0&&(this._flagLoading(),this.$video.ready(n.bind(this._flagLoaded,this))),this.renderStaticGIF(),this},pause:function(){this.player&&this.player.pause()},play:function(e){this.player&&(e&&this.player.setCurrentTime(0),this.player.play())},unmute:function(){this.player&&this.player.unmute()},notifyWhenFinished:function(e,t){if(!this.player)return!1;var i=this,a=n.extend({maxTime:0,minTime:0},e),s=!1,o=0,r=0,l=function(){s||(t(),s=!0,i.player.off("timeupdate",u),i.player.off("ended",d))},u=function(e){o=e.duration,e.seconds+o*r>=a.maxTime&&l()},d=function(){r++,o*r>=a.maxTime?l():i.model.get("loop_video")||s||(o*r<a.minTime?setTimeout(function(){l()},1e3*(a.minTime-o*r)):l())};return a.maxTime&&(this.player.on("timeupdate",u),setTimeout(l,1e3*a.maxTime)),this.player.on("ended",d),!0},remove:function(){return this._frameLoadListener&&(this.$video.off("load",this._frameLoadListener),this._frameLoadListener=null),this.player&&this.player.off(),this}});return u}),define("components/status-2/views/StatusView",["require","lib/views/BaseView","./MediaView","./PlayerJSMediaView","lib/analytics/main"],function(e){var t=e("lib/views/BaseView"),n=e("./MediaView"),i=e("./PlayerJSMediaView"),a=e("lib/analytics/main"),s=/\bstatus-has-media-[a-z0-9-_]+\b/gi,o=t.extend({network:null,className:"status",_oldAdditionalClasses:"",$timestamp:null,$avatar:null,subviews:{media:n,playerjsMedia:i},displayOptions:{additionalClasses:""},initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model,{"change:additional_classes":this.renderAdditionalClasses,"change:formatted_date":this.renderTimestamp,"change:formatted_avatar_url":this.renderAvatar}),this.listenTo(this.model.get("media"),"sort reset add remove",this.render)},render:function(){return t.prototype.render.apply(this,arguments),this.$avatar=this.$(".status-avatar"),this.$timestamp=this.$(".status-timestamp"),this.renderAdditionalClasses(),this.renderAvatar(),this.renderEntityId(),this.renderNetwork(),this.renderMediaClasses(),this.renderTimestamp(),this.trackImpression(),this},renderAdditionalClasses:function(){this.$el.removeClass(this._oldAdditionalClasses);var e=[this.displayOptions.additionalClasses,this.model.get("additional_classes")].join(" ");return this._oldAdditionalClasses=e,this.$el.addClass(e),this},renderEntityId:function(){return this.$el.attr("data-entity-id",this.model.get("entity_id")),this},renderNetwork:function(){return this.$el.attr("data-network",this.network),this},renderTimestamp:function(){if(this.$timestamp&&this.$timestamp.length>0){var e=this.$timestamp.find(".formatted-timestamp");e.length?e.text(this.model.get("formatted_date")):this.$timestamp.text(this.model.get("formatted_date"))}return this},renderAvatar:function(){return this.$avatar&&this.$avatar.length>0&&this.$avatar.css("background-image","url("+this.model.get("formatted_avatar_url")+")"),this},renderMediaClasses:function(){var e=this.model.get("media"),t=e.length>0;this.$el.toggleClass("status-has-media",t);var n=this.$el.attr("class");return n=n.replace(s,""),t&&(n+=" status-has-media-"+e.at(0).get("type")),this.$el.attr("class",n.replace(/\s+/g," ")),this},trackImpression:function(){if(this.model&&this.model.attributes){var e=this.model.get("network"),t=this.model.get("entity_id");a.trackImpression({network:e,entityId:t})}}});return o}),define("tmpl!status-facebook-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header" title="'+__e(formatted_name)+'">\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    ',(intent_can_comment||intent_can_share)&&(__p+='\n    <div class="status-intents">\n      ',intent_can_comment&&(__p+='\n      <a class="status-intent status-intent-facebook-comment mr-action-click"\n        data-action="fb-comment"\n        href="'+__e(intent_url_comment)+'"\n        title="Add a Comment"\n        target="_blank"\n\n        data-app_id="'+__e(intent_app_id)+'"\n        data-post_id="'+__e(facebook_id)+'"\n        data-message="'+__e(formatted_text_full)+'"\n        data-post_type="',print(obj.type||obj.kind),__p+='"\n        data-author_id="'+__e(from_id)+'"\n        data-author="'+__e(from_name)+'"\n        data-permalink="'+__e(formatted_permalink)+'"\n        data-timestamp="'+__e(formatted_date_iso)+'"\n      ><i class="status-intent-icon icon-facebook-comment"></i><span class="status-intent-text">Comment</span></a>\n      '),__p+="\n\n      ",intent_can_share&&(__p+='\n      <a class="status-intent status-intent-facebook-share mr-action-click"\n        data-action="fb-share"\n        href="'+__e(intent_url_share)+'"\n        title="Share this"\n        target="_blank"\n\n        ',__p+='\n        data-link="',print("https:"+formatted_permalink),__p+='"\n        data-name="'+__e(formatted_text||formatted_permalink)+'"\n      ><i class="status-intent-icon icon-facebook-share"></i><span class="status-intent-text">Share</span></a>\n      '),__p+="\n    </div>\n    "),__p+='\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-facebook-logo"></i></a>\n    </div>\n  </div>\n</div>\n';
return __p},metadata:{customizable:!0},name:"status-facebook-2"})}),define("components/status-2/views/FacebookStatusView",["require","lodash","./StatusView","lib/facebookApi","tmpl!status-facebook-2"],function(e){var t=e("lodash"),n=e("./StatusView"),i=e("lib/facebookApi"),a=e("tmpl!status-facebook-2"),s=n.extend({network:"facebook",template:a,className:n.prototype.className+" status-facebook",initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("liked",t.partial(this.toggleLiked,!0)),this.on("unliked",t.partial(this.toggleLiked,!1))},toggleLiked:function(e){return this.$el.toggleClass("status-liked",!!e),this},render:function(){return n.prototype.render.apply(this,arguments),i.init(),this}});return s}),define("tmpl!status-google-plus-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+'"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-google-plus-logo"></i></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-google-plus-2"})}),define("components/status-2/views/GooglePlusStatusView",["require","./StatusView","tmpl!status-google-plus-2"],function(e){var t=e("./StatusView"),n=e("tmpl!status-google-plus-2"),i=t.extend({network:"google_plus",template:n,className:t.prototype.className+" status-google-plus"});return i}),define("lib/instagramApi",["require","jquery","lodash","backbone-amd","q","./RespondingWindow"],function(e){var t=e("jquery"),n=e("lodash"),i=e("backbone-amd"),a=e("q"),s=e("./RespondingWindow"),o=i.Model.extend({defaults:function(){return{instagramApiUrl:"https://api.instagram.com/v1",intentDomain:"//massrelevance.com",accessToken:null}},initialize:function(){this.$body=t("body"),this.setAccessToken(),this.$body.trigger("instagram:ready")},setAccessToken:function(e){e?document.cookie="mr_inst_token="+encodeURIComponent(e):this.set("accessToken",document.cookie.replace(/(?:(?:^|.*;\s*)mr_inst_token\s*\=\s*([^;]*).*$)|^.*$/,"$1"))},likeIntent:function(e){var t=this,n=a.defer();return e=e||{},this.authenticate().then(function(n){return t._postLike(n,e)}).then(function(e){n.resolve(e)}).fail(function(){n.reject()}),n.promise},authenticate:function(){var e=this,t=a.defer();return this.get("accessToken")?t.resolve(this.get("accessToken")):s.getClient().open(this.get("intentDomain")+"/intents/instagram_auth?response_type=code&origin=viz&scope=likes").then(function(n){if(n.error)t.reject(n);else{var i=n.accessToken;e.set("accessToken",i),e.setAccessToken(i),t.resolve(i)}}).fail(function(){t.reject()}),t.promise},_postLike:function(e,i){var s=this,o=a.defer(),r="true"===i.liked,l=n.extend({"delete":r},i);return l.access_token=e,a(t.ajax({crossDomain:!0,dataType:"jsonp",url:this.get("intentDomain")+"/intents/instagram_like.json",data:l})).then(function(t){if(t.meta&&400===t.meta.code){if("OAuthParameterException"===t.meta.error_type)return s.deauthenticate(),s.authenticate().then(function(){return s._postLike(e,i)}).then(function(e){o.resolve(e)}).fail(function(){o.reject()})}else{var n=i.id||"unknown";s.trigger(r?"unlike":"like",n),o.resolve(!r)}}).fail(function(){o.reject()}),o.promise},deauthenticate:function(){this.set("accessToken",""),document.cookie="mr_inst_token=; expires=Thu, 01 Jan 1970 00:00:00 GMT;"}});s.init();var r;return{getClient:function(){if(!r)throw new Error("You must call instagramApi.init() before calling getClient()");return r},init:function(){r||(r=new o)}}}),define("tmpl!status-instagram-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+" ("+__e(user_full_name)+')"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n      <a class="status-author-name status-author-name-secondary status-pretty-link"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >@'+__e(user_username)+'</span></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    <div class="status-intents">\n      <a class="status-intent status-intent-instagram-like mr-action-click"\n        data-action="instagram-like"\n        href="'+__e(formatted_permalink)+'"\n        title="Like this"\n        target="_blank"\n\n        data-id="'+__e(id)+'"\n        data-liked="false"\n      ><i class="status-intent-icon icon-instagram-like"></i><span class="status-intent-text"></span></a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-instagram-logo"></i></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-instagram-2"})}),define("components/status-2/views/InstagramStatusView",["require","./StatusView","lib/instagramApi","tmpl!status-instagram-2"],function(e){var t=e("./StatusView"),n=e("lib/instagramApi"),i=e("tmpl!status-instagram-2"),a=t.extend({network:"instagram",template:i,className:t.prototype.className+" status-instagram",render:function(){return t.prototype.render.apply(this,arguments),n.init(),this}});return a}),define("tmpl!status-rss-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header" title="'+__e(title)+'" >\n    ',author&&(__p+='\n    <div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+"</a>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta"></div>\n\n  <div class="status-footer">\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+"</a>\n    </div>\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-rss-2"})}),define("components/status-2/views/RSSStatusView",["require","./StatusView","tmpl!status-rss-2"],function(e){var t=e("./StatusView"),n=e("tmpl!status-rss-2"),i=t.extend({network:"rss",template:n,className:t.prototype.className+" status-rss"});return i}),define("tmpl!status-twitter-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+" (@"+__e(user_screen_name)+')"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(intent_url_user)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(intent_url_user)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t),user_verified&&(__p+='<span class="status-twitter-verified-icon">\n        <i class="icon-twitter-verified-bg"></i>\n        <i class="icon-twitter-verified-check"></i>\n      </span>'),__p+='</a>\n      <a class="status-author-name status-author-name-secondary status-pretty-link"\n        href="'+__e(intent_url_user)+'"\n        target="_blank"\n      ><s>@</s><span>'+__e(user_screen_name)+'</span></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t)+'\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',is_retweet&&(__p+='\n    <div class="status-meta-item status-meta-item-retweeted">\n      <i class="status-retweet-icon icon-twitter-retweet"></i><span class="status-retweeted-by-text">Retweeted by</span>\n      <a href="//twitter.com/intent/user?screen_name='+__e(retweeting_status_user_screen_name)+'"\n          target="_blank"\n          title="'+__e(retweeting_status_user_name)+" (@"+__e(retweeting_status_user_screen_name)+')"\n      >'+__e(retweeting_status_user_name||"@"+retweeting_status_user_screen_name)+"</a>\n    </div>\n    "),__p+="\n\n    ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    <div class="status-intents">\n      <a class="status-intent status-intent-twitter-reply"\n        href="'+__e(intent_url_reply)+'"\n        title="Reply to this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-reply"></i><span class="status-intent-text">Reply</span></a>\n\n      <a class="status-intent status-intent-twitter-retweet"\n        href="'+__e(intent_url_retweet)+'"\n        title="Retweet this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-retweet"></i><span class="status-intent-text">Retweet</span></a>\n\n      <a class="status-intent status-intent-twitter-favorite"\n        href="'+__e(intent_url_favorite)+'"\n        title="Like this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-like"></i><span class="status-intent-text">Like</span></a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-twitter-logo"></i></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-twitter-2"})}),define("components/status-2/views/TwitterStatusView",["require","./StatusView","tmpl!status-twitter-2"],function(e){var t=e("./StatusView"),n=e("tmpl!status-twitter-2");e(["twitter-widgets","twitter-impressions"]);var i=t.extend({network:"twitter",hasLoggedImpression:!1,template:n,className:t.prototype.className+" status-twitter twitter-custom-tweet",render:function(){return t.prototype.render.apply(this,arguments),this.renderImpressionTracking(),this},renderImpressionTracking:function(){var t=this;return this.$el.attr("data-twitter-tweet-id",this.model.get("id_str")),this.$el.attr("data-twitter-tweet-context",""),this.$el.attr("data-partner","spredfast"),e(["twitter-impressions"],function(){twttr.impressions.ready(function(){t.hasLoggedImpression||(t.hasLoggedImpression=!0,twttr.impressions.logTweets(t.el))})}),this}});return i}),define("tmpl!status-youtube-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+'"\n  ><div class="status-title">\n      <a class="status-title-link"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      >'+(null==(__t=title)?"":__t)+'</a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <div class="status-text">\n      <div class="status-author">by\n        <a class="status-author-link status-author-name"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n        >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n      </div>\n\n      <div class="status-duration"\n      >'+(null==(__t=duration_pretty)?"":__t)+'</div>\n      <div class="status-clear"></div>\n    </div>\n  </div>\n\n  <div class="status-footer">\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-youtube-logo"></i></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-youtube-2"})}),define("components/status-2/views/YouTubeVideoStatusView",["require","./StatusView","tmpl!status-youtube-2"],function(e){var t=e("./StatusView"),n=e("tmpl!status-youtube-2"),i=t.extend({network:"youtube",template:n,className:t.prototype.className+" status-youtube"});return i}),define("components/status-2/viewFactory",["require","lodash","./views/FacebookStatusView","./views/GooglePlusStatusView","./views/InstagramStatusView","./views/RSSStatusView","./views/TwitterStatusView","./views/YouTubeVideoStatusView"],function(e){var t=e("lodash"),n=e("./views/FacebookStatusView"),i=e("./views/GooglePlusStatusView"),a=e("./views/InstagramStatusView"),s=e("./views/RSSStatusView"),o=e("./views/TwitterStatusView"),r=e("./views/YouTubeVideoStatusView"),l=t.reduce([n,i,a,s,o,r],function(e,t){return e[t.prototype.network]=t,e},{}),u=function(e){if(!(e&&e.network&&t.has(l,e.network))){var n=new TypeError("No constructor found for the given model");throw n.model=e,n}var i=[];this.config&&this.config.settings&&this.config.settings.additional_classes&&i.push(this.config.settings.additional_classes);var a=l[e.network];if(a){var s={displayOptions:{}};if(t.isFunction(this.status_style)&&(this.status_style=this.status_style()),this.status_style){var o=this.status_style.overrides(e);o.template&&(s.template=o.template),o.mediaTemplate&&a.prototype.subviews&&(s.subviews=t.clone(a.prototype.subviews,!0),a.prototype.subviews.media&&(s.subviews.media=s.subviews.media.extend({template:o.mediaTemplate})),a.prototype.subviews.playerjsMedia&&(s.subviews.playerjsMedia=s.subviews.playerjsMedia.extend({template:o.mediaTemplate}))),o.additionalClasses&&i.push(o.additionalClasses),o.displayOptions&&t.isObject(o.displayOptions)&&(s.displayOptions=o.displayOptions)}s.displayOptions.additionalClasses=i.join(" "),a=a.extend(s)}return a},d=function(e){var t=u(e);return new t({model:e})},c=function(e){return function(){return u.apply(this,arguments).extend({defaults:e||{}})}},p=function(e){return function(){return d.apply(this,arguments).extend({defaults:e||{}})}};return{getStatusViewConstructor:u,createStatusView:d,statusViewConstructor:c,statusViewCreator:p}}),define("components/status-2/main",["require","lodash","lib/BaseComponent","componentStyle!status-2","massrel-js-backbone","./viewFactory"],function(e){var t=e("lodash"),n=e("lib/BaseComponent"),i=e("componentStyle!status-2"),a=e("massrel-js-backbone"),s=e("./viewFactory");return n.extend({styles:i,initialize:function(){n.prototype.initialize.apply(this,arguments);var e=this.get("config");this._statusViewConstructor=s.statusViewConstructor({componentId:e.id,componentType:e.type,analytics:this.get("analytics"),dispatcher:this.get("dispatcher"),additional_classes:this.get("config").settings.additional_classes}),this._statusViewCreator=s.statusViewCreator({componentId:e.id,componentType:e.type,analytics:this.get("analytics"),dispatcher:this.get("dispatcher"),additional_classes:this.get("config").settings.additional_classes}),e.settings.status_style&&this.get("dispatcher").on("#"+e.settings.status_style+":discovery",t.bind(this._discover,this))},_discover:function(e){"status-style"===e.payload.type&&(this.status_style=e.payload.component)},create:function(){var e=this;return{createStatus:a.createStatus,getStatusViewConstructor:this._statusViewConstructor,createStatusView:this._statusViewCreator,status_style:function(){return e.status_style}}}}).exports()}),define("componentStyle!status-styles-media-tile-1",{render:function(){}}),define("tmpl!status-twitter-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n");return __p},metadata:{},name:"status-twitter-2-media-tile"})}),define("tmpl!status-instagram-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n");return __p},metadata:{},name:"status-instagram-2-media-tile"})}),define("tmpl!status-facebook-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n");return __p},metadata:{},name:"status-facebook-2-media-tile"})}),define("tmpl!status-google-plus-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n");return __p},metadata:{},name:"status-google-plus-2-media-tile"})}),define("tmpl!status-youtube-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)media.length>0&&(__p+="\n  "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n");return __p},metadata:{},name:"status-youtube-2-media-tile"})}),define("tmpl!media-2-media-tile",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)"photo"===type?(__p+="\n  ",__p+="\n  ",!load_gif&&!autoplay&&/\.gif($|\?)/gi.test(url)&&document.createElement("canvas").getContext?(__p+='\n  <div class="media-image media-gif" title="Click to Play"\n      ',__p+=width&&height?'\n      style="padding-bottom: '+__e(100*height/width)+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+='\n  >\n    <canvas width="'+__e(width)+'" height="'+__e(height)+'"></canvas>\n  </div>\n  '):(__p+='\n  <div class="media-image" style="background-image: url('+__e(url)+')">\n    <img src="'+__e(url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    ',(formatted_author_name||provider_icon_class)&&(__p+='\n    <div class="media-attribution">\n      ',formatted_author_name&&(__p+='\n      <div class="media-attribution-author">\n        '+(null==(__t=formatted_author_name)?"":__t)+"\n      </div>\n      "),__p+="\n      ",provider_icon_class&&(__p+='\n      <div class="media-attribution-logo">\n        <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      </div>\n      '),__p+="\n    </div>\n    "),__p+="\n  </div>\n  "),__p+="\n"):"video"===type?(__p+='\n  <div class="media-image media-video-thumbnail"\n      style="background-image: url('+__e(thumbnail_url)+')"\n      title="Click to Play"\n  >\n    ',__p+="\n    ",thumbnail_url?(__p+='\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    '):(__p+='\n    <div class="media-video-sizer"\n      ',__p+=0!==height*width?'\n      style="padding-bottom: '+__e(100*(height/width))+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+="\n    ></div>\n    "),__p+="\n\n    ",autoplay||load_video_html?__p+="\n    "+(null==(__t=html)?"":__t)+"\n    ":(__p+="\n    ",(formatted_author_name||provider_icon_class)&&(__p+='\n    <div class="media-attribution">\n      ',formatted_author_name&&(__p+='\n      <div class="media-attribution-author">\n        '+(null==(__t=formatted_author_name)?"":__t)+"\n      </div>\n      "),__p+="\n      ",provider_icon_class&&(__p+='\n      <div class="media-attribution-logo">\n        <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      </div>\n      '),__p+="\n    </div>\n    "),__p+="\n    "),__p+="\n  </div>\n"):"rich"===type?__p+="\n  "+(null==(__t=html)?"":__t)+"\n":"link"===type&&(__p+="\n  ",thumbnail_url&&(__p+='\n  <div class="media-image" style="background-image: url('+__e(thumbnail_url)+')">\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    ',(formatted_author_name||provider_icon_class)&&(__p+='\n    <div class="media-attribution">\n      ',formatted_author_name&&(__p+='\n      <div class="media-attribution-author">\n        '+(null==(__t=formatted_author_name)?"":__t)+"\n      </div>\n      "),__p+="\n      ",provider_icon_class&&(__p+='\n      <div class="media-attribution-logo">\n        <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      </div>\n      '),__p+="\n    </div>\n    "),__p+="\n  </div>\n  "),__p+="\n"),__p+="\n";return __p},metadata:{customizable:!0},name:"media-2-media-tile"})}),define("components/status-styles-media-tile-1/main",["require","lib/BaseComponent","componentStyle!status-styles-media-tile-1","tmpl!status-twitter-2-media-tile","tmpl!status-instagram-2-media-tile","tmpl!status-facebook-2-media-tile","tmpl!status-google-plus-2-media-tile","tmpl!status-youtube-2-media-tile","tmpl!media-2-media-tile"],function(e){var t=e("lib/BaseComponent"),n=e("componentStyle!status-styles-media-tile-1"),i=e("tmpl!status-twitter-2-media-tile"),a=e("tmpl!status-instagram-2-media-tile"),s=e("tmpl!status-facebook-2-media-tile"),o=e("tmpl!status-google-plus-2-media-tile"),r=e("tmpl!status-youtube-2-media-tile"),l=e("tmpl!media-2-media-tile"),u={twitter:i,instagram:a,facebook:s,google_plus:o,youtube:r};return t.extend({styles:n,render:function(){var e=this.get("config");return this.overrides=function(t){var n;return t&&t.network&&(n=u[t.network]),{additionalClasses:"status-style-media-tile mr-component-instance-"+e.id,template:n,mediaTemplate:l,displayOptions:{mediaHandleClickEvent:!1}}},this},postInitialize:function(){var e=this.get("dispatcher");e.trigger("discovery",{id:this.get("config").id,component:this,type:"status-style"})},create:function(){return{overrides:this.overrides}}}).exports()}),define("componentStyle!status-styles-modal-1",{render:function(){}}),define("tmpl!status-instagram-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+="  ",media.length>0&&(__p+='\n  <div class="status-media">\n    '+(null==(__t=subview("media",media.at(0)))?"":__t)+'\n\n    <div class="status-media-meta">\n      <a class="status-author-attribution status-pretty-link"\n        href="'+__e(formatted_profile_url)+'"\n        title="'+__e(formatted_name)+" ("+__e(user_full_name)+')"\n        target="_blank"\n      ><s>@</s><span>'+__e(user_username)+'</span></a>\n\n      <a class="status-media-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-instagram-logo"></i></a>\n    </div>\n  </div>\n  '),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+" ("+__e(user_full_name)+')"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n      <a class="status-author-name status-author-name-secondary status-pretty-link"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >@'+__e(user_username)+'</span></a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-instagram-logo"></i></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    <div class="status-intents">\n      <a class="status-intent status-intent-instagram-like mr-action-click"\n        data-action="instagram-like"\n        href="'+__e(formatted_permalink)+'"\n        title="Like this"\n        target="_blank"\n\n        data-id="'+__e(id)+'"\n        data-liked="false"\n      ><i class="status-intent-icon icon-instagram-like"></i><span class="status-intent-text"></span></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-instagram-2-modal"})}),define("tmpl!status-facebook-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header" title="'+__e(formatted_name)+'">\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-facebook-logo"></i></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    ',(intent_can_comment||intent_can_share)&&(__p+='\n    <div class="status-intents">\n      ',intent_can_comment&&(__p+='\n      <a class="status-intent status-intent-facebook-comment mr-action-click"\n        data-action="fb-comment"\n        href="'+__e(intent_url_comment)+'"\n        title="Add a Comment"\n        target="_blank"\n\n        data-app_id="'+__e(intent_app_id)+'"\n        data-post_id="'+__e(facebook_id)+'"\n        data-message="'+__e(formatted_text_full)+'"\n        data-post_type="',print(obj.type||obj.kind),__p+='"\n        data-author_id="'+__e(from_id)+'"\n        data-author="'+__e(from_name)+'"\n        data-permalink="'+__e(formatted_permalink)+'"\n        data-timestamp="'+__e(formatted_date_iso)+'"\n      ><i class="status-intent-icon icon-facebook-comment"></i><span class="status-intent-text">Comment</span></a>\n      '),__p+="\n\n      ",intent_can_share&&(__p+='\n      <a class="status-intent status-intent-facebook-share mr-action-click"\n        data-action="fb-share"\n        href="'+__e(intent_url_share)+'"\n        title="Share this"\n        target="_blank"\n\n        ',__p+='\n        data-link="',print("https:"+formatted_permalink),__p+='"\n        data-name="'+__e(formatted_text||formatted_permalink)+'"\n      ><i class="status-intent-icon icon-facebook-share"></i><span class="status-intent-text">Share</span></a>\n      '),__p+="\n    </div>\n    "),__p+="\n\n  </div>\n</div>\n";
return __p},metadata:{customizable:!0},name:"status-facebook-2-modal"})}),define("tmpl!status-google-plus-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+'"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(formatted_profile_url)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(formatted_profile_url)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-google-plus-logo"></i></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n      ",formatted_text_rest&&(__p+='\n      <a class="status-text-truncation-link"\n          href="'+__e(formatted_permalink)+'"\n          target="_blank"\n      >See More</a>\n      '),__p+='\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+="\n  </div>\n</div>\n";return __p},metadata:{customizable:!0},name:"status-google-plus-2-modal"})}),define("tmpl!status-twitter-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+" (@"+__e(user_screen_name)+')"\n  >\n    <a class="status-avatar"\n      style="background-image: url('+__e(formatted_avatar_url)+')"\n      href="'+__e(intent_url_user)+'"\n      target="_blank"\n    ></a><div class="status-author">\n      <a class="status-author-name status-author-name-primary"\n        href="'+__e(intent_url_user)+'"\n        target="_blank"\n      >'+(null==(__t=formatted_name_pretty)?"":__t),user_verified&&(__p+='<span class="status-twitter-verified-icon">\n        <i class="icon-twitter-verified-bg"></i>\n        <i class="icon-twitter-verified-check"></i>\n      </span>'),__p+='</a>\n      <a class="status-author-name status-author-name-secondary status-pretty-link"\n        href="'+__e(intent_url_user)+'"\n        target="_blank"\n      ><s>@</s><span>'+__e(user_screen_name)+'</span></a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-twitter-logo"></i></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <p class="status-text">\n      '+(null==(__t=formatted_text_pretty)?"":__t)+'\n    </p>\n  </div>\n\n  <div class="status-meta">\n    ',is_retweet&&(__p+='\n    <div class="status-meta-item status-meta-item-retweeted">\n      <i class="status-retweet-icon icon-twitter-retweet"></i><span class="status-retweeted-by-text">Retweeted by</span>\n      <a href="//twitter.com/intent/user?screen_name='+__e(retweeting_status_user_screen_name)+'"\n          target="_blank"\n          title="'+__e(retweeting_status_user_name)+" (@"+__e(retweeting_status_user_screen_name)+')"\n      >'+__e(retweeting_status_user_name||"@"+retweeting_status_user_screen_name)+"</a>\n    </div>\n    "),__p+="\n\n    ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n    <div class="status-meta-item status-meta-item-place">\n      <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n    </div>\n    "),__p+='\n  </div>\n\n  <div class="status-footer">\n    <div class="status-intents">\n      <a class="status-intent status-intent-twitter-reply"\n        href="'+__e(intent_url_reply)+'"\n        title="Reply to this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-reply"></i><span class="status-intent-text">Reply</span></a>\n\n      <a class="status-intent status-intent-twitter-retweet"\n        href="'+__e(intent_url_retweet)+'"\n        title="Retweet this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-retweet"></i><span class="status-intent-text">Retweet</span></a>\n\n      <a class="status-intent status-intent-twitter-favorite"\n        href="'+__e(intent_url_favorite)+'"\n        title="Like this Tweet"\n        target="_blank"\n      ><i class="status-intent-icon icon-twitter-like"></i><span class="status-intent-text">Like</span></a>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-twitter-2-modal"})}),define("tmpl!status-youtube-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)media.length>0&&(__p+='\n<div class="status-media">\n  '+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n</div>\n"),__p+='\n\n<div class="status-body">\n  <div class="status-header"\n    title="'+__e(formatted_name)+'"\n  ><div class="status-title">\n      <a class="status-title-link"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      >'+(null==(__t=title)?"":__t)+'</a>\n    </div>\n\n    <div class="status-permalink">\n      <a class="status-timestamp"\n        href="'+__e(formatted_permalink)+'"\n        title="'+__e(formatted_date_full)+'"\n        target="_blank"\n      >'+__e(formatted_date)+'</a>\n\n      <a class="status-logo"\n        href="'+__e(formatted_permalink)+'"\n        target="_blank"\n      ><i class="status-logo-icon icon-youtube-logo"></i></a>\n    </div>\n  </div>\n\n  <div class="status-content">\n    <div class="status-text">\n      <div class="status-author">by\n        <a class="status-author-link status-author-name"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n        >'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n      </div>\n\n      <div class="status-duration"\n      >'+(null==(__t=duration_pretty)?"":__t)+'</div>\n      <div class="status-clear"></div>\n    </div>\n  </div>\n</div>\n';return __p},metadata:{customizable:!0},name:"status-youtube-2-modal"})}),define("tmpl!media-2-modal",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)"photo"===type?(__p+="\n  ",__p+="\n  ",!load_gif&&!autoplay&&/\.gif($|\?)/gi.test(url)&&document.createElement("canvas").getContext?(__p+='\n  <div class="media-image media-gif" title="Click to Play"\n      ',__p+=width&&height?'\n      style="padding-bottom: '+__e(100*height/width)+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+='\n  >\n    <canvas width="'+__e(width)+'" height="'+__e(height)+'"></canvas>\n  </div>\n  '):(__p+='\n  <div class="media-image" style="background-image: url('+__e(url)+')">\n    <img src="'+__e(url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    <div class="media-attribution">\n      <div class="media-attribution-author">\n        ',formatted_author_name&&(__p+="\n        "+(null==(__t=formatted_author_name)?"":__t)+"\n        "),__p+='\n      </div>\n      <div class="media-attribution-logo">\n        ',provider_icon_class&&(__p+='\n        <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n        '),__p+="\n      </div>\n    </div>\n  </div>\n  "),__p+="\n"):"video"===type?(__p+='\n  <div class="media-image media-video-thumbnail"\n      style="background-image: url('+__e(thumbnail_url)+')"\n      title="Click to Play"\n  >\n    ',__p+="\n    ",thumbnail_url?(__p+='\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    '):(__p+='\n    <div class="media-video-sizer"\n      ',__p+=0!==height*width?'\n      style="padding-bottom: '+__e(100*(height/width))+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+="\n    ></div>\n    "),__p+="\n\n    ",autoplay||load_video_html?__p+="\n    "+(null==(__t=html)?"":__t)+"\n    ":(__p+='\n    <div class="media-attribution">\n      <div class="media-attribution-author">\n        ',formatted_author_name&&(__p+="\n        "+(null==(__t=formatted_author_name)?"":__t)+"\n        "),__p+='\n      </div>\n      <div class="media-attribution-logo">\n        ',provider_icon_class&&(__p+='\n        <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n        '),__p+="\n      </div>\n    </div>\n    "),__p+="\n  </div>\n"):"rich"===type?__p+="\n  "+(null==(__t=html)?"":__t)+"\n":"link"===type&&(__p+="\n  ",url&&(__p+='\n  <a class="media-url" href="'+__e(url)+'" target="_blank">\n  '),__p+="\n\n  ",thumbnail_url?(__p+='\n  <div class="media-image" style="background-image: url('+__e(thumbnail_url)+')">\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n  </div>\n  '):(__p+="\n  <p>",print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+="</p>\n  "),__p+="\n\n  ",url&&(__p+="\n  </a>\n  "),__p+="\n");return __p},metadata:{customizable:!0},name:"media-2-modal"})}),define("components/status-styles-modal-1/main",["require","jquery","lib/BaseComponent","componentStyle!status-styles-modal-1","tmpl!status-instagram-2-modal","tmpl!status-facebook-2-modal","tmpl!status-google-plus-2-modal","tmpl!status-twitter-2-modal","tmpl!status-youtube-2-modal","tmpl!media-2-modal"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("componentStyle!status-styles-modal-1"),a=e("tmpl!status-instagram-2-modal"),s=e("tmpl!status-facebook-2-modal"),o=e("tmpl!status-google-plus-2-modal"),r=e("tmpl!status-twitter-2-modal"),l=e("tmpl!status-youtube-2-modal"),u=e("tmpl!media-2-modal"),d={instagram:a,facebook:s,google_plus:o,twitter:r,youtube:l};return n.extend({styles:i,render:function(){var e=this.get("config"),n=t("html").hasClass("touch");return this.overrides=function(t){var i;return t&&t.network&&(i=d[t.network]),{additionalClasses:"status-style-modal mr-component-instance-"+e.id,template:i,mediaTemplate:u,displayOptions:{mediaLoadVideoHtml:n}}},this},postInitialize:function(){var e=this.get("dispatcher");e.trigger("discovery",{id:this.get("config").id,component:this,type:"status-style"})},create:function(){return{overrides:this.overrides}}}).exports()}),define("components/modal-2/models/ModalModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=n.Model.extend({defaults:{open:!1,model:null,View:null,closeButtonAdaText:"Close this Window",styleComponentId:null,additionalClasses:null},initialize:function(e){this.id=e.id,this.config=e.config,this.dispatcher=e.dispatcher,this.set(t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults))))},show:function(e,t,n){if(!e&&t||!t&&e)throw new Error("Modal#show requires both a model and a view, or neither!");return e&&t&&this.set({model:e,View:t}),n&&(this.set("closeButtonAdaText",n.closeButtonAdaText||this.get("closeButtonAdaText")),this.set("styleComponentId",n.styleComponentId||this.get("styleComponentId")),this.set("additionalClasses",n.additionalClasses||this.get("additionalClasses"))),this.toggle(!0),this},hide:function(){return this.toggle(!1),this},toggle:function(e){return e=0===arguments.length?!this.get("open"):!!e,this.set("open",e),this}});return i}),define("tmpl!modal-content",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-content" tabindex="0">\n  <i class="mr-action-click modal-close icon-close-x" data-action="close" tabindex="0"><span class="ada-text">'+__e(closeButtonAdaText)+"</span></i>\n  "+(null==(__t=subview("modal-content",model))?"":__t)+"\n</div>\n";return __p},metadata:{customizable:!0},name:"modal-content"})}),define("components/modal-2/views/ModalView",["require","lodash","jquery","lib/views/BaseView","tmpl!modal-content"],function(e){var t=e("lodash"),n=e("jquery"),i=e("lib/views/BaseView"),a=e("tmpl!modal-content"),s=i.extend({template:a,classes:{modal_open:"modal-open"},attributes:{tabindex:0},subviews:{"modal-content":null},events:{click:"handleClose","click .modal-close":"handleClose","keydown .modal-close":"handleKeyDown"},initialize:function(){this._escapeCloseHandler=t.bind(this.handleEscapeClose,this),n(document).on("keydown",this._escapeCloseHandler),this.listenTo(this.model,"change:open",this.toggleOpen),this.listenTo(this.model,"change:open",this._removeSubviewsIfClosed)},_updateSubview:function(e){return this.subviews["modal-content"]=e,this},_removeSubviewsIfClosed:function(){return this.model.get("open")||t.each(this.renderedSubviews,function(e){e.remove()}),this},handleKeyDown:function(e){13===e.keyCode&&this.handleClose(e)},handleClose:function(e){return e.target===e.currentTarget&&(e.preventDefault(),this.model.hide()),this},handleEscapeClose:function(e){var t=e.keyCode||e.which;27===t&&this.model.hide()},toggleOpen:function(e){var n=this;return this.$el.toggleClass(this.classes.modal_open,e),this.render(),this.dispatcher().trigger(this.model.get("open")?"open":"close"),this.analytics().trackEvent({category:this.model.get("open")?"viz:expand":"viz:collapse",action:"modal"}),t.defer(function(){n.$el.find(".modal-content").focus()}),this},remove:function(){return n(document).off("keydown",this._escapeCloseHandler),this},render:function(){return(this.model.get("open")||!this._rendered)&&(this._updateSubview(this.model.get("View")),i.prototype.render.apply(this,arguments),this._rendered=!0),this},replaceSubviews:function(e,t){e.replaceWith(t.$el),t.render()},renderTemplate:function(e){if(this.template){this.model.get("styleComponentId")&&this.$el.addClass("mr-component-modal-instance-"+this.model.get("styleComponentId")),this.model.get("additionalClasses")&&this.$el.addClass(this.model.get("additionalClasses"));var t=n("<div>").html(this.template(e));this.$el.empty().append(t.contents()),this.renderSubviews(this.$el)}}});return s}),define("componentStyle!modal-2",{render:function(){}}),define("components/modal-2/main",["require","jquery","./models/ModalModel","./views/ModalView","lib/BaseComponent","componentStyle!modal-2"],function(e){var t=e("jquery"),n=e("./models/ModalModel"),i=e("./views/ModalView"),a=e("lib/BaseComponent"),s=e("componentStyle!modal-2");return a.extend({styles:s,create:function(){var e=this.get("id"),a=this.get("config"),s=this.get("dispatcher"),o=new n({dispatcher:s,config:a.settings}),r=new i({analytics:this.get("analytics"),dispatcher:s,el:t("#"+e),componentId:e,componentType:a.type,model:o});return this.set("model",o),this.set("view",r),s.on("#"+e+":show",function(e){var t=e&&e.payload?e.payload:{};o.show(t.model,t.View,t.options)}),{model:o,view:r}}}).exports()}),define("componentStyle!retail-carousel-2",{render:function(){}}),define("components/retail-carousel-2/models/RetailCarouselModel",["backbone-amd"],function(){var e=require("backbone-amd");return e.Model.extend({defaults:function(){return{queue:new e.Collection,startIndex:0,noContentMsg:"No Content",noContent:!1}},initialize:function(e){var t=e.config;t&&this.set("noContentMsg",t.noContent)}})}),define("tmpl!retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="retail-carousel">\n  ',queue.length<1&&obj.noContent?__p+='\n    <div class="retail-carousel-no-content">\n      <div class="no-content-message-container">\n        <div class="no-content-message">'+__e(noContentMsg)+"</div>\n      </div>\n    </div>\n  ":(__p+="\n    ",queue.each(function(e){__p+="\n      "+(null==(__t=subview("retail-carousel-item",e))?"":__t)+"\n    "}),__p+="\n  "),__p+="\n</div>";return __p},metadata:{},name:"retail-carousel"})}),define("tmpl!retail-carousel-item",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<div class="status-container status-placeholder"></div>';return __p},metadata:{},name:"retail-carousel-item"})}),!function(e){"function"==typeof define&&define.amd?define("slick/slick.min",["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t=window.Slick||{};t=function(){function t(t,i){var a,s,o,r=this;if(r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.hidden="hidden",r.paused=!1,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=e(t),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,a=e(t).data("slick")||{},r.options=e.extend({},r.defaults,a,i),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,s=r.options.responsive||null,s&&s.length>-1){r.respondTo=r.options.respondTo||"window";for(o in s)s.hasOwnProperty(o)&&(r.breakpoints.push(s[o].breakpoint),r.breakpointSettings[s[o].breakpoint]=s[o].settings);r.breakpoints.sort(function(e,t){return r.options.mobileFirst===!0?e-t:t-e})}"undefined"!=typeof document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=e.proxy(r.autoPlay,r),r.autoPlayClear=e.proxy(r.autoPlayClear,r),r.changeSlide=e.proxy(r.changeSlide,r),r.clickHandler=e.proxy(r.clickHandler,r),r.selectHandler=e.proxy(r.selectHandler,r),r.setPosition=e.proxy(r.setPosition,r),r.swipeHandler=e.proxy(r.swipeHandler,r),r.dragHandler=e.proxy(r.dragHandler,r),r.keyHandler=e.proxy(r.keyHandler,r),r.autoPlayIterator=e.proxy(r.autoPlayIterator,r),r.instanceUid=n++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.init(!0),r.checkResponsive(!0)}var n=0;return t}(),t.prototype.addSlide=t.prototype.slickAdd=function(t,n,i){var a=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=a.slideCount)return!1;a.unload(),"number"==typeof n?0===n&&0===a.$slides.length?e(t).appendTo(a.$slideTrack):i?e(t).insertBefore(a.$slides.eq(n)):e(t).insertAfter(a.$slides.eq(n)):i===!0?e(t).prependTo(a.$slideTrack):e(t).appendTo(a.$slideTrack),a.$slides=a.$slideTrack.children(this.options.slide),a.$slideTrack.children(this.options.slide).detach(),a.$slideTrack.append(a.$slides),a.$slides.each(function(t,n){e(n).attr("data-slick-index",t)}),a.$slidesCache=a.$slides,a.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,n){var i={},a=this;a.animateHeight(),a.options.rtl===!0&&a.options.vertical===!1&&(t=-t),a.transformsEnabled===!1?a.options.vertical===!1?a.$slideTrack.animate({left:t},a.options.speed,a.options.easing,n):a.$slideTrack.animate({top:t},a.options.speed,a.options.easing,n):a.cssTransitions===!1?(a.options.rtl===!0&&(a.currentLeft=-a.currentLeft),e({animStart:a.currentLeft}).animate({animStart:t},{duration:a.options.speed,easing:a.options.easing,step:function(e){e=Math.ceil(e),a.options.vertical===!1?(i[a.animType]="translate("+e+"px, 0px)",a.$slideTrack.css(i)):(i[a.animType]="translate(0px,"+e+"px)",a.$slideTrack.css(i))},complete:function(){n&&n.call()}})):(a.applyTransition(),t=Math.ceil(t),i[a.animType]=a.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",a.$slideTrack.css(i),n&&setTimeout(function(){a.disableTransition(),n.call()},a.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=n.options.asNavFor;i&&null!==i&&(i=e(i).not(n.$slider)),null!==i&&"object"==typeof i&&i.each(function(){var n=e(this).slick("getSlick");n.unslicked||n.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,n={};n[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0===e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,n,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,n){e(n).attr("data-slick-index",t).data("originalStyling",e(n).attr("style")||"")}),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(t.options.centerMode===!0||t.options.swipeToSlide===!0)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,n,i,a,s,o,r=this;if(i=document.createDocumentFragment(),s=r.$slider.children(),r.options.rows>1){for(o=r.options.slidesPerRow*r.options.rows,a=Math.ceil(s.length/o),e=0;a>e;e++){var l=document.createElement("div");for(t=0;t<r.options.rows;t++){var u=document.createElement("div");for(n=0;n<r.options.slidesPerRow;n++){var d=e*o+(t*r.options.slidesPerRow+n);s.get(d)&&u.appendChild(s.get(d))}l.appendChild(u)}i.appendChild(l)}r.$slider.html(i),r.$slider.children().children().children().css({width:100/r.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t){var n,i,a,s=this,o=!1,r=s.$slider.width(),l=window.innerWidth||e(window).width();if("window"===s.respondTo?a=l:"slider"===s.respondTo?a=r:"min"===s.respondTo&&(a=Math.min(l,r)),s.originalSettings.responsive&&s.originalSettings.responsive.length>-1&&null!==s.originalSettings.responsive){i=null;for(n in s.breakpoints)s.breakpoints.hasOwnProperty(n)&&(s.originalSettings.mobileFirst===!1?a<s.breakpoints[n]&&(i=s.breakpoints[n]):a>s.breakpoints[n]&&(i=s.breakpoints[n]));null!==i?null!==s.activeBreakpoint?i!==s.activeBreakpoint&&(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick(i):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[i]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=i):(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick(i):(s.options=e.extend({},s.originalSettings,s.breakpointSettings[i]),t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t)),o=i):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,t===!0&&(s.currentSlide=s.options.initialSlide),s.refresh(t),o=i),t||o===!1||s.$slider.trigger("breakpoint",[s,o])}},t.prototype.changeSlide=function(t,n){var i,a,s,o=this,r=e(t.target);switch(r.is("a")&&t.preventDefault(),r.is("li")||(r=r.closest("li")),s=0!==o.slideCount%o.options.slidesToScroll,i=s?0:(o.slideCount-o.currentSlide)%o.options.slidesToScroll,t.data.message){case"previous":a=0===i?o.options.slidesToScroll:o.options.slidesToShow-i,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-a,!1,n);break;case"next":a=0===i?o.options.slidesToScroll:i,o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+a,!1,n);break;case"index":var l=0===t.data.index?0:t.data.index||r.index()*o.options.slidesToScroll;o.slideHandler(o.checkNavigable(l),!1,n),r.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,n,i=this;if(t=i.getNavigableIndexes(),n=0,e>t[t.length-1])e=t[t.length-1];else for(var a in t){if(e<t[a]){e=n;break}n=t[a]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide),t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).off("mouseenter.slick",e.proxy(t.setPaused,t,!0)).off("mouseleave.slick",e.proxy(t.setPaused,t,!1))),t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&(e=t.$slides.children().children(),e.removeAttr("style"),t.$slider.html(e))},t.prototype.clickHandler=function(e){var t=this;t.shouldClick===!1&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),e(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.$prevArrow&&"object"!=typeof n.options.prevArrow&&n.$prevArrow.remove(),n.$nextArrow&&"object"!=typeof n.options.nextArrow&&n.$nextArrow.remove(),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.unslicked=!0,t||n.$slider.trigger("destroy",[n])},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;n.cssTransitions===!1?(n.$slides.eq(e).css({zIndex:1e3}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){n.disableTransition(e),t.call()},n.options.speed))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(e.options.infinite===!0)for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(e.options.centerMode===!0)i=e.slideCount;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,a=this,s=0;
return a.slideOffset=0,n=a.$slides.first().outerHeight(),a.options.infinite===!0?(a.slideCount>a.options.slidesToShow&&(a.slideOffset=-1*a.slideWidth*a.options.slidesToShow,s=-1*n*a.options.slidesToShow),0!==a.slideCount%a.options.slidesToScroll&&e+a.options.slidesToScroll>a.slideCount&&a.slideCount>a.options.slidesToShow&&(e>a.slideCount?(a.slideOffset=-1*(a.options.slidesToShow-(e-a.slideCount))*a.slideWidth,s=-1*(a.options.slidesToShow-(e-a.slideCount))*n):(a.slideOffset=-1*a.slideCount%a.options.slidesToScroll*a.slideWidth,s=-1*a.slideCount%a.options.slidesToScroll*n))):e+a.options.slidesToShow>a.slideCount&&(a.slideOffset=(e+a.options.slidesToShow-a.slideCount)*a.slideWidth,s=(e+a.options.slidesToShow-a.slideCount)*n),a.slideCount<=a.options.slidesToShow&&(a.slideOffset=0,s=0),a.options.centerMode===!0&&a.options.infinite===!0?a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)-a.slideWidth:a.options.centerMode===!0&&(a.slideOffset=0,a.slideOffset+=a.slideWidth*Math.floor(a.options.slidesToShow/2)),t=a.options.vertical===!1?-1*e*a.slideWidth+a.slideOffset:-1*e*n+s,a.options.variableWidth===!0&&(i=a.slideCount<=a.options.slidesToShow||a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow),t=i[0]?-1*i[0].offsetLeft:0,a.options.centerMode===!0&&(i=a.options.infinite===!1?a.$slideTrack.children(".slick-slide").eq(e):a.$slideTrack.children(".slick-slide").eq(e+a.options.slidesToShow+1),t=i[0]?-1*i[0].offsetLeft:0,t+=(a.$list.width()-i.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){var t=this;return t.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,n=0,i=0,a=[];for(t.options.infinite===!1?e=t.slideCount:(n=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,e=2*t.slideCount);e>n;)a.push(n),n=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return a},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,n,i,a=this;return i=a.options.centerMode===!0?a.slideWidth*Math.floor(a.options.slidesToShow/2):0,a.options.swipeToSlide===!0?(a.$slideTrack.find(".slick-slide").each(function(t,s){return s.offsetLeft-i+e(s).outerWidth()/2>-1*a.swipeLeft?(n=s,!1):void 0}),t=Math.abs(e(n).attr("data-slick-index")-a.currentSlide)||1):a.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){var n=this;n.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var n=this;e(n.$slider).hasClass("slick-initialized")||(e(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots()),t&&n.$slider.trigger("init",[n])},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.setPaused,t,!0)).on("mouseleave.slick",e.proxy(t.setPaused,t,!1))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),t.$list.on("mouseenter.slick",e.proxy(t.setPaused,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.setPaused,t,!1)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),n=e(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){t.animate({opacity:1},200)},i.src=n,t.css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var n,i,a,s,o=this;o.options.centerMode===!0?o.options.infinite===!0?(a=o.currentSlide+(o.options.slidesToShow/2+1),s=a+o.options.slidesToShow+2):(a=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),s=2+(o.options.slidesToShow/2+1)+o.currentSlide):(a=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,s=a+o.options.slidesToShow,o.options.fade===!0&&(a>0&&a--,s<=o.slideCount&&s++)),n=o.$slider.find(".slick-slide").slice(a,s),t(n),o.slideCount<=o.options.slidesToShow?(i=o.$slider.find(".slick-slide"),t(i)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(i=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),t(i)):0===o.currentSlide&&(i=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),t(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){var e=this;e.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.prev=t.prototype.slickPrev=function(){var e=this;e.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t,n,i=this;t=e("img[data-lazy]",i.$slider).length,t>0&&(n=e("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad(),i.options.adaptiveHeight===!0&&i.setPosition()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(t){var n=this,i=n.currentSlide;n.destroy(!0),e.extend(n,n.initials),n.init(),t||n.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.options.focusOnSelect===!0&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var i=this;return"boolean"==typeof e?(t=e,e=t===!0?0:i.slideCount-1):e=t===!0?--e:e,i.slideCount<1||0>e||e>i.slideCount-1?!1:(i.unload(),n===!0?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,i.reinit(),void 0)},t.prototype.setCSS=function(e){var t,n,i=this,a={};i.options.rtl===!0&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",a[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(a):(a={},i.cssTransitions===!1?(a[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(a)):(a[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(a)))},t.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,n=this;n.$slides.each(function(i,a){t=-1*n.slideWidth*i,n.options.rtl===!0?e(a).css({position:"relative",right:t,top:0,zIndex:800,opacity:0}):e(a).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&e.options.adaptiveHeight===!0&&e.options.vertical===!1){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(e,t,n){var i=this;i.options[e]=t,n===!0&&(i.unload(),i.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&e.animType!==!1&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&e.animType!==!1},t.prototype.setSlideClasses=function(e){var t,n,i,a,s=this;s.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),n=s.$slider.find(".slick-slide"),s.options.centerMode===!0?(t=Math.floor(s.options.slidesToShow/2),s.options.infinite===!0&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=s.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")):e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(a=s.slideCount%s.options.slidesToShow,i=s.options.infinite===!0?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?n.slice(i-(s.options.slidesToShow-a),i+a).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},t.prototype.setupInfinite=function(){var t,n,i,a=this;if(a.options.fade===!0&&(a.options.centerMode=!1),a.options.infinite===!0&&a.options.fade===!1&&(n=null,a.slideCount>a.options.slidesToShow)){for(i=a.options.centerMode===!0?a.options.slidesToShow+1:a.options.slidesToShow,t=a.slideCount;t>a.slideCount-i;t-=1)n=t-1,e(a.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-a.slideCount).prependTo(a.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)n=t,e(a.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+a.slideCount).appendTo(a.$slideTrack).addClass("slick-cloned");a.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.setPaused=function(e){var t=this;t.options.autoplay===!0&&t.options.pauseOnHover===!0&&(t.paused=e,e?t.autoPlayClear():t.autoPlay())},t.prototype.selectHandler=function(t){var n=this,i=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),a=parseInt(i.attr("data-slick-index"));return a||(a=0),n.slideCount<=n.options.slidesToShow?(n.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),n.$slides.eq(a).addClass("slick-active").attr("aria-hidden","false"),n.options.centerMode===!0&&(n.$slider.find(".slick-slide").removeClass("slick-center"),n.$slides.eq(a).addClass("slick-center")),n.asNavFor(a),void 0):(n.slideHandler(a),void 0)},t.prototype.slideHandler=function(e,t,n){var i,a,s,o,r=null,l=this;return t=t||!1,l.animating===!0&&l.options.waitForAnimate===!0||l.options.fade===!0&&l.currentSlide===e||l.slideCount<=l.options.slidesToShow?void 0:(t===!1&&l.asNavFor(e),i=e,r=l.getLeft(i),o=l.getLeft(l.currentSlide),l.currentLeft=null===l.swipeLeft?o:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>e||e>l.getDotCount()*l.options.slidesToScroll)?(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i)),void 0):l.options.infinite===!1&&l.options.centerMode===!0&&(0>e||e>l.slideCount-l.options.slidesToScroll)?(l.options.fade===!1&&(i=l.currentSlide,n!==!0?l.animateSlide(o,function(){l.postSlide(i)}):l.postSlide(i)),void 0):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),a=0>i?0!==l.slideCount%l.options.slidesToScroll?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+i:i>=l.slideCount?0!==l.slideCount%l.options.slidesToScroll?0:i-l.slideCount:i,l.animating=!0,l.$slider.trigger("beforeChange",[l,l.currentSlide,a]),s=l.currentSlide,l.currentSlide=a,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?(n!==!0?l.fadeSlide(a,function(){l.postSlide(a)}):l.postSlide(a),l.animateHeight(),void 0):(n!==!0?l.animateSlide(r,function(){l.postSlide(a)}):l.postSlide(a),void 0)))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,i,a=this;return e=a.touchObject.startX-a.touchObject.curX,t=a.touchObject.startY-a.touchObject.curY,n=Math.atan2(t,e),i=Math.round(180*n/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?a.options.rtl===!1?"left":"right":360>=i&&i>=315?a.options.rtl===!1?"left":"right":i>=135&&225>=i?a.options.rtl===!1?"right":"left":a.options.verticalSwiping===!0?i>=35&&135>=i?"left":"right":"vertical"},t.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=t.touchObject.swipeLength>10?!1:!0,void 0===t.touchObject.curX)return!1;if(t.touchObject.edgeHit===!0&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,n,i,a,s,o=this;return s=void 0!==e.originalEvent?e.originalEvent.touches:null,!o.dragging||s&&1!==s.length?!1:(t=o.getLeft(o.currentSlide),o.touchObject.curX=void 0!==s?s[0].pageX:e.clientX,o.touchObject.curY=void 0!==s?s[0].pageY:e.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),o.options.verticalSwiping===!0&&(o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2)))),n=o.swipeDirection(),"vertical"!==n?(void 0!==e.originalEvent&&o.touchObject.swipeLength>4&&e.preventDefault(),a=(o.options.rtl===!1?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),o.options.verticalSwiping===!0&&(a=o.touchObject.curY>o.touchObject.startY?1:-1),i=o.touchObject.swipeLength,o.touchObject.edgeHit=!1,o.options.infinite===!1&&(0===o.currentSlide&&"right"===n||o.currentSlide>=o.getDotCount()&&"left"===n)&&(i=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),o.swipeLeft=o.options.vertical===!1?t+i*a:t+i*(o.$list.height()/o.listWidth)*a,o.options.verticalSwiping===!0&&(o.swipeLeft=t+i*a),o.options.fade===!0||o.options.touchMove===!1?!1:o.animating===!0?(o.swipeLeft=null,!1):(o.setCSS(o.swipeLeft),void 0)):void 0)},t.prototype.swipeStart=function(e){var t,n=this;return 1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow?(n.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,n.dragging=!0,void 0)},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e,t=this;e=Math.floor(t.options.slidesToShow/2),t.options.arrows===!0&&t.options.infinite!==!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&t.options.centerMode===!1?(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-1&&t.options.centerMode===!0&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):e.options.autoplay===!0&&(e.paused=!1,e.autoPlay())},e.fn.slick=function(){var e,n=this,i=arguments[0],a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;for(o;s>o;o++)if("object"==typeof i||"undefined"==typeof i?n[o].slick=new t(n[o],i):e=n[o].slick[i].apply(n[o].slick,a),"undefined"!=typeof e)return e;return n}}),define("slick",["slick/slick.min"],function(e){return e}),define("tmpl!status-instagram-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="status-media">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-rail">\n  ',_retailHasRetail&&(__p+='\n  <div class="status-nav">\n    <div class="status-nav-retail status-nav-item" tabindex="0">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-nav-status status-nav-item" tabindex="0">\n      '+__e(_retailNavImageText)+'\n    </div>\n    <div class="status-nav-bar"></div>\n  </div>\n\n  <div class="status-title-bar">\n    <div class="status-title-retail status-title-item">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-title-status status-title-item">\n      '+__e(_retailNavImageText)+'\n    </div>\n  </div>\n\n  <div class="status-rail-content">\n    <div class="status-section-header section-retail">'+__e(_retailNavShopText)+'</div>\n\n    <div class="status-retail '+__e(_retailAdditionalClasses)+'">\n      ',_.each(massrel_page_links,function(e){__p+='\n        <div class="status-retail-item '+__e(e.additionalClasses)+'" data-id="'+__e(e.id)+'">\n          <div class="status-retail-item-frame">\n            <div class="status-retail-item-cell">\n\n              ',_retailShowPageLinkImage&&e.image_url&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-image-frame">\n                <a class="status-retail-item-image-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                  <img class="status-retail-item-image" data-src="'+__e(e.image_url)+'" />\n                </a>\n              </div>\n              '),__p+='\n\n              <div class="status-retail-item-details">\n              ',_retailShowPageLinkTitle&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-title">\n                ',_retailShowPageLinkButton||(__p+='\n                  <a class="status-retail-item-title-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                '),__p+="\n                "+__e(e.name)+"\n                ",_retailShowPageLinkButton||(__p+="\n                  </a>\n                "),__p+="\n              </div>\n              "),__p+="\n\n              ",_retailShowPageLinkButton&&(__p+='\n              <a class="status-retail-item-detail status-retail-item-button status-retail-track" href="'+__e(e.link)+'">\n                <span class="ada-text">Click to open details about this item</span>\n                '+__e(_retailItemButtonText)+"\n              </a>\n              "),__p+="\n              </div>\n            </div>\n          </div>\n        </div>\n      "}),__p+="\n      ",_retailExtraItemNeeded&&(__p+='\n        <div class="status-retail-item empty-item"></div>\n      '),__p+="\n    </div>\n\n  "),__p+='\n\n  <div class="status-section-header section-status">'+__e(_retailNavImageText)+'</div>\n  <div class="status-body">\n    <div class="status-body-wrapper">\n      <div class="status-header"\n        title="'+__e(formatted_name)+" ("+__e(user_full_name)+')"\n      >\n        <a class="status-avatar"\n          style="background-image: url('+__e(formatted_avatar_url)+')"\n          href="'+__e(formatted_profile_url)+'"\n          target="_blank"\n        ><span class="ada-text">Click to view user\'s profile on Instagram</span></a><div class="status-author">\n          <a class="status-author-name status-author-name-primary"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Instagram</span>'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n          <a class="status-author-name status-author-name-secondary status-pretty-link"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Instagram</span>@'+__e(user_username)+'</span></a>\n        </div>\n\n        <a class="status-logo"\n            href="'+__e(formatted_permalink)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Instagram</span><i class="status-logo-icon icon-instagram-logo"></i></a>\n      </div>\n\n      <div class="status-content">\n        <p class="status-text">\n          '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n          ",formatted_text_rest&&(__p+='\n          <a class="status-text-truncation-link"\n              href="'+__e(formatted_permalink)+'"\n              target="_blank"\n          ><span class="ada-text">Click to view this post on Instagram</span>See More</a>\n          '),__p+='\n        </p>\n      </div>\n\n\n\n      <div class="status-footer">\n        <div class="status-intents status-footer-item">\n          <a class="status-intent status-intent-instagram-like mr-action-click"\n            data-action="instagram-like"\n            href="'+__e(formatted_permalink)+'"\n            title="Like this"\n            target="_blank"\n\n            data-id="'+__e(id)+'"\n            data-liked="false"\n          ><span class="ada-text">Like this post on Instagram</span><span class="status-intent-text"></span><i class="status-intent-icon icon-instagram-like"></i></a>\n        </div>\n\n        <div class="status-permalink status-footer-item">\n          <a class="status-timestamp"\n            href="'+__e(formatted_permalink)+'"\n            title="'+__e(formatted_date_full)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Instagram</span><span class="formatted-timestamp">'+__e(formatted_date)+"</span></a>\n        </div>\n\n        ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n        <div class="status-meta-item status-meta-item-place status-footer-item">\n          <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n        </div>\n        "),__p+="\n\n      </div>\n    </div>\n  </div>\n\n  ",_retailHasRetail&&(__p+="\n    </div>\n  "),__p+="\n</div>\n";return __p},metadata:{customizable:!0},name:"status-instagram-2-retail-carousel"})}),define("tmpl!status-twitter-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="status-media">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-rail">\n  ',_retailHasRetail&&(__p+='\n  <div class="status-nav">\n    <div class="status-nav-retail status-nav-item" tabindex="0">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-nav-status status-nav-item" tabindex="0">\n      '+__e(_retailNavImageText)+'\n    </div>\n    <div class="status-nav-bar"></div>\n  </div>\n\n  <div class="status-title-bar">\n    <div class="status-title-retail status-title-item">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-title-status status-title-item">\n      '+__e(_retailNavImageText)+'\n    </div>\n  </div>\n\n  <div class="status-rail-content">\n    <div class="status-section-header section-retail">'+__e(_retailNavShopText)+'</div>\n\n    <div class="status-retail '+__e(_retailAdditionalClasses)+'">\n      ',_.each(massrel_page_links,function(e){__p+='\n        <div class="status-retail-item '+__e(e.additionalClasses)+'" data-id="'+__e(e.id)+'">\n          <div class="status-retail-item-frame">\n            <div class="status-retail-item-cell">\n\n              ',_retailShowPageLinkImage&&e.image_url&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-image-frame">\n                <a class="status-retail-item-image-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                  <img class="status-retail-item-image" data-src="'+__e(e.image_url)+'" />\n                </a>\n              </div>\n              '),__p+='\n\n              <div class="status-retail-item-details">\n              ',_retailShowPageLinkTitle&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-title">\n                ',_retailShowPageLinkButton||(__p+='\n                  <a class="status-retail-item-title-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                '),__p+="\n                "+__e(e.name)+"\n                ",_retailShowPageLinkButton||(__p+="\n                  </a>\n                "),__p+="\n              </div>\n              "),__p+="\n\n              ",_retailShowPageLinkButton&&(__p+='\n              <a class="status-retail-item-detail status-retail-item-button status-retail-track" href="'+__e(e.link)+'">\n                <span class="ada-text">Click to open details about this item</span>\n                '+__e(_retailItemButtonText)+"\n              </a>\n              "),__p+="\n              </div>\n            </div>\n          </div>\n        </div>\n      "}),__p+="\n      ",_retailExtraItemNeeded&&(__p+='\n        <div class="status-retail-item empty-item"></div>\n      '),__p+="\n    </div>\n\n  "),__p+='\n\n  <div class="status-section-header section-status">'+__e(_retailNavImageText)+'</div>\n  <div class="status-body">\n    <div class="status-body-wrapper">\n      <div class="status-header"\n        title="'+__e(formatted_name)+" ("+__e(user_screen_name)+')"\n      >\n        <a class="status-avatar"\n          style="background-image: url('+__e(formatted_avatar_url)+')"\n          href="'+__e(intent_url_user)+'"\n          target="_blank"\n        ><span class="ada-text">Click to view user\'s profile on Twitter</span></a><div class="status-author">\n          <a class="status-author-name status-author-name-primary"\n            href="'+__e(intent_url_user)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Twitter</span>'+(null==(__t=formatted_name_pretty)?"":__t),user_verified&&(__p+='<span class="status-twitter-verified-icon">\n          <i class="icon-twitter-verified-bg"></i>\n          <i class="icon-twitter-verified-check"></i>\n        </span>'),__p+='</a>\n          <a class="status-author-name status-author-name-secondary status-pretty-link"\n            href="'+__e(intent_url_user)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Twitter</span>@'+__e(user_screen_name)+'</span></a>\n        </div>\n\n        <a class="status-logo"\n            href="'+__e(formatted_permalink)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Twitter</span><i class="status-logo-icon icon-twitter-logo"></i></a>\n      </div>\n\n      <div class="status-content">\n        <p class="status-text">\n          '+(null==(__t=formatted_text_pretty)?"":__t)+'\n        </p>\n      </div>\n\n      <div class="status-footer">\n        <div class="status-intents status-footer-item">\n          <a class="status-intent status-intent-twitter-reply"\n            href="'+__e(intent_url_reply)+'"\n            title="Reply to this Tweet"\n            target="_blank"\n          ><span class="ada-text">Reply to this Tweet on Twitter</span><i class="status-intent-icon icon-twitter-reply"></i><span class="status-intent-text">Reply</span></a>\n\n          <a class="status-intent status-intent-twitter-retweet"\n            href="'+__e(intent_url_retweet)+'"\n            title="Retweet this Tweet"\n            target="_blank"\n          ><span class="ada-text">Retweet this Tweet on Twitter</span><i class="status-intent-icon icon-twitter-retweet"></i><span class="status-intent-text">Retweet</span></a>\n\n          <a class="status-intent status-intent-twitter-favorite"\n            href="'+__e(intent_url_favorite)+'"\n            title="Like this Tweet"\n            target="_blank"\n          ><span class="ada-text">Like this Tweet on Twitter</span><i class="status-intent-icon icon-twitter-like"></i><span class="status-intent-text">Like</span></a>\n        </div>\n\n        <div class="status-permalink status-footer-item">\n          <a class="status-timestamp"\n            href="'+__e(formatted_permalink)+'"\n            title="'+__e(formatted_date_full)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Instagram</span><span class="formatted-timestamp">'+__e(formatted_date)+"</span></a>\n        </div>\n\n        ",is_retweet&&(__p+='\n        <div class="status-meta-item status-meta-item-retweeted status-footer-item">\n          <i class="status-retweet-icon icon-twitter-retweet"></i><span class="status-retweeted-by-text">Retweeted by</span>\n          <a href="//twitter.com/intent/user?screen_name='+__e(retweeting_status_user_screen_name)+'"\n              target="_blank"\n              title="'+__e(retweeting_status_user_name)+" (@"+__e(retweeting_status_user_screen_name)+')"\n          ><span class="ada-text">Click to view user\'s profile on Twitter</span>'+__e(retweeting_status_user_name||"@"+retweeting_status_user_screen_name)+"</a>\n        </div>\n        "),__p+="\n\n        ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n        <div class="status-meta-item status-meta-item-place status-footer-item">\n          <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n        </div>\n        "),__p+="\n\n      </div>\n    </div>\n  </div>\n\n  ",_retailHasRetail&&(__p+="\n    </div>\n  "),__p+="\n</div>\n";
return __p},metadata:{customizable:!0},name:"status-twitter-2-retail-carousel"})}),define("tmpl!status-facebook-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<div class="status-media">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-rail">\n  ',_retailHasRetail&&(__p+='\n  <div class="status-nav">\n    <div class="status-nav-retail status-nav-item" tabindex="0">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-nav-status status-nav-item" tabindex="0">\n      '+__e(_retailNavImageText)+'\n    </div>\n    <div class="status-nav-bar"></div>\n  </div>\n\n  <div class="status-title-bar">\n    <div class="status-title-retail status-title-item">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-title-status status-title-item">\n      '+__e(_retailNavImageText)+'\n    </div>\n  </div>\n\n  <div class="status-rail-content">\n    <div class="status-section-header section-retail">'+__e(_retailNavShopText)+'</div>\n\n    <div class="status-retail '+__e(_retailAdditionalClasses)+'">\n      ',_.each(massrel_page_links,function(e){__p+='\n        <div class="status-retail-item '+__e(e.additionalClasses)+'" data-id="'+__e(e.id)+'">\n          <div class="status-retail-item-frame">\n            <div class="status-retail-item-cell">\n\n              ',_retailShowPageLinkImage&&e.image_url&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-image-frame">\n                <a class="status-retail-item-image-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                  <img class="status-retail-item-image" data-src="'+__e(e.image_url)+'" />\n                </a>\n              </div>\n              '),__p+='\n\n              <div class="status-retail-item-details">\n              ',_retailShowPageLinkTitle&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-title">\n                ',_retailShowPageLinkButton||(__p+='\n                  <a class="status-retail-item-title-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                '),__p+="\n                "+__e(e.name)+"\n                ",_retailShowPageLinkButton||(__p+="\n                  </a>\n                "),__p+="\n              </div>\n              "),__p+="\n\n              ",_retailShowPageLinkButton&&(__p+='\n              <a class="status-retail-item-detail status-retail-item-button status-retail-track" href="'+__e(e.link)+'">\n                <span class="ada-text">Click to open details about this item</span>\n                '+__e(_retailItemButtonText)+"\n              </a>\n              "),__p+="\n              </div>\n            </div>\n          </div>\n        </div>\n      "}),__p+="\n      ",_retailExtraItemNeeded&&(__p+='\n        <div class="status-retail-item empty-item"></div>\n      '),__p+="\n    </div>\n\n  "),__p+='\n\n  <div class="status-section-header section-status">'+__e(_retailNavImageText)+'</div>\n  <div class="status-body">\n    <div class="status-body-wrapper">\n      <div class="status-header"\n        title="'+__e(formatted_name)+'"\n      >\n        <a class="status-avatar"\n          style="background-image: url('+__e(formatted_avatar_url)+')"\n          href="'+__e(formatted_profile_url)+'"\n          target="_blank"\n        ><span class="ada-text">Click to view user\'s profile on Facebook</span></a><div class="status-author">\n          <a class="status-author-name status-author-name-primary"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Facebook</span>'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n        </div>\n\n        <a class="status-logo"\n            href="'+__e(formatted_permalink)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Facebook</span><i class="status-logo-icon icon-facebook-logo"></i></a>\n      </div>\n\n      <div class="status-content">\n        <p class="status-text">\n          '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n          ",formatted_text_rest&&(__p+='\n          <a class="status-text-truncation-link"\n              href="'+__e(formatted_permalink)+'"\n              target="_blank"\n          ><span class="ada-text">Click to view this post on Facebook</span>See More</a>\n          '),__p+='\n        </p>\n      </div>\n\n\n\n      <div class="status-footer">\n        <div class="status-intents status-footer-item">\n          ',intent_can_comment&&(__p+='\n          <a class="status-intent status-intent-facebook-comment mr-action-click"\n            data-action="fb-comment"\n            href="'+__e(intent_url_comment)+'"\n            title="Add a Comment"\n            target="_blank"\n\n            data-app_id="'+__e(intent_app_id)+'"\n            data-post_id="'+__e(facebook_id)+'"\n            data-message="'+__e(formatted_text_full)+'"\n            data-post_type="',print(obj.type||obj.kind),__p+='"\n            data-author_id="'+__e(from_id)+'"\n            data-author="'+__e(from_name)+'"\n            data-permalink="'+__e(formatted_permalink)+'"\n            data-timestamp="'+__e(formatted_date_iso)+'"\n          ><span class="ada-text">Comment on this post on Facebook/span><i class="status-intent-icon icon-facebook-comment"></i><span class="status-intent-text">Comment</span></a>\n          '),__p+="\n\n          ",intent_can_share&&(__p+='\n          <a class="status-intent status-intent-facebook-share mr-action-click"\n            data-action="fb-share"\n            href="'+__e(intent_url_share)+'"\n            title="Share this"\n            target="_blank"\n\n            ',__p+='\n            data-link="',print("https:"+formatted_permalink),__p+='"\n            data-name="'+__e(formatted_text||formatted_permalink)+'"\n          ><span class="ada-text">Share this post on Facebook</span><i class="status-intent-icon icon-facebook-share"></i><span class="status-intent-text">Share</span></a>\n          '),__p+='\n        </div>\n\n        <div class="status-permalink status-footer-item">\n          <a class="status-timestamp"\n            href="'+__e(formatted_permalink)+'"\n            title="'+__e(formatted_date_full)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Facebook</span><span class="formatted-timestamp">'+__e(formatted_date)+"</span></a>\n        </div>\n\n        ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n        <div class="status-meta-item status-meta-item-place status-footer-item">\n          <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n        </div>\n        "),__p+="\n\n      </div>\n    </div>\n  </div>\n\n  ",_retailHasRetail&&(__p+="\n    </div>\n  "),__p+="\n</div>\n";return __p},metadata:{customizable:!0},name:"status-facebook-2-retail-carousel"})}),define("tmpl!status-google-plus-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="status-media">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-rail">\n  ',_retailHasRetail&&(__p+='\n  <div class="status-nav">\n    <div class="status-nav-retail status-nav-item" tabindex="0">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-nav-status status-nav-item" tabindex="0">\n      '+__e(_retailNavImageText)+'\n    </div>\n    <div class="status-nav-bar"></div>\n  </div>\n\n  <div class="status-title-bar">\n    <div class="status-title-retail status-title-item">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-title-status status-title-item">\n      '+__e(_retailNavImageText)+'\n    </div>\n  </div>\n\n  <div class="status-rail-content">\n    <div class="status-section-header section-retail">'+__e(_retailNavShopText)+'</div>\n\n    <div class="status-retail '+__e(_retailAdditionalClasses)+'">\n      ',_.each(massrel_page_links,function(e){__p+='\n        <div class="status-retail-item '+__e(e.additionalClasses)+'" data-id="'+__e(e.id)+'">\n          <div class="status-retail-item-frame">\n            <div class="status-retail-item-cell">\n\n              ',_retailShowPageLinkImage&&e.image_url&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-image-frame">\n                <a class="status-retail-item-image-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                  <img class="status-retail-item-image" data-src="'+__e(e.image_url)+'" />\n                </a>\n              </div>\n              '),__p+='\n\n              <div class="status-retail-item-details">\n              ',_retailShowPageLinkTitle&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-title">\n                ',_retailShowPageLinkButton||(__p+='\n                  <a class="status-retail-item-title-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                '),__p+="\n                "+__e(e.name)+"\n                ",_retailShowPageLinkButton||(__p+="\n                  </a>\n                "),__p+="\n              </div>\n              "),__p+="\n\n              ",_retailShowPageLinkButton&&(__p+='\n              <a class="status-retail-item-detail status-retail-item-button status-retail-track" href="'+__e(e.link)+'">\n                <span class="ada-text">Click to open details about this item</span>\n                '+__e(_retailItemButtonText)+"\n              </a>\n              "),__p+="\n              </div>\n            </div>\n          </div>\n        </div>\n      "}),__p+="\n      ",_retailExtraItemNeeded&&(__p+='\n        <div class="status-retail-item empty-item"></div>\n      '),__p+="\n    </div>\n\n  "),__p+='\n\n  <div class="status-section-header section-status">'+__e(_retailNavImageText)+'</div>\n  <div class="status-body">\n    <div class="status-body-wrapper">\n      <div class="status-header"\n        title="'+__e(formatted_name)+'"\n      >\n        <a class="status-avatar"\n          style="background-image: url('+__e(formatted_avatar_url)+')"\n          href="'+__e(formatted_profile_url)+'"\n          target="_blank"\n        ><span class="ada-text">Click to view user\'s profile on Google+</span></a></a><div class="status-author">\n          <a class="status-author-name status-author-name-primary"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on Google+</span>'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n        </div>\n\n        <a class="status-logo"\n            href="'+__e(formatted_permalink)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Google+</span><i class="status-logo-icon icon-google-plus-logo"></i></a>\n      </div>\n\n      <div class="status-content">\n        <p class="status-text">\n          '+(null==(__t=formatted_text_pretty)?"":__t),formatted_text_rest&&(__p+='<i class="status-text-truncation-symbol">…</i>'),__p+="\n\n          ",formatted_text_rest&&(__p+='\n          <a class="status-text-truncation-link"\n              href="'+__e(formatted_permalink)+'"\n              target="_blank"\n          ><span class="ada-text">Click to view this post on Google+</span>See More</a>\n          '),__p+='\n        </p>\n      </div>\n\n      <div class="status-footer">\n        <div class="status-permalink status-footer-item">\n          <a class="status-timestamp"\n            href="'+__e(formatted_permalink)+'"\n            title="'+__e(formatted_date_full)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on Instagram</span><span class="formatted-timestamp">'+__e(formatted_date)+"</span></a>\n        </div>\n\n        ",formatted_place&&formatted_place.properties&&formatted_place.properties.name&&(__p+='\n        <div class="status-meta-item status-meta-item-place status-footer-item">\n          <i class="status-place-icon icon-place"></i><span class="status-place-name">'+__e(formatted_place.properties.name)+"</span>\n        </div>\n        "),__p+="\n\n      </div>\n    </div>\n  </div>\n\n  ",_retailHasRetail&&(__p+="\n    </div>\n  "),__p+="\n</div>\n";return __p},metadata:{customizable:!0},name:"status-google-plus-2-retail-carousel"})}),define("tmpl!status-youtube-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="status-media">\n  ',media.length>0&&(__p+="\n    "+(null==(__t=subview("media",media.at(0)))?"":__t)+"\n  "),__p+='\n</div>\n\n<div class="status-rail">\n  ',_retailHasRetail&&(__p+='\n  <div class="status-nav">\n    <div class="status-nav-retail status-nav-item" tabindex="0">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-nav-status status-nav-item" tabindex="0">\n      '+__e(_retailNavImageText)+'\n    </div>\n    <div class="status-nav-bar"></div>\n  </div>\n\n  <div class="status-title-bar">\n    <div class="status-title-retail status-title-item">\n      '+__e(_retailNavShopText)+'\n    </div>\n    <div class="status-title-status status-title-item">\n      '+__e(_retailNavImageText)+'\n    </div>\n  </div>\n\n  <div class="status-rail-content">\n    <div class="status-section-header section-retail">'+__e(_retailNavShopText)+'</div>\n\n    <div class="status-retail '+__e(_retailAdditionalClasses)+'">\n      ',_.each(massrel_page_links,function(e){__p+='\n        <div class="status-retail-item '+__e(e.additionalClasses)+'" data-id="'+__e(e.id)+'">\n          <div class="status-retail-item-frame">\n            <div class="status-retail-item-cell">\n\n              ',_retailShowPageLinkImage&&e.image_url&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-image-frame">\n                <a class="status-retail-item-image-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                  <img class="status-retail-item-image" data-src="'+__e(e.image_url)+'" />\n                </a>\n              </div>\n              '),__p+='\n\n              <div class="status-retail-item-details">\n              ',_retailShowPageLinkTitle&&(__p+='\n              <div class="status-retail-item-detail status-retail-item-title">\n                ',_retailShowPageLinkButton||(__p+='\n                  <a class="status-retail-item-title-link status-retail-track" href="'+__e(e.link)+'">\n                  <span class="ada-text">Click to open details about this item</span>\n                '),__p+="\n                "+__e(e.name)+"\n                ",_retailShowPageLinkButton||(__p+="\n                  </a>\n                "),__p+="\n              </div>\n              "),__p+="\n\n              ",_retailShowPageLinkButton&&(__p+='\n              <a class="status-retail-item-detail status-retail-item-button status-retail-track" href="'+__e(e.link)+'">\n                <span class="ada-text">Click to open details about this item</span>\n                '+__e(_retailItemButtonText)+"\n              </a>\n              "),__p+="\n              </div>\n            </div>\n          </div>\n        </div>\n      "}),__p+="\n      ",_retailExtraItemNeeded&&(__p+='\n        <div class="status-retail-item empty-item"></div>\n      '),__p+="\n    </div>\n\n  "),__p+='\n\n  <div class="status-section-header section-status">'+__e(_retailNavImageText)+'</div>\n  <div class="status-body">\n    <div class="status-body-wrapper">\n      <div class="status-header"\n        title="'+__e(formatted_name)+'"\n      >\n        <div class="status-author">\n          <a class="status-author-name status-author-name-primary"\n            href="'+__e(formatted_profile_url)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view user\'s profile on YouTube</span>'+(null==(__t=formatted_name_pretty)?"":__t)+'</a>\n        </div>\n\n        <a class="status-logo"\n            href="'+__e(formatted_permalink)+'"\n            target="_blank"\n          ><span class="ada-text">Click to this post on YouTube</span><i class="status-logo-icon icon-youtube-logo"></i></a>\n      </div>\n\n      <div class="status-content">\n        <p class="status-text">\n          '+__e(title)+'\n        </p>\n        <p class="status-duration">\n          '+(null==(__t=duration_pretty)?"":__t)+'\n        </p>\n      </div>\n\n      <div class="status-footer">\n        <div class="status-permalink status-footer-item">\n          <a class="status-timestamp"\n            href="'+__e(formatted_permalink)+'"\n            title="'+__e(formatted_date_full)+'"\n            target="_blank"\n          ><span class="ada-text">Click to view this post on YouTube</span>'+__e(formatted_date)+"</a>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  ",_retailHasRetail&&(__p+="\n    </div>\n  "),__p+="\n</div>\n";return __p},metadata:{customizable:!0},name:"status-youtube-2-retail-carousel"})}),define("tmpl!media-2-retail-carousel",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)"photo"===type?(__p+='\n  <div class="ken-background" style="background-image: url('+__e(url)+')"></div>\n  ',__p+="\n  ",!load_gif&&!autoplay&&/\.gif($|\?)/gi.test(url)&&document.createElement("canvas").getContext?(__p+='\n  <div class="media-image media-gif" title="Click to Play"\n      ',__p+=width&&height?'\n      style="padding-bottom: '+__e(100*height/width)+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+='\n  >\n    <canvas width="'+__e(width)+'" height="'+__e(height)+'"></canvas>\n  </div>\n  '):(__p+='\n  <div class="media-image" style="background-image: url('+__e(url)+')">\n    <img src="'+__e(url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    <div class="media-attribution-author">\n      ',formatted_author_name&&(__p+="\n      "+(null==(__t=formatted_author_name)?"":__t)+"\n      "),__p+='\n    </div>\n    <div class="media-attribution-logo">\n      ',provider_icon_class&&(__p+='\n      <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      '),__p+="\n    </div>\n  </div>\n  "),__p+="\n"):"video"===type?(__p+='\n  <div class="ken-background" style="background-image: url('+__e(thumbnail_url)+')"></div>\n  <div class="media-image media-video media-video-thumbnail"\n      style="background-image: url('+__e(thumbnail_url)+')"\n      title="Click to Play"\n  >\n    ',__p+="\n    ",thumbnail_url?(__p+='\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    '):(__p+='\n    <div class="media-video-sizer"\n      ',__p+=0!==height*width?'\n      style="padding-bottom: '+__e(100*(height/width))+'%"\n      ':'\n      style="padding-bottom: '+__e(56.25)+'%"\n      ',__p+="\n    ></div>\n    "),__p+="\n\n    ",autoplay||load_video_html?(__p+='\n    <div class="video-embed-wrapper"\n        ',0!==height*width&&(__p+='\n          style="padding-top: '+__e(100*(height/width))+'%"\n        '),__p+=">\n    "+(null==(__t=html)?"":__t)+"\n    </div>\n    "):(__p+='\n    <div class="media-attribution-author">\n      ',formatted_author_name&&(__p+="\n      "+(null==(__t=formatted_author_name)?"":__t)+"\n      "),__p+='\n    </div>\n    <div class="media-attribution-logo">\n      ',provider_icon_class&&(__p+='\n      <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      '),__p+="\n    </div>\n    "),__p+="\n  </div>\n"):"rich"===type?__p+="\n  "+(null==(__t=html)?"":__t)+"\n":"link"===type&&(__p+="\n  ",thumbnail_url&&(__p+='\n  <div class="ken-background" style="background-image: url('+__e(thumbnail_url)+')"></div>\n  <div class="media-image" style="background-image: url('+__e(thumbnail_url)+')">\n    <img src="'+__e(thumbnail_url)+'"\n        alt="',print((title+" "+description).replace(/^\s+|\s+$/g,"")),__p+='"\n    />\n    <div class="media-attribution-author">\n      ',formatted_author_name&&(__p+="\n      "+(null==(__t=formatted_author_name)?"":__t)+"\n      "),__p+='\n    </div>\n    <div class="media-attribution-logo">\n      ',provider_icon_class&&(__p+='\n      <i class="media-logo-icon '+(null==(__t=provider_icon_class)?"":__t)+'"></i>\n      '),__p+="\n    </div>\n  </div>\n  "),__p+="\n");return __p},metadata:{customizable:!0},name:"media-2-retail-carousel"})}),define("components/retail-carousel-2/views/RetailCarouselItemView",["require","jquery","lodash","lib/views/BaseView","tmpl!retail-carousel-item","components/status-2/viewFactory","slick","tmpl!status-instagram-2-retail-carousel","tmpl!status-twitter-2-retail-carousel","tmpl!status-facebook-2-retail-carousel","tmpl!status-google-plus-2-retail-carousel","tmpl!status-youtube-2-retail-carousel","tmpl!media-2-retail-carousel"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/views/BaseView"),a=e("tmpl!retail-carousel-item"),s=e("components/status-2/viewFactory");e("slick");var o=e("tmpl!status-instagram-2-retail-carousel"),r=e("tmpl!status-twitter-2-retail-carousel"),l=e("tmpl!status-facebook-2-retail-carousel"),u=e("tmpl!status-google-plus-2-retail-carousel"),d=e("tmpl!status-youtube-2-retail-carousel"),c=e("tmpl!media-2-retail-carousel"),p={instagram:o,twitter:r,facebook:l,google_plus:u,youtube:d},h={1:{carousel:{530:{width:510,height:361},360:{width:340,height:292},290:{width:130,height:140,"image-only":{width:270,height:302}},240:{width:105,height:138}},"no-carousel":{530:{width:510,height:361},360:{width:340,height:380},290:{width:130,height:185,"image-only":{width:270,height:302}},240:{width:105,height:138}}},2:{carousel:{530:{width:355,height:224},360:{width:190,height:204},290:{width:130,height:140},240:{width:105,height:138}},"no-carousel":{530:{width:355,height:224},360:{width:190,height:204},290:{width:130,height:185},240:{width:105,height:138}}}};return i.extend({className:"retail-slide",template:a,events:n.extend({"click .status-nav-item":"clickNavItem","keydown .status-nav-item":"keyDownNavItem"},i.prototype.events),initialize:function(){var e=this;i.prototype.initialize.apply(this,arguments),this._statusViewConstructor=s.statusViewConstructor({componentId:this.componentId(),componentType:this.componentType(),analytics:this.analytics(),dispatcher:this.dispatcher()}),this.on("shouldRender",this.shouldRender),this.on("didDisappear",this.didDisappear),this.listenTo(this.model,"change:_retailShowingStatus",this.renderSelectedNav),this.listenTo(this.model,"change:currentSlide",this.changeSlide),this.listenTo(this.options.parent.model,"change:_windowWidth",function(){e.updateRetailImageSize(),n.delay(n.bind(e.renderSelectedNav,e),50)}),this.rendered=!1},keyDownNavItem:function(e){13===e.keyCode&&this.clickNavItem(e)},clickNavItem:function(e){var n=t(e.currentTarget),i=n.hasClass("status-nav-status");this.model.set("_retailShowingStatus",i),this.analytics().trackEvent({category:"viz:toggle",action:"select:"+(i?"details":"product")})},upgradeModel:function(){var e=this,t=this.model.attributes,i=this.options.parent.model.get("config"),a=i.showPageLinkButton||i.showPageLinkTitle||i.showPageLinkImage,s=n.isArray(t.massrel_page_links)&&t.massrel_page_links.length>0&&a,o=s?t.massrel_page_links:[];i.showCurrentProductPageLinks||(o=n.filter(o,function(e){return!MR.isCurrentProductPage(e.url)})),0===o.length&&(s=!1);var r=2===parseInt(i.retailItemsPerPage,10)&&o.length>1?2:1,l=o.length>r,u=[2===r?"two-items":"one-item",l?"has-carousel":"no-carousel"],d={_retailHasRetail:i.showRetail&&s,_retailNeedsCarousel:l,_retailItemsPerPage:r,_retailAdditionalClasses:u.join(" "),_retailExtraItemNeeded:0!==o.length%r&&l,_retailShowingStatus:i.showStatusFirst,_retailShowPageLinkButton:i.showPageLinkButton,_retailShowPageLinkTitle:i.showPageLinkTitle,_retailShowPageLinkImage:i.showPageLinkImage,_retailItemButtonText:i.retailItemButtonText,_retailNavShopText:i.statusNavShopText,_retailNavImageText:i.statusNavImageText};if(this.model.set(d),s){var c=o;n.forEach(c,function(t){var n=e.model.attributes,i=t.name||t.description;t.image_url&&n._retailShowPageLinkImage||n._retailShowPageLinkButton||i||(i="Shop This Look"),i.length>70&&(i=i.substring(0,67)+"..."),t.name=i,t.link=t.short_url||t.url,t.additionalClasses="",t.image_url&&e.model.get("_retailShowPageLinkImage")&&!e.model.get("_retailShowPageLinkTitle")&&!e.model.get("_retailShowPageLinkButton")&&(t.additionalClasses="image-only")}),this.model.set("massrel_page_links",c)}},render:function(){return i.prototype.render.apply(this,arguments),this.model._retailViews||(this.model._retailViews=[]),n.contains(this.model._retailViews,this)||this.model._retailViews.push(this),this.$status=this.$(".status-container"),this},shouldRender:function(e){return this.rendered&&!e?this:(this.upgradeModel(),this.renderStatus(),this.renderSelectedNav(),this.model.get("_retailNeedsCarousel")&&this.initializeCarousel(),this.rendered=!0,this.loadRetailImages(),this)},renderStatus:function(){var e=this,n=this._statusViewConstructor(this.model),i=n.extend({render:function(){return e.shouldRender(!0),this},realRender:function(){return n.prototype.render.apply(this,arguments),this}});this.statusView=new i({model:this.model}),this.$status.empty().append(this.statusView.realRender().$el),this.statusView.$("a.status-retail-track").on("click",function(n){n.stopPropagation(),e.analytics().trackEvent({category:"viz:outbound",action:"shop",label:t(this).attr("href")})})},loadRetailImages:function(){var e=this;this.$("img.status-retail-item-image[data-src]").each(function(){var n=t(this),i=n.parents(".status-retail-item").attr("data-id");t("<img>").attr("src",n.attr("data-src")).one("load",function(){var t=e.$('.status-retail-item[data-id="'+i+'"] img.status-retail-item-image[data-src]');t.data({width:this.width,height:this.height}).attr("src",t.attr("data-src")),e.updateRetailImageSize(t)})})},updateRetailImageSize:function(e){if(this.rendered){var n=this.model.get("_retailNeedsCarousel")?"carousel":"no-carousel",i=this.options.parent.model.get("_windowWidth"),a=this.model.get("_retailItemsPerPage"),s=h[a][n][i];e||(e=this.$("img.status-retail-item-image[data-src]")),e.each(function(){var e,n,i=t(this),o=i.data("width"),r=i.data("height"),l=i.parents(".status-retail-item"),u=l.find(".status-retail-item-image-frame");l.hasClass("image-only")&&s["image-only"]&&(s=s["image-only"]),o/s.width>r/s.height?(e=o<s.width,n=e?o:s.width,i.css({width:n,height:e?r:s.width*r/o})):(e=r<s.height,n=e?o:s.height*o/r,i.css({width:n,height:e?r:s.height})),a>1&&u.css({width:n})})}},renderSelectedNav:function(){var e=this.model.get("_retailShowingStatus"),t=e?"status":"retail",n=this.$(".status-nav-"+t),i=n.position()||{},a=parseInt(n.css("margin-left"),10),s=parseInt(n.css("width"),10);this.$(".status-nav-bar").css({left:i.left+a||0,width:s||0}),this.$status.toggleClass("showing-status",e)},initializeCarousel:function(){this.$carousel=this.$(".status-retail");var e=this.options.parent.model.get("config"),t=2===parseInt(e.retailItemsPerPage,10)?2:1;this.$carousel.on("afterChange",n.bind(this.afterChange,this)),this.$carousel.slick({vertical:!0,verticalSwiping:!0,slidesToShow:t,slidesToScroll:t,slide:".status-retail-item",initialSlide:this.model.get("currentSlide"),dots:!0,prevArrow:'<div class="slick-prev slick-pagination"><div class="arrow"><i class="icon-arrow-up"></i></div></div>',nextArrow:'<div class="slick-next slick-pagination"><div class="arrow"><i class="icon-arrow-down"></i></div></div>',customPaging:function(){return""}})},afterChange:function(e,t,n){this._disableCarouselAnalytics||(this.analytics().trackEvent({category:"viz:toggle",action:"retail-carousel-item"}),this._disableCarouselAnalytics=!1),this.model.set("currentSlide",n)},changeSlide:function(){var e=this.model.get("currentSlide");this.$carousel.slick("slickCurrentSlide")!==e&&(this._disableCarouselAnalytics=!0,this.$carousel.slick("slickGoTo",e,!1))},didDisappear:function(){this.rendered&&n.forEach(this.statusView.renderedSubviews,function(e){e.trigger("media-pause")})},status_style:function(){return{overrides:function(e){var t;return e&&e.network&&(t=p[e.network]),{additionalClasses:"status-style-retail-carousel",template:t,mediaTemplate:c,displayOptions:{}}}}},remove:function(){i.prototype.remove.apply(this,arguments),this.statusView&&this.statusView.remove(),n.remove(this.model._retailViews,this),this.model._retailViews.length||delete this.model._retailViews}})}),define("components/retail-carousel-2/views/RetailCarouselView",["require","jquery","lodash","lib/views/BaseView","tmpl!retail-carousel","./RetailCarouselItemView","slick"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/views/BaseView"),a=e("tmpl!retail-carousel"),s=e("./RetailCarouselItemView");e("slick");var o={479:{nav:290,cssClass:"phone"},639:{nav:240,cssClass:"phablet"},959:{nav:290,cssClass:"tablet"},1439:{nav:360,cssClass:"desktop"}},r=function(e,t){return e-t},l=n.map(n.keys(o),function(e){return parseInt(e,10)}).sort(r),u=function(e){var t=n.find(l,function(t){return t>=e});return o[t]||{nav:530,cssClass:"cinema"}};return i.extend({template:a,subviews:{"retail-carousel-item":s},events:n.extend({"keydown .slick-arrow":"keyDownSlickArrow"},i.prototype.events),initialize:function(){return i.prototype.initialize.apply(this,arguments),this.$el.addClass("mr-component-instance-"+this.componentId()+" mr-component-type-"+this.componentType()),this.listenTo(this.model.get("queue"),"add",n.debounce(this.render,50)),this.listenTo(this.model,"change:noContent",n.debounce(this.render,50)),t(window).on("resize."+this.cid,n.debounce(n.bind(this.windowResize,this),50)),this},render:function(){i.prototype.render.apply(this,arguments);var e=this.model.get("config");return this.$carousel=this.$(".retail-carousel"),this.$carousel.toggleClass("is-modal",e.isModal),this.windowResize(),this.model.get("queue").length&&this.renderSlick(),this},keyDownSlickArrow:function(e){13===e.keyCode&&(t(e.currentTarget).hasClass("slick-prev")?this.slick.slick("slickPrev"):this.slick.slick("slickNext"))},renderSlick:function(){this.$carousel.on("beforeChange",n.bind(this.beforeChange,this)),this.$carousel.on("afterChange",n.bind(this.afterChange,this)),this.$carousel.on("init",n.bind(this.slickInit,this)),this.slick=this.$carousel.slick({initialSlide:this.model.get("startIndex"),slide:".retail-slide",prevArrow:'<div class="slick-prev slick-arrow" tabindex="0"><i class="icon-arrow-left slick-arrow-icon"><span class="ada-text">Click to view previous post</span></i></div>',nextArrow:'<div class="slick-next slick-arrow" tabindex="0"><i class="icon-arrow-right slick-arrow-icon"><span class="ada-text">Click to view next post</span></i></div>'}),this.renderSurroundingSlides(this._getSurroundingIndexes(this.model.get("startIndex"))),this.trackCurrentSlide(this.model.get("startIndex"))
},slickInit:function(e){if(t(e.target).is(this.$carousel)){var n=this.model.get("queue");if(n.length>0){var i=this.$(".retail-slide.slick-slide[data-slick-index=-1]"),a=n.at(n.length-1),o=new s({model:a,parent:this,el:i});this.renderedSubviews[o.cid]=o,o.render();var r=this.$(".slick-slide[data-slick-index="+n.length+"]"),l=n.at(0),u=new s({model:l,parent:this,el:r});this.renderedSubviews[u.cid]=u,u.render()}}},beforeChange:function(e,n,i){t(e.target).is(this.$carousel)&&(this._currentSlide=i)},afterChange:function(e,i,a){if(t(e.target).is(this.$carousel)){if(a!==this._currentSlide){var s=this._currentSlide+1===a||0===a&&1!==this._currentSlide;this.analytics().trackEvent({category:"viz:toggle",action:"retail-carousel",label:s?"right":"left"})}var o=this._getSurroundingIndexes(a);this.renderSurroundingSlides(o),this.notifySurroundingDidDisappear(n.without(o,a)),this.trackCurrentSlide(a)}},_getSurroundingIndexes:function(e){var t=this.model.get("queue"),n=(e+1)%t.length,i=e-1;return 0>i&&(i=t.length+i),[i,e,n]},renderSurroundingSlides:function(e){var t=this.model.get("queue");n.forEach(e,function(e){var i=t.at(e);i&&i._retailViews&&n.forEach(i._retailViews,function(e){e.trigger("shouldRender")})})},notifySurroundingDidDisappear:function(e){var t=this.model.get("queue");n.forEach(e,function(e){var i=t.at(e);i&&i._retailViews&&n.forEach(i._retailViews,function(e){e.trigger("didDisappear")})})},trackCurrentSlide:function(e){var t=this.model.get("queue"),n=t.at(e);n&&this.analytics().trackEvent({category:"retail-carousel:show-status",action:n.get("_retailHasRetail")?"has-retail":"no-retail"})},windowResize:function(){if(this.$carousel){var e=this.model.get("config"),t=this.$carousel.outerWidth(!0);e.isModal&&(t-=80);var n=u(t);this.model.set("_windowWidth",n.nav),this.$carousel.removeClass(function(e,t){return(t.match(/(^|\s)bp-\S+/g)||[]).join(" ")}).addClass("bp-"+n.cssClass)}},remove:function(){i.prototype.remove.apply(this,arguments),t(window).off("resize."+this.cid)}})}),define("components/retail-carousel-2/main",["require","jquery","lib/BaseComponent","componentStyle!retail-carousel-2","./models/RetailCarouselModel","./views/RetailCarouselView"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("componentStyle!retail-carousel-2"),a=e("./models/RetailCarouselModel"),s=e("./views/RetailCarouselView");return n.extend({styles:i,create:function(){var e=this.get("id"),n=this.get("config"),i=this.get("dispatcher"),o=new a({id:e,dispatcher:i,config:n.settings});this.set("model",o);var r={model:o,View:s.extend({defaults:{analytics:this.get("analytics"),componentId:e,componentType:n.type,dispatcher:i,model:o}})};if(this.hasElement()){var l=new s({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,dispatcher:i,model:o});this.set("view",l),r.view=l}return r},render:function(){this.hasElement()&&this.get("view").render()}}).exports()}),define("components/sponsor-bar-2/models/SponsorBarModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=n.Model.extend({defaults:{url:"",image_url:"",width:"",ada_text:""},initialize:function(e){this.set(t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults))))}});return i}),define("tmpl!sponsor-bar",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<a href="'+__e(url)+'">\n  <span class="ada-text">'+__e(ada_text)+'</span>\n  <div class="sponsor-bar">\n    <img src="'+__e(image_url)+'" style="width: '+__e(width)+'">\n  </div>\n</a>';return __p},metadata:{customizable:!0},name:"sponsor-bar"})}),define("components/sponsor-bar-2/views/SponsorBarView",["require","lodash","lib/views/BaseView","tmpl!sponsor-bar"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!sponsor-bar"),a=n.extend({className:"sponsor-bar",template:i,events:{click:"trackAnalyticsClick"},initialize:function(){this.listenTo(this.model,"change",t.bind(this.render,this))},trackAnalyticsClick:function(e){var t=e.target.closest("a").href;return this.analytics().trackEvent({category:"viz:sponsor",action:t}),this}});return a}),define("componentStyle!sponsor-bar-2",{render:function(){}}),define("components/sponsor-bar-2/main",["require","jquery","lib/BaseComponent","components/sponsor-bar-2/models/SponsorBarModel","components/sponsor-bar-2/views/SponsorBarView","componentStyle!sponsor-bar-2"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("components/sponsor-bar-2/models/SponsorBarModel"),a=e("components/sponsor-bar-2/views/SponsorBarView"),s=e("componentStyle!sponsor-bar-2");return n.extend({styles:s,create:function(){var e=this.get("id"),n=this.get("config"),s=this.get("dispatcher"),o=new i({id:e,dispatcher:s,config:n.settings}),r=new a({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,model:o});return this.set("model",o),this.set("view",r),{model:o,view:r}},render:function(){if(this.hasElement()){this.get("view").render();var e=this.attributes.config.settings.image_url.length;0===e&&t(".sponsor-bar").find("img").remove()}}}).exports()}),define("components/photo-share-button-6/js/models/PhotoShareButtonModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:{button_style:"color",button_text:"Share Photo",button_border_radius:3,stream_name:""}})}),define("tmpl!photo-share-button-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<span class="ada-text">Share a photo via Twitter or Facebook</span>\n<i class="icon icon-camera"></i>\n<span class="button-text">'+__e(button_text)+"</span>\n";return __p},metadata:{},name:"photo-share-button-6"})}),define("components/photo-share-button-6/js/views/PhotoShareButtonView",["require","jquery","lodash","lib/views/BaseView","tmpl!photo-share-button-6"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/views/BaseView"),a=e("tmpl!photo-share-button-6");return i.extend({attributes:{href:"","data-action":"showUploadView"},tagName:"a",className:function(){var e=this.model.get("button_style"),t=["mr-action-click","photo-share-button"];return this.model.get("enabled")||t.push("hidden"),this.model.get("display_as_link")?t.push("photo-share-button-as-link"):(t.push("social-button"),e&&t.push("button-style-"+e)),t.join(" ")},template:a,handlers:{showUploadView:function(e){e&&e.preventDefault();var i=this.options.showUploadViewHandler;n.isFunction(i)&&i(),this.dispatcher().trigger("showUploadView");var a,s,o=navigator.userAgent;-1!==(a=o.indexOf("Chrome"))&&(s="Chrome"),"Chrome"===s&&t(".upload-button input").css("font-size","0px")}},render:function(){return i.prototype.render.apply(this,arguments),this.$el.css("border-radius",this.model.get("button_border_radius")+"px"),this}})}),define("components/photo-share-button-6/js/models/PhotoShareDialogModel",["require","lodash","backbone-amd"],function(e){var t=e("lodash"),n=e("backbone-amd");return n.Model.extend({defaults:{sources:[{title:"Facebook",type:"facebook",icon:"facebook-logo"},{title:"Instagram",type:"instagram",icon:"instagram-logo"},{title:"My Device",type:"local",icon:"monitor"}],terms_text:""},initialize:function(e){return this.set("sources",t.filter(this.get("sources"),function(t){return e.photo_sources[t.type]})),this}})}),define("tmpl!photo-share-dialog-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='<div class="header">\n  <h2>Add Image</h2>\n  <ul class="breadcrumb">\n    <li class="active">Choose Source <i class="icon-angle-right" /></li>\n    <li>Select Images <i class="icon-angle-right" /></li>\n    <li>Confirm</li>\n</ul>\n</div>\n\n<div class="tabs">\n  <div class="tab source active">\n    <h3>Where do you want to get your photos?</h3>\n    ',_.each(sources,function(e){__p+="\n      "+(null==(__t=subview("source-option",e))?"":__t)+"\n    "}),__p+='\n  </div>\n  <div class="tab select-images">\n  </div>\n  <div class="tab success">\n    <div class="giant-checkmark"><i class="icon-vote-check"/></div>\n    <h2>'+(null==(__t=confirmation_page.title)?"":__t)+'</h2>\n    <div class="thanks">'+(null==(__t=confirmation_page.copy)?"":__t)+'</div>\n    <div class="close-button button mr-action-click" data-action="close">CLOSE</div>\n  </div>\n</div>\n\n<div class="errors"></div>\n';return __p},metadata:{},name:"photo-share-dialog-6"})}),define("components/photo-share-button-6/js/views/PhotoSourceOptionView",["require","lib/views/BaseView","lodash"],function(e){var t=e("lib/views/BaseView"),n=e("lodash");return t.extend({tagName:"div",className:"source-option mr-action-click",attributes:{"data-action":"select"},template:n.template('<i class="icon-<%-icon%>"></i><span class="source-option-title"><%- title %></span>'),initialize:function(e){return this.model=e.model,this.dispatcher=this._closest("dispatcher"),this},handlers:{select:function(){this.dispatcher.trigger("source-selected",this)}}})}),define("tmpl!photo-share-my-device-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(Array.prototype.join,obj)__p+='<div class="photo-chooser">\n  <h3>Which photos do you want to add?</h3>\n  <div class="file-select">\n    <div class="upload-target"></div>\n  </div>\n</div>\n<div class="photo-confirm">\n  <h3>Add this photo?</h3>\n</div>\n\n<div class="image-previews">\n</div>\n\n<div class="comment-box">\n  <h3>Add Comment</h3>\n  <textarea placeholder="Enter Text here...">'+__e(message)+'</textarea>\n</div>\n\n<div class="select-footer">\n  <div class="back-button mr-action-click" data-action="back">&lt; BACK</div>\n  <div class="selected-label"></div>\n  <div class="next-button button inactive mr-action-click" data-action="next">NEXT</div>\n  <div class="share-buttons">\n  ',upload_settings.facebook&&(__p+='\n  <div class="facebook-button">\n    <a class="social-button facebook button-style-color mr-action-click" data-action="share-facebook">\n      <i class="icon icon-facebook-logo"></i>\n      <span class="button-text">Share via Facebook</span>\n    </a>\n  </div>\n  '),__p+="\n  ",upload_settings.twitter&&(__p+='\n  <div class="twitter-button">\n    <a class="social-button twitter button-style-color mr-action-click" data-action="share-twitter">\n      <i class="icon icon-twitter-logo"></i>\n      <span class="button-text">Share via Twitter</span>\n    </a>\n  </div>\n  '),__p+="\n  </div>\n</div>";return __p},metadata:{},name:"photo-share-my-device-6"})}),define("components/photo-share-button-6/js/utils",["require","lodash","jquery"],function(e){function t(e,t){var n=(e||"").split(/\s|,/);return n=s.map(n,function(e){for(e=o.trim(e);"#"===e.charAt(0);)e=e.substring(1);return e}),n=s.reject(n,function(e){return 0===e.length}),t&&(n=s.map(n,function(e){return"#"+e})),n}function n(e){return r-l-(e||"").length}function i(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function a(e,t){var n=o.now(),i=n+t;return function(){var t=arguments;s.delay(function(){e.apply(this,t)},Math.max(i-o.now(),0))}}var s=e("lodash"),o=e("jquery"),r=140,l=23;return{emptyPromise:function(){return{then:o.noop,call:o.noop}},getCookie:i,minDelayedExecutor:a,parseHashtags:t,tweetCharacterCount:n}}),define("tmpl!photo-share-upload-zone-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<div class="qq-uploader">\n  <div class="qq-upload-drop-area">\n    <p>Drop your image here.</p>\n  </div>\n  <div class="qq-upload-button upload-button">\n    <p class="drag-and-drop">Drop images here or click to browse</p>\n    <p class="click-only">Click to select a photo.</p>\n    <label for="qq-upload-button-input" class="ada-text">Click to select a photo to upload and share</label>\n  </div>\n  <span class="qq-drop-processing">\n    <span>Processing file.</span>\n    <span class="qq-drop-processing-spinner"></span>\n  </span>\n  <ul class="qq-upload-list"></ul>\n</div>\n\n';return __p},metadata:{},name:"photo-share-upload-zone-6"})}),define("fine-uploader/s3.fineuploader",["require"],function(require){var qq=function(e){return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return t?e===t?!0:e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)):!1},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null!=t.opacity){var n=typeof e.filters;"string"!=typeof e.style.opacity&&"undefined"!==n&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")")}return qq.extend(e.style,t),this},hasClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var n,i=[];return e.querySelectorAll?e.querySelectorAll("."+t):(n=e.getElementsByTagName("*"),qq.each(n,function(e,n){qq(n).hasClass(t)&&i.push(n)}),i)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")}}};return qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e;return qq.each(t,function(e,t){n=n.replace(/{}/,t)}),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e){return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&"file"===e.type.toLowerCase()?!0:e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&"file"===e.type.toLowerCase()?!0:!1},qq.isBlob=function(e){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(e)},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.extend=function(e,t,n){return qq.each(t,function(t,i){n&&qq.isObject(i)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],i,!0)):e[t]=i}),e},qq.override=function(e,t){var n={},i=t(n);return qq.each(i,function(t,i){void 0!==e[t]&&(n[t]=e[t]),e[t]=i}),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var i=e.length;for(0>n&&(n+=i);i>n;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"==e?t:8|3&t;return n.toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("rv:11")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){var n,i;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&(i=t(e.key(n),e.getItem(e.key(n))),i!==!1);n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&(i=t(n,e[n]),i!==!1);n++);else if(qq.isString(e))for(n=0;n<e.length&&(i=t(n,e.charAt(n)),i!==!1);n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&(i=t(n,e[n]),i===!1))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var i=qq.extend([],n);return arguments.length&&(i=i.concat(Array.prototype.slice.call(arguments))),e.apply(t,i)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var i=[],a="&",s=function(e,n){var a=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==a&&"undefined"!==n&&i.push("object"==typeof e?qq.obj2url(e,a,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(a)+"="+encodeURIComponent(e()):encodeURIComponent(a)+"="+encodeURIComponent(e))};return!n&&t?(a=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",i.push(t),i.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&"undefined"!=typeof e?qq.each(e,function(e,t){s(t,e)}):"undefined"!=typeof e&&null!==e&&"object"==typeof e?qq.each(e,function(e,t){s(t,e)}):i.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?i.join(a):i.join(a).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,i){e=n?n+"["+e+"]":e,qq.isObject(i)?qq.obj2FormData(i,t,e):qq.isFunction(i)?t.append(e,i()):t.append(e,i)}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,i){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}}),t},qq.setCookie=function(e,t,n){var i=new Date,a="";n&&(i.setTime(i.getTime()+1e3*60*60*24*n),a="; expires="+i.toGMTString()),document.cookie=e+"="+t+a+"; path=/"},qq.getCookie=function(e){var t,n=e+"=",i=document.cookie.split(";");return qq.each(i,function(e,i){for(var a=i;" "==a.charAt(0);)a=a.substring(1,a.length);return 0===a.indexOf(n)?(t=a.substring(n.length,a.length),!1):void 0}),t},qq.getCookieNames=function(e){var t=document.cookie.split(";"),n=[];return qq.each(t,function(t,i){i=qq.trimStr(i);var a=i.indexOf("=");i.match(e)&&n.push(i.substr(0,a))}),n},qq.deleteCookie=function(e){qq.setCookie(e,"",-1)},qq.areCookiesEnabled=function(){var e=1e5*Math.random(),t="qqCookieTest:"+e;return qq.setCookie(t,1),qq.getCookie(t)?(qq.deleteCookie(t),!0):!1},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;return t>0?e.substr(t,e.length-t):void 0},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do t=e.shift(),t&&t();while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}},qq.version="3.9.0-3",qq.supportedFeatures=function(){function e(){var e,t=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(n){t=!1}return t}function t(){return qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function n(){return qq.chrome()&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function i(){if(window.XMLHttpRequest){var e=qq.createXhrInstance();return void 0!==e.withCredentials}return!1}function a(){return void 0!==window.XDomainRequest}function s(){return i()?!0:a()}function o(){return void 0!==document.createElement("input").webkitdirectory}var r,l,u,d,c,p,h,m,f,_,g;return r=e(),l=r&&qq.isXhrUploadSupported(),u=l&&t(),d=l&&qq.isFileChunkingSupported(),c=l&&d&&qq.areCookiesEnabled(),p=l&&n(),h=r&&(void 0!==window.postMessage||l),f=i(),m=a(),_=s(),g=o(),{uploading:r,ajaxUploading:l,fileDrop:l,folderDrop:u,chunking:d,resume:c,uploadCustomHeaders:l,uploadNonMultipart:l,itemSizeValidation:l,uploadViaPaste:p,progressBar:l,uploadCors:h,deleteFileCorsXhr:f,deleteFileCorsXdr:m,deleteFileCors:_,canDetermineSize:l,folderSelection:g}}(),qq.Promise=function(){var e,t,n=[],i=[],a=[],s=0;return{then:function(a,o){return 0===s?(a&&n.push(a),o&&i.push(o)):-1===s&&o?o.apply(null,t):a&&a.apply(null,e),this},done:function(n){return 0===s?a.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return s=1,e=arguments,n.length&&qq.each(n,function(t,n){n.apply(null,e)}),a.length&&qq.each(a,function(t,n){n.apply(null,e)}),this},failure:function(){return s=-1,t=arguments,i.length&&qq.each(i,function(e,n){n.apply(null,t)}),a.length&&qq.each(a,function(e,n){n.apply(null,t)}),this}}},qq.isPromise=function(e){return e&&e.then&&e.done},qq.UploadButton=function(e){function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,i),s.multiple&&e.setAttribute("multiple",""),s.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),s.acceptFiles&&e.setAttribute("accept",s.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",s.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),s.element.appendChild(e),a.attach(e,"change",function(){s.onChange(e)}),a.attach(e,"mouseover",function(){qq(s.element).addClass(s.hoverClass)}),a.attach(e,"mouseout",function(){qq(s.element).removeClass(s.hoverClass)}),a.attach(e,"focus",function(){qq(s.element).addClass(s.focusClass)}),a.attach(e,"blur",function(){qq(s.element).removeClass(s.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}var n,i,a=new qq.DisposeSupport,s={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};return qq.extend(s,e),i=qq.getUniqueId(),qq(s.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),n=t(),{getInput:function(){return n},getButtonId:function(){return i},setMultiple:function(e){e!==s.multiple&&(e?n.setAttribute("multiple",""):n.removeAttribute("multiple"))},setAcceptFiles:function(e){e!==s.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(s.element).removeClass(s.focusClass),n=t()}}},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){function t(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(s[o[n]])}),t}return s[o[e]]}function n(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(s[r[n]])}),t}return s[r[e]]}function i(e){var t=[],n=[].concat(e);return qq.each(n,function(e,n){var i=l[n];void 0!==i&&qq.each(i,function(e,n){t.push(s[n])})}),t}var a,s=[],o={},r={},l={};return a={added:function(t){var n=e.getUuid(t),i=e.getName(t),a=e.getSize(t),u=qq.status.SUBMITTING,d=s.push({id:t,name:i,originalName:i,uuid:n,size:a,status:u})-1;o[t]=d,r[n]=d,void 0===l[u]&&(l[u]=[]),l[u].push(d),e.onStatusChange(t,void 0,u)},retrieve:function(e){return qq.isObject(e)&&s.length?void 0!==e.id?t(e.id):void 0!==e.uuid?n(e.uuid):e.status?i(e.status):void 0:qq.extend([],s,!0)},reset:function(){s=[],o={},r={},l={}},setStatus:function(t,n){var i=o[t],a=s[i].status,r=qq.indexOf(l[a],i);l[a].splice(r,1),s[i].status=n,void 0===l[n]&&(l[n]=[]),l[n].push(i),e.onStatusChange(t,a,n)},uuidChanged:function(e,t){var n=o[e],i=s[n].uuid;s[n].uuid=t,r[t]=n,delete r[i]},nameChanged:function(e,t){var n=o[e];s[n].name=t}}},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},qq.basePublicApi={log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[FineUploader "+qq.version+"] "+e,t):qq.log("[FineUploader "+qq.version+"] "+e)},setParams:function(e,t){null==t?this._options.request.params=e:this._paramsStore.setParams(e,t)},setDeleteFileParams:function(e,t){null==t?this._options.deleteFile.params=e:this._deleteFileParamsStore.setParams(e,t)},setEndpoint:function(e,t){null==t?this._options.request.endpoint=e:this._endpointStore.setEndpoint(e,t)},getInProgress:function(){return this._filesInProgress.length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){var e;if(0===this._storedIds.length)this._itemError("noFilesError");else for(;this._storedIds.length;)e=this._storedIds.shift(),this._filesInProgress.push(e),this._handler.upload(e)},clearStoredFiles:function(){this._storedIds=[]},retry:function(e){return this._manualRetry(e)},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],qq.each(this._buttons,function(e,t){t.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(e,t,n){var i,a,s,o=this,r=[];if(e){for(qq.isFileList(e)||(e=[].concat(e)),i=0;i<e.length;i+=1)if(a=e[i],qq.isFileOrInput(a))if(qq.isInput(a)&&qq.supportedFeatures.ajaxUploading)for(s=0;s<a.files.length;s++)r.push(a.files[s]);else r.push(a);else o.log(a+" is not a File or INPUT element!  Ignoring!","warn");this.log("Received "+r.length+" files or inputs."),this._prepareItemsForUpload(r,t,n)}},addBlobs:function(e,t,n){if(e){var i=[].concat(e),a=[],s=this;qq.each(i,function(e,t){qq.isBlob(t)&&!qq.isFileOrInput(t)?a.push({blob:t,name:s._options.blobs.defaultName}):qq.isObject(t)&&t.blob&&t.name?a.push(t):s.log("addBlobs: entry at index "+e+" is not a Blob or a BlobData object","error")}),this._prepareItemsForUpload(a,t,n)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(e){return this._handler.getUuid(e)},setUuid:function(e,t){return this._handler.setUuid(e,t)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._handler.getSize(e)},getName:function(e){return this._handler.getName(e)},setName:function(e,t){this._handler.setName(e,t),this._uploadData.nameChanged(e,t)},getFile:function(e){return this._handler.getFile(e)},deleteFile:function(e){this._onSubmitDelete(e)},setDeleteFileEndpoint:function(e,t){null==t?this._options.deleteFile.endpoint=e:this._deleteFileEndpointStore.setEndpoint(e,t)},doesExist:function(e){return this._handler.isValid(e)},getUploads:function(e){return this._uploadData.retrieve(e)},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])}},qq.basePrivateApi={_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(t,n){var i=n.multiple,a=qq.extend({},e._options.validation,!0),s=qq.extend({},n);void 0===i&&(i=e._options.multiple),s.validation&&qq.extend(a,n.validation,!0),qq.extend(s,{multiple:i,validation:a},!0),e._initExtraButton(s)})},_initExtraButton:function(e){var t=this._createUploadButton({element:e.element,multiple:e.multiple,accept:e.validation.acceptFiles,folders:e.folders});this._extraButtonSpecs[t.getButtonId()]=e},_getButtonId:function(e){var t,n;if(e&&!e.blob&&!qq.isBlob(e)){if(qq.isFile(e))return e.qqButtonId;if("input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase())return e.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=e.getElementsByTagName("input"),qq.each(t,function(e,t){return"file"===t.getAttribute("type")?(n=t,!1):void 0}),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(n!==!1?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_createUploadButton:function(e){var t=this,n=void 0===e.multiple?this._options.multiple:e.multiple,i=e.accept||this._options.validation.acceptFiles,a=new qq.UploadButton({element:e.element,folders:e.folders,name:this._options.request.inputName,multiple:n&&qq.supportedFeatures.ajaxUploading,acceptFiles:i,onChange:function(e){t._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){a.dispose()}),t._buttons.push(a),a},_createUploadHandler:function(e,t){var n=this,i={debug:this._options.debug,maxConnections:this._options.maxConnections,inputName:this._options.request.inputName,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:function(e,t){n.log(e,t)
},onProgress:function(e,t,i,a){n._onProgress(e,t,i,a),n._options.callbacks.onProgress(e,t,i,a)},onComplete:function(e,t,i,a){var s=n._onComplete(e,t,i,a);qq.isPromise(s)?s.done(function(){n._options.callbacks.onComplete(e,t,i,a)}):n._options.callbacks.onComplete(e,t,i,a)},onCancel:function(e,t){return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onSuccess:qq.bind(n._onCancel,n,e,t),identifier:e})},onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,i){n._options.callbacks.onUploadChunk(e,t,i)},onResume:function(e,t,i){return n._options.callbacks.onResume(e,t,i)},onAutoRetry:function(){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n._uploadData.uuidChanged(e,t)}};return qq.each(this._options.request,function(e,t){i[e]=t}),e&&qq.each(e,function(e,t){i[e]=t}),new qq.UploadHandler(i,t)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequestor({method:this._options.deleteFile.method,maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:function(t,n){e.log(t,n)},onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,i){e._onDeleteComplete(t,n,i),e._options.callbacks.onDeleteComplete(t,n,i)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:function(t,n){e.log(t,n)},pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,i){e._onUploadStatusChange(t,n,i),e._options.callbacks.onStatusChange(t,n,i)}})},_onUploadStatusChange:function(){},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],i=t;null==i&&(i=this._options.paste.defaultName),i+="."+n,this.addBlobs({name:i,blob:e})},_preventLeaveInProgress:function(){},_onSubmit:function(e){this._netUploadedOrQueued++,this._options.autoUpload&&this._filesInProgress.push(e)},_onProgress:function(){},_onComplete:function(e,t,n,i){return n.success?(this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED)),this._removeFromFilesInProgress(e),this._maybeParseAndSendUploadError(e,t,n,i),n.success?!0:!1},_onCancel:function(e){this._netUploadedOrQueued--,this._removeFromFilesInProgress(e),clearTimeout(this._retryTimeouts[e]);var t=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&t>=0&&this._storedIds.splice(t,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_isDeletePossible:function(){return this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_onSubmitDelete:function(e,t,n){var i,a=this.getUuid(e);return t&&(i=qq.bind(t,this,e,a,n)),this._isDeletePossible()?this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:i||qq.bind(this._deleteHandler.sendDelete,this,e,a,n),identifier:e}):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){var i=this._handler.getName(e);n?(this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+i+"' has failed.","error"),void 0===t.withCredentials?this._options.callbacks.onError(e,i,"Delete request failed",t):this._options.callbacks.onError(e,i,"Delete request failed with response code "+t.status,t)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+i+"' has succeeded."))},_removeFromFilesInProgress:function(e){var t=qq.indexOf(this._filesInProgress,e);t>=0&&this._filesInProgress.splice(t,1)},_onUpload:function(e){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else this.addFiles(e);qq.each(this._buttons,function(e,t){t.reset()})},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(e,t,n,i,a){var s=this;return s._preventRetries[e]=n[s._options.retry.preventRetryResponseProperty],s._shouldAutoRetry(e,t,n)?(s._maybeParseAndSendUploadError.apply(s,arguments),s._options.callbacks.onAutoRetry(e,t,s._autoRetries[e]+1),s._onBeforeAutoRetry(e,t),s._retryTimeouts[e]=setTimeout(function(){s.log("Retrying "+t+"..."),s._autoRetries[e]++,s._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),a?a(e):s._handler.retry(e)},1e3*s._options.retry.autoAttemptDelay),!0):void 0},_shouldAutoRetry:function(e){return!this._preventRetries[e]&&this._options.retry.enableAuto?(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(e){var t=this._options.validation.itemLimit;if(this._preventRetries[e])return this.log("Retries are forbidden for id "+e,"warn"),!1;if(this._handler.isValid(e)){var n=this._handler.getName(e);return this._options.callbacks.onManualRetry(e,n)===!1?!1:t>0&&this._netUploadedOrQueued+1>t?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+n+"' (id: "+e+")..."),this._filesInProgress.push(e),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_manualRetry:function(e,t){return this._onBeforeManualRetry(e)?(this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0):void 0},_maybeParseAndSendUploadError:function(e,t,n,i){if(!n.success)if(i&&200!==i.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+i.status,i);else{var a=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,a,i)}},_prepareItemsForUpload:function(e,t,n){var i=this._getValidationDescriptors(e),a=this._getButtonId(e[0]),s=this._getButton(a);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,i,s),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,i,e,t,n,s),identifier:"batch validation"})},_upload:function(e,t,n){var i=this._handler.add(e),a=this._handler.getName(i);this._uploadData.added(i),t&&this.setParams(t,i),n&&this.setEndpoint(n,i),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,i,a),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,i,a),onFailure:qq.bind(this._fileOrBlobRejected,this,i,a),identifier:i})},_onSubmitCallbackSuccess:function(e){var t;this._uploadData.setStatus(e,qq.status.SUBMITTED),t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)),t&&(this._buttonIdsForFileIds[e]=t),this._onSubmit.apply(this,arguments),this._onSubmitted.apply(this,arguments),this._options.callbacks.onSubmitted.apply(this,arguments),this._options.autoUpload?this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED):this._storeForLater(e)},_onSubmitted:function(){},_storeForLater:function(e){this._storedIds.push(e)},_onValidateBatchCallbackSuccess:function(e,t,n,i,a){var s,o=this._options.validation.itemLimit,r=this._netUploadedOrQueued+e.length;0===o||o>=r?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],a),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,i),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,i),identifier:"Item '"+t[0].name+"', size: "+t[0].size}):this._itemError("noFilesError"):(s=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,r).replace(/\{itemLimit\}/g,o),this._batchError(s))},_onValidateCallbackSuccess:function(e,t,n,i){var a=t+1,s=this._getValidationDescriptor(e[t]),o=!1;this._validateFileOrBlobData(e[t],s)&&(o=!0,this._upload(e[t],n,i)),this._maybeProcessNextItemAfterOnValidateCallback(o,e,a,n,i)},_onValidateCallbackFailure:function(e,t,n,i){var a=t+1;this._fileOrBlobRejected(void 0,e[0].name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,a,n,i)},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,i,a){var s=this;t.length>n&&(e||!this._options.validation.stopOnFirstInvalidFile)&&setTimeout(function(){var e=s._getValidationDescriptor(t[n]);s._handleCheckedCallback({name:"onValidate",callback:qq.bind(s._options.callbacks.onValidate,s,t[n]),onSuccess:qq.bind(s._onValidateCallbackSuccess,s,t,n,i,a),onFailure:qq.bind(s._onValidateCallbackFailure,s,t,n,i,a),identifier:"Item '"+e.name+"', size: "+e.size})},0)},_validateFileOrBlobData:function(e,t){var n=t.name,i=t.size,a=this._getButtonId(e),s=this._extraButtonSpecs[a],o=s?s.validation:this._options.validation,r=!0;return qq.isFileOrInput(e)&&!this._isAllowedExtension(o.allowedExtensions,n)?(this._itemError("typeError",n,e),r=!1):0===i?(this._itemError("emptyError",n,e),r=!1):i&&o.sizeLimit&&i>o.sizeLimit?(this._itemError("sizeError",n,e),r=!1):i&&i<o.minSizeLimit&&(this._itemError("minSizeError",n,e),r=!1),r||this._fileOrBlobRejected(void 0,n),r},_fileOrBlobRejected:function(e){void 0!==e&&this._uploadData.setStatus(e,qq.status.REJECTED)},_itemError:function(e,t,n){function i(e,t){o=o.replace(e,t)}var a,s,o=this._options.messages[e],r=[],l=[].concat(t),u=l[0],d=this._getButtonId(n),c=this._extraButtonSpecs[d],p=c?c.validation:this._options.validation;return qq.each(p.allowedExtensions,function(e,t){qq.isString(t)&&r.push(t)}),a=r.join(", ").toLowerCase(),i("{file}",this._options.formatFileName(u)),i("{extensions}",a),i("{sizeLimit}",this._formatSize(p.sizeLimit)),i("{minSizeLimit}",this._formatSize(p.minSizeLimit)),s=o.match(/(\{\w+\})/g),null!==s&&qq.each(s,function(e,t){i(t,l[e])}),this._options.callbacks.onError(null,u,o,void 0),o},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_isAllowedExtension:function(e,t){var n=!1;return e.length?(qq.each(e,function(e,i){if(qq.isString(i)){var a=new RegExp("\\."+i+"$","i");if(null!=t.match(a))return n=!0,!1}}),n):!0},_formatSize:function(e){var t=-1;do e/=1e3,t++;while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n,i){try{return n.apply(e,i)}catch(a){e.log("Caught exception in '"+t+"' callback - "+a.message,"error")}};for(var n in this._options.callbacks)!function(){var i,a;i=n,a=e._options.callbacks[i],e._options.callbacks[i]=function(){return t(i,a,arguments)}}()},_parseFileOrBlobDataName:function(e){var t;return t=qq.isFileOrInput(e)?e.value?e.value.replace(/.*(\/|\\)/,""):null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name:e.name},_parseFileOrBlobDataSize:function(e){var t;return qq.isFileOrInput(e)?e.value||(t=null!==e.fileSize&&void 0!==e.fileSize?e.fileSize:e.size):t=e.blob.size,t},_getValidationDescriptor:function(e){var t={},n=this._parseFileOrBlobDataName(e),i=this._parseFileOrBlobDataSize(e);return t.name=n,void 0!==i&&(t.size=i),t},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,i){n.push(t._getValidationDescriptor(i))}),n},_createParamsStore:function(e){var t={},n=this;return{setParams:function(e,n){var i={};qq.extend(i,e),t[n]=i},getParams:function(i){var a={};return null!=i&&t[i]?qq.extend(a,t[i]):qq.extend(a,n._options[e].params),a},remove:function(e){return delete t[e]},reset:function(){t={}}}},_createEndpointStore:function(e){var t={},n=this;return{setEndpoint:function(e,n){t[n]=e},getEndpoint:function(i){return null!=i&&t[i]?t[i]:n._options[e].endpoint},remove:function(e){return delete t[e]},reset:function(){t={}}}},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,i=n?this._extraButtonSpecs[n]:this._options;i.multiple=!1,null===i.validation.acceptFiles?i.validation.acceptFiles=e:i.validation.acceptFiles+=","+e,qq.each(this._buttons,function(e,t){return t.getButtonId()===n?(t.setMultiple(i.multiple),t.setAcceptFiles(i.acceptFiles),!1):void 0})}}},qq.FineUploaderBasic=function(e){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return void 0!==e&&e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-14)),e},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[]},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._filesInProgress=[],this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._paramsStore=this._createParamsStore("request"),this._deleteFileParamsStore=this._createParamsStore("deleteFile"),this._endpointStore=this._createEndpointStore("request"),this._deleteFileEndpointStore=this._createEndpointStore("deleteFile"),this._handler=this._createUploadHandler(),this._deleteHandler=this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(this._pasteHandler=this._createPasteHandler()),this._preventLeaveInProgress()},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi),qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(e){this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){return this._dnd.removeDropzone(e)},getItemByFileId:function(e){for(var t=this._listElement.firstChild;t;){if(t.qqFileId==e)return t;t=t.nextSibling}},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._options.button||(this._defaultButtonId=this._createUploadButton({element:this._find(this._element,"button")}).getButtonId()),this._dnd.dispose(),this._dnd=this._setupDragAndDrop(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()}},qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);return t||e===this._defaultButtonId&&(t=this._find(this._element,"button")),t},_removeFileItem:function(e){var t=this.getItemByFileId(e);qq(t).remove()},_setupClickAndEditEventHandlers:function(){this._deleteRetryOrCancelClickHandler=this._bindDeleteRetryOrCancelClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var e,t=this,n=this._find(this._element,"dropProcessing"),i=this._options.dragAndDrop.extraDropzones;return e=function(e){e.preventDefault()},this._options.dragAndDrop.disableDefaultDropzone||i.push(this._find(this._options.element,"drop")),new qq.DragAndDrop({dropZoneElements:i,hideDropZonesBeforeEnter:this._options.dragAndDrop.hideDropzones,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){qq(n).css({display:"block"})},processingDroppedFilesComplete:function(e){qq(n).hide(),e&&t.addFiles(e)},dropError:function(e,n){t._itemError(e,n)},dropLog:function(e,n){t.log(e,n)}}})},_bindDeleteRetryOrCancelClickEvent:function(){var e=this;return new qq.DeleteRetryOrCancelClickHandler({listElement:this._listElement,classes:this._classes,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){var n=e.getItemByFileId(t);qq(n).removeClass(e._classes.retryable),e.retry(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._options.editFilename.enabled&&!this._options.autoUpload},_filenameEditHandler:function(){var e=this;return{listElement:this._listElement,classes:this._classes,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,n){var i=e.getItemByFileId(t),a=qq(e._find(i,"file")),s=e._options.formatFileName(n);a.setText(s),e.setName(t,n)},onGetInput:function(t){return e._find(t,"editFilenameInput")},onEditingStatusChange:function(t,n){var i=e.getItemByFileId(t),a=qq(e._find(i,"editFilenameInput")),s=qq(e._find(i,"file")),o=qq(e._find(i,"editNameIcon")),r=e._classes.editable;n?(a.addClass("qq-editing"),s.hide(),o.removeClass(r)):(a.removeClass("qq-editing"),s.css({display:""}),o.addClass(r)),qq(i).addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){if(this._isEditFilenameEnabled()){var i,a,s=this.getItemByFileId(e),o=this._classes.editable;s&&n!==qq.status.SUBMITTED&&(i=qq(this._find(s,"file")),a=qq(this._find(s,"editNameIcon")),i.removeClass(o),a.removeClass(o))}},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&0==e.clientX&&0==e.clientY||qq.firefox()&&!e.relatedTarget},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments);var t=this.getItemByFileId(e);qq(this._find(t,"spinner")).hide()},_find:function(e,t){var n=qq(e).getByClass(this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_onSubmit:function(e,t){this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onSubmitted:function(e){if(this._isEditFilenameEnabled()){var t=this.getItemByFileId(e),n=qq(this._find(t,"file")),i=qq(this._find(t,"editNameIcon")),a=this._classes.editable;n.addClass(a),i.addClass(a),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._find(t,"editFilenameInput"))}},_onProgress:function(e,t,n,i){this._parent.prototype._onProgress.apply(this,arguments);var a,s,o,r;a=this.getItemByFileId(e),s=this._find(a,"progressBar"),o=Math.round(100*(n/i)),n===i?(r=this._find(a,"cancel"),qq(r).hide(),qq(s).hide(),qq(this._find(a,"statusText")).setText(this._options.text.waitingForResponse),this._displayFileSize(e)):(this._displayFileSize(e,n,i),qq(s).css({display:"block"})),qq(s).css({width:o+"%"})},_onComplete:function(e,t,n){function i(t){var n=s.getItemByFileId(e);qq(s._find(n,"statusText")).clearText(),qq(n).removeClass(s._classes.retrying),qq(s._find(n,"progressBar")).hide(),(!s._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&qq(s._find(n,"cancel")).hide(),qq(s._find(n,"spinner")).hide(),t.success?(s._isDeletePossible()&&s._showDeleteLink(e),qq(n).addClass(s._classes.success),s._classes.successIcon&&(s._find(n,"finished").style.display="inline-block",qq(n).addClass(s._classes.successIcon))):(qq(n).addClass(s._classes.fail),s._classes.failIcon&&(s._find(n,"finished").style.display="inline-block",qq(n).addClass(s._classes.failIcon)),s._options.retry.showButton&&!s._preventRetries[e]&&qq(n).addClass(s._classes.retryable),s._controlFailureTextDisplay(n,t))}var a=this._parent.prototype._onComplete.apply(this,arguments),s=this;return qq.isPromise(a)?a.done(function(e){i(e)}):i(n),a},_onUpload:function(e){var t=this._parent.prototype._onUpload.apply(this,arguments);return this._showSpinner(e),t},_onCancel:function(e){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(e)},_onBeforeAutoRetry:function(e){var t,n,i,a,s,o;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),t=this.getItemByFileId(e),n=this._find(t,"progressBar"),this._showCancelLink(t),n.style.width=0,qq(n).hide(),this._options.retry.showAutoRetryNote&&(i=this._find(t,"statusText"),a=this._autoRetries[e]+1,s=this._options.retry.maxAutoAttempts,o=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,a),o=o.replace(/\{maxAuto\}/g,s),qq(i).setText(o),1===a&&qq(t).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){var t=this.getItemByFileId(e);return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._find(t,"progressBar").style.width=0,qq(t).removeClass(this._classes.fail),qq(this._find(t,"statusText")).clearText(),this._showSpinner(e),this._showCancelLink(t),!0):(qq(t).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments);var i=this.getItemByFileId(e),a=this._find(i,"spinner"),s=this._find(i,"statusText");qq(a).hide(),n?(qq(s).setText(this._options.deleteFile.deletingFailedText),this._showDeleteLink(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton"),i=this._find(t,"statusText");qq(n).hide(),this._showSpinner(e),qq(i).setText(this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e){var t,n=this._handler.getName(e),i=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,n),a=(this.getUuid(e),arguments),s=this;t=this._options.showConfirm(i),qq.isPromise(t)?t.then(function(){s._sendDeleteRequest.apply(s,a)}):t!==!1&&s._sendDeleteRequest.apply(s,a)},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){var i=this._find(n,"cancel");qq(i).remove()}n.qqFileId=e;var a=this._find(n,"file");qq(a).setText(this._options.formatFileName(t)),qq(this._find(n,"size")).hide(),this._options.multiple||(this._handler.cancelAll(),this._clearList()),this._options.display.prependFiles?this._prependItem(n):this._listElement.appendChild(n),this._filesInBatchAddedToUi+=1,this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(e)},_prependItem:function(e){var t=this._listElement,n=t.firstChild;this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(n=qq(t).children()[this._filesInBatchAddedToUi-1].nextSibling),t.insertBefore(e,n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_displayFileSize:function(e,t,n){var i=this.getItemByFileId(e),a=this.getSize(e),s=this._formatSize(a),o=this._find(i,"size");void 0!==t&&void 0!==n&&(s=this._formatProgress(t,n)),qq(o).css({display:"inline"}),qq(o).setText(s)},_formatProgress:function(e,t){function n(e,t){i=i.replace(e,t)}var i=this._options.text.formatProgress;return n("{percent}",Math.round(100*(e/t))),n("{total_size}",this._formatSize(t)),i},_controlFailureTextDisplay:function(e,t){var n,i,a,s,o;n=this._options.failedUploadTextDisplay.mode,i=this._options.failedUploadTextDisplay.maxChars,a=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?(s=t[a],s?s.length>i&&(o=s.substring(0,i)+"..."):(s=this._options.text.failUpload,this.log("'"+a+"' is not a valid property on the server response.","warn")),qq(this._find(e,"statusText")).setText(o||s),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,s)):"default"===n?qq(this._find(e,"statusText")).setText(this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){e.title=t},_showSpinner:function(e){var t=this.getItemByFileId(e),n=this._find(t,"spinner");n.style.display="inline-block"},_showCancelLink:function(e){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){var t=this._find(e,"cancel");qq(t).css({display:"inline"})}},_showDeleteLink:function(e){var t=this.getItemByFileId(e),n=this._find(t,"deleteButton");qq(n).css({display:"inline"})},_itemError:function(){var e=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(e)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)}},qq.FineUploader=function(e,t){this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragAndDrop:{extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1},text:{uploadButton:"Upload a file",cancelButton:"Cancel",retryButton:"Retry",deleteButton:"Delete",failUpload:"Upload failed",dragZone:"Drop files here to upload",dropProcessing:"Processing dropped files...",formatProgress:"{percent}% of {total_size}",waitingForResponse:"Processing..."},template:'<div class="qq-uploader">'+(this._options.dragAndDrop&&this._options.dragAndDrop.disableDefaultDropzone?"":'<div class="qq-upload-drop-area"><span>{dragZoneText}</span></div>')+(this._options.button?"":'<div class="qq-upload-button"><div>{uploadButtonText}</div></div>')+'<span class="qq-drop-processing"><span>{dropProcessingText}</span><span class="qq-drop-processing-spinner"></span></span>'+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span>'+(this._options.editFilename&&this._options.editFilename.enabled?'<span class="qq-edit-filename-icon"></span>':"")+'<span class="qq-upload-file"></span>'+(this._options.editFilename&&this._options.editFilename.enabled?'<input class="qq-edit-filename" tabindex="0" type="text">':"")+'<span class="qq-upload-size"></span>'+'<a class="qq-upload-cancel" href="#">{cancelButtonText}</a>'+'<a class="qq-upload-retry" href="#">{retryButtonText}</a>'+'<a class="qq-upload-delete" href="#">{deleteButtonText}</a>'+'<span class="qq-upload-status-text">{statusText}</span>'+"</li>",classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",size:"qq-upload-size",cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry",statusText:"qq-upload-status-text",editFilenameInput:"qq-edit-filename",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null,editNameIcon:"qq-edit-filename-icon",editable:"qq-editable",dropProcessing:"qq-drop-processing",dropProcessingSpinner:"qq-drop-processing-spinner"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:!0,autoRetryNote:"Retrying {retryNum}/{maxAuto}...",showButton:!1},deleteFile:{forceConfirm:!1,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Please name this image"},editFilename:{enabled:!1},showMessage:function(e){setTimeout(function(){window.alert(e)},0)},showConfirm:function(e){return window.confirm(e)},showPrompt:function(e,t){return window.prompt(e,t)}},!0),qq.extend(this._options,e,!0),!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._options.element.innerHTML="<div>"+this._options.messages.unsupportedBrowser+"</div>":(this._wrapCallbacks(),this._options.template=this._options.template.replace(/\{dragZoneText\}/g,this._options.text.dragZone),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.text.uploadButton),this._options.template=this._options.template.replace(/\{dropProcessingText\}/g,this._options.text.dropProcessing),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.text.cancelButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{retryButtonText\}/g,this._options.text.retryButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{deleteButtonText\}/g,this._options.text.deleteButton),this._options.fileTemplate=this._options.fileTemplate.replace(/\{statusText\}/g,""),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._options.button||(this._defaultButtonId=this._createUploadButton({element:this._find(this._element,"button")}).getButtonId()),this._setupClickAndEditEventHandlers(),this._dnd=this._setupDragAndDrop(),this._options.paste.targetElement&&this._options.paste.promptForName&&this._setupPastePrompt(),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)
},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.AjaxRequestor=function(e){function t(){return k.method.toUpperCase()}function n(){return qq.indexOf(["GET","POST","HEAD"],t())>=0}function i(){var e=!1;return qq.each(e,function(t,n){return qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0?(e=!0,!1):void 0}),e}function a(e){return k.cors.expected&&void 0===e.withCredentials}function s(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&(e=qq.createXhrInstance(),void 0===e.withCredentials&&(e=new XDomainRequest)),e}function o(e,t){var n=w[e].xhr;return n||t||(n=k.cors.expected?s():qq.createXhrInstance(),w[e].xhr=n),n}function r(e){var t,n=qq.indexOf(y,e),i=k.maxConnections;delete w[e],y.splice(n,1),y.length>=i&&i>n&&(t=y[i-1],d(t))}function l(e,n){var i=o(e),s=t(),l=n===!0;r(e),l?v(s+" request for "+e+" has failed","error"):a(i)||g(i.status)||(l=!0,v(s+" request for "+e+" has failed - response code "+i.status,"error")),k.onComplete(e,i,l)}function u(e){var t,n=w[e].onDemandParams,i=k.mandatedParams;return k.paramsStore.getParams&&(t=k.paramsStore.getParams(e)),n&&qq.each(n,function(e,n){t=t||{},t[e]=n}),i&&qq.each(i,function(e,n){t=t||{},t[e]=n}),t}function d(e){var n,i=o(e),s=t(),r=u(e),l=w[e].body;k.onSend(e),n=c(e,r),a(i)?(i.onload=h(e),i.onerror=m(e),i.onprogress=function(){},i.ontimeout=function(){}):i.onreadystatechange=p(e),i.open(s,n,!0),k.cors.expected&&k.cors.sendCredentials&&!a(i)&&(i.withCredentials=!0),f(e),v("Sending "+s+" request for "+e),l?i.send(l):b||!r?i.send():r&&k.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?i.send(qq.obj2url(r,"")):r&&k.contentType.toLowerCase().indexOf("application/json")>=0?i.send(JSON.stringify(r)):i.send(r)}function c(e,t){var n=k.endpointStore.getEndpoint(e),i=w[e].addToPath;return void 0!=i&&(n+="/"+i),b&&t?qq.obj2url(t,n):n}function p(e){return function(){4===o(e).readyState&&l(e)}}function h(e){return function(){l(e)}}function m(e){return function(){l(e,!0)}}function f(e){var s=o(e),r=k.customHeaders,l=w[e].additionalHeaders||{},u=t(),d={};a(s)&&(k.cors.expected&&n()&&!i(r)||(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Cache-Control","no-cache"))),!k.contentType||"POST"!==u&&"PUT"!==u||a(s)||s.setRequestHeader("Content-Type",k.contentType),a(s)||(qq.extend(d,r),qq.extend(d,l),qq.each(d,function(e,t){s.setRequestHeader(e,t)}))}function _(e){var n=o(e,!0),i=t();return n?(a(n)?(n.onerror=null,n.onload=null):n.onreadystatechange=null,n.abort(),r(e),v("Cancelled "+i+" for "+e),k.onCancel(e),!0):!1}function g(e){return qq.indexOf(k.successfulResponseCodes[t()],e)>=0}var v,b,y=[],w=[],k={validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};if(qq.extend(k,e),v=k.log,qq.indexOf(k.validMethods,t())<0)throw new Error("'"+t()+"' is not a supported method for this type of request!");return b="GET"===t()||"DELETE"===t(),{send:function(e,t,n,i,a){w[e]={addToPath:t,onDemandParams:n,additionalHeaders:i,body:a};var s=y.push(e);s<=k.maxConnections&&d(e)},cancel:function(e){return _(e)},getMethod:function(){return t()}}},qq.UploadHandler=function(e,t){function n(e){var t,n=qq.indexOf(u,e),i=s.maxConnections;n>=0&&(u.splice(n,1),u.length>=i&&i>n&&(t=u[i-1],r.upload(t)))}function i(e){o("Cancelling "+e),s.paramsStore.remove(e),n(e)}function a(){var e=t?qq[t]:qq,i=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";r=new e["UploadHandler"+i](s,n,s.onUuidChanged,o)}var s,o,r,l,u=[];return s={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},filenameParam:"qqfilename",cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParam:"qquuid",totalFileSizeParam:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){}},qq.extend(s,e),o=s.log,l={add:function(e){return r.add(e)},upload:function(e){var t=u.push(e);return t<=s.maxConnections?(r.upload(e),!0):!1},retry:function(e){var t=qq.indexOf(u,e);return t>=0?r.upload(e,!0):this.upload(e)},cancel:function(e){var t=r.cancel(e);qq.isPromise(t)?t.then(function(){i(e)}):t!==!1&&i(e)},cancelAll:function(){var e=this,t=[];qq.extend(t,u),qq.each(t,function(t,n){e.cancel(n)}),u=[]},getName:function(e){return r.getName(e)},setName:function(e,t){r.setName(e,t)},getSize:function(e){return r.getSize?r.getSize(e):void 0},getFile:function(e){return r.getFile?r.getFile(e):void 0},getInput:function(e){return r.getInput?r.getInput(e):void 0},reset:function(){o("Resetting upload handler"),l.cancelAll(),u=[],r.reset()},expunge:function(e){return r.expunge(e)},getUuid:function(e){return r.getUuid(e)},setUuid:function(e,t){return r.setUuid(e,t)},isValid:function(e){return r.isValid(e)},getResumableFilesData:function(){return r.getResumableFilesData?r.getResumableFilesData():[]},getThirdPartyFileId:function(e){return r.getThirdPartyFileId&&l.isValid(e)?r.getThirdPartyFileId(e):void 0}},a(),l},qq.UploadHandlerXhrApi=function(e,t,n,i,a,s,o){function r(e,t,n){return e.slice?e.slice(t,n):e.mozSlice?e.mozSlice(t,n):e.webkitSlice?e.webkitSlice(t,n):void 0}var l;return qq.extend(e,{createXhr:function(e){var n=qq.createXhrInstance();return t[e].xhr=n,n},getTotalChunks:function(e){if(n){var t=l.getSize(e),i=n.partSize;return Math.ceil(t/i)}},getChunkData:function(t,i){var a=n.partSize,s=l.getSize(t),o=l.getFile(t),u=a*i,d=u+a>=s?s:u+a,c=e.getTotalChunks(t);return{part:i,start:u,end:d,count:c,blob:r(o,u,d),size:d-u}},getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}}}),l={add:function(e){var n,i=qq.getUniqueId();if(qq.isFile(e))n=t.push({file:e})-1;else{if(!qq.isBlob(e.blob))throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n=t.push({blobData:e})-1}return t[n].uuid=i,n},getName:function(e){if(l.isValid(e)){var n=t[e].file,i=t[e].blobData,a=t[e].newName;return void 0!==a?a:n?null!==n.fileName&&void 0!==n.fileName?n.fileName:n.name:i.name}o(e+" is not a valid item ID.","error")},setName:function(e,n){t[e].newName=n},getSize:function(e){var n=t[e].file||t[e].blobData.blob;return qq.isFileOrInput(n)?null!=n.fileSize?n.fileSize:n.size:n.size},getFile:function(e){return t[e]?t[e].file||t[e].blobData.blob:void 0},isValid:function(e){return void 0!==t[e]},reset:function(){t.length=0},expunge:function(e){var n=t[e].xhr;n&&(n.onreadystatechange=null,n.abort()),delete t[e]},getUuid:function(e){return t[e].uuid},upload:function(e,t){return i(e,t)},cancel:function(e){var t=a(e,l.getName(e));return qq.isPromise(t)?t.then(function(){l.expunge(e)}):t!==!1?(l.expunge(e),!0):!1},setUuid:function(e,n){o("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,s(e,n)}}},qq.UploadHandlerFormApi=function(e,t,n,i,a,s,o){function r(i){delete f[i],delete t[i],n&&(clearTimeout(_[i]),delete _[i],h.stopReceivingMessages(i));var a=document.getElementById(e.getIframeName(i));a&&(a.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(a).remove())}function l(n,i){var a=n.id,s=d(a),r=t[s].uuid;m[r]=i,f[s]=qq(n).attach("load",function(){t[s].input&&(o("Received iframe load event for CORS upload request (iframe name "+a+")"),_[a]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+a;o(e,"error"),i({error:e})},1e3))}),h.receiveMessage(a,function(t){o("Received the following window message: '"+t+"'");var n,i=d(a),s=e.parseJsonResponse(i,t),r=s.uuid;r&&m[r]?(o("Handling response for iframe name "+a),clearTimeout(_[a]),delete _[a],e.detachLoadEvent(a),n=m[r],delete m[r],h.stopReceivingMessages(a),n(s)):r||o("'"+t+"' does not contain a UUID - ignoring.")})}function u(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function d(e){return e.split("_")[0]}var c,p=qq.getUniqueId(),h=new qq.WindowReceiveMessage({log:o}),m={},f={},_={};return qq.extend(e,{getIframeName:function(e){return e+"_"+p},createIframe:function(t){var n=e.getIframeName(t);return u(n)},parseJsonResponse:function(e,t){var n;try{n=qq.parseJson(t),void 0!==n.newUuid&&c.setUuid(e,n.newUuid)}catch(i){o("Error when attempting to parse iframe upload response ("+i.message+")","error"),n={}}return n},initFormForUpload:function(e){var t=e.method,n=e.endpoint,i=e.params,a=e.paramsInBody,s=e.targetName,o=qq.toElement('<form method="'+t+'" enctype="multipart/form-data"></form>'),r=n;return a?qq.obj2Inputs(i,o):r=qq.obj2url(i,n),o.setAttribute("action",r),o.setAttribute("target",s),o.style.display="none",document.body.appendChild(o),o},attachLoadEvent:function(e,t){var i;n?l(e,t):f[e.id]=qq(e).attach("load",function(){if(o("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(n){o("Error when attempting to access iframe during handling of upload response ("+n.message+")","error"),i={success:!1}}t(i)}})},detachLoadEvent:function(e){void 0!==f[e]&&(f[e](),delete f[e])}}),c={add:function(e){var n=t.push({input:e})-1;return e.setAttribute("name",i),t[n].uuid=qq.getUniqueId(),e.parentNode&&qq(e).remove(),n},getName:function(e){return void 0!==t[e].newName?t[e].newName:c.isValid(e)?t[e].input.value.replace(/.*(\/|\\)/,""):(o(e+" is not a valid item ID.","error"),void 0)},getInput:function(e){return t[e].input},setName:function(e,n){t[e].newName=n},isValid:function(e){return void 0!==t[e]&&void 0!==t[e].input},reset:function(){t.length=0},expunge:function(e){return r(e)},getUuid:function(e){return t[e].uuid},cancel:function(e){var t=a(e,c.getName(e));return qq.isPromise(t)?t.then(function(){c.expunge(e)}):t!==!1?(c.expunge(e),!0):!1},upload:function(){},setUuid:function(e,n){o("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,s(e,n)}}},qq.s3=qq.s3||{},qq.s3.util=qq.s3.util||function(){return{AWS_PARAM_PREFIX:"x-amz-meta-",getBucket:function(e){var t,n=[/^(?:https?:\/\/)?([a-z0-9.\-]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-]+)/i];return qq.each(n,function(n,i){var a=i.exec(e);return a?(t=a[1],!1):void 0}),t},getPolicy:function(e){var t={},n=[],i=qq.s3.util.getBucket(e.endpoint),a=e.key,s=e.acl,o=e.type,r=new Date,l=e.expectedStatus,u=e.params,d=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),c=e.minFileSize,p=e.maxFileSize;return t.expiration=qq.s3.util.getPolicyExpirationDate(r),n.push({acl:s}),n.push({bucket:i}),o&&n.push({"Content-Type":o}),l&&n.push({success_action_status:l.toString()}),d&&n.push({success_action_redirect:d}),n.push({key:a}),qq.each(u,function(e,t){var i=qq.s3.util.AWS_PARAM_PREFIX+e,a={};a[i]=encodeURIComponent(t),n.push(a)}),t.conditions=n,qq.s3.util.enforceSizeLimits(t,c,p),t},generateAwsParams:function(e,t){var n={},i=e.params,a=new qq.Promise,s=qq.s3.util.getPolicy(e),o=e.type,r=e.key,l=e.accessKey,u=e.acl,d=e.expectedStatus,c=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),p=e.log;return n.key=r,n.AWSAccessKeyId=l,o&&(n["Content-Type"]=o),d&&(n.success_action_status=d),c&&(n.success_action_redirect=c),n.acl=u,qq.each(i,function(e,t){var i=qq.s3.util.AWS_PARAM_PREFIX+e;n[i]=encodeURIComponent(t)}),t(s).then(function(e){n.policy=e.policy,n.signature=e.signature,a.success(n)},function(e){e=e||"Can't continue further with request to S3 as we did not receive a valid signature and policy from the server.",p("Policy signing failed.  "+e,"error"),a.failure(e)}),a},enforceSizeLimits:function(e,t,n){var i=0>t?0:t,a=0>=n?9007199254740992:n;(t>0||n>0)&&e.conditions.push(["content-length-range",i.toString(),a.toString()])},getPolicyExpirationDate:function(e){function t(e){var t=String(e);return 1===t.length&&(t="0"+t),t}return e.setMinutes(e.getMinutes()+5),Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},parseIframeResponse:function(e){var t=e.contentDocument||e.contentWindow.document,n=t.location.search,i=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(n);return i?{bucket:i[1],key:i[2],etag:i[3]}:void 0},getSuccessRedirectAbsoluteUrl:function(e){if(e){var t,n=document.createElement("div");return qq.ie7()?(n.innerHTML='<a href="'+e+'"></a>',t=n.firstChild,t.href):(t=document.createElement("a"),t.href=e,t.href=t.href,t.href)}},encodeQueryStringParam:function(e){var t=encodeURIComponent(e);return t=t.replace(/[!'()]/g,escape),t=t.replace(/\*/g,"%2A"),t.replace(/%20/g,"+")}}}(),qq.s3.FineUploaderBasic=function(e){var t={request:{accessKey:null,uuidName:"uuid"},objectProperties:{acl:"private",key:"uuid"},signature:{endpoint:null,params:{},customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},resume:{recordsExpireIn:7},cors:{allowXdr:!0}};qq.extend(t,e,!0),this._uploadSuccessParamsStore=this._createParamsStore("uploadSuccess"),this._signatureParamsStore=this._createParamsStore("signature"),qq.FineUploaderBasic.call(this,t),this._failedSuccessRequestCallbacks=[]},qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi),qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi),qq.extend(qq.s3.FineUploaderBasic.prototype,{getKey:function(e){return this._handler.getThirdPartyFileId(e)},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this),this._failedSuccessRequestCallbacks=[]},setSignatureParams:function(e,t){this._setCustomS3Params("signature",e,t)},setUploadSuccessParams:function(e,t){this._setCustomS3Params("uploadSuccess",e,t)},_setCustomS3Params:function(e,t,n){null==n?this._options[e].params=t:this["_"+e+"ParamsStore"].setParams(t,n)},_createUploadHandler:function(){var e={objectProperties:this._options.objectProperties,signature:{endpoint:this._options.signature.endpoint,customHeaders:this._options.signature.customHeaders,paramsStore:this._signatureParamsStore},iframeSupport:this._options.iframeSupport,getKeyName:qq.bind(this._determineKeyName,this),validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};return qq.override(this._endpointStore,function(e){return{getEndpoint:function(t){var n=e.getEndpoint(t);return n.indexOf("http")<0?"http://"+n:n}}}),qq.FineUploaderBasic.prototype._createUploadHandler.call(this,e,"s3")},_determineKeyName:function(e,t){var n=new qq.Promise,i=this._options.objectProperties.key,a=qq.getExtension(t),s=n.failure,o=function(e,t){var i=e;void 0!==t&&(i+="."+t),n.success(i)};switch(i){case"uuid":o(this.getUuid(e),a);break;case"filename":o(t);break;default:qq.isFunction(i)?this._handleKeynameFunction(i,e,o,s):(this.log(i+" is not a valid value for the s3.keyname option!","error"),s())}return n},_handleKeynameFunction:function(e,t,n,i){var a=function(e){n(e)},s=function(){this.log("Failed to retrieve key name for "+t,"error"),i()},o=e(t);qq.isPromise(o)?o.then(a,s):null==o?s():a(o)},_onComplete:function(e,t,n,i){var a,s,o=n.success?!0:!1,r=this,l=arguments,u=this.getKey(e),d=this._options.uploadSuccess.endpoint,c=this._options.uploadSuccess.customHeaders,p=this._options.cors,h=this.getUuid(e),m=qq.s3.util.getBucket(this._endpointStore.getEndpoint(e)),f=new qq.Promise,_=this._uploadSuccessParamsStore.getParams(e),g=function(t){delete r._failedSuccessRequestCallbacks[e],qq.extend(n,t),qq.FineUploaderBasic.prototype._onComplete.apply(r,l),f.success(t)},v=function(s){var o=a;qq.extend(n,s),n&&n.reset&&(o=null),o?r._failedSuccessRequestCallbacks[e]=o:delete r._failedSuccessRequestCallbacks[e],r._onAutoRetry(e,t,n,i,o)||(qq.FineUploaderBasic.prototype._onComplete.apply(r,l),f.failure(s))};return o&&d?(s=new qq.s3.UploadSuccessAjaxRequester({endpoint:d,customHeaders:c,cors:p,log:qq.bind(this.log,this)}),qq.extend(_,{key:u,uuid:h,name:t,bucket:m},!0),a=qq.bind(function(){s.sendSuccessRequest(e,_).then(g,v)},r),a(),f):qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(e){var t=this._failedSuccessRequestCallbacks[e];return qq.FineUploaderBasic.prototype._manualRetry.call(this,e,t)},_onSubmitDelete:function(e,t){var n={key:this.getKey(e),bucket:qq.s3.util.getBucket(this._endpointStore.getEndpoint(e))};qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t,n)}}),qq.s3.FineUploader=function(e){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,e,!0),qq.FineUploader.call(this,t,"s3"),qq.supportedFeatures.ajaxUploading||void 0!==t.iframeSupport.localBlankPagePath||(this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property of the <code>iframeSupport</code> option since this browser does not support the File API!</div>")},qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype),qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi),qq.extend(qq.s3.FineUploader.prototype,{_onComplete:function(e){var t=qq.FineUploader.prototype._onComplete.apply(this,arguments),n=this.getItemByFileId(e),i=this._find(n,"progressBar");return qq.isPromise(t)&&(qq(i).hide(),qq(this._find(n,"statusText")).setText(this._options.text.waitingForResponse)),t}}),qq.s3.SignatureAjaxRequestor=function(e){function t(e,t,n){var s,o,r=t.responseText,l=i[e],u=l.expectingPolicy,d=l.promise;if(delete i[e],r)try{o=qq.parseJson(r)}catch(c){a.log("Error attempting to parse signature response: "+c,"error")}o&&o.invalid?(n=!0,s="Invalid policy document or request headers!"):o?u&&!o.policy?(n=!0,s="Response does not include the base64 encoded policy!"):o.signature||(n=!0,s="Response does not include the signature!"):(n=!0,s="Received an empty or invalid response from the server!"),n?(s&&a.log(s,"error"),d.failure(s)):d.success(o)}var n,i={},a={expectingPolicy:!1,method:"POST",signatureSpec:{endpoint:null,customHeaders:{},paramsStore:{}},maxConnections:3,cors:{expected:!1,sendCredentials:!1},log:function(){}};return qq.extend(a,e,!0),n=new qq.AjaxRequestor({method:a.method,contentType:"application/json; charset=utf-8",endpointStore:{getEndpoint:function(){return a.signatureSpec.endpoint}},paramsStore:a.signatureSpec.paramsStore,maxConnections:a.maxConnections,customHeaders:a.signatureSpec.customHeaders,log:a.log,onComplete:t,cors:a.cors,successfulResponseCodes:{POST:[200]}}),{getSignature:function(e,t){var s=t,o=new qq.Promise;return a.log("Submitting S3 signature request for "+e),n.send(e,null,s),i[e]={promise:o,expectingPolicy:a.expectingPolicy},o}}},qq.s3.UploadSuccessAjaxRequester=function(e){function t(e,t,n){var s,o=i[e],r=t.responseText,l={success:!0},u={success:!1};delete i[e],a.log(qq.format("Received the following response body to an AWS upload success request for id {}: {}",e,r));try{s=qq.parseJson(r),n||s&&(s.error||s.success===!1)?(a.log("Upload success request was rejected by the server.","error"),o.failure(qq.extend(s,u))):(a.log("Upload success was acknowledged by the server."),o.success(qq.extend(s,l)))}catch(d){n?(a.log(qq.format("Your server indicated failure in its AWS upload success request response for id {}!",e),"error"),o.failure(u)):(a.log("Upload success was acknowledged by the server."),o.success(l))}}var n,i=[],a={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(){}};return qq.extend(a,e),n=new qq.AjaxRequestor({method:a.method,endpointStore:{getEndpoint:function(){return a.endpoint}},paramsStore:a.paramsStore,maxConnections:a.maxConnections,customHeaders:a.customHeaders,log:a.log,onComplete:t,cors:a.cors,successfulResponseCodes:{POST:[200]}}),{sendSuccessRequest:function(e,t){var s=new qq.Promise;return a.log("Submitting upload success request/notification for "+e),n.send(e,null,t),i[e]=s,s}}},qq.s3.InitiateMultipartAjaxRequester=function(e){function t(e){var t,i=qq.s3.util.getBucket(r.endpointStore.getEndpoint(e)),a={},o=new qq.Promise,l=r.getKey(e);return a["x-amz-date"]=(new Date).toUTCString(),a["Content-Type"]=r.getContentType(e),a["x-amz-acl"]=r.acl,a[qq.s3.util.AWS_PARAM_PREFIX+r.filenameParam]=encodeURIComponent(r.getName(e)),qq.each(r.paramsStore.getParams(e),function(e,t){a[qq.s3.util.AWS_PARAM_PREFIX+e]=encodeURIComponent(t)}),t={headers:n(a,i,l)},s.getSignature(e,t).then(function(e){a.Authorization="AWS "+r.accessKey+":"+e.signature,o.success(a)},o.failure),o}function n(e,t,n){var i=[],a="";return qq.each(e,function(e){"Content-Type"!==e&&i.push(e)}),i.sort(),qq.each(i,function(t,n){a+=n+":"+e[n]+"\n"}),"POST\n\n"+e["Content-Type"]+"\n\n"+a+"/"+t+"/"+n+"?uploads"}function i(e,t,n){var i,a,s,l,u,d=o[e],c=new DOMParser,p=c.parseFromString(t.responseText,"application/xml");delete o[e],n?(u=t.status,a=p.getElementsByTagName("Message"),a.length>0&&(l=a[0].textContent)):(i=p.getElementsByTagName("UploadId"),i.length>0?s=i[0].textContent:l="Upload ID missing from request"),void 0===s?(l?r.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",e,l),"error"):r.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",e,u),"error"),d.failure("Problem initiating upload request with Amazon.",t)):(r.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",e,s)),d.success(s,t))}var a,s,o={},r={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,accessKey:null,acl:"private",maxConnections:3,getContentType:function(){},getKey:function(){},getName:function(){},log:function(){}};return qq.extend(r,e),s=new qq.s3.SignatureAjaxRequestor({signatureSpec:r.signatureSpec,cors:r.cors,log:r.log}),a=new qq.AjaxRequestor({method:r.method,contentType:null,endpointStore:r.endpointStore,maxConnections:r.maxConnections,log:r.log,onComplete:i,successfulResponseCodes:{POST:[200]}}),{send:function(e){var n=new qq.Promise,i=r.getKey(e)+"?uploads";return t(e).then(function(t){r.log("Submitting S3 initiate multipart upload request for "+e),o[e]=n,a.send(e,i,null,t)},n.failure),n}}},qq.s3.CompleteMultipartAjaxRequester=function(e){function t(e,t){var i,a={},s=new qq.Promise;return a["x-amz-date"]=(new Date).toUTCString(),i={headers:n(e,t,a["x-amz-date"])},r.getSignature(e,i).then(function(e){a.Authorization="AWS "+u.accessKey+":"+e.signature,s.success(a)},s.failure),s}function n(e,t,n){var i=u.endpointStore.getEndpoint(e),s=qq.s3.util.getBucket(i),o=a(e,t);return"POST\n\napplication/xml; charset=UTF-8\n\nx-amz-date:"+n+"\n"+"/"+s+"/"+o}function i(e,t,n){var i=l[e],a=new DOMParser,s=u.endpointStore.getEndpoint(e),o=qq.s3.util.getBucket(s),r=(u.getKey(e),a.parseFromString(t.responseText,"application/xml")),d=r.getElementsByTagName("Bucket"),c=r.getElementsByTagName("Key");delete l[e],u.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText)),n?u.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",e,t.status),"error"):d.length&&c.length?d[0].textContent!==o&&(n=!0,u.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",e),"error")):(n=!0,u.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",e),"error")),n?i.failure("Problem asking Amazon to combine the parts!",t):i.success(t)}function a(e,t){return qq.format("{}?uploadId={}",u.getKey(e),t)}function s(e){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);return qq.each(e,function(e,n){var i=n.part,a=n.etag,s=t.createElement("Part"),o=t.createElement("PartNumber"),r=t.createTextNode(i),l=t.createTextNode(a),u=t.createElement("ETag");u.appendChild(l),o.appendChild(r),s.appendChild(o),s.appendChild(u),qq(t).children()[0].appendChild(s)}),(new XMLSerializer).serializeToString(t)}var o,r,l={},u={method:"POST",endpointStore:null,signatureSpec:null,accessKey:null,maxConnections:3,getKey:function(){},log:function(){}};return qq.extend(u,e),r=new qq.s3.SignatureAjaxRequestor({signatureSpec:u.signatureSpec,cors:u.cors,log:u.log}),o=new qq.AjaxRequestor({method:u.method,contentType:"application/xml; charset=UTF-8",endpointStore:u.endpointStore,maxConnections:u.maxConnections,log:u.log,onComplete:i,successfulResponseCodes:{POST:[200]}}),{send:function(e,n,i){var r=new qq.Promise;return t(e,n).then(function(t){var d=s(i);u.log("Submitting S3 complete multipart upload request for "+e),l[e]=r,o.send(e,a(e,n),null,t,d)},r.failure),r}}},qq.s3.AbortMultipartAjaxRequester=function(e){function t(e,t){var i,a={},s=new qq.Promise;return a["x-amz-date"]=(new Date).toUTCString(),i={headers:n(e,t,a["x-amz-date"])},o.getSignature(e,i).then(function(e){a.Authorization="AWS "+r.accessKey+":"+e.signature,s.success(a)},s.failure),s}function n(e,t,n){var i=r.endpointStore.getEndpoint(e),s=qq.s3.util.getBucket(i),o=a(e,t);return"DELETE\n\n\n\nx-amz-date:"+n+"\n"+"/"+s+"/"+o}function i(e,t,n){var i,a=new DOMParser,s=a.parseFromString(t.responseText,"application/xml"),o=s.getElementsByTagName("Error");r.log(qq.format("Abort response status {}, body = {}",t.status,t.responseText)),n?r.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",e,t.status),"error"):o.length?(n=!0,i=s.getElementsByTagName("Message")[0].textContent,r.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",e,i),"error")):r.log(qq.format("Abort MPU request succeeded for file ID {}.",e))}function a(e,t){return qq.format("{}?uploadId={}",r.getKey(e),t)}var s,o,r={method:"DELETE",endpointStore:null,signatureSpec:null,accessKey:null,maxConnections:3,getKey:function(){},log:function(){}};return qq.extend(r,e),o=new qq.s3.SignatureAjaxRequestor({signatureSpec:r.signatureSpec,cors:r.cors,log:r.log}),s=new qq.AjaxRequestor({validMethods:["DELETE"],method:r.method,contentType:null,endpointStore:r.endpointStore,maxConnections:r.maxConnections,log:r.log,onComplete:i,successfulResponseCodes:{DELETE:[204]}}),{send:function(e,n){var i=a(e,n);t(e,n).then(function(t){r.log("Submitting S3 Abort multipart upload request for "+e),s.send(e,i,null,t)})}}},qq.s3.UploadHandlerXhr=function(e,t,n,i){function a(e){return encodeURIComponent(s(e))}function s(e){return U[e].key}function o(e,t){U[e].key=t}function r(e){var t=j.getFile(e);U[e].type=t.type,Z.createXhr(e),x(e)?(void 0===U[e].loaded&&(U[e].loaded=0),S(e)):(U[e].loaded=0,m(e))}function l(e){var t=U[e].xhr;return function(){4===t.readyState&&(U[e].chunking.enabled?F(e):d(e))}}function u(e){return"EntityTooSmall"===e||"InvalidPart"===e||"InvalidPartOrder"===e||"NoSuchUpload"===e}function d(n,a,s){var o=s||U[n].xhr,r=j.getName(n),l=j.getSize(n),d=c(n,s),p=a||c(n),h=null!=a||d.success!==!0;h&&u(d.code)&&(i("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error"),b(n),delete U[n].loaded,delete U[n].chunking),h&&e.onAutoRetry(n,r,p,o)||(i(qq.format("Upload attempt for file ID {} to S3 is complete",n)),h||(p.success=!0),R(n,r,l,l),O(n,r,p,o),U[n]&&delete U[n].xhr,d.success&&b(n),delete U[n].loaded,delete U[n].chunking,t(n))}function c(e,t){var n,a=t||U[e].xhr,s={};try{i(qq.format("Received response status {} with body: {}",a.status,a.responseText)),a.status===L?s.success=!0:(n=p(a.responseText),n&&(s.error=n.message,s.code=n.code))}catch(o){i("Error when attempting to parse xhr response text ("+o.message+")","error")}return s}function p(e){var t,n,i=new DOMParser,a=i.parseFromString(e,"application/xml"),s=a.getElementsByTagName("Error"),o={};return s.length?(t=a.getElementsByTagName("Code"),n=a.getElementsByTagName("Message"),n.length&&(o.message=n[0].textContent),t.length&&(o.code=t[0].textContent),o):void 0}function h(e){var t=j.getName(e);j.isValid(e)&&(g(e),void 0!==s(e)?(z(e,t),r(e)):$(e,t).then(function(n){o(e,n),z(e,t),r(e)}))}function m(e){var t=U[e].xhr,n=j.getName(e),a=j.getFile(e);t.upload.onprogress=function(t){t.lengthComputable&&(U[e].loaded=t.loaded,R(e,n,t.loaded,t.total))},t.onreadystatechange=l(e),_(e,a).then(function(n){i("Sending upload request for "+e),t.send(n)})}function f(e){var t=B.getParams(e);return t[N]=j.getName(e),qq.s3.util.generateAwsParams({endpoint:H.getEndpoint(e),params:t,type:U[e].type,key:s(e),accessKey:V,acl:Y,expectedStatus:L,minFileSize:W.minSizeLimit,maxFileSize:W.maxSizeLimit,log:i},qq.bind(J.getSignature,this,e))}function _(e,t){var n=new FormData,i=H.getEndpoint(e),a=i,s=U[e].xhr,o=new qq.Promise;return f(e).then(function(e){s.open("POST",a,!0),qq.obj2FormData(e,n),n.append("file",t),o.success(n)},function(t){o.failure(t),d(e,{error:t})}),o}function g(e){var t,n;K&&void 0===s(e)&&(t=q(e),n=localStorage.getItem(t),n&&(i(qq.format("Identified file with ID {} and name of {} as resumable.",e,j.getName(e))),n=JSON.parse(n),U[e].uuid=n.uuid,o(e,n.key),U[e].loaded=n.loaded,U[e].chunking=n.chunking))}function v(e){var t,n;K&&(t=q(e),n={name:j.getName(e),size:j.getSize(e),uuid:j.getUuid(e),key:s(e),loaded:U[e].loaded,chunking:U[e].chunking,lastUpdated:Date.now()},localStorage.setItem(t,JSON.stringify(n)))}function b(e){var t;return K&&(t=q(e),t&&localStorage.getItem(t))?(localStorage.removeItem(t),!0):!1}function y(e){K&&qq.each(localStorage,function(t,n){if(0===t.indexOf("qqs3resume-")){var i=JSON.parse(n);e(t,i)}})}function w(){var e=[];return y(function(t,n){e.push({name:n.name,size:n.size,uuid:n.uuid,partIdx:n.chunking.lastSent+1,key:n.key})}),e}function k(){var t=e.resume.recordsExpireIn;y(function(e,n){var a=new Date(n.lastUpdated);a.setDate(a.getDate()+t),a.getTime()<=Date.now()&&(i("Removing expired resume record with key "+e),localStorage.removeItem(e))})}function q(t){var n=j.getName(t),i=j.getSize(t),a=e.chunking.partSize,s=e.endpointStore.getEndpoint(t),o=qq.s3.util.getBucket(s);return qq.format("qqs3resume-{}-{}-{}-{}",n,i,a,o)}function x(e){var t;return U[e].chunking||(U[e].chunking={},t=Z.getTotalChunks(e),t>1?(U[e].chunking.enabled=!0,U[e].chunking.parts=t):U[e].chunking.enabled=!1),U[e].chunking.enabled}function S(e){D(e).then(function(){E(e)},function(t,n){d(e,{error:t},n)})}function C(e){return U[e].chunking.lastSent>=0?U[e].chunking.lastSent+1:0}function T(e){var t=C(e)+1,n=U[e].chunking.uploadId;return qq.format("?partNumber={}&uploadId={}",t,n)}function M(t){var n=e.endpointStore.getEndpoint(t),i=T(t),s=a(t);return qq.format("{}/{}{}",n,s,i)}function E(e){var t=U[e].chunking.parts,n=C(e);t>n?I(e):P(e)}function P(e){var t=U[e].chunking.uploadId,n=U[e].chunking.etags;tt.send(e,t,n).then(function(t){d(e,null,t)},function(t,n){d(e,{error:t},n)})}function I(t){var n=C(t),a=j.getName(t),s=U[t].xhr,o=M(t),r=j.getSize(t),u=Z.getChunkData(t,n);A(t).then(function(n){e.onUploadChunk(t,a,Z.getChunkDataForCallback(u)),s.upload.onprogress=function(n){if(n.lengthComputable){var i=n.loaded+U[t].loaded;e.onProgress(t,a,i,r)}},s.onreadystatechange=l(t),s.open("PUT",o,!0),qq.each(n,function(e,t){s.setRequestHeader(e,t)}),i(qq.format("Sending part {} of {} for file ID {} - {} ({} bytes)",u.part+1,u.count,t,a,u.size)),s.send(u.blob)},function(){d(t,{error:"Problem signing the chunk!"},s)})}function A(t){var n,i={},s=e.endpointStore.getEndpoint(t),o=qq.s3.util.getBucket(s),r=a(t),l=(new Date).toUTCString(),u=T(t),d=new qq.Promise;
return i["x-amz-date"]=l,n={headers:"PUT\n\n\n\nx-amz-date:"+l+"\n"+"/"+o+"/"+r+u},Q.getSignature(t,n).then(function(t){i.Authorization="AWS "+e.accessKey+":"+t.signature,d.success(i)},d.failure),d}function D(e){return U[e].chunking.uploadId?(new qq.Promise).success(U[e].chunking.uploadId):et.send(e).then(function(t){U[e].chunking.uploadId=t})}function F(e){var t,n=C(e),a=U[e].xhr,s=c(e),o=Z.getChunkData(e,n);s.success?(U[e].chunking.lastSent=n,t=a.getResponseHeader("ETag"),U[e].chunking.etags||(U[e].chunking.etags=[]),U[e].chunking.etags.push({part:n+1,etag:t}),U[e].loaded+=o.size,v(e),E(e)):(s.error&&i(s.error,"error"),d(e))}var j,U=[],L=200,R=e.onProgress,O=e.onComplete,z=e.onUpload,$=e.getKeyName,N=e.filenameParam,B=e.paramsStore,H=e.endpointStore,V=e.accessKey,Y=e.objectProperties.acl,W=e.validation,G=e.signature,X=e.chunking.enabled&&qq.supportedFeatures.chunking,K=e.resume.enabled&&X&&qq.supportedFeatures.resume&&void 0!==window.localStorage,Z={},J=new qq.s3.SignatureAjaxRequestor({expectingPolicy:!0,signatureSpec:G,cors:e.cors,log:i}),Q=new qq.s3.SignatureAjaxRequestor({signatureSpec:G,cors:e.cors,log:i}),et=new qq.s3.InitiateMultipartAjaxRequester({filenameParam:N,endpointStore:H,paramsStore:B,signatureSpec:G,accessKey:e.accessKey,acl:Y,cors:e.cors,log:i,getContentType:function(e){return j.getFile(e).type},getKey:function(e){return a(e)},getName:function(e){return j.getName(e)}}),tt=new qq.s3.CompleteMultipartAjaxRequester({endpointStore:H,signatureSpec:G,accessKey:e.accessKey,cors:e.cors,log:i,getKey:function(e){return a(e)}}),nt=new qq.s3.AbortMultipartAjaxRequester({endpointStore:H,signatureSpec:G,accessKey:e.accessKey,cors:e.cors,log:i,getKey:function(e){return a(e)}});return j=new qq.UploadHandlerXhrApi(Z,U,X?e.chunking:null,h,e.onCancel,n,i),k(),qq.override(j,function(e){return{add:function(t){var n=e.add(t);return K&&g(n),n},getResumableFilesData:function(){return w()},expunge:function(t){var n=U[t].chunking&&U[t].chunking.uploadId,i=b(t);void 0!==n&&i&&nt.send(t,n),e.expunge(t)},getThirdPartyFileId:function(e){return s(e)}}})},qq.s3.UploadHandlerForm=function(e,t,n,i){function a(t,n){var i=e.endpointStore.getEndpoint(t),a=qq.s3.util.getBucket(i);try{var s=n.contentDocument||n.contentWindow.document;s.body.innerHTML;var o=qq.s3.util.parseIframeResponse(n);if(o.bucket===a&&o.key===qq.s3.util.encodeQueryStringParam(d[t].key))return!0;c("Response from AWS included an unexpected bucket or key name.","error")}catch(r){c("Error when attempting to parse form upload response ("+r.message+")","error")}return!1}function s(e){var t=_.getParams(e);return t[f]=u.getName(e),qq.s3.util.generateAwsParams({endpoint:g.getEndpoint(e),params:t,key:d[e].key,accessKey:v,acl:b,minFileSize:y.minSizeLimit,maxFileSize:y.maxSizeLimit,successRedirectUrl:k,log:c},qq.bind(q.getSignature,this,e))}function o(t,n){var i=new qq.Promise,a=e.demoMode?"GET":"POST",o=e.endpointStore.getEndpoint(t),r=u.getName(t);return s(t).then(function(e){var t=x.initFormForUpload({method:a,endpoint:o,params:e,paramsInBody:!0,targetName:n.name});i.success(t)},function(e){i.failure(e),l(t,n,r,{error:e})}),i}function r(e){var t=u.getName(e),n=x.createIframe(e),i=d[e].input;o(e,n).then(function(s){h(e,t),s.appendChild(i),x.attachLoadEvent(n,function(i){c("iframe loaded"),i?i.success===!1&&c("Amazon likely rejected the upload request","error"):(i={},i.success=a(e,n),i.success===!1&&c("A success response was received by Amazon, but it was invalid in some way.","error")),l(e,n,t,i)}),c("Sending upload request for "+e),s.submit(),qq(s).remove()})}function l(n,i,a,s){x.detachLoadEvent(n),qq(i).remove(),(s.success||!e.onAutoRetry(n,a,s))&&(p(n,a,s),t(n))}var u,d=[],t=t,c=i,p=e.onComplete,h=e.onUpload,m=e.getKeyName,f=e.filenameParam,_=e.paramsStore,g=e.endpointStore,v=e.accessKey,b=e.objectProperties.acl,y=e.validation,w=e.signature,k=e.iframeSupport.localBlankPagePath,q=new qq.s3.SignatureAjaxRequestor({signatureSpec:w,cors:e.cors,log:c}),x={};if(void 0===k)throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!");return u=new qq.UploadHandlerFormApi(x,d,!1,"file",e.onCancel,n,c),qq.extend(u,{upload:function(e){var t=d[e].input,n=u.getName(e);if(!t)throw new Error("file with passed id was not added, or already uploaded or cancelled");u.isValid(e)&&(d[e].key?r(e):m(e,n).then(function(t){d[e].key=t,r(e)}))},getThirdPartyFileId:function(e){return d[e].key}}),u},function(e){e.fn.fineUploaderS3=function(t){return"object"==typeof t&&(t.endpointType="s3"),e.fn.fineUploader.apply(this,arguments)}}(jQuery),qq.PasteSupport=function(e){function t(e){return e.type&&0===e.type.indexOf("image/")}function n(){qq(a.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(t(n)){var i=n.getAsFile();a.callbacks.pasteReceived(i)}})})}function i(){s&&s()}var a,s;return a={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}},qq.extend(a,e),n(),{reset:function(){i()}}},qq.DragAndDrop=function(e){function t(e,t){r.callbacks.dropLog("Grabbed "+e.length+" dropped files."),t.dropDisabled(!1),r.callbacks.processingDroppedFilesComplete(e)}function n(e){var t,i=new qq.Promise;return e.isFile?e.file(function(e){u.push(e),i.success()},function(t){r.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),i.failure()}):e.isDirectory&&(t=e.createReader(),t.readEntries(function(e){var t=e.length;qq.each(e,function(e,a){n(a).done(function(){t-=1,0===t&&i.success()})}),e.length||i.success()},function(t){r.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),i.failure()})),i}function i(e,t){var i=[],a=new qq.Promise;return r.callbacks.processingDroppedFiles(),t.dropDisabled(!0),e.files.length>1&&!r.allowMultipleItems?(r.callbacks.processingDroppedFilesComplete([]),r.callbacks.dropError("tooManyFilesError",""),t.dropDisabled(!1),a.failure()):(u=[],qq.isFolderDropSupported(e)?qq.each(e.items,function(e,t){var s=t.webkitGetAsEntry();s&&(s.isFile?u.push(t.getAsFile()):i.push(n(s).done(function(){i.pop(),0===i.length&&a.success()})))}):u=e.files,0===i.length&&a.success()),a}function a(e){var n=new qq.UploadDropZone({element:e,onEnter:function(t){qq(e).addClass(r.classes.dropActive),t.stopPropagation()},onLeaveNotDescendants:function(){qq(e).removeClass(r.classes.dropActive)},onDrop:function(a){r.hideDropZonesBeforeEnter&&qq(e).hide(),qq(e).removeClass(r.classes.dropActive),i(a.dataTransfer,n).done(function(){t(u,n)})}});return d.addDisposer(function(){n.dispose()}),r.hideDropZonesBeforeEnter&&qq(e).hide(),l.push(n),n}function s(e){var t;return qq.each(e.dataTransfer.types,function(e,n){return"Files"===n?(t=!0,!1):void 0}),t}function o(){var e=r.dropZoneElements;qq.each(e,function(t,n){var i=a(n);!e.length||qq.ie()&&!qq.ie10()||d.attach(document,"dragenter",function(t){!i.dropDisabled()&&s(t)&&qq.each(e,function(e,t){qq(t).css({display:"block"})})})}),d.attach(document,"dragleave",function(t){r.hideDropZonesBeforeEnter&&qq.FineUploader.prototype._leaving_document_out(t)&&qq.each(e,function(e,t){qq(t).hide()})}),d.attach(document,"drop",function(t){r.hideDropZonesBeforeEnter&&qq.each(e,function(e,t){qq(t).hide()}),t.preventDefault()})}var r,l=[],u=[],d=new qq.DisposeSupport;return r={dropZoneElements:[],hideDropZonesBeforeEnter:!1,allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(r,e,!0),o(),{setupExtraDropzone:function(e){r.dropZoneElements.push(e),a(e)},removeDropzone:function(e){var t,n=r.dropZoneElements;for(t in n)if(n[t]===e)return n.splice(t,1)},dispose:function(){d.dispose(),qq.each(l,function(e,t){t.dispose()})}}},qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){function t(){return qq.safari()||qq.firefox()&&qq.windows()}function n(){u||(t?d.attach(document,"dragover",function(e){e.preventDefault()}):d.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),u=!0)}function i(e){if(qq.ie()&&!qq.ie10())return!1;var t,n=e.dataTransfer,i=qq.safari();return t=qq.ie10()||qq.ie11()?!0:"none"!==n.effectAllowed,n&&t&&(n.files||!i&&n.types.contains&&n.types.contains("Files"))}function a(e){return void 0!==e&&(l=e),l}function s(){d.attach(r,"dragover",function(e){if(i(e)){var t=qq.ie()||qq.ie11()?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),d.attach(r,"dragenter",function(e){if(!a()){if(!i(e))return;o.onEnter(e)}}),d.attach(r,"dragleave",function(e){if(i(e)){o.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(t)||o.onLeaveNotDescendants(e)}}),d.attach(r,"drop",function(e){if(!a()){if(!i(e))return;e.preventDefault(),o.onDrop(e)}})}var o,r,l,u,d=new qq.DisposeSupport;return o={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(o,e),r=o.element,n(),s(),{dropDisabled:function(e){return a(e)},dispose:function(){d.dispose()}}},qq.DeleteFileAjaxRequestor=function(e){function t(){return"POST"===i.method.toUpperCase()?{_method:"DELETE"}:{}}var n,i={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};return qq.extend(i,e),n=new qq.AjaxRequestor({validMethods:["POST","DELETE"],method:i.method,endpointStore:i.endpointStore,paramsStore:i.paramsStore,mandatedParams:t(),maxConnections:i.maxConnections,customHeaders:i.customHeaders,demoMode:i.demoMode,log:i.log,onSend:i.onDelete,onComplete:i.onDeleteComplete,cors:i.cors}),{sendDelete:function(e,t,a){var s=a||{};i.log("Submitting delete file request for "+e),"DELETE"===n.getMethod()?n.send(e,t,s):(s[i.uuidParamName]=t,n.send(e,null,s))}}},qq.WindowReceiveMessage=function(e){var t={log:function(){}},n={};return qq.extend(t,e),{receiveMessage:function(e,t){var i=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",i):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}}},qq.UiEventHandler=function(e,t){function n(e){i.attach(e,a.eventType,function(e){e=e||window.event;var t=e.target||e.srcElement;a.onHandled(t,e)})}var i=new qq.DisposeSupport,a={eventType:"click",attachTo:null,onHandled:function(){}},s={addHandler:function(e){n(e)},dispose:function(){i.dispose()}};return qq.extend(t,{getItemFromEventTarget:function(e){for(var t=e.parentNode;void 0===t.qqFileId;)t=t.parentNode;return t},getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return i}}),qq.extend(a,e),a.attachTo&&n(a.attachTo),s},qq.DeleteRetryOrCancelClickHandler=function(e){function t(e,t){if(qq(e).hasClass(a.classes.cancel)||qq(e).hasClass(a.classes.retry)||qq(e).hasClass(a.classes.deleteButton)){var s=i.getItemFromEventTarget(e),o=i.getFileIdFromItem(s);qq.preventDefault(t),a.log(qq.format("Detected valid cancel, retry, or delete click event on file '{}', ID: {}.",a.onGetName(o),o)),n(e,o)}}function n(e,t){qq(e).hasClass(a.classes.deleteButton)?a.onDeleteFile(t):qq(e).hasClass(a.classes.cancel)?a.onCancel(t):a.onRetry(t)}var i={},a={listElement:document,log:function(){},classes:{cancel:"qq-upload-cancel",deleteButton:"qq-upload-delete",retry:"qq-upload-retry"},onDeleteFile:function(){},onCancel:function(){},onRetry:function(){},onGetName:function(){}};qq.extend(a,e),a.eventType="click",a.onHandled=t,a.attachTo=a.listElement,qq.extend(this,new qq.UiEventHandler(a,i))},qq.FilenameEditHandler=function(e,t){function n(e){var t=l.onGetName(e),n=t.lastIndexOf(".");return n>0&&(t=t.substr(0,n)),t}function i(e){var t=l.onGetName(e);return qq.getExtension(t)}function a(e,t){var n,a=e.value;void 0!==a&&qq.trimStr(a).length>0&&(n=i(t),void 0!==n&&(a=a+"."+n),l.onSetName(t,a)),l.onEditingStatusChange(t,!1)}function s(e,n){t.getDisposeSupport().attach(e,"blur",function(){a(e,n)})}function o(e,n){t.getDisposeSupport().attach(e,"keyup",function(t){var i=t.keyCode||t.which;13===i&&a(e,n)})}var r,l={listElement:null,log:function(){},classes:{file:"qq-upload-file"},onGetUploadStatus:function(){},onGetName:function(){},onSetName:function(){},onGetInput:function(){},onEditingStatusChange:function(){}};return qq.extend(l,e),l.attachTo=l.listElement,r=qq.extend(this,new qq.UiEventHandler(l,t)),qq.extend(t,{handleFilenameEdit:function(e,t,i,a){var r=l.onGetInput(i);l.onEditingStatusChange(e,!0),r.value=n(e),a&&r.focus(),s(r,e),o(r,e)}}),r},qq.FilenameClickHandler=function(e){function t(e,t){if(qq(e).hasClass(i.classes.file)||qq(e).hasClass(i.classes.editNameIcon)){var a=n.getItemFromEventTarget(e),s=n.getFileIdFromItem(a),o=i.onGetUploadStatus(s);o===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",i.onGetName(s),s)),qq.preventDefault(t),n.handleFilenameEdit(s,e,a,!0))}}var n={},i={log:function(){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(){},onGetName:function(){}};return qq.extend(i,e),i.eventType="click",i.onHandled=t,qq.extend(this,new qq.FilenameEditHandler(i,n))},qq.FilenameInputFocusInHandler=function(e,t){function n(e){if(qq(e).hasClass(i.classes.editFilenameInput)){var n=t.getItemFromEventTarget(e),a=t.getFileIdFromItem(n),s=i.onGetUploadStatus(a);s===qq.status.SUBMITTED&&(i.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",i.onGetName(a),a)),t.handleFilenameEdit(a,e,n))}}var i={listElement:null,classes:{editFilenameInput:"qq-edit-filename"},onGetUploadStatus:function(){},log:function(){}};return t||(t={}),i.eventType="focusin",i.onHandled=n,qq.extend(i,e),qq.extend(this,new qq.FilenameEditHandler(i,t))},qq.FilenameInputFocusHandler=function(e){return e.eventType="focus",e.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))},qq}),define("fine-uploader",["fine-uploader/s3.fineuploader"],function(e){return e}),function(e){function t(e){if(e in c.style)return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in c.style)return e;for(var i=0;i<t.length;++i){var a=t[i]+n;if(a in c.style)return a}}function n(){return c.style[p.transform]="",c.style[p.transform]="rotateY(90deg)",""!==c.style[p.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function a(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function s(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=l(t),-1===e.inArray(t,n)&&n.push(t)}),n}function o(t,n,i,a){var o=s(t);e.cssEase[i]&&(i=e.cssEase[i]);var r=""+d(n)+" "+i;parseInt(a,10)>0&&(r+=" "+d(a));var l=[];return e.each(o,function(e,t){l.push(t+" "+r)}),l.join(", ")}function r(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=p.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");return i.get(t)},set:function(n,i){var a=e(n).css("transit:transform");a.setFromString(t,i),e(n).css({"transit:transform":a})}}}function l(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function d(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),u(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var c=document.createElement("div"),p={},h=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.transform3d=n();var m={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},f=p.transitionEnd=m[p.transition]||null;for(var _ in p)p.hasOwnProperty(_)&&"undefined"==typeof e.support[_]&&(e.support[_]=p[_]);c=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var a=n;a instanceof i||(a=new i(a)),t.style[p.transform]="WebkitTransform"!==p.transform||h?a.toString():a.toString(!0),e(t).data("transform",a)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),r("scale"),r("translate"),r("rotate"),r("rotateX"),r("rotateY"),r("rotate3d"),r("perspective"),r("skewX"),r("skewY"),r("x",!0),r("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=u(e,"deg")},rotateX:function(e){this.rotateX=u(e,"deg")},rotateY:function(e){this.rotateY=u(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=u(e,"deg")},skewY:function(e){this.skewY=u(e,"deg")},perspective:function(e){this.perspective=u(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=u(e,"px")),null!==t&&void 0!==t&&(this._translateY=u(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=u(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,s){var r=this,l=0,u=!0;"function"==typeof n&&(s=n,n=void 0),"function"==typeof i&&(s=i,i=void 0),"undefined"!=typeof t.easing&&(i=t.easing,delete t.easing),"undefined"!=typeof t.duration&&(n=t.duration,delete t.duration),"undefined"!=typeof t.complete&&(s=t.complete,delete t.complete),"undefined"!=typeof t.queue&&(u=t.queue,delete t.queue),"undefined"!=typeof t.delay&&(l=t.delay,delete t.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=d(n);var c=o(t,n,i,l),h=e.transit.enabled&&p.transition,m=h?parseInt(n,10)+parseInt(l,10):0;if(0===m){var _=function(e){r.css(t),s&&s.apply(r),e&&e()};return a(r,u,_),r}var g={},v=function(n){var i=!1,a=function(){i&&r.unbind(f,a),m>0&&r.each(function(){this.style[p.transition]=g[this]||null}),"function"==typeof s&&s.apply(r),"function"==typeof n&&n()};m>0&&f&&e.transit.useTransitionEnd?(i=!0,r.bind(f,a)):window.setTimeout(a,m),r.each(function(){m>0&&(this.style[p.transition]=c),e(this).css(t)})},b=function(e){this.offsetWidth,v(e)};return a(r,u,b),this},e.transit.getTransitionValue=o}(jQuery),define("jquery.transit",["jquery.transit/jquery.transit"],function(e){return e}),define("jquery.transit/jquery.transit",function(){}),define("components/photo-share-button-6/js/photo-share",["require","lodash","jquery","./utils","lib/facebookApi","tmpl!photo-share-upload-zone-6","fine-uploader","jquery.transit"],function(e){function t(e){var t=this;t.options=i.extend(!0,{},f,l,e),s.init(n.bind(t.onFacebookInit,t))}var n=e("lodash"),i=e("jquery"),a=e("./utils"),s=e("lib/facebookApi"),o=e("tmpl!photo-share-upload-zone-6"),r=e("fine-uploader");e("jquery.transit");var l,u="withCredentials"in new XMLHttpRequest?"https:":window.location.protocol,d="share.massrelevance.com",c=u+"//"+d,p="https://"+d,h=p+"/twitter/auth",m=MR.spacePath(),f={twitterAuthRedirectURI:m+"/mr/photo-share-redirect.html",uploaderOpts:{chunking:{enabled:!0},cors:{allowXdr:!0,allowCors:!0,expected:!0},iframeSupport:{localBlankPagePath:u+m+"/mr/photo-share-blank-page.html"},request:{endpoint:"https://share-massrelevance-com.s3.amazonaws.com",accessKey:"AKIAI3SIW5OJMK7OMNZA"},retry:{enableAuto:!0},signature:{endpoint:c+"/s3/signature"},template:o(),uploadSuccess:{endpoint:c+"/s3/success"},multiple:!1,validation:{acceptFiles:"image/*",allowedExtensions:["jpeg","jpg","gif","png"]}}},_={twitterAuthRedirectURI:"//localhost:9000/lib/static/photo-share-redirect.html",uploaderOpts:{iframeSupport:{localBlankPagePath:u+"//"+window.location.host+"/lib/static/photo-share-blank-page.html"}}},g={twitterAuthRedirectURI:"//up.massrelevance.com/massrel-products/photo-upload/redirect.html",uploaderOpts:{iframeSupport:{localBlankPagePath:u+"//"+window.location.host+"/massrel-products/photo-upload/blankPage.html"}}},v=MR.spaceConfig&&MR.spaceConfig.env;return"dev"===v?l=_:"preview"===v&&(l=g),t.prototype.getRequestParams=function(e){var t=this,i={},a=t.model.get(e+"_message"),s=t[e+"User"],o=t.options[e]&&t.options[e].destination;return s&&(i.user=s,i.message=a,i.destination=o),n.pick(i,function(e){return"undefined"!=typeof e&&null!==e})},t.prototype.share=function(e){var t,n=this,a=i.Deferred();return n.getUploadPromise().then(function(a){return t=n.getRequestParams(e),t.image=a,i.getJSON(p+"/"+e+"/share?callback=?",t)}).done(function(e){e&&e.success&&a.resolve(e.id)}),a.promise()},t.prototype.setupUploader=function(e,t){var n=this,a=i.extend({},n.options.uploaderOpts,{showConfirm:function(){},showMessage:function(e){n.showMessage(e)},showPrompt:function(){}});return n.$modal=e,n.model=t,a.element=e.find(".upload-target").get(0),a.callbacks=n.callbacks(),n.uploader=new r.s3.FineUploader(a),n.uploader},t.prototype.callbacks=function(){var e=this;return{onComplete:function(){e.complete.apply(e,arguments)},onSubmit:function(){e.fileAdded.apply(e,arguments)},onSubmitted:function(){e.validated.apply(e,arguments)}}},t.prototype.complete=function(e,t,n){var i,a=this,s=/(?:.*)(\.[^.]+)/,o=a.uploader.getUuid(e),r=t.match(s);r&&2===r.length&&(i=o+r[1],a.uploadDeferred&&a.uploadDeferred.resolve(i),a.showS3Preview(e,n&&n.url))},t.prototype.uploadError=function(e,t,i){var a=this;/^XHR/.test(i)&&n.delay(function(){},500),a.complete()},t.prototype.fileAdded=function(){var e=this;e.$modal.find(".errors").empty()},t.prototype.validated=function(e){var t=this;t.uploadDeferred=i.Deferred(),t.model.set("step","share"),t.showPreview(e)},t.prototype.getUploadPromise=function(){var e=this,t=e.uploadDeferred;return t&&t.promise()||a.emptyPromise()},t.prototype.showPreview=function(e){var t=this,n=t.uploader.getFile(e),i=window.FileReader&&new FileReader;n&&i&&(i.onload=a.minDelayedExecutor(function(e){t.model.get("imagePreviews").push({url:e.target.result})},1500),i.readAsDataURL(n))},t.prototype.showS3Preview=function(e,t){var n=this,i=n.uploader.getFile(e);i&&window.FileReader||!t||n.model.set("imagePreviewUrl",t)},t.prototype.twitterAuth=function(){var e,t,n,s=this,o="resizable=yes,toolbar=no,location=yes",r=550,l=480,u=screen.width,d=Math.round(u/2-r/2),c=0,p=i.Deferred();return s.twitterUser?p.resolve(s.twitterUser):(e=function(){var e=a.getCookie("mr_pauth_t");e?(s.twitterUser=e,p.resolve(e)):p.reject("Twitter authentication failed")},n=function(){s.twitterAuthWindow&&s.twitterAuthWindow.closed&&(s.hackInterval=window.setTimeout(e,500),window.clearInterval(s.twitterCloseInterval))},s.twitterCloseInterval=window.setInterval(n,500),t=h+"?redirect_url="+encodeURIComponent(window.location.protocol+s.options.twitterAuthRedirectURI),s.twitterAuthWindow=window.open(t,"mr_twitter_auth",o+",width="+r+",height="+l+",left="+d+",top="+c)),p.promise()},t.prototype.facebookAuth=function(){var e=this,t=i.Deferred();return e.facebookUser?t.resolve(e.facebookUser):s.getClient().login(null,["publish_actions"]).then(function(n){e.facebookUser=n&&n.accessToken,t.resolve(e.facebookUser)}).fail(function(){t.reject("Facebook authentication failed")}),t.promise()},t.prototype.onFacebookInit=function(){this.facebookUser=s.getClient().currentUser()},t.prototype.showMessage=function(e){this.model.get("errors").add({message:e})},t.prototype.reset=function(){this.uploader&&(this.uploader.reset(),this.uploader=void 0),window.clearInterval(this.hackInterval)},t.fileApi=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),t}),define("components/photo-share-button-6/js/views/MyDeviceView",["require","lib/views/BaseView","tmpl!photo-share-my-device-6","../photo-share","../utils","lodash","jquery"],function(e){var t=e("lib/views/BaseView"),n=e("tmpl!photo-share-my-device-6"),i=e("../photo-share"),a=e("../utils"),s=e("lodash"),o=e("jquery");return t.extend({tagName:"div",className:function(){var e=["my-device"];return i.fileApi&&e.push("file-api"),e.join(" ")},template:n,initialize:function(e){return this.photoShare=new i({facebook:{destination:this.model.get("upload_settings").facebook_destination}}),this.model=e.model,this.model.get("imagePreviews").on("add",s.bind(this.updateImagePreviews,this)),this.model.get("imagePreviews").on("remove",s.bind(this.updateImagePreviews,this)),this.model.get("errors").on("add",function(){}),this.model.set("message",this.model.get("upload_settings").hashtags),this.dispatcher=e.dispatcher,this},handlers:{back:function(){this.$el.hasClass("confirm")?(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"select"}),this.$el.removeClass("confirm").addClass("preview-mode")):this.dispatcher.trigger("show-start",this)},next:function(){this.$el.find(".next-button").hasClass("inactive")||(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"confirm"}),this.$el.addClass("confirm").removeClass("preview-mode"))},"share-twitter":function(){this.model.set("twitter_message",this.$el.find("textarea").val()),this.share("twitter")},"share-facebook":function(){this.model.set("facebook_message",this.$el.find("textarea").val()),this.share("facebook")},"remove-image":function(){this.model.get("imagePreviews").pop()}},updateImagePreviews:function(){var e=this.$el.find(".image-previews");e.empty(),this.model.get("imagePreviews").each(function(t){var n=o('<div class="image-preview"><img src="'+t.get("url")+'"></div>');n.append(o('<i class="icon-close-x mr-action-click" data-action="remove-image">')),e.append(n)});var t=this.model.get("imagePreviews").length;this.$el.find(".next-button").removeClass("inactive"),this.$el.addClass("preview-mode"),1===t?this.$el.find(".selected-label").text(t+" photo selected"):t>0?this.$el.find(".selected-label").text(t+" photos selected"):(this.$el.removeClass("preview-mode"),this.$el.find(".next-button").addClass("inactive"),this.$el.find(".selected-label").text(""))},render:function(){t.prototype.render.apply(this,arguments);var e=this;return e.uploader=e.photoShare.setupUploader(this.$el,this.model),e.$el.find(".qq-upload-button input").attr("id","qq-upload-button-input"),e.updateImagePreviews(),this},share:function(e){var t=this,n=this.$el;if("twitter"===e){var i=a.tweetCharacterCount(this.model.get("twitter_message"));if(0>i)return o(".error").children().length||this.photoShare.showMessage("Oh no! Your tweet is too long!"),void 0}var s=t.photoShare[e+"Auth"]||a.emptyPromise;s.call(t.photoShare).then(function(){a.minDelayedExecutor(function(){n.removeClass("auth-in-progress"),t.handleShare(n,e)},1e3)()}).fail(function(e){n.removeClass("share-in-progress auth-in-progress"),t.photoShare.showMessage(e)})},handleShare:function(e,t){var n,i=this;e.addClass("upload-in-progress"),n=function(){var e="uploadcomplete";"twitter"===t?e="tweetuploadcomplete":"facebook"===t&&(e="fbpostuploadcomplete"),i.analytics().trackEvent({category:"viz:upload",action:e})},i.photoShare.share(t).then(function(){a.minDelayedExecutor(function(){n()},1e3)()})}})}),define("components/photo-share-button-6/js/models/MyDeviceModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:{imagePreviews:new t.Collection,errors:new t.Collection,type:"mydevice"}})}),define("tmpl!photo-share-instagram-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<div class="photo-chooser">\n  <i class="icon-instagram-logo"/>\n  <h3 class="chooser-header">Which photos do you want to add?</h3>\n  <h3 class="confirm-header">Add these photos?</h3>\n</div>\n\n<div class="image-previews">\n</div>\n<div class="status-previews">\n</div>\n\n<div class="terms-of-service">\n  <div class="terms-section">\n    <h3>Terms Of Service</h3>\n    <div class="terms-text">'+(null==(__t=terms_text)?"":__t)+'</div>\n  </div>\n  <div class="checkbox mr-action-click" data-action="agree">\n    <i class="icon-vote-check"></i>\n  </div><span class="checkbox-label">I agree to the Terms of Service</span><span class="terms-link mr-action-click" data-action="show-terms">READ TERMS</span>\n</div>\n\n<div class="select-footer">\n  <div class="back-button mr-action-click" data-action="back">&lt; BACK</div>\n  <div class="selected-label"></div>\n  <div class="next-button button inactive mr-action-click" data-action="next">NEXT</div>\n  <div class="add-photos-button button mr-action-click inactive" data-action="add-photos">ADD PHOTOS</div>\n</div>';return __p},metadata:{},name:"photo-share-instagram-6"})}),define("tmpl!photo-share-native-status-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<div class="native-status" data-status-id="'+(null==(__t=id)?"":__t)+'">\n  <i class="icon-close-x mr-action-click" data-action="remove-image"/>\n  <div class="native-image" style="background-image:url(\''+(null==(__t=image)?"":__t)+'\')">\n  </div>\n  <div class="native-right">\n    <div class="native-content-header">\n      <div class="native-avatar"><img src="'+(null==(__t=avatar)?"":__t)+'"/></div>\n      <div class="native-username">'+(null==(__t=username)?"":__t)+'</div>\n      <div class="native-date">'+(null==(__t=formattedDate)?"":__t)+'</div>\n      <i class="icon-'+(null==(__t=network)?"":__t)+'-logo"/>\n    </div>\n    <div class="native-text">\n      '+(null==(__t=text)?"":__t)+"\n    </div>\n  </div>\n</div>";
return __p},metadata:{},name:"photo-share-native-status-6"})}),define("lib/sourcedEntities",["require","jquery","lodash","q","massrel-js"],function(e){function t(e){return this.config=i.extend({},l,e),this}var n=e("jquery"),i=e("lodash"),a=e("q"),s=e("massrel-js"),o="https://spredfast.com/v2/visualizations/",r="https://spredfast.com/platform/visualizations/",l={encoded_id:null,stream_name:null,provider:null};return t.prototype.setToken=function(e){this.token=e},t.prototype.list=function(e,t){var i=n.Deferred(),a=o+this.config.encoded_id+"/streams/"+this.config.stream_name+"/list.json",r=[["token",this.token]];return e&&r.push(["type",e]),t&&r.push(["parent_entity_id",t]),s.helpers.request_factory(a,r,"_",this,function(e){i.resolve(e)},function(){i.reject()}),i.promise()},t.prototype.getTermsOfUse=function(){var e=n.Deferred(),t=r+this.config.encoded_id+"/terms_of_service.json";return s.helpers.request_factory(t,null,"_",this,function(t){e.resolve(t)},function(){e.reject()}),e.promise()},t.prototype.more=function(e,t,i){var a=n.Deferred(),r=o+this.config.encoded_id+"/streams/"+this.config.stream_name+"/list.json",l=[["token",this.token],["older_entities_cursor",e]];return t&&l.push(["type",t]),i&&l.push(["parent_entity_id",i]),s.helpers.request_factory(r,l,"_",this,function(e){a.resolve(e)},function(){a.reject()}),a.promise()},t.prototype.insert=function(e){var t=o+this.config.encoded_id+"/streams/"+this.config.stream_name+"/insert.json";return a(n.ajax({method:"POST",dataType:"json",contentType:"application/json",url:t,data:JSON.stringify({entity_id:e,token:this.token})}))},t.prototype.getAuth=function(){var e,t=n.Deferred();window.addEventListener("message",function(n){n.origin.indexOf("spredfast.com")>=0&&(clearInterval(e),t.resolve(n.data.payload))},!1);var i=window.open(o+this.config.encoded_id+"/streams/"+this.config.stream_name+"/auth/"+this.config.provider,"_blank","width=700,height=600,scrollbars=1");return e=setInterval(function(){i.postMessage("ping","*")},30),t.promise()},t}),define("components/photo-share-button-6/js/views/InstagramView",["require","lib/views/BaseView","tmpl!photo-share-instagram-6","tmpl!photo-share-native-status-6","lib/sourcedEntities","moment","q","lodash","jquery"],function(e){var t=e("lib/views/BaseView"),n=e("tmpl!photo-share-instagram-6"),i=e("tmpl!photo-share-native-status-6"),a=e("lib/sourcedEntities"),s=e("moment"),o=e("q"),r=e("lodash"),l=e("jquery");return t.extend({tagName:"div",className:"instagram-device",template:n,initialize:function(e){var t=this;return this.model=e.model,this.sourcedEntitiesApi=new a({provider:"instagram_oauth",encoded_id:MR.templateConfig.settings.visualization_encoded_id,stream_name:this.model.get("stream_name")}),this.sourcedEntitiesApi.getAuth().then(function(e){e.token&&(t.sourcedEntitiesApi.setToken(e.token),t.getInitialStatuses())}),this.sourcedEntitiesApi.getTermsOfUse().then(function(e){e.terms_of_service&&(t.model.set("terms_text",e.terms_of_service.tos_text),t.updateTermsText())}),this.dispatcher=e.dispatcher,this},handlers:{back:function(){this.$el.hasClass("confirm")?(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"select"}),this.$el.removeClass("confirm").addClass("preview-mode")):this.dispatcher.trigger("show-start",this)},next:function(){this.$el.find(".next-button").hasClass("inactive")||(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"confirm"}),this.$el.addClass("confirm").removeClass("preview-mode"),this.updateStatusPreviews())},"add-photos":function(){this.$el.find(".terms-of-service .checkbox").hasClass("checked")&&this.uploadSelectedImages()},"select-image":function(e){var t=l(e.currentTarget).closest(".image-preview");t.toggleClass("selected");var n=t.attr("data-status-id"),i=this.model.get("statuses").find({id:n});i.set("selected",!i.get("selected")),this.updateSelectedCount()},"remove-image":function(e){var t=l(e.currentTarget).closest(".native-status"),n=t.attr("data-status-id"),i=this.model.get("statuses").find({id:n});i.set("selected",!1),this.$el.find('.image-preview[data-status-id="'+n+'"]').removeClass("selected"),t.remove(),this.updateSelectedCount()},"show-terms":function(){this.$el.toggleClass("show-terms"),this.$el.hasClass("show-terms")?this.$el.find(".terms-link").text("HIDE TERMS"):this.$el.find(".terms-link").text("READ TERMS")},agree:function(){this.$el.find(".terms-of-service .checkbox").toggleClass("checked"),this.$el.find(".add-photos-button").toggleClass("inactive")}},render:function(){return t.prototype.render.apply(this,arguments),this.$el.find(".image-previews").on("scroll",r.bind(this.scrollHandler,this)),this},handleBatch:function(e){this.model.set("older_cursor",e.data.meta.older_entities_cursor),this.model.set("is_more",e.data.meta.more),this.model.get("statuses").add(e.data.data),this.updateImagePreviews()},getInitialStatuses:function(){this.sourcedEntitiesApi.list().then(r.bind(this.handleBatch,this))},uploadSelectedImages:function(){var e=this,t=this.model.get("statuses").filter(function(e){return e.get("selected")}),n=[];r.each(t,function(t){n.push(e.sourcedEntitiesApi.insert(t.get("id")))}),o.all(n).then(function(){e.dispatcher.trigger("show-success",this)})},getMoreStatuses:function(){this.model.get("is_more")&&this.sourcedEntitiesApi.more(this.model.get("older_cursor")).then(r.bind(this.handleBatch,this))},scrollHandler:function(e){var t=l(e.currentTarget);t[0].scrollHeight-t.scrollTop()===t.outerHeight()&&this.getMoreStatuses()},updateSelectedCount:function(){var e=this.model.get("statuses").filter(function(e){return e.get("selected")}).length;this.$el.find(".next-button").removeClass("inactive"),this.$el.addClass("preview-mode"),1===e?this.$el.find(".selected-label").text(e+" photo selected"):e>0?this.$el.find(".selected-label").text(e+" photos selected"):(this.$el.removeClass("preview-mode"),this.$el.find(".next-button").addClass("inactive"),this.$el.find(".selected-label").text(""))},updateTermsText:function(){this.$el.find(".terms-text").text(this.model.get("terms_text"))},updateStatusPreviews:function(){var e=this.model.get("statuses").filter(function(e){return e.get("selected")}),t=this.$el.find(".status-previews");t.empty(),r.each(e,function(e){var n=l(i({id:e.get("id"),image:e.get("images").low_resolution.url,avatar:e.get("user").profile_picture,username:e.get("user").username,network:"instagram",text:e.get("caption")?e.get("caption").text:"",formattedDate:s.unix(e.get("created_time")).format("MM/DD/YYYY")}));t.append(n)})},updateImagePreviews:function(){var e=this.$el.find(".image-previews");e.empty(),this.model.get("statuses").each(function(t){var n=l('<div class="image-preview mr-action-click" data-action="select-image" data-status-id="'+t.get("id")+'"><img src="'+t.get("images").low_resolution.url+'"></div>');n.append('<div class="check-box mr-action-click" data-action="select-image"><i class="icon-vote-check"></i></div>'),e.append(n)})}})}),define("components/photo-share-button-6/js/models/InstagramModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:{imagePreviews:new t.Collection,statuses:new t.Collection,errors:new t.Collection,type:"instagram"}})}),define("tmpl!photo-share-facebook-6",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+='<div class="photo-chooser">\n  <i class="icon-facebook-logo"/>\n  <h3 class="album-chooser-header">Which album do you want to browse?</h3>\n  <h3 class="chooser-header">Which photos do you want to add?</h3>\n  <h3 class="confirm-header">Add these photos?</h3>\n</div>\n\n<div class="error">\nWe weren\'t able to return any results from your Facebook account. Please check your albums on Facebook and try again.\n</div>\n<div class="album-list">\n</div>\n\n<div class="album-selector">\n  <span class="album-dropdown-label">ALBUM:</span> <div class="current-album mr-action-click" data-action="toggle-album-dropdown">\n    <div class="selected-album-label"></div>\n    <i class="icon-arrow-down"></i>\n    <div class="dropdown">\n    </div>\n  </div>\n</div>\n\n<div class="image-previews">\n</div>\n<div class="status-previews">\n</div>\n\n<div class="terms-of-service">\n  <div class="terms-section">\n    <h3>Terms Of Service</h3>\n    <div class="terms-text">'+(null==(__t=terms_text)?"":__t)+'</div>\n  </div>\n  <div class="checkbox mr-action-click" data-action="agree">\n    <i class="icon-vote-check"></i>\n  </div><span class="checkbox-label">I agree to the Terms of Service</span><span class="terms-link mr-action-click" data-action="toggle-terms">READ TERMS</span>\n\n</div>\n\n<div class="select-footer">\n  <div class="back-button mr-action-click" data-action="back">&lt; BACK</div>\n  <div class="selected-label"></div>\n  <div class="next-button button inactive mr-action-click" data-action="next">NEXT</div>\n  <div class="add-photos-button button mr-action-click inactive" data-action="add-photos">ADD PHOTOS</div>\n</div>';return __p},metadata:{},name:"photo-share-facebook-6"})}),define("components/photo-share-button-6/js/views/FacebookView",["require","lib/views/BaseView","tmpl!photo-share-facebook-6","tmpl!photo-share-native-status-6","lib/sourcedEntities","moment","q","lodash","jquery"],function(e){var t=e("lib/views/BaseView"),n=e("tmpl!photo-share-facebook-6"),i=e("tmpl!photo-share-native-status-6"),a=e("lib/sourcedEntities"),s=e("moment"),o=e("q"),r=e("lodash"),l=e("jquery");return t.extend({tagName:"div",className:"facebook-device browse-albums",template:n,initialize:function(e){var t=this;return this.model=e.model,this.sourcedEntitiesApi=new a({provider:"facebook_oauth",encoded_id:MR.templateConfig.settings.visualization_encoded_id,stream_name:this.model.get("stream_name")}),this.sourcedEntitiesApi.getAuth().then(function(e){e.token&&(t.sourcedEntitiesApi.setToken(e.token),t.getInitialAlbums())}),this.sourcedEntitiesApi.getTermsOfUse().then(function(e){e.terms_of_service&&(t.model.set("terms_text",e.terms_of_service.tos_text),t.updateTermsText())}),this.dispatcher=e.dispatcher,this},handlers:{back:function(){this.$el.hasClass("confirm")?(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"select"}),this.$el.removeClass("confirm").addClass("preview-mode")):this.$el.hasClass("browse-albums")?this.dispatcher.trigger("show-start",this):(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"select"}),this.$el.removeClass("preview-mode").addClass("browse-albums"))},next:function(){this.$el.find(".next-button").hasClass("inactive")||(this.dispatcher.trigger("update-breadcrumb",{breadcrumb:"confirm"}),this.$el.addClass("confirm").removeClass("preview-mode"),this.updateStatusPreviews())},"add-photos":function(){this.$el.find(".terms-of-service .checkbox").hasClass("checked")&&this.uploadSelectedImages()},"toggle-album-dropdown":function(){this.$el.find(".album-selector").toggleClass("open")},"select-album":function(e){var t=l(e.currentTarget);l(".album-selector .selected-album-label").text(t.text()),this.$el.find(".album-selector").removeClass("open");var n=t.attr("data-album-id");this.model.set("albumId",n),this.getPhotosForCurrentAlbum(),this.$el.removeClass("browse-albums")},"select-image":function(e){var t=l(e.currentTarget).closest(".image-preview");t.toggleClass("selected");var n=t.attr("data-status-id"),i=this.model.get("statuses").find({id:n});i.get("selected")?this.model.get("selectedStatuses").remove(i):this.model.get("selectedStatuses").add(i),i.set("selected",!i.get("selected")),this.updateSelectedCount()},"remove-image":function(e){var t=l(e.currentTarget).closest(".native-status"),n=t.attr("data-status-id");this.model.get("selectedStatuses").remove(n),t.remove(),this.updateSelectedCount()},"toggle-terms":function(){this.$el.toggleClass("show-terms"),this.$el.hasClass("show-terms")?this.$el.find(".terms-link").text("HIDE TERMS"):this.$el.find(".terms-link").text("READ TERMS")},agree:function(){this.$el.find(".terms-of-service .checkbox").toggleClass("checked"),this.$el.find(".add-photos-button").toggleClass("inactive")}},render:function(){return t.prototype.render.apply(this,arguments),this.$el.find(".image-previews").on("scroll",r.bind(this.scrollHandler,this)),this},handleAlbums:function(e){"success"===e.data.status?(this.$el.find("error").hide(),this.model.set("album_meta",e.data.meta),this.model.get("albums").add(e.data.data),this.updateAlbumList()):this.$el.find("error").show()},handleBatch:function(e){this.model.set("older_cursor",e.data.meta.older_entities_cursor),this.model.set("is_more",e.data.meta.more);var t=this.model.get("selectedStatuses");r.each(e.data.data,function(e){t.find({id:e.id})&&(e.selected=!0)}),this.model.get("statuses").add(e.data.data),this.updateImagePreviews()},getInitialAlbums:function(){this.sourcedEntitiesApi.list("albums").then(r.bind(this.handleAlbums,this))},getPhotosForCurrentAlbum:function(){this.model.get("statuses").reset(),this.sourcedEntitiesApi.list("photos",this.model.get("albumId")).then(r.bind(this.handleBatch,this))},uploadSelectedImages:function(){var e=this,t=this.model.get("selectedStatuses"),n=[];t.each(function(t){n.push(e.sourcedEntitiesApi.insert(t.get("id")))}),o.all(n).then(function(){e.dispatcher.trigger("show-success",this)})},getMoreStatuses:function(){this.model.get("is_more")&&this.sourcedEntitiesApi.more(this.model.get("older_cursor"),"photos",this.model.get("albumId")).then(r.bind(this.handleBatch,this))},scrollHandler:function(e){var t=l(e.currentTarget);t[0].scrollHeight-t.scrollTop()===t.outerHeight()&&this.getMoreStatuses()},updateTermsText:function(){this.$el.find(".terms-text").text(this.model.get("terms_text"))},updateSelectedCount:function(){var e=this.model.get("selectedStatuses").length;this.$el.find(".next-button").removeClass("inactive"),this.$el.addClass("preview-mode"),1===e?this.$el.find(".selected-label").text(e+" photo selected"):e>0?this.$el.find(".selected-label").text(e+" photos selected"):(this.$el.removeClass("preview-mode"),this.$el.find(".next-button").addClass("inactive"),this.$el.find(".selected-label").text(""))},updateAlbumList:function(){var e=this.$el.find(".album-list"),t=this.$el.find(".album-selector .dropdown");e.empty(),this.model.get("albums").each(function(n){var i=l('<div class="album mr-action-click" data-action="select-album"></div>');i.text(n.get("name")),i.attr("data-album-id",n.get("id")),t.append(i.clone()),e.append(i)})},updateStatusPreviews:function(){var e=this.model.get("selectedStatuses"),t=this.$el.find(".status-previews");t.empty(),e.each(function(e){var n=l(i({id:e.get("id"),image:e.get("images")[0].source,avatar:"https://api.massrelevance.com/avatar/facebook?width=200&height=200&user_id="+e.get("from").id,username:e.get("from").name,text:e.get("name")||"",network:"facebook",formattedDate:s(e.get("created_time")).format("MM/DD/YYYY")}));t.append(n)})},updateImagePreviews:function(){var e=this.$el.find(".image-previews");e.empty(),this.model.get("statuses").each(function(t){var n=l('<div class="image-preview mr-action-click" data-status-id="'+t.get("id")+'" data-action="select-image"><img src="'+t.get("images")[0].source+'"></div>');n.append('<div class="check-box mr-action-click" data-action="select-image"><i class="icon-vote-check"></i></div>'),t.get("selected")&&n.addClass("selected"),e.append(n)})}})}),define("components/photo-share-button-6/js/models/FacebookModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:{selectedStatuses:new t.Collection,albums:new t.Collection,statuses:new t.Collection,type:"facebook"}})}),define("components/photo-share-button-6/js/views/PhotoShareDialogView",["require","jquery","lodash","lib/views/BaseView","tmpl!photo-share-dialog-6","./PhotoSourceOptionView","./MyDeviceView","../models/MyDeviceModel","./InstagramView","../models/InstagramModel","./FacebookView","../models/FacebookModel"],function(e){var t=e("jquery"),n=e("lodash"),i=e("lib/views/BaseView"),a=e("tmpl!photo-share-dialog-6"),s=e("./PhotoSourceOptionView"),o=e("./MyDeviceView"),r=e("../models/MyDeviceModel"),l=e("./InstagramView"),u=e("../models/InstagramModel"),d=e("./FacebookView"),c=e("../models/FacebookModel"),p={my_device:o,instagram:l,facebook:d},h={my_device:r,instagram:u,facebook:c},m=i.extend({template:a,subviews:{"source-option":s},className:function(){var e=["photo-share-modal-content","step-"+this.model.get("step")];return e.join(" ")},events:{"click .close-button":"close","click .share-action":"share","click .change-image":"changeImage","click input[type=file]":"changeImageIE","change .message-area":"changeMessage","keyup .message-area":"changeMessage","cut .message-area":"changeMessage","paste .message-area":"pasteMessage","click .error":"hideError"},initialize:function(e){i.prototype.initialize.call(this,e),this.listenTo(this.model,"change:step",this.changeStep),this.listenTo(this.model,"change:imagePreviewUrl",this.showPreview),this.listenTo(this.model,"change:twitter_message",this.updateTweetCharacterCount),this.listenTo(this.dispatcher().scopedToId,{"source-selected":n.bind(this.handleSelectedSource,this),"show-start":n.bind(this.showStart,this),"update-breadcrumb":n.bind(this.updateBreadcrumb,this),"show-success":n.bind(this.showSuccess,this)})},showSuccess:function(){this.$el.find(".tab.active").removeClass("active"),this.$el.find(".tab.success").addClass("active")},handleSelectedSource:function(e){var t=e.payload.model,n=t.title.toLowerCase().replace(" ","_"),i=p[n],a=h[n],s=new i({parent:this,model:new a(this.model.attributes),dispatcher:this.dispatcher()});this.$el.find(".tab.select-images").empty().append(s.render().$el),this.$el.find(".tab.active").removeClass("active"),this.$el.find(".tab.select-images").addClass("active"),this.updateBreadcrumb({payload:{breadcrumb:"select"}})},showStart:function(){var e=this.$el.find(".tab.active").prev();this.$el.find(".tab.active").removeClass("active"),e.addClass("active"),this.updateBreadcrumb({payload:{breadcrumb:"start"}})},updateBreadcrumb:function(e){"confirm"===e.payload.breadcrumb?(this.$el.find("li").removeClass("active"),this.$el.find("li").eq(2).addClass("active")):"select"===e.payload.breadcrumb?(this.$el.find("li").removeClass("active"),this.$el.find("li").eq(1).addClass("active")):(this.$el.find("li").removeClass("active"),this.$el.find("li").eq(0).addClass("active"))},close:function(){this.options.parent.model.hide()},changeMessage:function(e){var n=t(e.target),i=n.data("network");this.model.set(i+"_message",n.val())},pasteMessage:function(e){var t=this;setTimeout(function(){t.changeMessage(e)},0)},changeStep:function(e,t){var n=this;n.$el.removeClass("step-"+n.model.previous("step")).addClass("step-"+t),"share"===t&&n.$el.find(".image-preview-wrapper").addClass("loading")},showError:function(e){var n,i=this,a=e.get("message");a&&(n=t('<p class="error"><span class="dismiss-error"></span>'+a+"</p>"),i.$el.find(".errors").append(n),n.fadeIn())},hideError:function(e){e.preventDefault();var n=t(e.target);n.fadeOut({complete:function(){n.remove()}})}});return m}),define("componentStyle!photo-share-button-6?includeModal",{render:function(){}}),define("components/photo-share-button-6/main",["require","jquery","lib/BaseComponent","./js/models/PhotoShareButtonModel","./js/views/PhotoShareButtonView","./js/models/PhotoShareDialogModel","./js/views/PhotoShareDialogView","components/modal-2/views/ModalView","components/modal-2/models/ModalModel","componentStyle!photo-share-button-6?includeModal"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./js/models/PhotoShareButtonModel"),a=e("./js/views/PhotoShareButtonView"),s=e("./js/models/PhotoShareDialogModel"),o=e("./js/views/PhotoShareDialogView"),r=e("components/modal-2/views/ModalView"),l=e("components/modal-2/models/ModalModel"),u=e("componentStyle!photo-share-button-6?includeModal"),d=function(e,n,u,d){var c,p=this;p.config=e,p.id=n,p.dispatcher=u,p.$el=t("#"+n),c=function(){var i=new s(p.config.settings);MR.modal.open({data:{View:o,model:i,type:"photo-share",options:{styleComponentId:p.id,closeButtonAdaText:"Close Photo Share Window",additionalClasses:"photo-share-modal"}},fallback:function(){var a=new l({config:{open:!0,model:i,View:o}});a.set("closeButtonAdaText","Close Photo Share Window"),a.set("styleComponentId",p.id),p.dialogView=new r({additionalClasses:["photo-share-modal"],componentId:n,componentType:e.type,dispatcher:u,model:a,analytics:d}),p.dialogView.toggleOpen(),t("body").append(p.dialogView.render().$el.addClass("photo-share-modal"))}}),d.trackEvent({category:"viz:upload",action:"uploadintent"})},p.buttonModel=new i(p.config.settings),p.buttonView=new a({dispatcher:u,componentType:e.type,componentId:n,model:p.buttonModel,showUploadViewHandler:c,analytics:d})};return d.prototype.render=function(){var e=this;e.$el.html(e.buttonView.render().el)},n.extend({styles:u,exports:{PhotoShareButton:d,PhotoShareButtonModel:i,PhotoShareButtonView:a,PhotoShareDialogModel:s,PhotoShareDialogView:o},create:function(){var e,t=this.get("config");return e=new d(t,this.get("id"),this.get("dispatcher"),this.get("analytics")),this.set("photoShareButton",e),{photoShareButton:e}},render:function(){if(this.hasElement()){var e=this.get("photoShareButton");e&&e.render()}}}).exports()}),define("lib/views/BaseButtonView",["require","lib/views/BaseView"],function(e){var t=e("lib/views/BaseView"),n=t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:disabled",function(e,t){this.$el.toggleClass("disabled",t)})}});return n}),define("components/follow-button-2/models/FollowButtonModel",["require","lodash","backbone-amd","massrel-js"],function(e){var t=e("lodash"),n=e("backbone-amd"),i=e("massrel-js");return n.Model.extend({defaults:{button_style:"silver",button_border_radius:3,button_text:"+",original_referer:i.intents.original_referer,screen_name:"spredfast",disabled:!1},initialize:function(e){this.set(t.pick(e.config,t.keys(this.defaults))),this.on({"change:screen_name":this.generateUrl,"change:original_referer":this.generateUrl}),this.generateUrl()},generateUrl:function(){var e={},t=this.get("original_referer");return t&&(e.original_referer=t),this.set("url",i.intents.user(this.get("screen_name"),e)),this}})}),define("tmpl!follow-button-2",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<i class="icon icon-twitter-logo"></i>\n<span class="button-text">'+__e(button_text)+"</span>\n";return __p},metadata:{},name:"follow-button-2"})}),define("components/follow-button-2/views/FollowButtonView",["lib/views/BaseButtonView","../models/FollowButtonModel","tmpl!follow-button-2"],function(e,t,n){return require(["twitter-widgets"],function(){}),e.extend({template:n,className:function(){var e=this.model.get("button_style");return"social-button twitter follow-button"+(e?" button-style-"+e:"")},tagName:"a",attributes:{href:""},events:{click:function(){return this.$el.hasClass("disabled")||this.model.get("disabled")?!1:void 0}},initialize:function(n){var i=this;void 0===n.model&&(i.model=new t),e.prototype.initialize.apply(this,arguments),i.model.on("change:url",function(){i.$el.attr("href",i.model.get("url"))})},render:function(){var t=this;return e.prototype.render.apply(t,arguments),t.$el.attr("href",t.model.get("url")),t.$el.css("border-radius",this.model.get("button_border_radius")+"px"),t}})}),define("componentStyle!follow-button-2",{render:function(){}}),define("components/follow-button-2/main",["jquery","lib/BaseComponent","./views/FollowButtonView","./models/FollowButtonModel","componentStyle!follow-button-2"],function(e,t,n,i,a){var s=function(t,a,s){var o=this;o.config=t,o.id=a,o.dispatcher=s,o.$el=e("#"+a),o.model=new i(o.config.settings),o.view=new n({dispatcher:s,componentType:t.type,componentId:a,model:o.model})};return s.prototype.render=function(){var e=this;e.$el.html(e.view.render().el)},t.extend({styles:a,exports:{FollowButton:s,FollowButtonView:n,FollowButtonModel:i},create:function(){var e=new s(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("followButton",e),{followButton:e}},render:function(){this.hasElement()&&this.get("followButton").render()}}).exports()}),define("components/fb-like-button-2/models/FbLikeButtonModel",["require","backbone-amd"],function(e){var t=e("backbone-amd");return t.Model.extend({defaults:function(){return{action:"like",colorscheme:"light",href:"",kid_directed_site:!1,layout:"button",ref:"spredfast",share:!1,show_faces:!1,width:null}}})}),define("tmpl!fb-like-button",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<div class="fb-like"\n    data-action="'+__e(action)+'"\n    data-colorscheme="'+__e(colorscheme)+'"\n    data-href="'+__e(href)+'"\n    data-layout="'+__e(layout)+'"\n    data-share="'+__e(share)+'"\n    data-show-faces="'+__e(show_faces)+'"\n    data-width="'+__e(width)+'"\n    data-ref="'+__e(ref)+'"\n></div>\n';return __p},metadata:{},name:"fb-like-button"})}),define("components/fb-like-button-2/views/FbLikeButtonView",["require","lodash","lib/views/BaseView","../models/FbLikeButtonModel","tmpl!fb-like-button","lib/facebookApi"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("../models/FbLikeButtonModel"),a=e("tmpl!fb-like-button"),s=e("lib/facebookApi");return n.extend({tagName:"span",className:"social-button facebook fb-like-button",template:a,initialize:function(e){e.model||(this.model=new i),this.listenTo(this.model,"change",this.render)},renderFacebookParse:function(){return window.FB.XFBML.parse(),this},render:function(){return n.prototype.render.apply(this,arguments),s.init(t.bind(this.renderFacebookParse,this)),this}})}),define("componentStyle!fb-like-button-2",{render:function(){}}),define("components/fb-like-button-2/main",["require","jquery","lib/BaseComponent","./models/FbLikeButtonModel","./views/FbLikeButtonView","componentStyle!fb-like-button-2"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./models/FbLikeButtonModel"),a=e("./views/FbLikeButtonView"),s=e("componentStyle!fb-like-button-2"),o=function(e,n,s){this.config=e,this.id=n,this.dispatcher=s,this.$el=t("#"+n),this.model=new i(this.config.settings),this.view=new a({dispatcher:s,componentType:e.type,componentId:n,model:this.model})};return o.prototype.render=function(){this.$el.html(this.view.render().el)},n.extend({styles:s,exports:{FbLikeButton:o,FbLikeButtonView:a,FbLikeButtonModel:i},create:function(){var e=new o(this.get("config"),this.get("id"),this.get("dispatcher"));return this.set("likeButton",e),{likeButton:e}},render:function(){this.hasElement()&&this.get("likeButton").render()}}).exports()}),function(e){function t(e,i){if(e=e?e:"",i=i||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,i);var a=n(e);this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=$(100*this._a)/100,this._format=i.format||a.format,this._gradientType=i.gradientType,this._r<1&&(this._r=$(this._r)),this._g<1&&(this._g=$(this._g)),this._b<1&&(this._b=$(this._b)),this._ok=a.ok,this._tc_id=z++}function n(e){var t={r:0,g:0,b:0},n=1,a=null,o=null,l=null,u=!1,d=!1;return"string"==typeof e&&(e=U(e)),"object"==typeof e&&(j(e.r)&&j(e.g)&&j(e.b)?(t=i(e.r,e.g,e.b),u=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):j(e.h)&&j(e.s)&&j(e.v)?(a=A(e.s),o=A(e.v),t=r(e.h,a,o),u=!0,d="hsv"):j(e.h)&&j(e.s)&&j(e.l)&&(a=A(e.s),l=A(e.l),t=s(e.h,a,l),u=!0,d="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=S(n),{ok:u,format:e.format||d,r:N(255,B(t.r,0)),g:N(255,B(t.g,0)),b:N(255,B(t.b,0)),a:n}}function i(e,t,n){return{r:255*C(e,255),g:255*C(t,255),b:255*C(n,255)}}function a(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var i,a,s=B(e,t,n),o=N(e,t,n),r=(s+o)/2;if(s==o)i=a=0;else{var l=s-o;switch(a=r>.5?l/(2-s-o):l/(s+o),s){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,l:r}}function s(e,t,n){function i(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}var a,s,o;if(e=C(e,360),t=C(t,100),n=C(n,100),0===t)a=s=o=n;else{var r=.5>n?n*(1+t):n+t-n*t,l=2*n-r;a=i(l,r,e+1/3),s=i(l,r,e),o=i(l,r,e-1/3)}return{r:255*a,g:255*s,b:255*o}}function o(e,t,n){e=C(e,255),t=C(t,255),n=C(n,255);var i,a,s=B(e,t,n),o=N(e,t,n),r=s,l=s-o;if(a=0===s?0:l/s,s==o)i=0;else{switch(s){case e:i=(t-n)/l+(n>t?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:a,v:r}}function r(t,n,i){t=6*C(t,360),n=C(n,100),i=C(i,100);var a=e.floor(t),s=t-a,o=i*(1-n),r=i*(1-s*n),l=i*(1-(1-s)*n),u=a%6,d=[i,r,o,o,l,i][u],c=[l,i,i,r,o,o][u],p=[o,o,l,i,i,r][u];return{r:255*d,g:255*c,b:255*p}}function l(e,t,n,i){var a=[I($(e).toString(16)),I($(t).toString(16)),I($(n).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function u(e,t,n,i,a){var s=[I($(e).toString(16)),I($(t).toString(16)),I($(n).toString(16)),I(D(i))];return a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function d(e,t,n,i){var a=[I(D(i)),I($(e).toString(16)),I($(t).toString(16)),I($(n).toString(16))];return a.join("")}function c(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s-=n/100,i.s=T(i.s),t(i)}function p(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.s+=n/100,i.s=T(i.s),t(i)}function h(e){return t(e).desaturate(100)}function m(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l+=n/100,i.l=T(i.l),t(i)}function f(e,n){n=0===n?0:n||10;var i=t(e).toRgb();return i.r=B(0,N(255,i.r-$(255*-(n/100)))),i.g=B(0,N(255,i.g-$(255*-(n/100)))),i.b=B(0,N(255,i.b-$(255*-(n/100)))),t(i)}function _(e,n){n=0===n?0:n||10;var i=t(e).toHsl();return i.l-=n/100,i.l=T(i.l),t(i)}function g(e,n){var i=t(e).toHsl(),a=(i.h+n)%360;return i.h=0>a?360+a:a,t(i)}function v(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)}function b(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+120)%360,s:n.s,l:n.l}),t({h:(i+240)%360,s:n.s,l:n.l})]}function y(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+90)%360,s:n.s,l:n.l}),t({h:(i+180)%360,s:n.s,l:n.l}),t({h:(i+270)%360,s:n.s,l:n.l})]}function w(e){var n=t(e).toHsl(),i=n.h;return[t(e),t({h:(i+72)%360,s:n.s,l:n.l}),t({h:(i+216)%360,s:n.s,l:n.l})]}function k(e,n,i){n=n||6,i=i||30;var a=t(e).toHsl(),s=360/i,o=[t(e)];for(a.h=(a.h-(s*n>>1)+720)%360;--n;)a.h=(a.h+s)%360,o.push(t(a));return o}function q(e,n){n=n||6;for(var i=t(e).toHsv(),a=i.h,s=i.s,o=i.v,r=[],l=1/n;n--;)r.push(t({h:a,s:s,v:o})),o=(o+l)%1;return r}function x(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function S(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function C(t,n){E(t)&&(t="100%");var i=P(t);return t=N(n,B(0,parseFloat(t))),i&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function T(e){return N(1,B(0,e))}function M(e){return parseInt(e,16)}function E(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function P(e){return"string"==typeof e&&-1!=e.indexOf("%")}function I(e){return 1==e.length?"0"+e:""+e}function A(e){return 1>=e&&(e=100*e+"%"),e}function D(t){return e.round(255*parseFloat(t)).toString(16)}function F(e){return M(e)/255}function j(e){return!!W.CSS_UNIT.exec(e)}function U(e){e=e.replace(R,"").replace(O,"").toLowerCase();var t=!1;if(V[e])e=V[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=W.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=W.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=W.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=W.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=W.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=W.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=W.hex8.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),a:F(n[4]),format:t?"name":"hex8"}:(n=W.hex6.exec(e))?{r:M(n[1]),g:M(n[2]),b:M(n[3]),format:t?"name":"hex"}:(n=W.hex4.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),a:F(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=W.hex3.exec(e))?{r:M(n[1]+""+n[1]),g:M(n[2]+""+n[2]),b:M(n[3]+""+n[3]),format:t?"name":"hex"}:!1
}function L(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var R=/^\s+/,O=/\s+$/,z=0,$=e.round,N=e.min,B=e.max,H=e.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,i,a,s,o,r=this.toRgb();return t=r.r/255,n=r.g/255,i=r.b/255,a=.03928>=t?t/12.92:e.pow((t+.055)/1.055,2.4),s=.03928>=n?n/12.92:e.pow((n+.055)/1.055,2.4),o=.03928>=i?i/12.92:e.pow((i+.055)/1.055,2.4),.2126*a+.7152*s+.0722*o},setAlpha:function(e){return this._a=S(e),this._roundA=$(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=$(360*e.h),n=$(100*e.s),i=$(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=a(this._r,this._g,this._b),t=$(360*e.h),n=$(100*e.s),i=$(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return l(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return u(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:$(this._r),g:$(this._g),b:$(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+$(this._r)+", "+$(this._g)+", "+$(this._b)+")":"rgba("+$(this._r)+", "+$(this._g)+", "+$(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:$(100*C(this._r,255))+"%",g:$(100*C(this._g,255))+"%",b:$(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+$(100*C(this._r,255))+"%, "+$(100*C(this._g,255))+"%, "+$(100*C(this._b,255))+"%)":"rgba("+$(100*C(this._r,255))+"%, "+$(100*C(this._g,255))+"%, "+$(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:Y[l(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+d(this._r,this._g,this._b,this._a),i=n,a=this._gradientType?"GradientType = 1, ":"";if(e){var s=t(e);i="#"+d(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+n+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,a=!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return a?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(q,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(y,arguments)}},t.fromRatio=function(e,n){if("object"==typeof e){var i={};for(var a in e)e.hasOwnProperty(a)&&(i[a]="a"===a?e[a]:A(e[a]));e=i}return t(e,n)},t.equals=function(e,n){return e&&n?t(e).toRgbString()==t(n).toRgbString():!1},t.random=function(){return t.fromRatio({r:H(),g:H(),b:H()})},t.mix=function(e,n,i){i=0===i?0:i||50;var a=t(e).toRgb(),s=t(n).toRgb(),o=i/100,r={r:(s.r-a.r)*o+a.r,g:(s.g-a.g)*o+a.g,b:(s.b-a.b)*o+a.b,a:(s.a-a.a)*o+a.a};return t(r)},t.readability=function(n,i){var a=t(n),s=t(i);return(e.max(a.getLuminance(),s.getLuminance())+.05)/(e.min(a.getLuminance(),s.getLuminance())+.05)},t.isReadable=function(e,n,i){var a,s,o=t.readability(e,n);switch(s=!1,a=L(i),a.level+a.size){case"AAsmall":case"AAAlarge":s=o>=4.5;break;case"AAlarge":s=o>=3;break;case"AAAsmall":s=o>=7}return s},t.mostReadable=function(e,n,i){var a,s,o,r,l=null,u=0;i=i||{},s=i.includeFallbackColors,o=i.level,r=i.size;for(var d=0;d<n.length;d++)a=t.readability(e,n[d]),a>u&&(u=a,l=t(n[d]));return t.isReadable(e,l,{level:o,size:r})||!s?l:(i.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],i))};var V=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Y=t.hexNames=x(V),W=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",a="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("tinycolor/tinycolor",[],function(){return t}):window.tinycolor=t}(Math),define("tinycolor",["tinycolor/tinycolor"],function(e){return e}),define("components/logo-2/models/LogoModel",["require","lodash","tinycolor","backbone-amd"],function(e){var t=e("lodash"),n=e("tinycolor"),i=e("backbone-amd"),a=i.Model.extend({themeColors:{dark:"#808285",light:"white"},defaults:{theme:""},initialize:function(e){this.id=e.id,this.dispatcher=e.dispatcher,this.config=e.config;var i=t.extend({},this.defaults,t.pick(e.config,t.keys(this.defaults)));if(!i.theme){var a="dark",s={};window.MR&&window.MR.templateConfig&&window.MR.templateConfig.styles&&(s=window.MR.templateConfig.styles);var o=s.backgroundColor||s.canvasColor;if(o){var r=n.mostReadable(o,t.values(this.themeColors)).toString();a=t.invert(this.themeColors)[r]}i.theme=a}this.set(i)}});return a}),define("tmpl!logo",["lodash","templateCompiler"],function(_,templateCompiler){return templateCompiler.compile({fn:function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+='<span class="ada-text">Click to learn more about Spredfast Products</span>\n<i class="icon-spredfast-logo"></i><i class="icon-spredfast-logo-shape"></i><i class="logo-copy icon-spredfast-logo-copy">\n';return __p},metadata:{},name:"logo"})}),define("components/logo-2/views/LogoView",["require","lodash","lib/views/BaseView","tmpl!logo"],function(e){var t=e("lodash"),n=e("lib/views/BaseView"),i=e("tmpl!logo"),a=n.extend({template:i,themeClassPrefix:"theme-",attributes:{href:"http://www.spredfast.com",target:"_blank",title:"A Spredfast product\nhttp://www.spredfast.com",alt:"A Spredfast product"},events:{click:"trackAnalyticsClick"},initialize:function(){this.listenTo(this.model,"change",t.bind(this.render,this))},trackAnalyticsClick:function(){return this.analytics().trackEvent({category:"viz:outbound",action:"logo",label:this.attributes.href}),this},render:function(){n.prototype.render.apply(this,arguments);var e=this.$el.attr("class").replace(/^\s+|\s+$/g,"").split(/\s+/),i=t.filter(e,function(e){return new RegExp("^"+this.themeClassPrefix).test(e)},this).join(" ");this.$el.removeClass(i),this.$el.addClass(this.themeClassPrefix+this.model.get("theme")),this.$el.attr(this.attributes)}});return a}),define("componentStyle!logo-2",{render:function(){}}),define("components/logo-2/main",["require","jquery","lib/BaseComponent","./models/LogoModel","./views/LogoView","componentStyle!logo-2"],function(e){var t=e("jquery"),n=e("lib/BaseComponent"),i=e("./models/LogoModel"),a=e("./views/LogoView"),s=e("componentStyle!logo-2");return n.extend({styles:s,create:function(){var e=this.get("id"),n=this.get("config"),s=this.get("dispatcher"),o=new i({dispatcher:s,config:n.settings}),r=new a({analytics:this.get("analytics"),el:t("#"+e),componentId:e,componentType:n.type,model:o});return this.set("model",o),this.set("view",r),{model:o,view:r}},render:function(){this.hasElement()&&this.get("view").render()}}).exports()}),define("lib/ModalUtils",["require","underscore"],function(e){var t=e("underscore"),n={};return{open:function(e){var i=t.defaults(e||{},{data:{},url:MR.spacePath()+"/modal.html",fallback:t.identity});n=i.data;var a;MR.ENV.hash.embedModals||(a=MR.parent.trigger("modal:open",{url:i.url})),!a&&t.isFunction(i.fallback)&&i.fallback.call(window,i.data)},close:function(){MR.parent.trigger("modal:close")},getData:function(){if(MR.ENV.hash.frame){var e=MR.ENV.hash.frame.split(","),i=t.reduce(e,function(e,t){return e.frames[t]},window.parent);return i.MR.modal.getData()}return n}}}),define("lib/refreshPoller",["require","jquery","has"],function(e){var t=e("jquery");return e("has"),{start:function(e){var n,i;MR.spaceConfig.auto_refresh&&MR.isIndex()&&!function a(){t.get().done(function(t,s,o){var r=o.getResponseHeader("ETag"),l=new Date(o.getResponseHeader("Last-Modified")||"").getTime(),u=n&&r&&n!==r,d=!e&&i&&l&&l>i;return u||d?window.location.reload(!0):(n=r,i=l,r&&setTimeout(a,3e4),void 0)})}()}}}),define("setup",["require","lib/ModalUtils","jquery","underscore","lib/refreshPoller","has","lib/UrlUtils"],function(e){function t(e){return(e+"/").replace(/\/+$/,"/").toLowerCase().replace(/^https?:\/\//,"")}function n(){return[window.location.protocol,"//",window.location.hostname,window.location.port?":"+window.location.port:"","/",window.location.pathname.replace(/^\//,"")].join("")}var i=e("lib/ModalUtils"),a=e("jquery"),s=e("underscore"),o=e("lib/refreshPoller");e("has");var r=e("lib/UrlUtils"),l=navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/);return MR.spacePath=s.memoize(function(){var e=MR.spaceConfig;if(e.path)return e.path;var i=t(n()),a=e.host||(e.client?e.client+".massrel.io":window.location.host),o=e.name||"",r=a+"/"+o;return s.chain(e.cnames||[]).compact().map(t).uniq().sortBy("length").forEach(function(e){0===i.indexOf(e)&&(r=e)}),"//"+r.replace(/\/+$/,"")}),MR.isIndex=function(){return n().replace(/\/(index\.html)?$/,"")===window.location.protocol+MR.spacePath()},MR.isSpaceEmbedded=function(){return!!MR.ENV.hash.parent&&window.parent!==window.self},MR.isCurrentProductPage=function(e){var t=MR.getProductUrls(),n=e.replace(/.*?:\/\//g,"");return s.some(t,function(e){var t=e.replace(/.*?:\/\//g,"");return t.indexOf(n)>=0||n.indexOf(t)>=0})},MR.getProductUrls=function(){var e=MR.ENV.hash["product-url"];return s.isArray(e)||(e=[e]),s.compact(e)},{config:function(){var e=a.Deferred(),t=a.Deferred(),n=!0;return e.done(function(){(MR.isPage||"smart"===MR.ENV.hash.sizing)&&(MR.spaceConfig.smart_size=!0,MR.spaceConfig.auto_size=!1),"auto"===MR.ENV.hash.sizing&&(MR.spaceConfig.smart_size=!1,MR.spaceConfig.auto_size=!0),s.isFunction(window.MR_init)&&window.MR_init.call({async:function(){return n=!1,t.resolve}}),n&&t.resolve()}),MR.isIndex()?a.get().always(function(t,n,i){try{s.extend(MR.spaceConfig,r.getParams(i.getResponseHeader("x-amz-meta-space-config"),!0))}catch(a){}e.resolve()}):e.resolve(),t.promise()},pmcMethods:function(){return{spaceEvent:function(e){e&&e.eventName&&MR.ENV.scope("template").trigger("space:"+e.eventName,e.data)}}},init:function(e){function t(e){var t=parseInt(r.css("margin-top"),10)||0,n=r.offset().top,i=0;n>t&&(i=n-t);var a=e&&r[0].scrollHeight?r[0].scrollHeight:r.outerHeight(!0);return Math.ceil(a+i)}var n,r=a("body"),u=MR.spaceConfig,d=u.auto_size===!1&&!u.smart_size;MR.resize=function(i){if(!d&&MR.isSpaceEmbedded()){var o=s.clone(i||{});o.scrolling===!1?r.css("overflow","hidden"):o.scrolling===!0&&r.css("overflow","auto"),n&&(clearTimeout(n),n=null),s.isUndefined(o.height)&&(o.height=(window.MR_height||a.noop)()||t());var u=!!MR.templateConfig.settings.has_natural_height;u&&(o.naturalHeight=t(!0)),e.run("resize",o),!l&&o.interval&&(n=setTimeout(function(){MR.resize(i)},o.interval))}},d&&(u.height||u.width)&&e.run("resize",s.pick(u,"height","width")),u.smart_size&&MR.resize({interval:300,scrolling:!1}),MR.parent={ready:function(){return!!MR.ENV.hash.parent&&!!MR.ENV.hash["space-id"]&&e.ready()},trigger:function(t,n){return t?(e.run(t,n),MR.parent.ready()):!1},on:function(e,t,n){e&&MR.ENV.instance.on("#template:space:"+e,t,n)},off:function(e,t,n){e&&MR.ENV.instance.off("#template:space:"+e,t,n)}},o.start(),MR.modal=i}}}),define("app",function(){}),window.MR.require=require,window.MR.define=define,window.MR.requirejs=requirejs}(MR.define,MR.require,MR.requirejs);</script>


<script>MR.require(["loader","lib/analytics/main","staticPath"],function(e,o){MR.templateConfig={data:{},settings:{pgbVariation:!1,behavior:{stream_name:"1v5r0s3ev3/moajobs",filter_by_product_url:!1,cols:5,mobileCols:2,loop:!0},mobileBreakpoint:299,"@backgroundColor":"#ededed","@backgroundImage":"","@backgroundSize":"center",media_type:"photos","@mediaBorderSize":1,"@arrowColor":"#000000","@arrowHoverColor":"#000000",sponsorBar:{showSponsorBar:!1},footer:{showLogo:!1},header:{header:!1,headerText:"#MOAjobs","@headerFontSize":28,"@headerFontFamily":"'Helvetica Neue', Helvetica, Arial, sans-serif","@headerFontColor":"#000","@headerBackgroundColor":"#fdfdfd"},tiles:{"@textTilesFontSize":16,"@textTilesFontColor":"black","@textTilesFont":"'Helvetica Neue',Helvetica,Arial,sans-serif","@textTilesPrimaryLinkColor":"#008cba","@textTilesPrimaryLinkUnderline":"none","@textTilesPrimaryLinkHoverColor":"red","@textTilesPrimaryLinkHoverUnderline":"underline","@textTilesPrimaryLinkVisitedColor":"blue","@textTilesSecondaryLinkColor":"#666","@textTilesSecondaryLinkUnderline":"none","@textTilesSecondaryLinkHoverColor":"#666","@textTilesSecondaryLinkHoverUnderline":"underline","@textTilesSecondaryLinkVisitedColor":"#666","@textTilesBackgroundColor":"white"},attribution:{"@attributionFontFamily":'"Helvetica Neue", Helvetica, Arial, sans-serif',"@attributionFontSize":0},modal:{modalType:"picture-frame","@detailViewBackgroundColor":"#FFF","@overlayColor":"#000","@socialContentFontSize":16,"@socialContentFontColor":"#000","@socialContentFontFamily":'"Helvetica Neue", Helvetica, Arial, sans-serif',"@linkColor":"#55acee","@linkUnderline":"none","@linkHoverColor":"#55acee","@linkHoverUnderline":"underline","@linkVisitedColor":"#55acee","@secondaryLinkColor":"#55acee","@secondaryLinkUnderline":"none","@secondaryLinkHoverColor":"#55acee","@secondaryLinkHoverUnderline":"underline","@secondaryLinkVisitedColor":"#55acee"},actionBar:{"@actionBarBackgroundColor":"#FFF",twitterFollow:!1,facebookLike:!1,twitterPhotoUpload:!0,facebookPhotoUpload:!0},emptyStreamConfig:{enabled:!1,copy:"no images added yet","@copyColor":"#000","@copyFont":"Helvetica Neue","@copyWeight":"300","@copyFontSize":14,"@backgroundColor":"#fff","@linkToPhotoUpload":!0,linkCopy:"ADD IMAGE","@linkWeight":"700","@linkFontSize":14,image:"http://vignette3.wikia.nocookie.net/mrmen/images/d/d2/Mrtallimage.png/revision/latest?cb=20130222100629"},"@footerBackgroundColor":"#fdfdfd","@footerBackgroundImage":"","@footerBackgroundSize":"center","@spredfastLogoColor":"black",terms_of_service_id:"",visualization_encoded_id:"2RWP"},styles:{backgroundColor:"#ededed",backgroundImage:"",backgroundSize:"center",mediaBorderSize:1,arrowColor:"#000000",arrowHoverColor:"#000000",headerFontSize:28,header_headerFontSize:28,headerFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",header_headerFontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",headerFontColor:"#000",header_headerFontColor:"#000",headerBackgroundColor:"#fdfdfd",header_headerBackgroundColor:"#fdfdfd",textTilesFontSize:16,tiles_textTilesFontSize:16,textTilesFontColor:"black",tiles_textTilesFontColor:"black",textTilesFont:"'Helvetica Neue',Helvetica,Arial,sans-serif",tiles_textTilesFont:"'Helvetica Neue',Helvetica,Arial,sans-serif",textTilesPrimaryLinkColor:"#008cba",tiles_textTilesPrimaryLinkColor:"#008cba",textTilesPrimaryLinkUnderline:"none",tiles_textTilesPrimaryLinkUnderline:"none",textTilesPrimaryLinkHoverColor:"red",tiles_textTilesPrimaryLinkHoverColor:"red",textTilesPrimaryLinkHoverUnderline:"underline",tiles_textTilesPrimaryLinkHoverUnderline:"underline",textTilesPrimaryLinkVisitedColor:"blue",tiles_textTilesPrimaryLinkVisitedColor:"blue",textTilesSecondaryLinkColor:"#666",tiles_textTilesSecondaryLinkColor:"#666",textTilesSecondaryLinkUnderline:"none",tiles_textTilesSecondaryLinkUnderline:"none",textTilesSecondaryLinkHoverColor:"#666",tiles_textTilesSecondaryLinkHoverColor:"#666",textTilesSecondaryLinkHoverUnderline:"underline",tiles_textTilesSecondaryLinkHoverUnderline:"underline",textTilesSecondaryLinkVisitedColor:"#666",tiles_textTilesSecondaryLinkVisitedColor:"#666",textTilesBackgroundColor:"white",tiles_textTilesBackgroundColor:"white",attributionFontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',attribution_attributionFontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',attributionFontSize:0,attribution_attributionFontSize:0,detailViewBackgroundColor:"#FFF",modal_detailViewBackgroundColor:"#FFF",overlayColor:"#000",modal_overlayColor:"#000",socialContentFontSize:16,modal_socialContentFontSize:16,socialContentFontColor:"#000",modal_socialContentFontColor:"#000",socialContentFontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',modal_socialContentFontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',linkColor:"#55acee",modal_linkColor:"#55acee",linkUnderline:"none",modal_linkUnderline:"none",linkHoverColor:"#55acee",modal_linkHoverColor:"#55acee",linkHoverUnderline:"underline",modal_linkHoverUnderline:"underline",linkVisitedColor:"#55acee",modal_linkVisitedColor:"#55acee",secondaryLinkColor:"#55acee",modal_secondaryLinkColor:"#55acee",secondaryLinkUnderline:"none",modal_secondaryLinkUnderline:"none",secondaryLinkHoverColor:"#55acee",modal_secondaryLinkHoverColor:"#55acee",secondaryLinkHoverUnderline:"underline",modal_secondaryLinkHoverUnderline:"underline",secondaryLinkVisitedColor:"#55acee",modal_secondaryLinkVisitedColor:"#55acee",actionBarBackgroundColor:"#FFF",actionBar_actionBarBackgroundColor:"#FFF",copyColor:"#000",emptyStreamConfig_copyColor:"#000",copyFont:"Helvetica Neue",emptyStreamConfig_copyFont:"Helvetica Neue",copyWeight:"300",emptyStreamConfig_copyWeight:"300",copyFontSize:14,emptyStreamConfig_copyFontSize:14,emptyStreamConfig_backgroundColor:"#fff",linkToPhotoUpload:!0,emptyStreamConfig_linkToPhotoUpload:!0,linkWeight:"700",emptyStreamConfig_linkWeight:"700",linkFontSize:14,emptyStreamConfig_linkFontSize:14,footerBackgroundColor:"#fdfdfd",footerBackgroundImage:"",footerBackgroundSize:"center",spredfastLogoColor:"black"},components:{status:{settings:{additional_classes:"",status_style:""},styles:{},type:"status-2"},statusMedia:{settings:{additional_classes:"",status_style:"status-styles-media-tile"},styles:{},type:"status-2"},mediaModalStatus:{settings:{additional_classes:"",status_style:"status-styles-modal"},styles:{},type:"status-2"},"status-styles-media-tile":{settings:{"@attributionColor":"white","@attributionFontSize":16,"@attributionFont":"Helvetica Neue","@iconBackgroundColor":"transparent"},styles:{attributionColor:"white",attributionFontSize:16,attributionFont:"Helvetica Neue",iconBackgroundColor:"transparent"},type:"status-styles-media-tile-1"},"status-styles-modal":{settings:{"@backgroundColor":"white","@font":"Helvetica Neue","@fontColor":"#333","@fontSize":14,"@secondaryFontColor":"#808080","@primaryLinkColor":"#008cba","@primaryLinkHoverColor":"#ff0000","@primaryLinkUnderline":"underline","@primaryLinkHoverUnderline":"none","@primaryLinkVisitedColor":"blue","@secondaryLinkColor":"#666","@secondaryLinkHoverColor":"#666","@secondaryLinkUnderline":"none","@secondaryLinkHoverUnderline":"underline","@secondaryLinkVisitedColor":"#666","@mediaAttributionColor":"white","@mediaAttributionFontSize":16,"@mediaAttributionFont":"Helvetica Neue","@avatarSize":48,"@statusPaddingSize":12},styles:{backgroundColor:"white",font:"Helvetica Neue",fontColor:"#333",fontSize:14,secondaryFontColor:"#808080",primaryLinkColor:"#008cba",primaryLinkHoverColor:"#ff0000",primaryLinkUnderline:"underline",primaryLinkHoverUnderline:"none",primaryLinkVisitedColor:"blue",secondaryLinkColor:"#666",secondaryLinkHoverColor:"#666",secondaryLinkUnderline:"none",secondaryLinkHoverUnderline:"underline",secondaryLinkVisitedColor:"#666",mediaAttributionColor:"white",mediaAttributionFontSize:16,mediaAttributionFont:"Helvetica Neue",avatarSize:48,statusPaddingSize:12},type:"status-styles-modal-1"},modal:{settings:{"@maxWidth":"550px"},styles:{maxWidth:"550px"},type:"modal-2"},"retail-modal":{settings:{showRetail:!0,showStatusFirst:!1,retailItemsPerPage:"2",isModal:!0,noContent:"No content available.",showCurrentProductPageLinks:!0,showPageLinkButton:!0,showPageLinkTitle:!0,showPageLinkImage:!0,"@backgroundColor":"#fcfcfc","@borderColor":"#ffffff","@statusNetworkStyle":"color","@statusAvatarBorderColor":"#d8d8d8","@statusAuthorPrimaryColor":"#333333","@statusAuthorPrimaryFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusAuthorPrimaryFontSize":14,"@statusAuthorSecondaryFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusAuthorSecondaryFontSize":12,"@statusAuthorSecondaryColor":"#333333","@statusAuthorSecondaryUnderline":"none","@statusAuthorSecondaryHoverColor":"red","@statusAuthorSecondaryHoverUnderline":"underline","@statusAuthorSecondaryVisitedColor":"#333333","@statusBodyFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusBodyFontSize":18,"@statusBodyColor":"#333333","@statusBodyLinkColor":"#62a9ff","@statusBodyLinkUnderline":"none","@statusBodyLinkHoverColor":"red","@statusBodyLinkHoverUnderline":"none","@statusBodyLinkVisitedColor":"#333333","@statusFooterFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusFooterFontSize":12,"@statusFooterColor":"#333333","@statusFooterLinkColor":"#333333","@statusFooterLinkUnderline":"underline","@statusFooterLinkHoverColor":"red","@statusFooterLinkHoverUnderline":"underline","@statusFooterLinkVisitedColor":"#333333","@statusFooterIconColor":"#999999","@statusFooterDividerColor":"#eaeaea","@statusIntentColor":"#333333","@statusIntentIconColor":"#999999","@statusIntentHoverColor":"#4a90e2","@statusIntentIconHoverColor":"#4a90e2","@statusNavFontSize":14,"@statusNavFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusNavColor":"#999999","@statusNavActiveColor":"#4a90e2",statusNavShopText:"SHOP THIS LOOK",statusNavImageText:"DETAILS","@statusMediaAttributionColor":"white","@statusMediaAttributionFontSize":14,"@statusMediaAttributionFont":"'Open Sans', Helvetica, Arial, sans-serif","@statusMediaNetworkStyle":"light","@retailItemTitleColor":"#333333","@retailItemTitleFontSize":14,"@retailItemTitleFont":"'Open Sans', Helvetica, Arial, sans-serif","@retailItemTitleLinkColor":"#333333","@retailItemTitleLinkUnderline":"underline","@retailItemTitleLinkHoverColor":"#666666","@retailItemTitleLinkHoverUnderline":"underline","@retailItemTitleLinkVisitedColor":"#333333",retailItemButtonText:"SHOP","@retailItemButtonBorderRadius":3,"@retailItemButtonLinkColor":"#FFFFFF","@retailItemButtonLinkHoverColor":"#FFFFFF","@retailItemButtonFontSize":14,"@retailItemButtonFont":"'Open Sans', Helvetica, Arial, sans-serif","@retailItemButtonBackgroundColor":"#5fa9ff","@retailItemButtonBorderColor":"#4a90e2","@retailItemButtonBackgroundHoverColor":"#4a90e2","@retailItemButtonBorderHoverColor":"#4a90e2","@retailItemImageBorder":!0,"@retailItemImageBorderColor":"#d8d8d8","@retailItemImageBorderHoverColor":"#d8d8d8","@retailItemDividerColor":"#dddddd","@retailItemArrowColor":"#4a90e2","@retailItemArrowHoverColor":"#4a90e2","@retailItemArrowBorderColor":"#dddddd","@retailItemArrowBorderHoverColor":"#4a90e2","@retailItemArrowBackgroundColor":"white","@retailItemArrowBackgroundHoverColor":"white","@retailItemPaginationBackground":"#ffffff","@retailItemPaginationBorder":"#dddddd","@retailItemPaginationBackgroundActiveColor":"#4a90e2","@retailItemPaginationBorderActiveColor":"#4a90e2"},styles:{backgroundColor:"#fcfcfc",borderColor:"#ffffff",statusNetworkStyle:"color",statusAvatarBorderColor:"#d8d8d8",statusAuthorPrimaryColor:"#333333",statusAuthorPrimaryFont:"'Open Sans', Helvetica, Arial, sans-serif",statusAuthorPrimaryFontSize:14,statusAuthorSecondaryFont:"'Open Sans', Helvetica, Arial, sans-serif",statusAuthorSecondaryFontSize:12,statusAuthorSecondaryColor:"#333333",statusAuthorSecondaryUnderline:"none",statusAuthorSecondaryHoverColor:"red",statusAuthorSecondaryHoverUnderline:"underline",statusAuthorSecondaryVisitedColor:"#333333",statusBodyFont:"'Open Sans', Helvetica, Arial, sans-serif",statusBodyFontSize:18,statusBodyColor:"#333333",statusBodyLinkColor:"#62a9ff",statusBodyLinkUnderline:"none",statusBodyLinkHoverColor:"red",statusBodyLinkHoverUnderline:"none",statusBodyLinkVisitedColor:"#333333",statusFooterFont:"'Open Sans', Helvetica, Arial, sans-serif",statusFooterFontSize:12,statusFooterColor:"#333333",statusFooterLinkColor:"#333333",statusFooterLinkUnderline:"underline",statusFooterLinkHoverColor:"red",statusFooterLinkHoverUnderline:"underline",statusFooterLinkVisitedColor:"#333333",statusFooterIconColor:"#999999",statusFooterDividerColor:"#eaeaea",statusIntentColor:"#333333",statusIntentIconColor:"#999999",statusIntentHoverColor:"#4a90e2",statusIntentIconHoverColor:"#4a90e2",statusNavFontSize:14,statusNavFont:"'Open Sans', Helvetica, Arial, sans-serif",statusNavColor:"#999999",statusNavActiveColor:"#4a90e2",statusMediaAttributionColor:"white",statusMediaAttributionFontSize:14,statusMediaAttributionFont:"'Open Sans', Helvetica, Arial, sans-serif",statusMediaNetworkStyle:"light",retailItemTitleColor:"#333333",retailItemTitleFontSize:14,retailItemTitleFont:"'Open Sans', Helvetica, Arial, sans-serif",retailItemTitleLinkColor:"#333333",retailItemTitleLinkUnderline:"underline",retailItemTitleLinkHoverColor:"#666666",retailItemTitleLinkHoverUnderline:"underline",retailItemTitleLinkVisitedColor:"#333333",retailItemButtonBorderRadius:3,retailItemButtonLinkColor:"#FFFFFF",retailItemButtonLinkHoverColor:"#FFFFFF",retailItemButtonFontSize:14,retailItemButtonFont:"'Open Sans', Helvetica, Arial, sans-serif",retailItemButtonBackgroundColor:"#5fa9ff",retailItemButtonBorderColor:"#4a90e2",retailItemButtonBackgroundHoverColor:"#4a90e2",retailItemButtonBorderHoverColor:"#4a90e2",retailItemImageBorder:!0,retailItemImageBorderColor:"#d8d8d8",retailItemImageBorderHoverColor:"#d8d8d8",retailItemDividerColor:"#dddddd",retailItemArrowColor:"#4a90e2",retailItemArrowHoverColor:"#4a90e2",retailItemArrowBorderColor:"#dddddd",retailItemArrowBorderHoverColor:"#4a90e2",retailItemArrowBackgroundColor:"white",retailItemArrowBackgroundHoverColor:"white",retailItemPaginationBackground:"#ffffff",retailItemPaginationBorder:"#dddddd",retailItemPaginationBackgroundActiveColor:"#4a90e2",retailItemPaginationBorderActiveColor:"#4a90e2"},type:"retail-carousel-2"},"sponsor-bar":{settings:{"@visible":!0,url:"http://www.spredfast.com",image_url:"","@backgroundColor":"#efefef","@position":"center",width:"auto",ada_text:""},styles:{visible:!0,backgroundColor:"#efefef",position:"center"},type:"sponsor-bar-2"},"photo-share-button":{settings:{enabled:!1,button_style:"black",button_border_radius:3,button_text:"ADD IMAGE",display_as_link:!1,photo_sources:{facebook:!1,instagram:!0,local:!1},upload_settings:{twitter:!0,facebook:!0,facebook_destination:"",hashtags:""},confirmation_page:{title:"Images Added!",copy:"Thanks for sharing your photos! We'll check them out and post them within 72 hours!"},"@modal_background_color":"#ffffff","@header_background_color":"#f7f7f7","@header_title_color":"#0f99f9","@header_title_font":'"Roboto Slab", serif',"@breadcrumb_font":'"Droid Sans", Helvetica, Arial, sans-serif',"@breadcrumb_active_color":"#666666","@breadcrumb_inactive_color":"#d8d8d8","@font":'"Open Sans", Helvetica, Arial, sans-serif',"@color":"#333333","@link_color":"#0499f9","@linkColor":"#55acee","@linkHoverColor":"#55acee","@linkUnderline":"none","@linkHoverUnderline":"none","@linkFontSize":16,"@linkFont":'"Droid Sans", Helvetica, Arial, sans-serif',"@linkFontWeight":300},styles:{modal_background_color:"#ffffff",header_background_color:"#f7f7f7",header_title_color:"#0f99f9",header_title_font:'"Roboto Slab", serif',breadcrumb_font:'"Droid Sans", Helvetica, Arial, sans-serif',breadcrumb_active_color:"#666666",breadcrumb_inactive_color:"#d8d8d8",font:'"Open Sans", Helvetica, Arial, sans-serif',color:"#333333",link_color:"#0499f9",linkColor:"#55acee",linkHoverColor:"#55acee",linkUnderline:"none",linkHoverUnderline:"none",linkFontSize:16,linkFont:'"Droid Sans", Helvetica, Arial, sans-serif',linkFontWeight:300},type:"photo-share-button-6"},"follow-button":{settings:{button_style:"native",button_border_radius:3,button_text:"+",original_referer:"",screen_name:"spredfast"},styles:{},type:"follow-button-2"},"fb-like-button":{settings:{href:"https://facebook.com/Spredfast",send:!1,layout:"button",width:50,height:20,share:!1,show_faces:!1,font:"",colorscheme:"light",action:"like",ref:"spredfast"},styles:{},type:"fb-like-button-2"},"mr-logo":{settings:{theme:"","@visible":!1},styles:{visible:!1},type:"logo-2"}}},MR.spaceConfig={template:{id:2425,root_id:2425,component_ids:[164,185,229,231,241,242,246,249,263,413]},visualization:91030,visualization_encoded_id:"2RWP",page:null,search_api_access_token:"a157229a9c5ba5de84e220671427fb4c46ef2d645b5f9d80762ab557e2abe1a85f5bdbe50e9c76fe1770409a2936f7f4525794a45bff2454583c685796278028",name:"employment-page",client:"mall-of-america",account_id:"",id:36235,auto_size:!1,smart_size:!0,height:400,width:600,analytics_ga_id:"",facebook_custom_audience_id:"",short_url:"http://mssv.ly/2m3LWF3",cnames:[],host:null,auto_refresh:!1},MR.analytics=new o([MR.spaceConfig,{scope:"template"}]),e.init(),MR.templateConfig.components&&e.render(MR.templateConfig.components)});</script>


  <script src="./index.js"></script>
  <script>!function(e){window.MR_ready=function(o){var t=this.async();e.require(["js/index"],function(e){e.ready(o),t()})},window.MR_render=function(o){e.require(["js/index"],function(e){e.render(o)})}}(window.MRT||window);</script>

<iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./saved_resource(1).html"></iframe></body></html>